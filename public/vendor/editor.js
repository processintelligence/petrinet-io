!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Editor=t():e.Editor=t()}(self,()=>(()=>{"use strict";var e={56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},72:e=>{var t=[];function n(e){for(var n=-1,o=0;o<t.length;o++)if(t[o].identifier===e){n=o;break}return n}function o(e,o){for(var i={},s=[],a=0;a<e.length;a++){var c=e[a],l=o.base?c[0]+o.base:c[0],d=i[l]||0,p="".concat(l," ").concat(d);i[l]=d+1;var u=n(p),h={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==u)t[u].references++,t[u].updater(h);else{var A=r(h,o);o.byIndex=a,t.splice(a,0,{identifier:p,updater:A,references:1})}s.push(p)}return s}function r(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var i=o(e=e||[],r=r||{});return function(e){e=e||[];for(var s=0;s<i.length;s++){var a=n(i[s]);t[a].references--}for(var c=o(e,r),l=0;l<i.length;l++){var d=n(i[l]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}i=c}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n="",o=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),o&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),o&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n}).join("")},t.i=function(e,n,o,r,i){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(o)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(s[c]=!0)}for(var l=0;l<e.length;l++){var d=[].concat(e[l]);o&&s[d[0]]||(void 0!==i&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=i),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),r&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=r):d[4]="".concat(r)),t.push(d))}},t}},354:e=>{e.exports=function(e){var t=e[1],n=e[3];if(!n)return t;if("function"==typeof btoa){var o=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),i="/*# ".concat(r," */");return[t].concat([i]).join("\n")}return[t].join("\n")}},530:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(354),r=n.n(o),i=n(314),s=n.n(i)()(r());s.push([e.id,'/**\n * color definitions\n */\n.djs-parent {\n  --color-grey-225-10-15: hsl(225, 10%, 15%);\n  --color-grey-225-10-35: hsl(225, 10%, 35%);\n  --color-grey-225-10-55: hsl(225, 10%, 55%);\n  --color-grey-225-10-75: hsl(225, 10%, 75%);\n  --color-grey-225-10-80: hsl(225, 10%, 80%);\n  --color-grey-225-10-85: hsl(225, 10%, 85%);\n  --color-grey-225-10-90: hsl(225, 10%, 90%);\n  --color-grey-225-10-95: hsl(225, 10%, 95%);\n  --color-grey-225-10-97: hsl(225, 10%, 97%);\n\n  --color-blue-205-100-45: hsl(205, 100%, 45%);\n  --color-blue-205-100-45-opacity-30: hsla(205, 100%, 45%, 30%);\n  --color-blue-205-100-50: hsl(205, 100%, 50%);\n  --color-blue-205-100-50-opacity-15: hsla(205, 100%, 50%, 15%);\n  --color-blue-205-100-70: hsl(205, 100%, 75%);\n  --color-blue-205-100-95: hsl(205, 100%, 95%);\n\n  --color-green-150-86-44: hsl(150, 86%, 44%);\n\n  --color-red-360-100-40: hsl(360, 100%, 40%);\n  --color-red-360-100-45: hsl(360, 100%, 45%);\n  --color-red-360-100-92: hsl(360, 100%, 92%);\n  --color-red-360-100-97: hsl(360, 100%, 97%);\n\n  --color-white: hsl(0, 0%, 100%);\n  --color-black: hsl(0, 0%, 0%);\n  --color-black-opacity-10: hsla(0, 0%, 0%, 10%);\n  --color-black-opacity-30: hsla(0, 0%, 0%, 30%);\n\n  --canvas-fill-color: var(--color-white);\n\n  --bendpoint-fill-color: var(--color-blue-205-100-45);\n  --bendpoint-stroke-color: var(--canvas-fill-color);\n\n  --context-pad-entry-background-color: var(--color-white);\n  --context-pad-entry-hover-background-color: var(--color-grey-225-10-95);\n\n  --element-dragger-color: var(--color-blue-205-100-50);\n  --element-hover-outline-fill-color: var(--color-blue-205-100-45);\n  --element-selected-outline-stroke-color: var(--color-blue-205-100-50);\n  --element-selected-outline-secondary-stroke-color: var(--color-blue-205-100-70);\n\n  --lasso-fill-color: var(--color-blue-205-100-50-opacity-15);\n  --lasso-stroke-color: var(--element-selected-outline-stroke-color);\n\n  --palette-entry-color: var(--color-grey-225-10-15);\n  --palette-entry-hover-color: var(--color-blue-205-100-45);\n  --palette-entry-selected-color: var(--color-blue-205-100-50);\n  --palette-separator-color: var(--color-grey-225-10-75);\n  --palette-toggle-hover-background-color: var(--color-grey-225-10-55);\n  --palette-background-color: var(--color-grey-225-10-97);\n  --palette-border-color: var(--color-grey-225-10-75);\n\n  --popup-font-family: "IBM Plex Sans", sans-serif;\n  --popup-font-size: 14px;\n  --popup-header-entry-selected-color: var(--color-blue-205-100-50);\n  --popup-header-font-weight: bolder;\n  --popup-header-group-divider-color: var(--color-grey-225-10-75);\n  --popup-background-color: var(--color-white);\n  --popup-border-color: transparent;\n  --popup-shadow-color: var(--color-black-opacity-30);\n  --popup-description-color: var(--color-grey-225-10-55);\n  --popup-no-results-color: var(--color-grey-225-10-55);\n  --popup-entry-title-color: var(--color-grey-225-10-55);\n  --popup-entry-hover-color:  var(--color-grey-225-10-95);\n  --popup-search-border-color: var(--color-grey-225-10-75);\n  --popup-search-focus-border-color: var(--color-blue-205-100-50);\n  --popup-search-focus-background-color: var(--color-blue-205-100-95);\n\n  --resizer-fill-color: var(--color-blue-205-100-45);\n  --resizer-stroke-color: var(--canvas-fill-color);\n\n  --search-font-family: "IBM Plex Sans", sans-serif;\n  --search-font-size: 14px;\n  --search-container-background-color: var(--color-white);\n  --search-shadow-color: var(--color-black-opacity-30);\n  --search-input-border-color: var(--color-grey-225-10-75);\n  --search-input-focus-border-color: var(--color-blue-205-100-50);\n  --search-input-focus-background-color: var(--color-blue-205-100-95);\n  --search-result-hover-background-color: var(--color-grey-225-10-95);\n  --search-result-secondary-color: var(--color-grey-225-10-55);\n  --search-preselected-background-color: var(--color-blue-205-100-50-opacity-15);\n\n  --shape-attach-allowed-stroke-color: var(--color-blue-205-100-50);\n  --shape-connect-allowed-fill-color: var(--color-grey-225-10-97);\n  --shape-drop-allowed-fill-color: var(--color-grey-225-10-97);\n  --shape-drop-not-allowed-fill-color: var(--color-red-360-100-97);\n  --shape-resize-preview-stroke-color: var(--color-blue-205-100-50);\n\n  --snap-line-stroke-color: var(--color-blue-205-100-45-opacity-30);\n\n  --space-tool-crosshair-stroke-color: var(--color-black);\n\n  --tooltip-error-background-color: var(--color-red-360-100-97);\n  --tooltip-error-border-color: var(--color-red-360-100-45);\n  --tooltip-error-color: var(--color-red-360-100-45);\n}\n\n/**\n * SVG styles\n */\n\n.djs-container svg.drop-not-ok {\n  background: var(--shape-drop-not-allowed-fill-color) !important;\n}\n\n.djs-container svg.new-parent {\n  background: var(--shape-drop-allowed-fill-color) !important;\n}\n\n/**\n * outline styles\n */\n\n.djs-outline,\n.djs-selection-outline {\n  fill: none;\n  shape-rendering: geometricPrecision;\n  stroke-width: 2px;\n}\n\n.djs-outline {\n  visibility: hidden;\n}\n\n.djs-selection-outline {\n  stroke: var(--element-selected-outline-stroke-color);\n}\n\n.djs-element.selected .djs-outline {\n  visibility: visible;\n\n  stroke: var(--element-selected-outline-stroke-color);\n}\n\n.djs-connection.selected .djs-outline {\n  display: none;\n}\n\n.djs-multi-select .djs-element.selected .djs-outline {\n  stroke: var(--element-selected-outline-secondary-stroke-color);\n  display: block;\n}\n\n.djs-shape.connect-ok .djs-visual > :nth-child(1) {\n  fill: var(--shape-connect-allowed-fill-color) !important;\n}\n\n.djs-shape.connect-not-ok .djs-visual > :nth-child(1),\n.djs-shape.drop-not-ok .djs-visual > :nth-child(1) {\n  fill: var(--shape-drop-not-allowed-fill-color) !important;\n}\n\n.djs-shape.new-parent .djs-visual > :nth-child(1) {\n  fill: var(--shape-drop-allowed-fill-color) !important;\n}\n\n\n/* Override move cursor during drop and connect */\n.drop-not-ok,\n.connect-not-ok,\n.drop-not-ok *,\n.connect-not-ok * {\n  cursor: not-allowed !important;\n}\n\n.drop-ok,\n.connect-ok,\n.drop-ok *,\n.connect-ok * {\n  cursor: default !important;\n}\n\n.djs-element.attach-ok .djs-visual > :nth-child(1) {\n  stroke-width: 5px !important;\n  stroke: var(--shape-attach-allowed-stroke-color) !important;\n}\n\n.djs-frame.connect-not-ok .djs-visual > :nth-child(1),\n.djs-frame.drop-not-ok .djs-visual > :nth-child(1) {\n  stroke-width: 3px !important;\n  stroke: var(--shape-drop-not-allowed-fill-color) !important;\n  fill: none !important;\n}\n\n/**\n* Selection box style\n*\n*/\n.djs-lasso-overlay {\n  fill: var(--lasso-fill-color);\n  stroke: var(--lasso-stroke-color);\n  stroke-width: 2px;\n  shape-rendering: geometricPrecision;\n  pointer-events: none;\n}\n\n/**\n * Resize styles\n */\n.djs-resize-overlay {\n  fill: none;\n\n  stroke-dasharray: 5 1 3 1;\n  stroke: var(--shape-resize-preview-stroke-color);\n\n  pointer-events: none;\n}\n\n.djs-resizer-hit {\n  fill: none;\n  pointer-events: all;\n}\n\n.djs-resizer-visual {\n  fill: var(--resizer-fill-color);\n  stroke-width: 1px;\n  stroke: var(--resizer-stroke-color);\n  shape-rendering: geometricPrecision;\n}\n\n.djs-resizer:hover .djs-resizer-visual {\n  stroke: var(--resizer-stroke-color);\n  stroke-opacity: 1;\n}\n\n.djs-cursor-resize-ns,\n.djs-resizer-n,\n.djs-resizer-s {\n  cursor: ns-resize;\n}\n\n.djs-cursor-resize-ew,\n.djs-resizer-e,\n.djs-resizer-w {\n  cursor: ew-resize;\n}\n\n.djs-cursor-resize-nwse,\n.djs-resizer-nw,\n.djs-resizer-se {\n  cursor: nwse-resize;\n}\n\n.djs-cursor-resize-nesw,\n.djs-resizer-ne,\n.djs-resizer-sw {\n  cursor: nesw-resize;\n}\n\n.djs-shape.djs-resizing > .djs-outline {\n  visibility: hidden !important;\n}\n\n.djs-shape.djs-resizing > .djs-resizer {\n  visibility: hidden;\n}\n\n.djs-dragger > .djs-resizer {\n  visibility: hidden;\n}\n\n/**\n * drag styles\n */\n.djs-dragger * {\n  fill: none !important;\n  stroke: var(--element-dragger-color) !important;\n}\n\n.djs-dragger tspan,\n.djs-dragger text {\n  fill: var(--element-dragger-color) !important;\n  stroke: none !important;\n}\n\n.djs-dragger marker circle,\n.djs-dragger marker path,\n.djs-dragger marker polygon,\n.djs-dragger marker polyline,\n.djs-dragger marker rect {\n  fill: var(--element-dragger-color) !important;\n  stroke: none !important;\n}\n\n.djs-dragger marker text,\n.djs-dragger marker tspan {\n  fill: none !important;\n  stroke: var(--element-dragger-color) !important;\n}\n\n.djs-dragging,\n.djs-dragging > * {\n  opacity: 0.3 !important;\n  pointer-events: none !important;\n}\n\n/**\n * no pointer events for visual\n */\n.djs-visual,\n.djs-outline {\n  pointer-events: none;\n}\n\n.djs-element.attach-ok .djs-hit {\n  stroke-width: 60px !important;\n}\n\n/**\n * all pointer events for hit shape\n */\n.djs-element > .djs-hit-all,\n.djs-element > .djs-hit-no-move {\n  pointer-events: all;\n}\n\n.djs-element > .djs-hit-stroke,\n.djs-element > .djs-hit-click-stroke {\n  pointer-events: stroke;\n}\n\n/**\n * shape / connection basic styles\n */\n.djs-connection .djs-visual {\n  stroke-width: 2px;\n  fill: none;\n}\n\n.djs-cursor-grab {\n  cursor: -webkit-grab;\n  cursor: -moz-grab;\n  cursor: grab;\n}\n\n.djs-cursor-grabbing {\n  cursor: -webkit-grabbing;\n  cursor: -moz-grabbing;\n  cursor: grabbing;\n}\n\n.djs-cursor-crosshair {\n  cursor: crosshair;\n}\n\n.djs-cursor-move {\n  cursor: move;\n}\n\n.djs-cursor-resize-ns {\n  cursor: ns-resize;\n}\n\n.djs-cursor-resize-ew {\n  cursor: ew-resize;\n}\n\n\n/**\n * snapping\n */\n.djs-snap-line {\n  stroke: var(--snap-line-stroke-color);\n  stroke-linecap: round;\n  stroke-width: 2px;\n  pointer-events: none;\n}\n\n/**\n * snapping\n */\n.djs-crosshair {\n  stroke: var(--space-tool-crosshair-stroke-color);\n  stroke-linecap: round;\n  stroke-width: 1px;\n  pointer-events: none;\n  shape-rendering: geometricPrecision;\n  stroke-dasharray: 5, 5;\n}\n\n/**\n * palette\n */\n\n.djs-palette {\n  position: absolute;\n  left: 20px;\n  top: 20px;\n\n  box-sizing: border-box;\n  width: 48px;\n}\n\n.djs-palette .separator {\n  margin: 5px;\n  padding-top: 5px;\n\n  border: none;\n  border-bottom: solid 1px var(--palette-separator-color);\n\n  clear: both;\n}\n\n.djs-palette .entry:before {\n  vertical-align: initial;\n}\n\n.djs-palette .djs-palette-toggle {\n  cursor: pointer;\n}\n\n.djs-palette .entry,\n.djs-palette .djs-palette-toggle {\n  color: var(--palette-entry-color);\n  font-size: 30px;\n\n  text-align: center;\n}\n\n.djs-palette .entry {\n  float: left;\n}\n\n.djs-palette .entry img {\n  max-width: 100%;\n}\n\n.djs-palette .djs-palette-entries:after {\n  content: \'\';\n  display: table;\n  clear: both;\n}\n\n.djs-palette .djs-palette-toggle:hover {\n  background: var(--palette-toggle-hover-background-color);\n}\n\n.djs-palette .entry:hover {\n  color: var(--palette-entry-hover-color);\n}\n\n.djs-palette .highlighted-entry {\n  color: var(--palette-entry-selected-color) !important;\n}\n\n.djs-palette .entry,\n.djs-palette .djs-palette-toggle {\n  width: 46px;\n  height: 46px;\n  line-height: 46px;\n  cursor: default;\n}\n\n/**\n * Palette open / two-column layout is controlled via\n * classes on the palette. Events to hook into palette\n * changed life-cycle are available in addition.\n */\n.djs-palette.two-column.open {\n  width: 94px;\n}\n\n.djs-palette:not(.open) .djs-palette-entries {\n  display: none;\n}\n\n.djs-palette:not(.open) {\n  overflow: hidden;\n}\n\n.djs-palette.open .djs-palette-toggle {\n  display: none;\n}\n\n/**\n * context-pad\n */\n.djs-context-pad {\n  position: absolute;\n  display: none;\n  pointer-events: none;\n  line-height: 1;\n  width: 72px;\n  z-index: 100;\n}\n\n.djs-context-pad .entry {\n  width: 22px;\n  height: 22px;\n  text-align: center;\n  display: inline-block;\n  font-size: 22px;\n  margin: 0 2px 2px 0;\n\n  border-radius: 3px;\n\n  cursor: default;\n\n  background-color: var(--context-pad-entry-background-color);\n  box-shadow: 0 0 2px 1px var(--context-pad-entry-background-color);\n  pointer-events: all;\n  vertical-align: middle;\n}\n\n.djs-context-pad .entry:hover {\n  background: var(--context-pad-entry-hover-background-color);\n}\n\n.djs-context-pad.open {\n  display: block;\n}\n\n/**\n * popup styles\n */\n.djs-popup {\n  line-height: 1;\n  box-sizing: border-box;\n  width: min-content;\n  background: var(--popup-background-color);\n  overflow: hidden;\n  position: fixed;\n  z-index: 200;\n  box-shadow: 0px 2px 6px var(--popup-shadow-color);\n  border: solid 1px var(--popup-border-color);\n  min-width: 120px;\n  outline: none;\n  font-size: var(--popup-font-size);\n  font-family: var(--popup-font-family);\n}\n\n.djs-popup-search input {\n  width: 100%;\n  box-sizing: border-box;\n  font-size: var(--popup-font-size);\n  padding: 3px 6px 3px 28px;\n  border-radius: 2px;\n  border: solid 1px var(--popup-search-border-color);\n  line-height: 21px;\n}\n\n.djs-popup-search input:focus {\n  background-color: var(--popup-search-focus-background-color);\n  border: solid 1px var(--popup-search-focus-border-color);\n  outline: none;\n}\n\n.djs-popup-header {\n  display: flex;\n  align-items: stretch;\n  line-height: 20px;\n  margin: 10px 12px 10px 12px;\n}\n\n.djs-popup-header .entry {\n  border-radius: 2px;\n}\n\n.djs-popup button.entry {\n  padding: 0;\n  background: transparent;\n  border: 0;\n}\n\n.djs-popup-header .entry.active {\n  color: var(--popup-header-entry-selected-color);\n}\n\n.djs-popup-header .entry.disabled {\n  color: inherit;\n}\n\n.djs-popup-header-group {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n\n.djs-popup-header-group .entry {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n}\n\n.djs-popup-header-group + .djs-popup-header-group:before {\n  content: \'\';\n  width: 1px;\n  height: 20px;\n  background: var(--popup-header-group-divider-color);\n  margin: 0 5px;\n}\n\n.djs-popup-search {\n  position: relative;\n  width: auto;\n  margin: 10px 12px;\n}\n\n.djs-popup-title {\n  font-size: var(--popup-font-size);\n  font-weight: var(--popup-header-font-weight);\n  flex: 1;\n  margin: 0;\n}\n\n.djs-popup-search-icon {\n  position: absolute;\n  left: 8px;\n  top: 7px;\n}\n\n.djs-popup-results {\n  margin: 7px 3px 7px 12px;\n  list-style: none;\n  max-height: 280px;\n  overflow: auto;\n  padding-right: 9px;\n}\n\n.djs-popup-group {\n  margin: 0;\n  padding: 0;\n  width: 100%;\n}\n\n.djs-popup-body .entry,\n.djs-popup-body .entry-header {\n  padding: 5px 7px;\n  cursor: default;\n  border-radius: 4px;\n}\n\n.djs-popup-body .entry-header {\n  font-weight: var(--popup-header-font-weight);\n  color: var(--popup-entry-title-color);\n  padding-left: 0;\n}\n\n.djs-popup [class*="icon"] .djs-popup-label,\n.djs-popup-label:not(:first-child) {\n  margin-left: .5em;\n}\n\n.djs-popup [class*="icon"]:before,\n.djs-popup-entry-icon {\n  width: 1em;\n  height: 1em;\n  display: inline-block;\n  font-size: 1.4em;\n  vertical-align: middle;\n}\n\n.djs-popup-body .entry-header:not(:first-child) {\n  margin-top: 8px;\n  margin-bottom: 2px;\n}\n\n.djs-popup-body .entry {\n  display: flex;\n  flex-direction: row;\n  align-items: stretch;\n  height: min-content;\n}\n\n.djs-popup .entry.selected {\n  background-color: var(--popup-entry-hover-color);\n}\n\n.djs-popup-body .entry:not(:first-child) {\n  margin-top: 2px;\n}\n\n.djs-popup-entry-content {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  overflow: hidden;\n}\n\n.djs-popup-entry-description {\n  color: var(--popup-description-color);\n}\n\n.djs-popup-label,\n.djs-popup-entry-description {\n  line-height: 1.4em;\n}\n\n.djs-popup .entry,\n.djs-popup .entry-header {\n  margin: 1px;\n}\n\n.djs-popup-title,\n.djs-popup-label,\n.djs-popup-entry-description,\n.djs-popup .entry-header {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.djs-popup-entry-name {\n  display: flex;\n}\n\n.djs-popup-body {\n  flex-direction: column;\n  width: auto;\n}\n\n.djs-popup *::-webkit-scrollbar {\n  width: 6px;\n}\n\n.djs-popup *::-webkit-scrollbar-thumb {\n  border-radius: 3px;\n  background-color: rgba(0, 0, 0, 0.2);\n}\n\n.djs-popup *::-webkit-scrollbar-track {\n  box-shadow: none;\n  background: transparent;\n  margin: 0;\n  padding: 5px;\n}\n\n.djs-popup-no-results {\n  padding: 0 12px 12px 12px;\n  color: var(--popup-no-results-color);\n}\n\n.djs-popup-entry-docs {\n  flex: 0;\n  flex-direction: row;\n  align-items: center;\n  padding-left: 5px;\n  display: none;\n}\n\n.djs-popup-body .entry:hover .djs-popup-entry-docs {\n  display: flex;\n}\n\n.djs-popup-entry-docs svg {\n  vertical-align: middle;\n  margin: auto 2px auto 5px;\n}\n\n/**\n *  palette styles\n */\n.djs-palette {\n  background: var(--palette-background-color);\n  border: solid 1px var(--palette-border-color);\n  border-radius: 2px;\n}\n\n/**\n * bendpoints\n */\n.djs-segment-dragger,\n.djs-bendpoint {\n  display: none;\n}\n\n.djs-segment-dragger .djs-visual {\n  display: none;\n\n  fill: var(--bendpoint-fill-color);\n  stroke: var(--bendpoint-stroke-color);\n  stroke-width: 1px;\n  stroke-opacity: 1;\n}\n\n.djs-segment-dragger:hover .djs-visual {\n  display: block;\n}\n\n.djs-bendpoint .djs-visual {\n  fill: var(--bendpoint-fill-color);\n  stroke: var(--bendpoint-stroke-color);\n  stroke-width: 1px;\n}\n\n.djs-segment-dragger:hover,\n.djs-bendpoints.hover .djs-segment-dragger,\n.djs-bendpoints.selected .djs-segment-dragger,\n.djs-bendpoint:hover,\n.djs-bendpoints.hover .djs-bendpoint,\n.djs-bendpoints.selected .djs-bendpoint {\n  display: block;\n}\n\n.djs-drag-active .djs-bendpoints * {\n  display: none;\n}\n\n.djs-bendpoints:not(.hover) .floating {\n  display: none;\n}\n\n.djs-segment-dragger:hover .djs-visual,\n.djs-segment-dragger.djs-dragging .djs-visual,\n.djs-bendpoint:hover .djs-visual,\n.djs-bendpoint.floating .djs-visual {\n  fill: var(--bendpoint-fill-color);\n  stroke: var(--bendpoint-stroke-color);\n  stroke-opacity: 1;\n}\n\n.djs-bendpoint.floating .djs-hit {\n  pointer-events: none;\n}\n\n.djs-segment-dragger .djs-hit,\n.djs-bendpoint .djs-hit {\n  fill: none;\n  pointer-events: all;\n}\n\n.djs-segment-dragger.horizontal .djs-hit {\n  cursor: ns-resize;\n}\n\n.djs-segment-dragger.vertical .djs-hit {\n  cursor: ew-resize;\n}\n\n.djs-segment-dragger.djs-dragging .djs-hit {\n  pointer-events: none;\n}\n\n.djs-updating,\n.djs-updating > * {\n  pointer-events: none !important;\n}\n\n.djs-updating .djs-context-pad,\n.djs-updating .djs-outline,\n.djs-updating .djs-bendpoint,\n.djs-multi-select .djs-bendpoint,\n.djs-multi-select .djs-segment-dragger,\n.connect-ok .djs-bendpoint,\n.connect-not-ok .djs-bendpoint,\n.drop-ok .djs-bendpoint,\n.drop-not-ok .djs-bendpoint {\n  display: none !important;\n}\n\n.djs-segment-dragger.djs-dragging,\n.djs-bendpoint.djs-dragging {\n  display: block;\n  opacity: 1.0;\n}\n\n\n/**\n * tooltips\n */\n.djs-tooltip-error {\n  width: 160px;\n  padding: 6px;\n\n  background: var(--tooltip-error-background-color);\n  border: solid 1px var(--tooltip-error-border-color);\n  border-radius: 2px;\n  color: var(--tooltip-error-color);\n  font-size: 12px;\n  line-height: 16px;\n\n  opacity: 0.75;\n}\n\n.djs-tooltip-error:hover {\n  opacity: 1;\n}\n\n\n/**\n * search pad\n */\n.djs-search-open .djs-context-pad {\n  display: none;\n}\n\n.djs-search-open .djs-connection.selected .djs-outline {\n  display: block;\n}\n\n.djs-search-container {\n  position: absolute;\n  top: 20px;\n  left: 0;\n  right: 0;\n  margin-left: auto;\n  margin-right: auto;\n\n  width: 25%;\n  min-width: 300px;\n  max-width: 400px;\n  z-index: 10;\n\n  font-family: var(--search-font-family);\n  font-size: var(--search-font-size);\n  border-radius: 2px;\n  box-shadow: 0px 2px 6px var(--search-shadow-color);\n}\n\n.djs-search-container:not(.open) {\n  display: none;\n}\n\n.djs-search-input {\n  position: relative;\n}\n\n.djs-search-input svg {\n  position: absolute;\n  left: 8px;\n  top: 7px;\n}\n\n.djs-search-input input {\n  font-size: var(--search-font-size);\n  width: 100%;\n  padding: 3px 6px 3px 28px;\n  border: 1px solid var(--search-input-border-color);\n  border-radius: 2px;\n  box-sizing: border-box;\n  line-height: 21px;\n}\n\n.djs-search-input input:focus {\n  background-color: var(--search-input-focus-background-color);\n  border: solid 1px var(--search-input-focus-border-color);\n  outline: none;\n}\n\n.djs-search-results {\n  position: relative;\n  overflow-y: auto;\n  max-height: 200px;\n  background: var(--search-container-background-color);\n}\n\n.djs-search-result {\n  padding: 6px 8px;\n}\n\n.djs-search-result-primary {\n  margin: 0 0 3px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n}\n\n.djs-search-result-secondary {\n  font-family: monospace;\n  margin: 0;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  color: var(--search-result-secondary-color);\n}\n\n.djs-search-result:hover {\n  background: var(--search-result-hover-background-color);\n}\n\n.djs-search-result-selected {\n  background: var(--search-result-hover-background-color);\n}\n\n.djs-search-result-selected:hover {\n  background: var(--search-result-hover-background-color);\n}\n\n.djs-search-open .djs-element .djs-outline {\n  fill: var(--search-preselected-background-color) !important;\n}\n\n/**\n * hidden styles\n */\n.djs-element-hidden,\n.djs-element-hidden .djs-hit,\n.djs-element-hidden .djs-outline,\n.djs-label-hidden .djs-label {\n  display: none !important;\n}\n\n.djs-element .djs-hit-stroke,\n.djs-element .djs-hit-click-stroke,\n.djs-element .djs-hit-all {\n  cursor: move;\n}',"",{version:3,sources:["webpack://./node_modules/diagram-js/assets/diagram-js.css"],names:[],mappings:"AAAA;;EAEE;AACF;EACE,0CAA0C;EAC1C,0CAA0C;EAC1C,0CAA0C;EAC1C,0CAA0C;EAC1C,0CAA0C;EAC1C,0CAA0C;EAC1C,0CAA0C;EAC1C,0CAA0C;EAC1C,0CAA0C;;EAE1C,4CAA4C;EAC5C,6DAA6D;EAC7D,4CAA4C;EAC5C,6DAA6D;EAC7D,4CAA4C;EAC5C,4CAA4C;;EAE5C,2CAA2C;;EAE3C,2CAA2C;EAC3C,2CAA2C;EAC3C,2CAA2C;EAC3C,2CAA2C;;EAE3C,+BAA+B;EAC/B,6BAA6B;EAC7B,8CAA8C;EAC9C,8CAA8C;;EAE9C,uCAAuC;;EAEvC,oDAAoD;EACpD,kDAAkD;;EAElD,wDAAwD;EACxD,uEAAuE;;EAEvE,qDAAqD;EACrD,gEAAgE;EAChE,qEAAqE;EACrE,+EAA+E;;EAE/E,2DAA2D;EAC3D,kEAAkE;;EAElE,kDAAkD;EAClD,yDAAyD;EACzD,4DAA4D;EAC5D,sDAAsD;EACtD,oEAAoE;EACpE,uDAAuD;EACvD,mDAAmD;;EAEnD,gDAAgD;EAChD,uBAAuB;EACvB,iEAAiE;EACjE,kCAAkC;EAClC,+DAA+D;EAC/D,4CAA4C;EAC5C,iCAAiC;EACjC,mDAAmD;EACnD,sDAAsD;EACtD,qDAAqD;EACrD,sDAAsD;EACtD,uDAAuD;EACvD,wDAAwD;EACxD,+DAA+D;EAC/D,mEAAmE;;EAEnE,kDAAkD;EAClD,gDAAgD;;EAEhD,iDAAiD;EACjD,wBAAwB;EACxB,uDAAuD;EACvD,oDAAoD;EACpD,wDAAwD;EACxD,+DAA+D;EAC/D,mEAAmE;EACnE,mEAAmE;EACnE,4DAA4D;EAC5D,8EAA8E;;EAE9E,iEAAiE;EACjE,+DAA+D;EAC/D,4DAA4D;EAC5D,gEAAgE;EAChE,iEAAiE;;EAEjE,iEAAiE;;EAEjE,uDAAuD;;EAEvD,6DAA6D;EAC7D,yDAAyD;EACzD,kDAAkD;AACpD;;AAEA;;EAEE;;AAEF;EACE,+DAA+D;AACjE;;AAEA;EACE,2DAA2D;AAC7D;;AAEA;;EAEE;;AAEF;;EAEE,UAAU;EACV,mCAAmC;EACnC,iBAAiB;AACnB;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,oDAAoD;AACtD;;AAEA;EACE,mBAAmB;;EAEnB,oDAAoD;AACtD;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,8DAA8D;EAC9D,cAAc;AAChB;;AAEA;EACE,wDAAwD;AAC1D;;AAEA;;EAEE,yDAAyD;AAC3D;;AAEA;EACE,qDAAqD;AACvD;;;AAGA,iDAAiD;AACjD;;;;EAIE,8BAA8B;AAChC;;AAEA;;;;EAIE,0BAA0B;AAC5B;;AAEA;EACE,4BAA4B;EAC5B,2DAA2D;AAC7D;;AAEA;;EAEE,4BAA4B;EAC5B,2DAA2D;EAC3D,qBAAqB;AACvB;;AAEA;;;CAGC;AACD;EACE,6BAA6B;EAC7B,iCAAiC;EACjC,iBAAiB;EACjB,mCAAmC;EACnC,oBAAoB;AACtB;;AAEA;;EAEE;AACF;EACE,UAAU;;EAEV,yBAAyB;EACzB,gDAAgD;;EAEhD,oBAAoB;AACtB;;AAEA;EACE,UAAU;EACV,mBAAmB;AACrB;;AAEA;EACE,+BAA+B;EAC/B,iBAAiB;EACjB,mCAAmC;EACnC,mCAAmC;AACrC;;AAEA;EACE,mCAAmC;EACnC,iBAAiB;AACnB;;AAEA;;;EAGE,iBAAiB;AACnB;;AAEA;;;EAGE,iBAAiB;AACnB;;AAEA;;;EAGE,mBAAmB;AACrB;;AAEA;;;EAGE,mBAAmB;AACrB;;AAEA;EACE,6BAA6B;AAC/B;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,kBAAkB;AACpB;;AAEA;;EAEE;AACF;EACE,qBAAqB;EACrB,+CAA+C;AACjD;;AAEA;;EAEE,6CAA6C;EAC7C,uBAAuB;AACzB;;AAEA;;;;;EAKE,6CAA6C;EAC7C,uBAAuB;AACzB;;AAEA;;EAEE,qBAAqB;EACrB,+CAA+C;AACjD;;AAEA;;EAEE,uBAAuB;EACvB,+BAA+B;AACjC;;AAEA;;EAEE;AACF;;EAEE,oBAAoB;AACtB;;AAEA;EACE,6BAA6B;AAC/B;;AAEA;;EAEE;AACF;;EAEE,mBAAmB;AACrB;;AAEA;;EAEE,sBAAsB;AACxB;;AAEA;;EAEE;AACF;EACE,iBAAiB;EACjB,UAAU;AACZ;;AAEA;EACE,oBAAoB;EACpB,iBAAiB;EACjB,YAAY;AACd;;AAEA;EACE,wBAAwB;EACxB,qBAAqB;EACrB,gBAAgB;AAClB;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,YAAY;AACd;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,iBAAiB;AACnB;;;AAGA;;EAEE;AACF;EACE,qCAAqC;EACrC,qBAAqB;EACrB,iBAAiB;EACjB,oBAAoB;AACtB;;AAEA;;EAEE;AACF;EACE,gDAAgD;EAChD,qBAAqB;EACrB,iBAAiB;EACjB,oBAAoB;EACpB,mCAAmC;EACnC,sBAAsB;AACxB;;AAEA;;EAEE;;AAEF;EACE,kBAAkB;EAClB,UAAU;EACV,SAAS;;EAET,sBAAsB;EACtB,WAAW;AACb;;AAEA;EACE,WAAW;EACX,gBAAgB;;EAEhB,YAAY;EACZ,uDAAuD;;EAEvD,WAAW;AACb;;AAEA;EACE,uBAAuB;AACzB;;AAEA;EACE,eAAe;AACjB;;AAEA;;EAEE,iCAAiC;EACjC,eAAe;;EAEf,kBAAkB;AACpB;;AAEA;EACE,WAAW;AACb;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,WAAW;EACX,cAAc;EACd,WAAW;AACb;;AAEA;EACE,wDAAwD;AAC1D;;AAEA;EACE,uCAAuC;AACzC;;AAEA;EACE,qDAAqD;AACvD;;AAEA;;EAEE,WAAW;EACX,YAAY;EACZ,iBAAiB;EACjB,eAAe;AACjB;;AAEA;;;;EAIE;AACF;EACE,WAAW;AACb;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,aAAa;AACf;;AAEA;;EAEE;AACF;EACE,kBAAkB;EAClB,aAAa;EACb,oBAAoB;EACpB,cAAc;EACd,WAAW;EACX,YAAY;AACd;;AAEA;EACE,WAAW;EACX,YAAY;EACZ,kBAAkB;EAClB,qBAAqB;EACrB,eAAe;EACf,mBAAmB;;EAEnB,kBAAkB;;EAElB,eAAe;;EAEf,2DAA2D;EAC3D,iEAAiE;EACjE,mBAAmB;EACnB,sBAAsB;AACxB;;AAEA;EACE,2DAA2D;AAC7D;;AAEA;EACE,cAAc;AAChB;;AAEA;;EAEE;AACF;EACE,cAAc;EACd,sBAAsB;EACtB,kBAAkB;EAClB,yCAAyC;EACzC,gBAAgB;EAChB,eAAe;EACf,YAAY;EACZ,iDAAiD;EACjD,2CAA2C;EAC3C,gBAAgB;EAChB,aAAa;EACb,iCAAiC;EACjC,qCAAqC;AACvC;;AAEA;EACE,WAAW;EACX,sBAAsB;EACtB,iCAAiC;EACjC,yBAAyB;EACzB,kBAAkB;EAClB,kDAAkD;EAClD,iBAAiB;AACnB;;AAEA;EACE,4DAA4D;EAC5D,wDAAwD;EACxD,aAAa;AACf;;AAEA;EACE,aAAa;EACb,oBAAoB;EACpB,iBAAiB;EACjB,2BAA2B;AAC7B;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,UAAU;EACV,uBAAuB;EACvB,SAAS;AACX;;AAEA;EACE,+CAA+C;AACjD;;AAEA;EACE,cAAc;AAChB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,mBAAmB;EACnB,gBAAgB;EAChB,SAAS;EACT,UAAU;AACZ;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,mBAAmB;AACrB;;AAEA;EACE,WAAW;EACX,UAAU;EACV,YAAY;EACZ,mDAAmD;EACnD,aAAa;AACf;;AAEA;EACE,kBAAkB;EAClB,WAAW;EACX,iBAAiB;AACnB;;AAEA;EACE,iCAAiC;EACjC,4CAA4C;EAC5C,OAAO;EACP,SAAS;AACX;;AAEA;EACE,kBAAkB;EAClB,SAAS;EACT,QAAQ;AACV;;AAEA;EACE,wBAAwB;EACxB,gBAAgB;EAChB,iBAAiB;EACjB,cAAc;EACd,kBAAkB;AACpB;;AAEA;EACE,SAAS;EACT,UAAU;EACV,WAAW;AACb;;AAEA;;EAEE,gBAAgB;EAChB,eAAe;EACf,kBAAkB;AACpB;;AAEA;EACE,4CAA4C;EAC5C,qCAAqC;EACrC,eAAe;AACjB;;AAEA;;EAEE,iBAAiB;AACnB;;AAEA;;EAEE,UAAU;EACV,WAAW;EACX,qBAAqB;EACrB,gBAAgB;EAChB,sBAAsB;AACxB;;AAEA;EACE,eAAe;EACf,kBAAkB;AACpB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,oBAAoB;EACpB,mBAAmB;AACrB;;AAEA;EACE,gDAAgD;AAClD;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,OAAO;EACP,gBAAgB;AAClB;;AAEA;EACE,qCAAqC;AACvC;;AAEA;;EAEE,kBAAkB;AACpB;;AAEA;;EAEE,WAAW;AACb;;AAEA;;;;EAIE,gBAAgB;EAChB,uBAAuB;EACvB,mBAAmB;AACrB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,sBAAsB;EACtB,WAAW;AACb;;AAEA;EACE,UAAU;AACZ;;AAEA;EACE,kBAAkB;EAClB,oCAAoC;AACtC;;AAEA;EACE,gBAAgB;EAChB,uBAAuB;EACvB,SAAS;EACT,YAAY;AACd;;AAEA;EACE,yBAAyB;EACzB,oCAAoC;AACtC;;AAEA;EACE,OAAO;EACP,mBAAmB;EACnB,mBAAmB;EACnB,iBAAiB;EACjB,aAAa;AACf;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,sBAAsB;EACtB,yBAAyB;AAC3B;;AAEA;;EAEE;AACF;EACE,2CAA2C;EAC3C,6CAA6C;EAC7C,kBAAkB;AACpB;;AAEA;;EAEE;AACF;;EAEE,aAAa;AACf;;AAEA;EACE,aAAa;;EAEb,iCAAiC;EACjC,qCAAqC;EACrC,iBAAiB;EACjB,iBAAiB;AACnB;;AAEA;EACE,cAAc;AAChB;;AAEA;EACE,iCAAiC;EACjC,qCAAqC;EACrC,iBAAiB;AACnB;;AAEA;;;;;;EAME,cAAc;AAChB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,aAAa;AACf;;AAEA;;;;EAIE,iCAAiC;EACjC,qCAAqC;EACrC,iBAAiB;AACnB;;AAEA;EACE,oBAAoB;AACtB;;AAEA;;EAEE,UAAU;EACV,mBAAmB;AACrB;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,oBAAoB;AACtB;;AAEA;;EAEE,+BAA+B;AACjC;;AAEA;;;;;;;;;EASE,wBAAwB;AAC1B;;AAEA;;EAEE,cAAc;EACd,YAAY;AACd;;;AAGA;;EAEE;AACF;EACE,YAAY;EACZ,YAAY;;EAEZ,iDAAiD;EACjD,mDAAmD;EACnD,kBAAkB;EAClB,iCAAiC;EACjC,eAAe;EACf,iBAAiB;;EAEjB,aAAa;AACf;;AAEA;EACE,UAAU;AACZ;;;AAGA;;EAEE;AACF;EACE,aAAa;AACf;;AAEA;EACE,cAAc;AAChB;;AAEA;EACE,kBAAkB;EAClB,SAAS;EACT,OAAO;EACP,QAAQ;EACR,iBAAiB;EACjB,kBAAkB;;EAElB,UAAU;EACV,gBAAgB;EAChB,gBAAgB;EAChB,WAAW;;EAEX,sCAAsC;EACtC,kCAAkC;EAClC,kBAAkB;EAClB,kDAAkD;AACpD;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,kBAAkB;EAClB,SAAS;EACT,QAAQ;AACV;;AAEA;EACE,kCAAkC;EAClC,WAAW;EACX,yBAAyB;EACzB,kDAAkD;EAClD,kBAAkB;EAClB,sBAAsB;EACtB,iBAAiB;AACnB;;AAEA;EACE,4DAA4D;EAC5D,wDAAwD;EACxD,aAAa;AACf;;AAEA;EACE,kBAAkB;EAClB,gBAAgB;EAChB,iBAAiB;EACjB,oDAAoD;AACtD;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,eAAe;EACf,uBAAuB;EACvB,gBAAgB;EAChB,mBAAmB;AACrB;;AAEA;EACE,sBAAsB;EACtB,SAAS;EACT,uBAAuB;EACvB,gBAAgB;EAChB,mBAAmB;EACnB,2CAA2C;AAC7C;;AAEA;EACE,uDAAuD;AACzD;;AAEA;EACE,uDAAuD;AACzD;;AAEA;EACE,uDAAuD;AACzD;;AAEA;EACE,2DAA2D;AAC7D;;AAEA;;EAEE;AACF;;;;EAIE,wBAAwB;AAC1B;;AAEA;;;EAGE,YAAY;AACd",sourcesContent:['/**\n * color definitions\n */\n.djs-parent {\n  --color-grey-225-10-15: hsl(225, 10%, 15%);\n  --color-grey-225-10-35: hsl(225, 10%, 35%);\n  --color-grey-225-10-55: hsl(225, 10%, 55%);\n  --color-grey-225-10-75: hsl(225, 10%, 75%);\n  --color-grey-225-10-80: hsl(225, 10%, 80%);\n  --color-grey-225-10-85: hsl(225, 10%, 85%);\n  --color-grey-225-10-90: hsl(225, 10%, 90%);\n  --color-grey-225-10-95: hsl(225, 10%, 95%);\n  --color-grey-225-10-97: hsl(225, 10%, 97%);\n\n  --color-blue-205-100-45: hsl(205, 100%, 45%);\n  --color-blue-205-100-45-opacity-30: hsla(205, 100%, 45%, 30%);\n  --color-blue-205-100-50: hsl(205, 100%, 50%);\n  --color-blue-205-100-50-opacity-15: hsla(205, 100%, 50%, 15%);\n  --color-blue-205-100-70: hsl(205, 100%, 75%);\n  --color-blue-205-100-95: hsl(205, 100%, 95%);\n\n  --color-green-150-86-44: hsl(150, 86%, 44%);\n\n  --color-red-360-100-40: hsl(360, 100%, 40%);\n  --color-red-360-100-45: hsl(360, 100%, 45%);\n  --color-red-360-100-92: hsl(360, 100%, 92%);\n  --color-red-360-100-97: hsl(360, 100%, 97%);\n\n  --color-white: hsl(0, 0%, 100%);\n  --color-black: hsl(0, 0%, 0%);\n  --color-black-opacity-10: hsla(0, 0%, 0%, 10%);\n  --color-black-opacity-30: hsla(0, 0%, 0%, 30%);\n\n  --canvas-fill-color: var(--color-white);\n\n  --bendpoint-fill-color: var(--color-blue-205-100-45);\n  --bendpoint-stroke-color: var(--canvas-fill-color);\n\n  --context-pad-entry-background-color: var(--color-white);\n  --context-pad-entry-hover-background-color: var(--color-grey-225-10-95);\n\n  --element-dragger-color: var(--color-blue-205-100-50);\n  --element-hover-outline-fill-color: var(--color-blue-205-100-45);\n  --element-selected-outline-stroke-color: var(--color-blue-205-100-50);\n  --element-selected-outline-secondary-stroke-color: var(--color-blue-205-100-70);\n\n  --lasso-fill-color: var(--color-blue-205-100-50-opacity-15);\n  --lasso-stroke-color: var(--element-selected-outline-stroke-color);\n\n  --palette-entry-color: var(--color-grey-225-10-15);\n  --palette-entry-hover-color: var(--color-blue-205-100-45);\n  --palette-entry-selected-color: var(--color-blue-205-100-50);\n  --palette-separator-color: var(--color-grey-225-10-75);\n  --palette-toggle-hover-background-color: var(--color-grey-225-10-55);\n  --palette-background-color: var(--color-grey-225-10-97);\n  --palette-border-color: var(--color-grey-225-10-75);\n\n  --popup-font-family: "IBM Plex Sans", sans-serif;\n  --popup-font-size: 14px;\n  --popup-header-entry-selected-color: var(--color-blue-205-100-50);\n  --popup-header-font-weight: bolder;\n  --popup-header-group-divider-color: var(--color-grey-225-10-75);\n  --popup-background-color: var(--color-white);\n  --popup-border-color: transparent;\n  --popup-shadow-color: var(--color-black-opacity-30);\n  --popup-description-color: var(--color-grey-225-10-55);\n  --popup-no-results-color: var(--color-grey-225-10-55);\n  --popup-entry-title-color: var(--color-grey-225-10-55);\n  --popup-entry-hover-color:  var(--color-grey-225-10-95);\n  --popup-search-border-color: var(--color-grey-225-10-75);\n  --popup-search-focus-border-color: var(--color-blue-205-100-50);\n  --popup-search-focus-background-color: var(--color-blue-205-100-95);\n\n  --resizer-fill-color: var(--color-blue-205-100-45);\n  --resizer-stroke-color: var(--canvas-fill-color);\n\n  --search-font-family: "IBM Plex Sans", sans-serif;\n  --search-font-size: 14px;\n  --search-container-background-color: var(--color-white);\n  --search-shadow-color: var(--color-black-opacity-30);\n  --search-input-border-color: var(--color-grey-225-10-75);\n  --search-input-focus-border-color: var(--color-blue-205-100-50);\n  --search-input-focus-background-color: var(--color-blue-205-100-95);\n  --search-result-hover-background-color: var(--color-grey-225-10-95);\n  --search-result-secondary-color: var(--color-grey-225-10-55);\n  --search-preselected-background-color: var(--color-blue-205-100-50-opacity-15);\n\n  --shape-attach-allowed-stroke-color: var(--color-blue-205-100-50);\n  --shape-connect-allowed-fill-color: var(--color-grey-225-10-97);\n  --shape-drop-allowed-fill-color: var(--color-grey-225-10-97);\n  --shape-drop-not-allowed-fill-color: var(--color-red-360-100-97);\n  --shape-resize-preview-stroke-color: var(--color-blue-205-100-50);\n\n  --snap-line-stroke-color: var(--color-blue-205-100-45-opacity-30);\n\n  --space-tool-crosshair-stroke-color: var(--color-black);\n\n  --tooltip-error-background-color: var(--color-red-360-100-97);\n  --tooltip-error-border-color: var(--color-red-360-100-45);\n  --tooltip-error-color: var(--color-red-360-100-45);\n}\n\n/**\n * SVG styles\n */\n\n.djs-container svg.drop-not-ok {\n  background: var(--shape-drop-not-allowed-fill-color) !important;\n}\n\n.djs-container svg.new-parent {\n  background: var(--shape-drop-allowed-fill-color) !important;\n}\n\n/**\n * outline styles\n */\n\n.djs-outline,\n.djs-selection-outline {\n  fill: none;\n  shape-rendering: geometricPrecision;\n  stroke-width: 2px;\n}\n\n.djs-outline {\n  visibility: hidden;\n}\n\n.djs-selection-outline {\n  stroke: var(--element-selected-outline-stroke-color);\n}\n\n.djs-element.selected .djs-outline {\n  visibility: visible;\n\n  stroke: var(--element-selected-outline-stroke-color);\n}\n\n.djs-connection.selected .djs-outline {\n  display: none;\n}\n\n.djs-multi-select .djs-element.selected .djs-outline {\n  stroke: var(--element-selected-outline-secondary-stroke-color);\n  display: block;\n}\n\n.djs-shape.connect-ok .djs-visual > :nth-child(1) {\n  fill: var(--shape-connect-allowed-fill-color) !important;\n}\n\n.djs-shape.connect-not-ok .djs-visual > :nth-child(1),\n.djs-shape.drop-not-ok .djs-visual > :nth-child(1) {\n  fill: var(--shape-drop-not-allowed-fill-color) !important;\n}\n\n.djs-shape.new-parent .djs-visual > :nth-child(1) {\n  fill: var(--shape-drop-allowed-fill-color) !important;\n}\n\n\n/* Override move cursor during drop and connect */\n.drop-not-ok,\n.connect-not-ok,\n.drop-not-ok *,\n.connect-not-ok * {\n  cursor: not-allowed !important;\n}\n\n.drop-ok,\n.connect-ok,\n.drop-ok *,\n.connect-ok * {\n  cursor: default !important;\n}\n\n.djs-element.attach-ok .djs-visual > :nth-child(1) {\n  stroke-width: 5px !important;\n  stroke: var(--shape-attach-allowed-stroke-color) !important;\n}\n\n.djs-frame.connect-not-ok .djs-visual > :nth-child(1),\n.djs-frame.drop-not-ok .djs-visual > :nth-child(1) {\n  stroke-width: 3px !important;\n  stroke: var(--shape-drop-not-allowed-fill-color) !important;\n  fill: none !important;\n}\n\n/**\n* Selection box style\n*\n*/\n.djs-lasso-overlay {\n  fill: var(--lasso-fill-color);\n  stroke: var(--lasso-stroke-color);\n  stroke-width: 2px;\n  shape-rendering: geometricPrecision;\n  pointer-events: none;\n}\n\n/**\n * Resize styles\n */\n.djs-resize-overlay {\n  fill: none;\n\n  stroke-dasharray: 5 1 3 1;\n  stroke: var(--shape-resize-preview-stroke-color);\n\n  pointer-events: none;\n}\n\n.djs-resizer-hit {\n  fill: none;\n  pointer-events: all;\n}\n\n.djs-resizer-visual {\n  fill: var(--resizer-fill-color);\n  stroke-width: 1px;\n  stroke: var(--resizer-stroke-color);\n  shape-rendering: geometricPrecision;\n}\n\n.djs-resizer:hover .djs-resizer-visual {\n  stroke: var(--resizer-stroke-color);\n  stroke-opacity: 1;\n}\n\n.djs-cursor-resize-ns,\n.djs-resizer-n,\n.djs-resizer-s {\n  cursor: ns-resize;\n}\n\n.djs-cursor-resize-ew,\n.djs-resizer-e,\n.djs-resizer-w {\n  cursor: ew-resize;\n}\n\n.djs-cursor-resize-nwse,\n.djs-resizer-nw,\n.djs-resizer-se {\n  cursor: nwse-resize;\n}\n\n.djs-cursor-resize-nesw,\n.djs-resizer-ne,\n.djs-resizer-sw {\n  cursor: nesw-resize;\n}\n\n.djs-shape.djs-resizing > .djs-outline {\n  visibility: hidden !important;\n}\n\n.djs-shape.djs-resizing > .djs-resizer {\n  visibility: hidden;\n}\n\n.djs-dragger > .djs-resizer {\n  visibility: hidden;\n}\n\n/**\n * drag styles\n */\n.djs-dragger * {\n  fill: none !important;\n  stroke: var(--element-dragger-color) !important;\n}\n\n.djs-dragger tspan,\n.djs-dragger text {\n  fill: var(--element-dragger-color) !important;\n  stroke: none !important;\n}\n\n.djs-dragger marker circle,\n.djs-dragger marker path,\n.djs-dragger marker polygon,\n.djs-dragger marker polyline,\n.djs-dragger marker rect {\n  fill: var(--element-dragger-color) !important;\n  stroke: none !important;\n}\n\n.djs-dragger marker text,\n.djs-dragger marker tspan {\n  fill: none !important;\n  stroke: var(--element-dragger-color) !important;\n}\n\n.djs-dragging,\n.djs-dragging > * {\n  opacity: 0.3 !important;\n  pointer-events: none !important;\n}\n\n/**\n * no pointer events for visual\n */\n.djs-visual,\n.djs-outline {\n  pointer-events: none;\n}\n\n.djs-element.attach-ok .djs-hit {\n  stroke-width: 60px !important;\n}\n\n/**\n * all pointer events for hit shape\n */\n.djs-element > .djs-hit-all,\n.djs-element > .djs-hit-no-move {\n  pointer-events: all;\n}\n\n.djs-element > .djs-hit-stroke,\n.djs-element > .djs-hit-click-stroke {\n  pointer-events: stroke;\n}\n\n/**\n * shape / connection basic styles\n */\n.djs-connection .djs-visual {\n  stroke-width: 2px;\n  fill: none;\n}\n\n.djs-cursor-grab {\n  cursor: -webkit-grab;\n  cursor: -moz-grab;\n  cursor: grab;\n}\n\n.djs-cursor-grabbing {\n  cursor: -webkit-grabbing;\n  cursor: -moz-grabbing;\n  cursor: grabbing;\n}\n\n.djs-cursor-crosshair {\n  cursor: crosshair;\n}\n\n.djs-cursor-move {\n  cursor: move;\n}\n\n.djs-cursor-resize-ns {\n  cursor: ns-resize;\n}\n\n.djs-cursor-resize-ew {\n  cursor: ew-resize;\n}\n\n\n/**\n * snapping\n */\n.djs-snap-line {\n  stroke: var(--snap-line-stroke-color);\n  stroke-linecap: round;\n  stroke-width: 2px;\n  pointer-events: none;\n}\n\n/**\n * snapping\n */\n.djs-crosshair {\n  stroke: var(--space-tool-crosshair-stroke-color);\n  stroke-linecap: round;\n  stroke-width: 1px;\n  pointer-events: none;\n  shape-rendering: geometricPrecision;\n  stroke-dasharray: 5, 5;\n}\n\n/**\n * palette\n */\n\n.djs-palette {\n  position: absolute;\n  left: 20px;\n  top: 20px;\n\n  box-sizing: border-box;\n  width: 48px;\n}\n\n.djs-palette .separator {\n  margin: 5px;\n  padding-top: 5px;\n\n  border: none;\n  border-bottom: solid 1px var(--palette-separator-color);\n\n  clear: both;\n}\n\n.djs-palette .entry:before {\n  vertical-align: initial;\n}\n\n.djs-palette .djs-palette-toggle {\n  cursor: pointer;\n}\n\n.djs-palette .entry,\n.djs-palette .djs-palette-toggle {\n  color: var(--palette-entry-color);\n  font-size: 30px;\n\n  text-align: center;\n}\n\n.djs-palette .entry {\n  float: left;\n}\n\n.djs-palette .entry img {\n  max-width: 100%;\n}\n\n.djs-palette .djs-palette-entries:after {\n  content: \'\';\n  display: table;\n  clear: both;\n}\n\n.djs-palette .djs-palette-toggle:hover {\n  background: var(--palette-toggle-hover-background-color);\n}\n\n.djs-palette .entry:hover {\n  color: var(--palette-entry-hover-color);\n}\n\n.djs-palette .highlighted-entry {\n  color: var(--palette-entry-selected-color) !important;\n}\n\n.djs-palette .entry,\n.djs-palette .djs-palette-toggle {\n  width: 46px;\n  height: 46px;\n  line-height: 46px;\n  cursor: default;\n}\n\n/**\n * Palette open / two-column layout is controlled via\n * classes on the palette. Events to hook into palette\n * changed life-cycle are available in addition.\n */\n.djs-palette.two-column.open {\n  width: 94px;\n}\n\n.djs-palette:not(.open) .djs-palette-entries {\n  display: none;\n}\n\n.djs-palette:not(.open) {\n  overflow: hidden;\n}\n\n.djs-palette.open .djs-palette-toggle {\n  display: none;\n}\n\n/**\n * context-pad\n */\n.djs-context-pad {\n  position: absolute;\n  display: none;\n  pointer-events: none;\n  line-height: 1;\n  width: 72px;\n  z-index: 100;\n}\n\n.djs-context-pad .entry {\n  width: 22px;\n  height: 22px;\n  text-align: center;\n  display: inline-block;\n  font-size: 22px;\n  margin: 0 2px 2px 0;\n\n  border-radius: 3px;\n\n  cursor: default;\n\n  background-color: var(--context-pad-entry-background-color);\n  box-shadow: 0 0 2px 1px var(--context-pad-entry-background-color);\n  pointer-events: all;\n  vertical-align: middle;\n}\n\n.djs-context-pad .entry:hover {\n  background: var(--context-pad-entry-hover-background-color);\n}\n\n.djs-context-pad.open {\n  display: block;\n}\n\n/**\n * popup styles\n */\n.djs-popup {\n  line-height: 1;\n  box-sizing: border-box;\n  width: min-content;\n  background: var(--popup-background-color);\n  overflow: hidden;\n  position: fixed;\n  z-index: 200;\n  box-shadow: 0px 2px 6px var(--popup-shadow-color);\n  border: solid 1px var(--popup-border-color);\n  min-width: 120px;\n  outline: none;\n  font-size: var(--popup-font-size);\n  font-family: var(--popup-font-family);\n}\n\n.djs-popup-search input {\n  width: 100%;\n  box-sizing: border-box;\n  font-size: var(--popup-font-size);\n  padding: 3px 6px 3px 28px;\n  border-radius: 2px;\n  border: solid 1px var(--popup-search-border-color);\n  line-height: 21px;\n}\n\n.djs-popup-search input:focus {\n  background-color: var(--popup-search-focus-background-color);\n  border: solid 1px var(--popup-search-focus-border-color);\n  outline: none;\n}\n\n.djs-popup-header {\n  display: flex;\n  align-items: stretch;\n  line-height: 20px;\n  margin: 10px 12px 10px 12px;\n}\n\n.djs-popup-header .entry {\n  border-radius: 2px;\n}\n\n.djs-popup button.entry {\n  padding: 0;\n  background: transparent;\n  border: 0;\n}\n\n.djs-popup-header .entry.active {\n  color: var(--popup-header-entry-selected-color);\n}\n\n.djs-popup-header .entry.disabled {\n  color: inherit;\n}\n\n.djs-popup-header-group {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n\n.djs-popup-header-group .entry {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n}\n\n.djs-popup-header-group + .djs-popup-header-group:before {\n  content: \'\';\n  width: 1px;\n  height: 20px;\n  background: var(--popup-header-group-divider-color);\n  margin: 0 5px;\n}\n\n.djs-popup-search {\n  position: relative;\n  width: auto;\n  margin: 10px 12px;\n}\n\n.djs-popup-title {\n  font-size: var(--popup-font-size);\n  font-weight: var(--popup-header-font-weight);\n  flex: 1;\n  margin: 0;\n}\n\n.djs-popup-search-icon {\n  position: absolute;\n  left: 8px;\n  top: 7px;\n}\n\n.djs-popup-results {\n  margin: 7px 3px 7px 12px;\n  list-style: none;\n  max-height: 280px;\n  overflow: auto;\n  padding-right: 9px;\n}\n\n.djs-popup-group {\n  margin: 0;\n  padding: 0;\n  width: 100%;\n}\n\n.djs-popup-body .entry,\n.djs-popup-body .entry-header {\n  padding: 5px 7px;\n  cursor: default;\n  border-radius: 4px;\n}\n\n.djs-popup-body .entry-header {\n  font-weight: var(--popup-header-font-weight);\n  color: var(--popup-entry-title-color);\n  padding-left: 0;\n}\n\n.djs-popup [class*="icon"] .djs-popup-label,\n.djs-popup-label:not(:first-child) {\n  margin-left: .5em;\n}\n\n.djs-popup [class*="icon"]:before,\n.djs-popup-entry-icon {\n  width: 1em;\n  height: 1em;\n  display: inline-block;\n  font-size: 1.4em;\n  vertical-align: middle;\n}\n\n.djs-popup-body .entry-header:not(:first-child) {\n  margin-top: 8px;\n  margin-bottom: 2px;\n}\n\n.djs-popup-body .entry {\n  display: flex;\n  flex-direction: row;\n  align-items: stretch;\n  height: min-content;\n}\n\n.djs-popup .entry.selected {\n  background-color: var(--popup-entry-hover-color);\n}\n\n.djs-popup-body .entry:not(:first-child) {\n  margin-top: 2px;\n}\n\n.djs-popup-entry-content {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  overflow: hidden;\n}\n\n.djs-popup-entry-description {\n  color: var(--popup-description-color);\n}\n\n.djs-popup-label,\n.djs-popup-entry-description {\n  line-height: 1.4em;\n}\n\n.djs-popup .entry,\n.djs-popup .entry-header {\n  margin: 1px;\n}\n\n.djs-popup-title,\n.djs-popup-label,\n.djs-popup-entry-description,\n.djs-popup .entry-header {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.djs-popup-entry-name {\n  display: flex;\n}\n\n.djs-popup-body {\n  flex-direction: column;\n  width: auto;\n}\n\n.djs-popup *::-webkit-scrollbar {\n  width: 6px;\n}\n\n.djs-popup *::-webkit-scrollbar-thumb {\n  border-radius: 3px;\n  background-color: rgba(0, 0, 0, 0.2);\n}\n\n.djs-popup *::-webkit-scrollbar-track {\n  box-shadow: none;\n  background: transparent;\n  margin: 0;\n  padding: 5px;\n}\n\n.djs-popup-no-results {\n  padding: 0 12px 12px 12px;\n  color: var(--popup-no-results-color);\n}\n\n.djs-popup-entry-docs {\n  flex: 0;\n  flex-direction: row;\n  align-items: center;\n  padding-left: 5px;\n  display: none;\n}\n\n.djs-popup-body .entry:hover .djs-popup-entry-docs {\n  display: flex;\n}\n\n.djs-popup-entry-docs svg {\n  vertical-align: middle;\n  margin: auto 2px auto 5px;\n}\n\n/**\n *  palette styles\n */\n.djs-palette {\n  background: var(--palette-background-color);\n  border: solid 1px var(--palette-border-color);\n  border-radius: 2px;\n}\n\n/**\n * bendpoints\n */\n.djs-segment-dragger,\n.djs-bendpoint {\n  display: none;\n}\n\n.djs-segment-dragger .djs-visual {\n  display: none;\n\n  fill: var(--bendpoint-fill-color);\n  stroke: var(--bendpoint-stroke-color);\n  stroke-width: 1px;\n  stroke-opacity: 1;\n}\n\n.djs-segment-dragger:hover .djs-visual {\n  display: block;\n}\n\n.djs-bendpoint .djs-visual {\n  fill: var(--bendpoint-fill-color);\n  stroke: var(--bendpoint-stroke-color);\n  stroke-width: 1px;\n}\n\n.djs-segment-dragger:hover,\n.djs-bendpoints.hover .djs-segment-dragger,\n.djs-bendpoints.selected .djs-segment-dragger,\n.djs-bendpoint:hover,\n.djs-bendpoints.hover .djs-bendpoint,\n.djs-bendpoints.selected .djs-bendpoint {\n  display: block;\n}\n\n.djs-drag-active .djs-bendpoints * {\n  display: none;\n}\n\n.djs-bendpoints:not(.hover) .floating {\n  display: none;\n}\n\n.djs-segment-dragger:hover .djs-visual,\n.djs-segment-dragger.djs-dragging .djs-visual,\n.djs-bendpoint:hover .djs-visual,\n.djs-bendpoint.floating .djs-visual {\n  fill: var(--bendpoint-fill-color);\n  stroke: var(--bendpoint-stroke-color);\n  stroke-opacity: 1;\n}\n\n.djs-bendpoint.floating .djs-hit {\n  pointer-events: none;\n}\n\n.djs-segment-dragger .djs-hit,\n.djs-bendpoint .djs-hit {\n  fill: none;\n  pointer-events: all;\n}\n\n.djs-segment-dragger.horizontal .djs-hit {\n  cursor: ns-resize;\n}\n\n.djs-segment-dragger.vertical .djs-hit {\n  cursor: ew-resize;\n}\n\n.djs-segment-dragger.djs-dragging .djs-hit {\n  pointer-events: none;\n}\n\n.djs-updating,\n.djs-updating > * {\n  pointer-events: none !important;\n}\n\n.djs-updating .djs-context-pad,\n.djs-updating .djs-outline,\n.djs-updating .djs-bendpoint,\n.djs-multi-select .djs-bendpoint,\n.djs-multi-select .djs-segment-dragger,\n.connect-ok .djs-bendpoint,\n.connect-not-ok .djs-bendpoint,\n.drop-ok .djs-bendpoint,\n.drop-not-ok .djs-bendpoint {\n  display: none !important;\n}\n\n.djs-segment-dragger.djs-dragging,\n.djs-bendpoint.djs-dragging {\n  display: block;\n  opacity: 1.0;\n}\n\n\n/**\n * tooltips\n */\n.djs-tooltip-error {\n  width: 160px;\n  padding: 6px;\n\n  background: var(--tooltip-error-background-color);\n  border: solid 1px var(--tooltip-error-border-color);\n  border-radius: 2px;\n  color: var(--tooltip-error-color);\n  font-size: 12px;\n  line-height: 16px;\n\n  opacity: 0.75;\n}\n\n.djs-tooltip-error:hover {\n  opacity: 1;\n}\n\n\n/**\n * search pad\n */\n.djs-search-open .djs-context-pad {\n  display: none;\n}\n\n.djs-search-open .djs-connection.selected .djs-outline {\n  display: block;\n}\n\n.djs-search-container {\n  position: absolute;\n  top: 20px;\n  left: 0;\n  right: 0;\n  margin-left: auto;\n  margin-right: auto;\n\n  width: 25%;\n  min-width: 300px;\n  max-width: 400px;\n  z-index: 10;\n\n  font-family: var(--search-font-family);\n  font-size: var(--search-font-size);\n  border-radius: 2px;\n  box-shadow: 0px 2px 6px var(--search-shadow-color);\n}\n\n.djs-search-container:not(.open) {\n  display: none;\n}\n\n.djs-search-input {\n  position: relative;\n}\n\n.djs-search-input svg {\n  position: absolute;\n  left: 8px;\n  top: 7px;\n}\n\n.djs-search-input input {\n  font-size: var(--search-font-size);\n  width: 100%;\n  padding: 3px 6px 3px 28px;\n  border: 1px solid var(--search-input-border-color);\n  border-radius: 2px;\n  box-sizing: border-box;\n  line-height: 21px;\n}\n\n.djs-search-input input:focus {\n  background-color: var(--search-input-focus-background-color);\n  border: solid 1px var(--search-input-focus-border-color);\n  outline: none;\n}\n\n.djs-search-results {\n  position: relative;\n  overflow-y: auto;\n  max-height: 200px;\n  background: var(--search-container-background-color);\n}\n\n.djs-search-result {\n  padding: 6px 8px;\n}\n\n.djs-search-result-primary {\n  margin: 0 0 3px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n}\n\n.djs-search-result-secondary {\n  font-family: monospace;\n  margin: 0;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  color: var(--search-result-secondary-color);\n}\n\n.djs-search-result:hover {\n  background: var(--search-result-hover-background-color);\n}\n\n.djs-search-result-selected {\n  background: var(--search-result-hover-background-color);\n}\n\n.djs-search-result-selected:hover {\n  background: var(--search-result-hover-background-color);\n}\n\n.djs-search-open .djs-element .djs-outline {\n  fill: var(--search-preselected-background-color) !important;\n}\n\n/**\n * hidden styles\n */\n.djs-element-hidden,\n.djs-element-hidden .djs-hit,\n.djs-element-hidden .djs-outline,\n.djs-label-hidden .djs-label {\n  display: none !important;\n}\n\n.djs-element .djs-hit-stroke,\n.djs-element .djs-hit-click-stroke,\n.djs-element .djs-hit-all {\n  cursor: move;\n}'],sourceRoot:""}]);const a=s},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},659:e=>{var t={};e.exports=function(e,n){var o=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,r&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(o,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={id:o,exports:{}};return e[o](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0;var o={};n.d(o,{default:()=>wi});const r=/^class[ {]/;function i(e){return Array.isArray(e)}function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function a(...e){1===e.length&&i(e[0])&&(e=e[0]);const t=(e=[...e]).pop();return t.$inject=e,t}const c=/constructor\s*[^(]*\(\s*([^)]*)\)/m,l=/^(?:async\s+)?(?:function\s*[^(]*)?(?:\(\s*([^)]*)\)|(\w+))/m,d=/\/\*([^*]*)\*\//m;function p(e){if("function"!=typeof e)throw new Error(`Cannot annotate "${e}". Expected a function!`);const t=e.toString().match(function(e){return r.test(e.toString())}(e)?c:l);if(!t)return[];const n=t[1]||t[2];return n&&n.split(",").map(e=>{const t=e.match(d);return(t&&t[1]||e).trim()})||[]}function u(e,t){const n=t||{get:function(e,t){if(o.push(e),!1===t)return null;throw d(`No provider for "${e}"!`)}},o=[],r=this._providers=Object.create(n._providers||null),c=this._instances=Object.create(null),l=c.injector=this,d=function(e){const t=o.join(" -> ");return o.length=0,new Error(t?`${e} (Resolving: ${t})`:e)};function A(e,t){if(!r[e]&&e.includes(".")){const t=e.split(".");let n=A(t.shift());for(;t.length;)n=n[t.shift()];return n}if(s(c,e))return c[e];if(s(r,e)){if(-1!==o.indexOf(e))throw o.push(e),d("Cannot resolve circular dependency!");return o.push(e),c[e]=r[e][0](r[e][1]),o.pop(),c[e]}return n.get(e,t)}function f(e,t){if(void 0===t&&(t={}),"function"!=typeof e){if(!i(e))throw d(`Cannot invoke "${e}". Expected a function!`);e=a(e.slice())}return{fn:e,dependencies:(e.$inject||p(e)).map(e=>s(t,e)?t[e]:A(e))}}function g(e){const{fn:t,dependencies:n}=f(e);return new(Function.prototype.bind.call(t,null,...n))}function v(e,t,n){const{fn:o,dependencies:r}=f(e,n);return o.apply(t,r)}function y(e){return a(t=>e.get(t))}function m(e,t){if(t&&t.length){const n=Object.create(null),o=Object.create(null),i=[],s=[],a=[];let c,l,d,p;for(let e in r)c=r[e],-1!==t.indexOf(e)&&("private"===c[2]?(l=i.indexOf(c[3]),-1===l?(d=c[3].createChild([],t),p=y(d),i.push(c[3]),s.push(d),a.push(p),n[e]=[p,e,"private",d]):n[e]=[a[l],e,"private",s[l]]):n[e]=[c[2],c[1]],o[e]=!0),"factory"!==c[2]&&"type"!==c[2]||!c[1].$scope||t.forEach(t=>{-1!==c[1].$scope.indexOf(t)&&(n[e]=[c[2],c[1]],o[t]=!0)});t.forEach(e=>{if(!o[e])throw new Error('No provider for "'+e+'". Cannot use provider from the parent!')}),e.unshift(n)}return new u(e,l)}const E={factory:v,type:g,value:function(e){return e}};function x(e,t){const n=e.__init__||[];return function(){n.forEach(e=>{"string"==typeof e?t.get(e):t.invoke(e)})}}function _(e){const t=e.__exports__;if(t){const n=e.__modules__,o=Object.keys(e).reduce((t,n)=>("__exports__"!==n&&"__modules__"!==n&&"__init__"!==n&&"__depends__"!==n&&(t[n]=e[n]),t),Object.create(null)),i=m((n||[]).concat(o)),s=a(function(e){return i.get(e)});t.forEach(function(e){r[e]=[s,e,"private",i]});const c=(e.__init__||[]).slice();return c.unshift(function(){i.init()}),x(e=Object.assign({},e,{__init__:c}),i)}return Object.keys(e).forEach(function(t){if("__init__"===t||"__depends__"===t)return;const n=e[t];if("private"===n[2])return void(r[t]=n);const o=n[0],i=n[1];r[t]=[E[o],h(o,i),o]}),x(e,l)}function C(e,t){return-1!==e.indexOf(t)||-1!==(e=(t.__depends__||[]).reduce(C,e)).indexOf(t)?e:e.concat(t)}this.get=A,this.invoke=v,this.instantiate=g,this.createChild=m,this.init=function(e){const t=e.reduce(C,[]).map(_);let n=!1;return function(){n||(n=!0,t.forEach(e=>e()))}}(e)}function h(e,t){return"value"!==e&&i(t)&&(t=a(t.slice())),t}function A(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}function f(e,t){var n=this;t=t||1e3,e.on(["render.shape","render.connection"],t,function(e,t){var o=e.type,r=t.element,i=t.gfx,s=t.attrs;if(n.canRender(r))return"render.shape"===o?n.drawShape(i,r,s):n.drawConnection(i,r,s)}),e.on(["render.getShapePath","render.getConnectionPath"],t,function(e,t){if(n.canRender(t))return"render.getShapePath"===e.type?n.getShapePath(t):n.getConnectionPath(t)})}f.prototype.canRender=function(e){},f.prototype.drawShape=function(e,t){},f.prototype.drawConnection=function(e,t){},f.prototype.getShapePath=function(e){},f.prototype.getConnectionPath=function(e){};const g=Object.prototype.toString,v=Object.prototype.hasOwnProperty;function y(e){return void 0===e}function m(e){return void 0!==e}function E(e){return null==e}function x(e){return"[object Array]"===g.call(e)}function _(e){return"[object Object]"===g.call(e)}function C(e){return"[object Number]"===g.call(e)}function b(e){const t=g.call(e);return"[object Function]"===t||"[object AsyncFunction]"===t||"[object GeneratorFunction]"===t||"[object AsyncGeneratorFunction]"===t||"[object Proxy]"===t}function w(e){return"[object String]"===g.call(e)}function j(e,t){return!E(e)&&v.call(e,t)}function B(e,t){const n=$(t);let o;return D(e,function(e,t){if(n(e,t))return o=e,!1}),o}function k(e,t){const n=$(t);let o=[];return D(e,function(e,t){n(e,t)&&o.push(e)}),o}function D(e,t){let n,o;if(y(e))return;const r=x(e)?W:F;for(let i in e)if(j(e,i)&&(n=e[i],o=t(n,r(i)),!1===o))return n}function S(e,t,n){return D(e,function(e,o){n=t(n,e,o)}),n}function z(e,t){return!!S(e,function(e,n,o){return e&&t(n,o)},!0)}function P(e,t){let n=[];return D(e,function(e,o){n.push(t(e,o))}),n}function O(e){return P(e,e=>e)}function M(e,t,n={}){return t=L(t),D(e,function(e){let o=t(e)||"_",r=n[o];r||(r=n[o]=[]),r.push(e)}),n}function R(e,...t){e=L(e);let n={};return D(t,t=>M(t,e,n)),P(n,function(e,t){return e[0]})}function T(e){return function(t){return z(e,function(e,n){return t[n]===e})}}function L(e){return b(e)?e:t=>t[e]}function $(e){return b(e)?e:t=>t===e}function F(e){return e}function W(e){return Number(e)}function I(e,t){return e.bind(t)}function G(e,...t){return Object.assign(e,...t)}function q(e,t){let n={},o=Object(e);return D(t,function(t){t in o&&(n[t]=e[t])}),n}function V(e,t){return function(e,t){t.appendChild(function(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch(e){}return e}(e,t))}(t,e),e}var N={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":2,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":2,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function H(e,t,n){var o=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=N[o];r?(2===r&&"number"==typeof n&&(n=String(n)+"px"),e.style[o]=n):e.setAttributeNS(null,t,n)}function U(e,t,n){if("string"==typeof t){if(void 0===n)return function(e,t){return N[t]?e.style[t]:e.getAttributeNS(null,t)}(e,t);H(e,t,n)}else!function(e,t){var n,o,r=Object.keys(t);for(n=0;o=r[n];n++)H(e,o,t[o])}(e,t);return e}const Y=Object.prototype.toString;function X(e){return new Z(e)}function Z(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}function K(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}function Q(e){return e.cloneNode(!0)}Z.prototype.add=function(e){return this.list.add(e),this},Z.prototype.remove=function(e){return"[object RegExp]"==Y.call(e)?this.removeMatching(e):(this.list.remove(e),this)},Z.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},Z.prototype.toggle=function(e,t){return void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this},Z.prototype.array=function(){return Array.from(this.list)},Z.prototype.has=Z.prototype.contains=function(e){return this.list.contains(e)};var J="http://www.w3.org/2000/svg",ee='<svg xmlns="'+J+'"';function te(e,t){var n;return"<"===(e=e.trim()).charAt(0)?(n=function(e){var t=!1;"<svg"===e.substring(0,4)?-1===e.indexOf(J)&&(e=ee+e.substring(4)):(e=ee+">"+e+"</svg>",t=!0);var n=function(e){var t;return(t=new DOMParser).async=!1,t.parseFromString(e,"text/xml")}(e);if(!t)return n;for(var o=document.createDocumentFragment(),r=n.firstChild;r.firstChild;)o.appendChild(r.firstChild);return o}(e).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(J,e),t&&U(n,t),n}var ne=null;function oe(){return null===ne&&(ne=te("svg")),ne}function re(e,t){var n,o,r=Object.keys(t);for(n=0;o=r[n];n++)e[o]=t[o];return e}function ie(e){return e?oe().createSVGTransformFromMatrix(e):oe().createSVGTransform()}function se(e){var t=e.parentNode;return t&&t.removeChild(e),e}function ae(e,t){return t instanceof SVGMatrix?e.createSVGTransformFromMatrix(t):t}function ce(e,t){var n=e.transform.baseVal;return t&&(Array.isArray(t)||(t=[t]),function(e,t){var n,o;for(e.clear(),n=0;o=t[n];n++)e.appendItem(ae(e,o))}(n,t)),n.consolidate()}function le(e){return e.flat().join(",").replace(/,?([A-Za-z]),?/g,"$1")}function de(e){return["L",e.x,e.y]}function pe(e,t,n){return["C",e.x,e.y,t.x,t.y,n.x,n.y]}function ue(e,t){const n=e.length,o=[(r=e[0],["M",r.x,r.y])];var r;for(let r=1;r<n;r++){const n=e[r-1],i=e[r],s=e[r+1];if(!s||!t){o.push(de(i));continue}const a=Math.min(t,Ae(i.x-n.x,i.y-n.y),Ae(s.x-i.x,s.y-i.y));if(!a){o.push(de(i));continue}const c=he(i,n,a),l=he(i,n,.5*a),d=he(i,s,a),p=he(i,s,.5*a);o.push(de(c)),o.push(pe(l,p,d))}return o}function he(e,t,n){const o=t.x-e.x,r=t.y-e.y,i=n/Ae(o,r);return{x:e.x+o*i,y:e.y+r*i}}function Ae(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}function fe(e,t,n){C(t)&&(n=t,t=null),t||(t={});const o=te("path",t);return C(n)&&(o.dataset.cornerRadius=String(n)),ge(o,e)}function ge(e,t){return U(e,{d:le(ue(t,parseInt(e.dataset.cornerRadius,10)||0))}),e}function ve(e){return k(e,function(t){return!B(e,function(e){return e!==t&&ye(t,e)})})}function ye(e,t){if(t){if(e===t)return t;if(e.parent)return ye(e.parent,t)}}function me(e,t,n){var o=!n||-1===e.indexOf(t);return o&&e.push(t),o}function Ee(e,t,n){n=n||0,x(e)||(e=[e]),D(e,function(e,o){var r=t(e,o,n);x(r)&&r.length&&Ee(r,t,n+1)})}function xe(e,t){var n,o,r,i;return t=!!t,x(e)||(e=[e]),D(e,function(e){var s=e;e.waypoints&&!t&&(s=xe(e.waypoints,!0));var a=s.x,c=s.y,l=s.height||0,d=s.width||0;(a<n||void 0===n)&&(n=a),(c<o||void 0===o)&&(o=c),(a+d>r||void 0===r)&&(r=a+d),(c+l>i||void 0===i)&&(i=c+l)}),{x:n,y:o,height:i-o,width:r-n}}function _e(e){return"waypoints"in e?"connection":"x"in e?"shape":"root"}function Ce(e){return!(!e||!e.isFrame)}function be(e,t){return G({},e||{},t||{})}function we(e,t){f.call(this,e,1),this.CONNECTION_STYLE=t.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=t.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=t.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}A(we,f),we.prototype.canRender=function(){return!0},we.prototype.drawShape=function(e,t,n){var o=te("rect");return U(o,{x:0,y:0,width:t.width||0,height:t.height||0}),Ce(t)?U(o,G({},this.FRAME_STYLE,n||{})):U(o,G({},this.SHAPE_STYLE,n||{})),V(e,o),o},we.prototype.drawConnection=function(e,t,n){var o=fe(t.waypoints,G({},this.CONNECTION_STYLE,n||{}));return V(e,o),o},we.prototype.getShapePath=function(e){var t=e.x,n=e.y,o=e.width;return le([["M",t,n],["l",o,0],["l",0,e.height],["l",-o,0],["z"]])},we.prototype.getConnectionPath=function(e){var t,n,o=e.waypoints,r=[];for(t=0;n=o[t];t++)n=n.original||n,r.push([0===t?"M":"L",n.x,n.y]);return le(r)},we.$inject=["eventBus","styles"];const je={__init__:["defaultRenderer"],defaultRenderer:["type",we],styles:["type",function(){var e={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},t=this;this.cls=function(e,t,n){return G(this.style(t,n),{class:e})},this.style=function(t,n){x(t)||n||(n=t,t=[]);var o=S(t,function(t,n){return G(t,e[n]||{})},{});return n?G(o,n):o},this.computeStyle=function(e,n,o){return x(n)||(o=n,n=[]),t.style(n||[],G({},o,e||{}))}}]};function Be(e,t){return t.forEach(function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach(function(n){if("default"!==n&&!(n in e)){var o=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,o.get?o:{enumerable:!0,get:function(){return t[n]}})}})}),Object.freeze(e)}const ke=Object.prototype.toString,De=Object.prototype.hasOwnProperty;function Se(e,t){return De.call(e,t)}function ze(e,t){let n,o;if(void 0===e)return;const r=(i=e,"[object Array]"===ke.call(i)?Oe:Pe);var i;for(let i in e)if(Se(e,i)&&(n=e[i],o=t(n,r(i)),!1===o))return n}function Pe(e){return e}function Oe(e){return Number(e)}function Me(e,...t){const n=e.style;return ze(t,function(e){e&&ze(e,function(e,t){n[t]=e})}),e}function Re(e,t,n){return 2==arguments.length?e.getAttribute(t):null===n?e.removeAttribute(t):(e.setAttribute(t,n),e)}const Te=Object.prototype.toString;function Le(e){return new $e(e)}function $e(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}function Fe(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}function We(e,t,n){var o=n?e:e.parentNode;return o&&"function"==typeof o.closest&&o.closest(t)||null}$e.prototype.add=function(e){return this.list.add(e),this},$e.prototype.remove=function(e){return"[object RegExp]"==Te.call(e)?this.removeMatching(e):(this.list.remove(e),this)},$e.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},$e.prototype.toggle=function(e,t){return void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this},$e.prototype.array=function(){return Array.from(this.list)},$e.prototype.has=$e.prototype.contains=function(e){return this.list.contains(e)};var Ie,Ge,qe,Ve={};function Ne(){Ie=window.addEventListener?"addEventListener":"attachEvent",Ge=window.removeEventListener?"removeEventListener":"detachEvent",qe="addEventListener"!==Ie?"on":""}var He,Ue=Be({__proto__:null,bind:Ve.bind=function(e,t,n,o){return Ie||Ne(),e[Ie](qe+t,n,o||!1),n},unbind:Ve.unbind=function(e,t,n,o){return Ge||Ne(),e[Ge](qe+t,n,o||!1),n},default:Ve},[Ve]),Ye=["focus","blur"],Xe=function(e,t,n,o,r){return-1!==Ye.indexOf(n)&&(r=!0),Ue.bind(e,n,function(n){var r=n.target||n.srcElement;n.delegateTarget=We(r,t,!0),n.delegateTarget&&o.call(e,n)},r)},Ze=function(e,t,n,o){return-1!==Ye.indexOf(t)&&(o=!0),Ue.unbind(e,t,n,o)},Ke=!1;"undefined"!=typeof document&&((He=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',Ke=!He.getElementsByTagName("link").length,He=void 0);var Qe={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:Ke?[1,"X<div>","</div>"]:[0,"",""]};Qe.td=Qe.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],Qe.option=Qe.optgroup=[1,'<select multiple="multiple">',"</select>"],Qe.thead=Qe.tbody=Qe.colgroup=Qe.caption=Qe.tfoot=[1,"<table>","</table>"],Qe.polyline=Qe.ellipse=Qe.polygon=Qe.circle=Qe.text=Qe.line=Qe.path=Qe.rect=Qe.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];var Je=function(e,t){if("string"!=typeof e)throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var o=n[1];if("body"==o)return(r=t.createElement("html")).innerHTML=e,r.removeChild(r.lastChild);var r,i=Object.prototype.hasOwnProperty.call(Qe,o)?Qe[o]:Qe._default,s=i[0],a=i[1],c=i[2];for((r=t.createElement("div")).innerHTML=a+e+c;s--;)r=r.lastChild;if(r.firstChild==r.lastChild)return r.removeChild(r.firstChild);for(var l=t.createDocumentFragment();r.firstChild;)l.appendChild(r.removeChild(r.firstChild));return l};function et(e,t){return(t=t||document).querySelector(e)}function tt(e){e.parentNode&&e.parentNode.removeChild(e)}function nt(e,t){if(!e||!t)return-1;var n=e.indexOf(t);return-1!==n&&e.splice(n,1),n}function ot(e,t,n){if(e&&t){"number"!=typeof n&&(n=-1);var o=e.indexOf(t);if(-1!==o){if(o===n)return;if(-1===n)return;e.splice(o,1)}-1!==n?e.splice(n,0,t):e.push(t)}}function rt(e,t){return e&&t?e.indexOf(t):-1}var it=Math;function st(e){return _(e)&&j(e,"waypoints")}function at(e){return _(e)&&j(e,"labelTarget")}function ct(e){return{x:Math.round(e.x),y:Math.round(e.y)}}function lt(e){return{top:e.y,right:e.x+(e.width||0),bottom:e.y+(e.height||0),left:e.x}}function dt(e){return{x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}}function pt(e){return st(e)?function(e){for(var t=e.waypoints,n=t.reduce(function(e,n,o){var r,i,s=t[o-1];if(s){var a=e[e.length-1],c=a&&a.endLength||0,l=(r=s,i=n,Math.sqrt(Math.pow(r.x-i.x,2)+Math.pow(r.y-i.y,2)));e.push({start:s,end:n,startLength:c,endLength:c+l,length:l})}return e},[]),o=n.reduce(function(e,t){return e+t.length},0)/2,r=0,i=n[r];i.endLength<o;)i=n[++r];var s=(o-i.startLength)/i.length;return{x:i.start.x+(i.end.x-i.start.x)*s,y:i.start.y+(i.end.y-i.start.y)*s}}(e):ct({x:(t=e).x+(t.width||0)/2,y:t.y+(t.height||0)/2});var t}function ut(e,t){return Math.round(e*t)/t}function ht(e){return C(e)?e+"px":e}function At(e,t,n){const o=te("g");X(o).add(t);const r=void 0!==n?n:e.childNodes.length-1;return e.insertBefore(o,e.childNodes[r]||null),o}it.PI,it.min,it.max,it.pow,it.abs,Array.isArray;const ft={shape:["x","y","width","height"],connection:["waypoints"]};function gt(e,t,n,o){this._eventBus=t,this._elementRegistry=o,this._graphicsFactory=n,this._rootsIdx=0,this._layers={},this._planes=[],this._rootElement=null,this._focused=!1,this._init(e||{})}function vt(e,t){const n="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttribute("transform",n)}gt.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"],gt.prototype._init=function(e){const t=this._eventBus,n=this._container=function(e){const t=(e=G({},{width:"100%",height:"100%"},e)).container||document.body,n=document.createElement("div");return n.setAttribute("class","djs-container djs-parent"),Me(n,{position:"relative",overflow:"hidden",width:ht(e.width),height:ht(e.height)}),t.appendChild(n),n}(e),o=this._svg=te("svg");U(o,{width:"100%",height:"100%"}),Re(o,"tabindex",0),e.autoFocus&&t.on("element.hover",()=>{this.restoreFocus()}),t.on("element.mousedown",500,e=>{this.focus()}),o.addEventListener("focusin",()=>{this._setFocused(!0)}),o.addEventListener("focusout",()=>{this._setFocused(!1)}),V(n,o);const r=this._viewport=At(o,"viewport");e.deferUpdate&&(this._viewboxChanged=function(e){let t,n,o,r;function i(t){let i=Date.now(),c=t?0:r+300-i;if(c>0)return s(c);e.apply(o,n),a()}function s(e){t=setTimeout(i,e)}function a(){t&&clearTimeout(t),t=r=n=o=void 0}function c(...e){r=Date.now(),n=e,o=this,t||s(300)}return c.flush=function(){t&&i(!0),a()},c.cancel=a,c}(I(this._viewboxChanged,this))),t.on("diagram.init",()=>{t.fire("canvas.init",{svg:o,viewport:r})}),t.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed","root.set"],()=>{delete this._cachedViewbox}),t.on("diagram.destroy",500,this._destroy,this),t.on("diagram.clear",500,this._clear,this)},gt.prototype._destroy=function(){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});const e=this._container.parentNode;e&&e.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._planes,delete this._rootElement,delete this._viewport},gt.prototype._setFocused=function(e){e!=this._focused&&(this._focused=e,this._eventBus.fire("canvas.focus.changed",{focused:e}))},gt.prototype._clear=function(){this._elementRegistry.getAll().forEach(e=>{const t=_e(e);"root"===t?this.removeRootElement(e):this._removeElement(e,t)}),this._planes=[],this._rootElement=null,delete this._cachedViewbox},gt.prototype.focus=function(){this._svg.focus({preventScroll:!0}),this._setFocused(!0)},gt.prototype.restoreFocus=function(){document.activeElement===document.body&&this.focus()},gt.prototype.isFocused=function(){return this._focused},gt.prototype.getDefaultLayer=function(){return this.getLayer("base",0)},gt.prototype.getLayer=function(e,t){if(!e)throw new Error("must specify a name");let n=this._layers[e];if(n||(n=this._layers[e]=this._createLayer(e,t)),void 0!==t&&n.index!==t)throw new Error("layer <"+e+"> already created at index <"+t+">");return n.group},gt.prototype._getChildIndex=function(e){return S(this._layers,function(t,n){return n.visible&&e>=n.index&&t++,t},0)},gt.prototype._createLayer=function(e,t){void 0===t&&(t=1);const n=this._getChildIndex(t);return{group:At(this._viewport,"layer-"+e,n),index:t,visible:!0}},gt.prototype.showLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=this._viewport,o=t.group,r=t.index;if(t.visible)return o;const i=this._getChildIndex(r);return n.insertBefore(o,n.childNodes[i]||null),t.visible=!0,o},gt.prototype.hideLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=t.group;return t.visible?(se(n),t.visible=!1,n):n},gt.prototype._removeLayer=function(e){const t=this._layers[e];t&&(delete this._layers[e],se(t.group))},gt.prototype.getActiveLayer=function(){const e=this._findPlaneForRoot(this.getRootElement());return e?e.layer:null},gt.prototype.findRoot=function(e){if("string"==typeof e&&(e=this._elementRegistry.get(e)),!e)return;const t=this._findPlaneForRoot(function(e){for(;e.parent;)e=e.parent;return e}(e))||{};return t.rootElement},gt.prototype.getRootElements=function(){return this._planes.map(function(e){return e.rootElement})},gt.prototype._findPlaneForRoot=function(e){return B(this._planes,function(t){return t.rootElement===e})},gt.prototype.getContainer=function(){return this._container},gt.prototype._updateMarker=function(e,t,n){let o;e.id||(e=this._elementRegistry.get(e)),e.markers=e.markers||new Set,o=this._elementRegistry._elements[e.id],o&&(D([o.gfx,o.secondaryGfx],function(o){o&&(n?(e.markers.add(t),X(o).add(t)):(e.markers.delete(t),X(o).remove(t)))}),this._eventBus.fire("element.marker.update",{element:e,gfx:o.gfx,marker:t,add:!!n}))},gt.prototype.addMarker=function(e,t){this._updateMarker(e,t,!0)},gt.prototype.removeMarker=function(e,t){this._updateMarker(e,t,!1)},gt.prototype.hasMarker=function(e,t){return e.id||(e=this._elementRegistry.get(e)),!!e.markers&&e.markers.has(t)},gt.prototype.toggleMarker=function(e,t){this.hasMarker(e,t)?this.removeMarker(e,t):this.addMarker(e,t)},gt.prototype.getRootElement=function(){const e=this._rootElement;return e||this._planes.length?e:this.setRootElement(this.addRootElement(null))},gt.prototype.addRootElement=function(e){const t=this._rootsIdx++;e||(e={id:"__implicitroot_"+t,children:[],isImplicit:!0});const n=e.layer="root-"+t;this._ensureValid("root",e);const o=this.getLayer(n,0);return this.hideLayer(n),this._addRoot(e,o),this._planes.push({rootElement:e,layer:o}),e},gt.prototype.removeRootElement=function(e){if("string"==typeof e&&(e=this._elementRegistry.get(e)),this._findPlaneForRoot(e))return this._removeRoot(e),this._removeLayer(e.layer),this._planes=this._planes.filter(function(t){return t.rootElement!==e}),this._rootElement===e&&(this._rootElement=null),e},gt.prototype.setRootElement=function(e){if(e===this._rootElement)return e;let t;if(!e)throw new Error("rootElement required");return t=this._findPlaneForRoot(e),t||(e=this.addRootElement(e)),this._setRoot(e),e},gt.prototype._removeRoot=function(e){const t=this._elementRegistry,n=this._eventBus;n.fire("root.remove",{element:e}),n.fire("root.removed",{element:e}),t.remove(e)},gt.prototype._addRoot=function(e,t){const n=this._elementRegistry,o=this._eventBus;o.fire("root.add",{element:e}),n.add(e,t),o.fire("root.added",{element:e,gfx:t})},gt.prototype._setRoot=function(e,t){const n=this._rootElement;n&&(this._elementRegistry.updateGraphics(n,null,!0),this.hideLayer(n.layer)),e&&(t||(t=this._findPlaneForRoot(e).layer),this._elementRegistry.updateGraphics(e,this._svg,!0),this.showLayer(e.layer)),this._rootElement=e,this._eventBus.fire("root.set",{element:e})},gt.prototype._ensureValid=function(e,t){if(!t.id)throw new Error("element must have an id");if(this._elementRegistry.get(t.id))throw new Error("element <"+t.id+"> already exists");const n=ft[e],o=z(n,function(e){return void 0!==t[e]});if(!o)throw new Error("must supply { "+n.join(", ")+" } with "+e)},gt.prototype._setParent=function(e,t,n){ot(t.children,e,n),e.parent=t},gt.prototype._addElement=function(e,t,n,o){n=n||this.getRootElement();const r=this._eventBus,i=this._graphicsFactory;this._ensureValid(e,t),r.fire(e+".add",{element:t,parent:n}),this._setParent(t,n,o);const s=i.create(e,t,o);return this._elementRegistry.add(t,s),i.update(e,t,s),r.fire(e+".added",{element:t,gfx:s}),t},gt.prototype.addShape=function(e,t,n){return this._addElement("shape",e,t,n)},gt.prototype.addConnection=function(e,t,n){return this._addElement("connection",e,t,n)},gt.prototype._removeElement=function(e,t){const n=this._elementRegistry,o=this._graphicsFactory,r=this._eventBus;if(e=n.get(e.id||e))return r.fire(t+".remove",{element:e}),o.remove(e),nt(e.parent&&e.parent.children,e),e.parent=null,r.fire(t+".removed",{element:e}),n.remove(e),e},gt.prototype.removeShape=function(e){return this._removeElement(e,"shape")},gt.prototype.removeConnection=function(e){return this._removeElement(e,"connection")},gt.prototype.getGraphics=function(e,t){return this._elementRegistry.getGraphics(e,t)},gt.prototype._changeViewbox=function(e){this._eventBus.fire("canvas.viewbox.changing"),e.apply(this),this._cachedViewbox=null,this._viewboxChanged()},gt.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})},gt.prototype.viewbox=function(e){if(void 0===e&&this._cachedViewbox)return structuredClone(this._cachedViewbox);const t=this._viewport,n=this.getSize();let o,r,i,s,a,c,l;return e?(this._changeViewbox(function(){a=Math.min(n.width/e.width,n.height/e.height);const o=this._svg.createSVGMatrix().scale(a).translate(-e.x,-e.y);ce(t,o)}),e):(i=this._rootElement?this.getActiveLayer():null,o=i&&i.getBBox()||{},s=ce(t),r=s?s.matrix:function(e,t,n,o,r,i){var s=oe().createSVGMatrix();switch(arguments.length){case 0:return s;case 1:return re(s,e);case 6:return re(s,{a:e,b:t,c:n,d:o,e:r,f:i})}}(),a=ut(r.a,1e3),c=ut(-r.e||0,1e3),l=ut(-r.f||0,1e3),e=this._cachedViewbox={x:c?c/a:0,y:l?l/a:0,width:n.width/a,height:n.height/a,scale:a,inner:{width:o.width||0,height:o.height||0,x:o.x||0,y:o.y||0},outer:n})},gt.prototype.scroll=function(e){const t=this._viewport;let n=t.getCTM();return e&&this._changeViewbox(function(){e=G({dx:0,dy:0},e||{}),n=this._svg.createSVGMatrix().translate(e.dx,e.dy).multiply(n),vt(t,n)}),{x:n.e,y:n.f}},gt.prototype.scrollToElement=function(e,t){let n=100;"string"==typeof e&&(e=this._elementRegistry.get(e));const o=this.findRoot(e);if(o!==this.getRootElement()&&this.setRootElement(o),o===e)return;t||(t={}),"number"==typeof t&&(n=t),t={top:t.top||n,right:t.right||n,bottom:t.bottom||n,left:t.left||n};const r=xe(e),i=lt(r),s=this.viewbox(),a=this.zoom();let c,l;s.y+=t.top/a,s.x+=t.left/a,s.width-=(t.right+t.left)/a,s.height-=(t.bottom+t.top)/a;const d=lt(s);if(r.width<s.width&&r.height<s.height){const e=Math.max(0,i.right-d.right),t=Math.min(0,i.left-d.left),n=Math.max(0,i.bottom-d.bottom),o=Math.min(0,i.top-d.top);c=e||t,l=n||o}else c=r.x-s.x,l=r.y-s.y;this.scroll({dx:-c*a,dy:-l*a})},gt.prototype.zoom=function(e,t){if(!e)return this.viewbox(e).scale;if("fit-viewport"===e)return this._fitViewport(t);let n,o;return this._changeViewbox(function(){"object"!=typeof t&&(n=this.viewbox().outer,t={x:n.width/2,y:n.height/2}),o=this._setZoom(e,t)}),ut(o.a,1e3)},gt.prototype._fitViewport=function(e){const t=this.viewbox(),n=t.outer,o=t.inner;let r,i;return o.x>=0&&o.y>=0&&o.x+o.width<=n.width&&o.y+o.height<=n.height&&!e?i={x:0,y:0,width:Math.max(o.width+o.x,n.width),height:Math.max(o.height+o.y,n.height)}:(r=Math.min(1,n.width/o.width,n.height/o.height),i={x:o.x+(e?o.width/2-n.width/r/2:0),y:o.y+(e?o.height/2-n.height/r/2:0),width:n.width/r,height:n.height/r}),this.viewbox(i),this.viewbox(!1).scale},gt.prototype._setZoom=function(e,t){const n=this._svg,o=this._viewport,r=n.createSVGMatrix(),i=n.createSVGPoint();let s,a,c,l,d;c=o.getCTM();const p=c.a;return t?(s=G(i,t),a=s.matrixTransform(c.inverse()),l=r.translate(a.x,a.y).scale(1/p*e).translate(-a.x,-a.y),d=c.multiply(l)):d=r.scale(e),vt(this._viewport,d),d},gt.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}},gt.prototype.getAbsoluteBBox=function(e){const t=this.viewbox();let n;return n=e.waypoints?this.getGraphics(e).getBBox():e,{x:n.x*t.scale-t.x*t.scale,y:n.y*t.scale-t.y*t.scale,width:n.width*t.scale,height:n.height*t.scale}},gt.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var yt="data-element-id";function mt(e){this._elements={},this._eventBus=e}function Et(e,t,n){var o=function(e,t,n,o){var r=n.inverse;return Object.defineProperty(e,"remove",{value:function(e){var n=this.indexOf(e);return-1!==n&&(this.splice(n,1),t.unset(e,r,o)),e}}),Object.defineProperty(e,"contains",{value:function(e){return-1!==this.indexOf(e)}}),Object.defineProperty(e,"add",{value:function(e,n){var i=this.indexOf(e);if(void 0===n){if(-1!==i)return;n=this.length}-1!==i&&this.splice(i,1),this.splice(n,0,e),-1===i&&t.set(e,r,o)}}),Object.defineProperty(e,"__refs_collection",{value:!0}),e}(n[t.name]||[],e,t,n);Object.defineProperty(n,t.name,{enumerable:t.enumerable,value:o}),o.length&&o.forEach(function(o){e.set(o,t.inverse,n)})}function xt(e,t){if(!(this instanceof xt))return new xt(e,t);e.inverse=t,t.inverse=e,this.props={},this.props[e.name]=e,this.props[t.name]=t}mt.$inject=["eventBus"],mt.prototype.add=function(e,t,n){var o=e.id;this._validateId(o),U(t,yt,o),n&&U(n,yt,o),this._elements[o]={element:e,gfx:t,secondaryGfx:n}},mt.prototype.remove=function(e){var t=this._elements,n=e.id||e,o=n&&t[n];o&&(U(o.gfx,yt,""),o.secondaryGfx&&U(o.secondaryGfx,yt,""),delete t[n])},mt.prototype.updateId=function(e,t){this._validateId(t),"string"==typeof e&&(e=this.get(e)),this._eventBus.fire("element.updateId",{element:e,newId:t});var n=this.getGraphics(e),o=this.getGraphics(e,!0);this.remove(e),e.id=t,this.add(e,n,o)},mt.prototype.updateGraphics=function(e,t,n){var o=e.id||e,r=this._elements[o];return n?r.secondaryGfx=t:r.gfx=t,t&&U(t,yt,o),t},mt.prototype.get=function(e){var t;t="string"==typeof e?e:e&&U(e,yt);var n=this._elements[t];return n&&n.element},mt.prototype.filter=function(e){var t=[];return this.forEach(function(n,o){e(n,o)&&t.push(n)}),t},mt.prototype.find=function(e){for(var t=this._elements,n=Object.keys(t),o=0;o<n.length;o++){var r=t[n[o]],i=r.element;if(e(i,r.gfx))return i}},mt.prototype.getAll=function(){return this.filter(function(e){return e})},mt.prototype.forEach=function(e){var t=this._elements;Object.keys(t).forEach(function(n){var o=t[n],r=o.element,i=o.gfx;return e(r,i)})},mt.prototype.getGraphics=function(e,t){var n=e.id||e,o=this._elements[n];return o&&(t?o.secondaryGfx:o.gfx)},mt.prototype._validateId=function(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")},xt.prototype.bind=function(e,t){if("string"==typeof t){if(!this.props[t])throw new Error("no property <"+t+"> in ref");t=this.props[t]}t.collection?Et(this,t,e):function(e,t,n){var o=t.inverse,r=n[t.name];Object.defineProperty(n,t.name,{configurable:t.configurable,enumerable:t.enumerable,get:function(){return r},set:function(t){if(t!==r){var i=r;r=null,i&&e.unset(i,o,n),r=t,e.set(r,o,n)}}})}(this,t,e)},xt.prototype.ensureRefsCollection=function(e,t){var n=e[t.name];return function(e){return!0===e.__refs_collection}(n)||Et(this,t,e),n},xt.prototype.ensureBound=function(e,t){(function(e,t){return Object.prototype.hasOwnProperty.call(e,t.name||t)})(e,t)||this.bind(e,t)},xt.prototype.unset=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).remove(n):e[t.name]=void 0)},xt.prototype.set=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).add(n):e[t.name]=n)};var _t=new xt({name:"children",enumerable:!0,collection:!0},{name:"parent"}),Ct=new xt({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),bt=new xt({name:"attachers",collection:!0},{name:"host"}),wt=new xt({name:"outgoing",collection:!0},{name:"source"}),jt=new xt({name:"incoming",collection:!0},{name:"target"});function Bt(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(e){var t=this.label,n=this.labels;!e&&t?n.remove(t):n.add(e,0)}}),_t.bind(this,"parent"),Ct.bind(this,"labels"),wt.bind(this,"outgoing"),jt.bind(this,"incoming")}function kt(){Bt.call(this),_t.bind(this,"children"),bt.bind(this,"host"),bt.bind(this,"attachers")}function Dt(){Bt.call(this),_t.bind(this,"children")}function St(){kt.call(this),Ct.bind(this,"labelTarget")}function zt(){Bt.call(this),wt.bind(this,"source"),jt.bind(this,"target")}A(kt,Bt),A(Dt,kt),A(St,kt),A(zt,Bt);var Pt={connection:zt,shape:kt,label:St,root:Dt};function Ot(){this._uid=12}Ot.prototype.createRoot=function(e){return this.create("root",e)},Ot.prototype.createLabel=function(e){return this.create("label",e)},Ot.prototype.createShape=function(e){return this.create("shape",e)},Ot.prototype.createConnection=function(e){return this.create("connection",e)},Ot.prototype.create=function(e,t){return(t=G({},t||{})).id||(t.id=e+"_"+this._uid++),function(e,t){var n=Pt[e];if(!n)throw new Error("unknown type: <"+e+">");return G(new n,t)}(e,t)};var Mt="__fn",Rt=Array.prototype.slice;function Tt(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}function Lt(){}function $t(e){return e.childNodes[0]}function Ft(e,t,n){var o=ie();o.setTranslate(t,n),ce(e,o)}function Wt(e,t){this._eventBus=e,this._elementRegistry=t}function It(e,t,n){var o=n||t.firstChild;e!==o&&t.insertBefore(e,o)}Tt.prototype.on=function(e,t,n,o){if(e=x(e)?e:[e],b(t)&&(o=n,n=t,t=1e3),!C(t))throw new Error("priority must be a number");var r=n;o&&((r=I(n,o))[Mt]=n[Mt]||n);var i=this;e.forEach(function(e){i._addListener(e,{priority:t,callback:r,next:null})})},Tt.prototype.once=function(e,t,n,o){var r=this;if(b(t)&&(o=n,n=t,t=1e3),!C(t))throw new Error("priority must be a number");function i(){i.__isTomb=!0;var t=n.apply(o,arguments);return r.off(e,i),t}i[Mt]=n,this.on(e,t,i)},Tt.prototype.off=function(e,t){e=x(e)?e:[e];var n=this;e.forEach(function(e){n._removeListener(e,t)})},Tt.prototype.createEvent=function(e){var t=new Lt;return t.init(e),t},Tt.prototype.fire=function(e,t){var n,o,r,i;if(i=Rt.call(arguments),"object"==typeof e&&(e=(t=e).type),!e)throw new Error("no event type specified");if(o=this._listeners[e]){n=t instanceof Lt?t:this.createEvent(t),i[0]=n;var s=n.type;e!==s&&(n.type=e);try{r=this._invokeListeners(n,i,o)}finally{e!==s&&(n.type=s)}return void 0===r&&n.defaultPrevented&&(r=!1),r}},Tt.prototype.handleError=function(e){return!1===this.fire("error",{error:e})},Tt.prototype._destroy=function(){this._listeners={}},Tt.prototype._invokeListeners=function(e,t,n){for(var o;n&&!e.cancelBubble;)o=this._invokeListener(e,t,n),n=n.next;return o},Tt.prototype._invokeListener=function(e,t,n){var o;if(n.callback.__isTomb)return o;try{o=function(e,t){return e.apply(null,t)}(n.callback,t),void 0!==o&&(e.returnValue=o,e.stopPropagation()),!1===o&&e.preventDefault()}catch(e){if(!this.handleError(e))throw console.error("unhandled error in event listener",e),e}return o},Tt.prototype._addListener=function(e,t){var n,o=this._getListeners(e);if(o){for(;o;){if(o.priority<t.priority)return t.next=o,void(n?n.next=t:this._setListeners(e,t));n=o,o=o.next}n.next=t}else this._setListeners(e,t)},Tt.prototype._getListeners=function(e){return this._listeners[e]},Tt.prototype._setListeners=function(e,t){this._listeners[e]=t},Tt.prototype._removeListener=function(e,t){var n,o,r,i=this._getListeners(e);if(t)for(;i;)n=i.next,(r=i.callback)!==t&&r[Mt]!==t||(o?o.next=n:this._setListeners(e,n)),o=i,i=n;else this._setListeners(e,null)},Lt.prototype.stopPropagation=function(){this.cancelBubble=!0},Lt.prototype.preventDefault=function(){this.defaultPrevented=!0},Lt.prototype.init=function(e){G(this,e||{})},Wt.$inject=["eventBus","elementRegistry"],Wt.prototype._getChildrenContainer=function(e){var t,n=this._elementRegistry.getGraphics(e);return e.parent?(t=function(e){return e.parentNode.childNodes[1]}(n),t||(X(t=te("g")).add("djs-children"),V(n.parentNode,t))):t=n,t},Wt.prototype._clear=function(e){var t=$t(e);return Fe(t),t},Wt.prototype._createContainer=function(e,t,n,o){var r=te("g");X(r).add("djs-group"),void 0!==n?It(r,t,t.childNodes[n]):V(t,r);var i=te("g");X(i).add("djs-element"),X(i).add("djs-"+e),o&&X(i).add("djs-frame"),V(r,i);var s=te("g");return X(s).add("djs-visual"),V(i,s),i},Wt.prototype.create=function(e,t,n){var o=this._getChildrenContainer(t.parent);return this._createContainer(e,o,n,Ce(t))},Wt.prototype.updateContainments=function(e){var t,n=this,o=this._elementRegistry;t=S(e,function(e,t){return t.parent&&(e[t.parent.id]=t.parent),e},{}),D(t,function(e){var t=e.children;if(t){var r=n._getChildrenContainer(e);D(t.slice().reverse(),function(e){It(o.getGraphics(e).parentNode,r)})}})},Wt.prototype.drawShape=function(e,t,n={}){return this._eventBus.fire("render.shape",{gfx:e,element:t,attrs:n})},Wt.prototype.getShapePath=function(e){return this._eventBus.fire("render.getShapePath",e)},Wt.prototype.drawConnection=function(e,t,n={}){return this._eventBus.fire("render.connection",{gfx:e,element:t,attrs:n})},Wt.prototype.getConnectionPath=function(e){return this._eventBus.fire("render.getConnectionPath",e)},Wt.prototype.update=function(e,t,n){if(t.parent){var o=this._clear(n);if("shape"===e)this.drawShape(o,t),Ft(n,t.x,t.y);else{if("connection"!==e)throw new Error("unknown type: "+e);this.drawConnection(o,t)}t.hidden?U(n,"display","none"):U(n,"display","block")}},Wt.prototype.remove=function(e){se(this._elementRegistry.getGraphics(e).parentNode)};const Gt={__depends__:[je],__init__:["canvas"],canvas:["type",gt],elementRegistry:["type",mt],elementFactory:["type",Ot],eventBus:["type",Tt],graphicsFactory:["type",Wt]};function qt(e,t){this._injector=t||function(e){return t=[{config:["value",e=e||{}]},Gt].concat(e.modules||[]),(n=new u(t)).init(),n;var t,n}(e),this.get("eventBus").fire("diagram.init")}function Vt(e){e&&"function"==typeof e.stopPropagation&&e.stopPropagation()}function Nt(e){return e.originalEvent||e.srcEvent}function Ht(e){Vt(e),Vt(Nt(e))}function Ut(e){return e.pointers&&e.pointers.length&&(e=e.pointers[0]),e.touches&&e.touches.length&&(e=e.touches[0]),e?{x:e.clientX,y:e.clientY}:null}function Yt(e,t){return(Nt(e)||e).button===t}function Xt(e){return Yt(e,0)}function Zt(e){var t=Nt(e)||e;return Xt(e)&&t.shiftKey}function Kt(e){return!0}function Qt(e){return Xt(e)||function(e){return Yt(e,1)}(e)}function Jt(e,t,n){var o=this;function r(n,o,r){var i,s;(function(e,t){return!(c[e]||Xt)(t)})(n,o)||(r?s=t.getGraphics(r):(i=o.delegateTarget||o.target)&&(s=i,r=t.get(s)),s&&r&&!1===e.fire(n,{element:r,gfx:s,originalEvent:o})&&(o.stopPropagation(),o.preventDefault()))}var i={};function s(e){return i[e]}var a={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},c={"element.contextmenu":Kt,"element.mousedown":Qt,"element.mouseup":Qt,"element.click":Qt,"element.dblclick":Qt};function l(e,t,n,o){var s=i[n]=function(e){r(n,e)};o&&(c[n]=o),s.$delegate=Xe(e,"svg, .djs-element",t,s)}function d(e,t,n){var o=s(n);o&&Ze(e,t,o.$delegate)}e.on("canvas.destroy",function(e){var t;t=e.svg,D(a,function(e,n){d(t,n,e)})}),e.on("canvas.init",function(e){var t;t=e.svg,D(a,function(e,n){l(t,n,e)})}),e.on(["shape.added","connection.added"],function(t){var n=t.element,o=t.gfx;e.fire("interactionEvents.createHit",{element:n,gfx:o})}),e.on(["shape.changed","connection.changed"],500,function(t){var n=t.element,o=t.gfx;e.fire("interactionEvents.updateHit",{element:n,gfx:o})}),e.on("interactionEvents.createHit",500,function(e){var t=e.element,n=e.gfx;o.createDefaultHit(t,n)}),e.on("interactionEvents.updateHit",function(e){var t=e.element,n=e.gfx;o.updateDefaultHit(t,n)});var p=A("djs-hit djs-hit-stroke"),u=A("djs-hit djs-hit-click-stroke"),h={all:A("djs-hit djs-hit-all"),"click-stroke":u,stroke:p,"no-move":A("djs-hit djs-hit-no-move")};function A(e,t){return t=G({stroke:"white",strokeWidth:15},t||{}),n.cls(e,["no-fill","no-border"],t)}function f(e,t){var n=h[t];if(!n)throw new Error("invalid hit type <"+t+">");return U(e,n),e}function g(e,t){V(e,t)}this.removeHits=function(e){D((e||document).querySelectorAll(".djs-hit"),se)},this.createDefaultHit=function(e,t){var n,o=e.waypoints,r=e.isFrame;return o?this.createWaypointsHit(t,o):(n=r?"stroke":"all",this.createBoxHit(t,n,{width:e.width,height:e.height}))},this.createWaypointsHit=function(e,t){var n=fe(t);return f(n,"stroke"),g(e,n),n},this.createBoxHit=function(e,t,n){n=G({x:0,y:0},n);var o=te("rect");return f(o,t),U(o,n),g(e,o),o},this.updateDefaultHit=function(e,t){var n=et(".djs-hit",t);if(n)return e.waypoints?ge(n,e.waypoints):U(n,{width:e.width,height:e.height}),n},this.fire=r,this.triggerMouseEvent=function(e,t,n){var o=a[e];if(!o)throw new Error("unmapped DOM event name <"+e+">");return r(o,t,n)},this.mouseHandler=s,this.registerEvent=l,this.unregisterEvent=d}qt.prototype.get=function(e,t){return this._injector.get(e,t)},qt.prototype.invoke=function(e,t,n){return this._injector.invoke(e,t,n)},qt.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")},qt.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")},Jt.$inject=["eventBus","elementRegistry","styles"];const en={__init__:["interactionEvents"],interactionEvents:["type",Jt]};function tn(e,t){this._eventBus=e,this._canvas=t,this._selectedElements=[];var n=this;e.on(["shape.remove","connection.remove"],function(e){var t=e.element;n.deselect(t)}),e.on(["diagram.clear","root.set"],function(e){n.select(null)})}tn.$inject=["eventBus","canvas"],tn.prototype.deselect=function(e){var t=this._selectedElements,n=t.indexOf(e);if(-1!==n){var o=t.slice();t.splice(n,1),this._eventBus.fire("selection.changed",{oldSelection:o,newSelection:t})}},tn.prototype.get=function(){return this._selectedElements},tn.prototype.isSelected=function(e){return-1!==this._selectedElements.indexOf(e)},tn.prototype.select=function(e,t){var n=this._selectedElements,o=n.slice();x(e)||(e=e?[e]:[]);var r=this._canvas,i=r.getRootElement();e=e.filter(function(e){var t=r.findRoot(e);return i===t}),t?D(e,function(e){-1===n.indexOf(e)&&n.push(e)}):this._selectedElements=n=e.slice(),this._eventBus.fire("selection.changed",{oldSelection:o,newSelection:n})};var nn="hover",on="selected";function rn(e,t){function n(t,n){e.addMarker(t,n)}function o(t,n){e.removeMarker(t,n)}this._canvas=e,t.on("element.hover",function(e){n(e.element,nn)}),t.on("element.out",function(e){o(e.element,nn)}),t.on("selection.changed",function(e){var t=e.oldSelection,r=e.newSelection;D(t,function(e){-1===r.indexOf(e)&&o(e,on)}),D(r,function(e){-1===t.indexOf(e)&&n(e,on)})})}function sn(e,t,n,o){e.on("create.end",500,function(e){var n=e.context,o=n.canExecute,r=n.elements,i=(n.hints||{}).autoSelect;if(o){if(!1===i)return;x(i)?t.select(i):t.select(r.filter(an))}}),e.on("connect.end",500,function(e){var n=e.context.connection;n&&t.select(n)}),e.on("shape.move.end",500,function(e){var n=e.previousSelection||[],r=o.get(e.context.shape.id);B(n,function(e){return r.id===e.id})||t.select(r)}),e.on("element.click",function(e){if(Xt(e)){var o=e.element;o===n.getRootElement()&&(o=null);var r=t.isSelected(o),i=t.get().length>1,s=Zt(e);if(r&&i)return s?t.deselect(o):t.select(o);r?t.deselect(o):t.select(o,s)}})}function an(e){return!e.hidden}rn.$inject=["canvas","eventBus"],sn.$inject=["eventBus","selection","canvas","elementRegistry"];const cn={__init__:["selectionVisuals","selectionBehavior"],__depends__:[en],selection:["type",tn],selectionVisuals:["type",rn],selectionBehavior:["type",sn]};function ln(e){this._commandStack=e.get("commandStack",!1)}ln.$inject=["injector"],ln.prototype.allowed=function(e,t){var n=!0,o=this._commandStack;return o&&(n=o.canExecute(e,t)),void 0===n||n};const dn={__init__:["rules"],rules:["type",ln]};function pn(e,t,n){var o,r,i=this,s=n.get("dragging",!1);s&&t.on("drag.start",function(n){t.once("drag.move",1500,function(t){!function(t){if(!t.hover){var n=t.originalEvent,o=i._findTargetGfx(n),r=o&&e.get(o);o&&r&&(t.stopPropagation(),s.hover({element:r,gfx:o}),s.move(n))}}(t)})}),t.on("element.hover",function(e){o=e.gfx,r=e.element}),t.on("element.hover",1500,function(e){r&&t.fire("element.out",{element:r,gfx:o})}),t.on("element.out",function(){o=null,r=null}),this._findTargetGfx=function(e){var t;if(e instanceof MouseEvent)return t=Ut(e),We(document.elementFromPoint(t.x,t.y),"svg, .djs-element",!0)}}pn.$inject=["elementRegistry","eventBus","injector"];const un={__init__:["hoverFix"],hoverFix:["type",pn]};var hn=/^djs-cursor-.*$/;function An(e){var t=Le(document.body);t.removeMatching(hn),e&&t.add("djs-cursor-"+e)}function fn(){An(null)}function gn(e,t){function n(){return!1}return t=t||"element.click",e.once(t,5e3,n),function(){e.off(t,n)}}function vn(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function yn(e,t){return{x:e.x-t.x,y:e.y-t.y}}var mn=Math.round,En="djs-drag-active";function xn(e){e.preventDefault()}function _n(e,t,n,o){var r,i={threshold:5,trapClick:!0};function s(e){var n=t.viewbox(),o=t._container.getBoundingClientRect();return{x:n.x+(e.x-o.left)/n.scale,y:n.y+(e.y-o.top)/n.scale}}function a(t,n){n=n||r;var o=e.createEvent(G({},n.payload,n.data,{isTouch:n.isTouch}));return!1!==e.fire("drag."+t,o)&&e.fire(n.prefix+"."+t,o)}function c(e,o){var i,c=r.payload,l=r.displacement,d=r.globalStart,p=Ut(e),u=yn(p,d),h=r.localStart,A=s(p),g=yn(A,h);if(!r.active&&(o||(i=u,Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2))>r.threshold))){if(G(c,{x:mn(h.x+l.x),y:mn(h.y+l.y),dx:0,dy:0},{originalEvent:e}),!1===a("start"))return f();r.active=!0,r.keepSelection||(c.previousSelection=n.get(),n.select(null)),r.cursor&&An(r.cursor),t.addMarker(t.getRootElement(),En)}Ht(e),r.active&&(G(c,{x:mn(A.x+l.x),y:mn(A.y+l.y),dx:mn(g.x),dy:mn(g.y)},{originalEvent:e}),a("move"))}function l(e){var t=!0;r.active&&(e&&(r.payload.originalEvent=e,Ht(e)),t=a("end")),!1===t&&a("rejected"),a("ended",g(!0!==t))}function d(e){(function(e,t){return-1!==(e=x(e)?e:[e]).indexOf(t.key)||-1!==e.indexOf(t.code)})("Escape",e)&&(xn(e),f())}function p(t){var n;r.active&&(n=gn(e),setTimeout(n,400),xn(t)),l(t)}function u(e){c(e)}function h(e){var t=r.payload;t.hoverGfx=e.gfx,t.hover=e.element,a("hover")}function A(e){a("out");var t=r.payload;t.hoverGfx=null,t.hover=null}function f(e){var t;if(r){var n=r.active;n&&a("cancel"),t=g(e),n&&a("canceled",t)}}function g(i){var s,g;a("cleanup"),fn(),g=r.trapClick?p:l,Ue.unbind(document,"mousemove",c),Ue.unbind(document,"dragstart",xn),Ue.unbind(document,"selectstart",xn),Ue.unbind(document,"mousedown",g,!0),Ue.unbind(document,"mouseup",g,!0),Ue.unbind(document,"keyup",d),Ue.unbind(document,"touchstart",u,!0),Ue.unbind(document,"touchcancel",f,!0),Ue.unbind(document,"touchmove",c,!0),Ue.unbind(document,"touchend",l,!0),e.off("element.hover",h),e.off("element.out",A),t.removeMarker(t.getRootElement(),En);var v=r.payload.previousSelection;return!1!==i&&v&&!n.get().length&&function(e){var t=e.filter(function(e){return o.get(e.id)});t.length&&n.select(t)}(v),s=r,r=null,s}e.on("diagram.destroy",f),this.init=function(t,n,o,g){r&&f(!1),"string"==typeof n&&(g=o,o=n,n=null);var v,y,m,E,x,_=(g=G({},i,g||{})).data||{};E=g.trapClick?p:l,t?(v=Nt(t)||t,y=Ut(t),Ht(t),"dragstart"===v.type&&xn(v)):(v=null,y={x:0,y:0}),m=s(y),n||(n=m),x=function(e){return"undefined"!=typeof TouchEvent&&e instanceof TouchEvent}(v),r=G({prefix:o,data:_,payload:{},globalStart:y,displacement:yn(n,m),localStart:m,isTouch:x},g),g.manual||(x?(Ue.bind(document,"touchstart",u,!0),Ue.bind(document,"touchcancel",f,!0),Ue.bind(document,"touchmove",c,!0),Ue.bind(document,"touchend",l,!0)):(Ue.bind(document,"mousemove",c),Ue.bind(document,"dragstart",xn),Ue.bind(document,"selectstart",xn),Ue.bind(document,"mousedown",E,!0),Ue.bind(document,"mouseup",E,!0)),Ue.bind(document,"keyup",d),e.on("element.hover",h),e.on("element.out",A)),a("init"),g.autoActivate&&c(t,!0)},this.move=c,this.hover=h,this.out=A,this.end=l,this.cancel=f,this.context=function(){return r},this.setOptions=function(e){G(i,e)}}_n.$inject=["eventBus","canvas","selection","elementRegistry"];const Cn={__depends__:[un,cn],dragging:["type",_n]};function bn(e,t,n,o){function r(e,t){return o.allowed("connection.create",{source:e,target:t})}e.on("connect.hover",function(e){var t,n=e.context,o=n.start,i=e.hover;if(n.hover=i,!E(t=n.canExecute=r(o,i))){if(!1!==t)return n.source=o,void(n.target=i);E(t=n.canExecute=r(i,o))||!1!==t&&(n.source=i,n.target=o)}}),e.on(["connect.out","connect.cleanup"],function(e){var t=e.context;t.hover=null,t.source=null,t.target=null,t.canExecute=!1}),e.on("connect.end",function(e){var t=e.context,o=t.canExecute,r=t.connectionStart,i={x:e.x,y:e.y},s=t.source,a=t.target;if(!o)return!1;var c=null,l={connectionStart:wn(t)?i:r,connectionEnd:wn(t)?r:i};_(o)&&(c=o),t.connection=n.connect(s,a,c,l)}),this.start=function(e,n,o,r){_(o)||(r=o,o=pt(n)),t.init(e,"connect",{autoActivate:r,data:{shape:n,context:{start:n,connectionStart:o}}})}}function wn(e){var t=e.hover,n=e.source,o=e.target;return t&&n&&t===n&&n!==o}bn.$inject=["eventBus","dragging","modeling","rules"];var jn="connect-ok",Bn="connect-not-ok";function kn(e,t,n){var o=e.get("connectionPreview",!1);o&&t.on("connect.move",function(e){var t=e.context,n=t.canExecute,r=t.hover,i=t.source,s=t.start,a=t.startPosition,c=t.target,l=t.connectionStart||a,d=t.connectionEnd||{x:e.x,y:e.y},p=l,u=d;wn(t)&&(p=d,u=l),o.drawPreview(t,n,{source:i||s,target:c||r,connectionStart:p,connectionEnd:u})}),t.on("connect.hover",900,function(e){var t=e.context,o=e.hover,r=t.canExecute;null!==r&&n.addMarker(o,r?jn:Bn)}),t.on(["connect.out","connect.cleanup"],1100,function(e){var t=e.hover;t&&(n.removeMarker(t,jn),n.removeMarker(t,Bn))}),o&&t.on("connect.cleanup",function(e){o.cleanUp(e.context)})}kn.$inject=["injector","eventBus","canvas"];const Dn={__depends__:[cn,dn,Cn],__init__:["connectPreview"],connect:["type",bn],connectPreview:["type",kn]};function Sn(e){this._counter=0,this._prefix=(e?e+"-":"")+Math.floor(1e9*Math.random())+"-"}Sn.prototype.next=function(){return this._prefix+ ++this._counter};var zn=new Sn("ov");function Pn(e,t,n,o){var r,i;this._eventBus=t,this._canvas=n,this._elementRegistry=o,this._ids=zn,this._overlayDefaults=G({show:null,scale:!0},e&&e.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=(r=n.getContainer(),Me(i=Je('<div class="djs-overlay-container" />'),{position:"absolute",width:0,height:0}),r.insertBefore(i,r.firstChild),i),this._init()}function On(e,t,n){Me(e,{left:t+"px",top:n+"px"})}function Mn(e,t){e.style.display=!1===t?"none":""}function Rn(e,t){e.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(n){e.style[n+"transform"]=t})}Pn.$inject=["config.overlays","eventBus","canvas","elementRegistry"],Pn.prototype.get=function(e){if(w(e)&&(e={id:e}),w(e.element)&&(e.element=this._elementRegistry.get(e.element)),e.element){var t=this._getOverlayContainer(e.element,!0);return t?e.type?k(t.overlays,T({type:e.type})):t.overlays.slice():[]}return e.type?k(this._overlays,T({type:e.type})):e.id?this._overlays[e.id]:null},Pn.prototype.add=function(e,t,n){if(_(t)&&(n=t,t=null),e.id||(e=this._elementRegistry.get(e)),!n.position)throw new Error("must specifiy overlay position");if(!n.html)throw new Error("must specifiy overlay html");if(!e)throw new Error("invalid element specified");var o=this._ids.next();return n=G({},this._overlayDefaults,n,{id:o,type:t,element:e,html:n.html}),this._addOverlay(n),o},Pn.prototype.remove=function(e){var t=this.get(e)||[];x(t)||(t=[t]);var n=this;D(t,function(e){var t=n._getOverlayContainer(e.element,!0);if(e&&(tt(e.html),tt(e.htmlContainer),delete e.htmlContainer,delete e.element,delete n._overlays[e.id]),t){var o=t.overlays.indexOf(e);-1!==o&&t.overlays.splice(o,1)}})},Pn.prototype.isShown=function(){return"none"!==this._overlayRoot.style.display},Pn.prototype.show=function(){Mn(this._overlayRoot)},Pn.prototype.hide=function(){Mn(this._overlayRoot,!1)},Pn.prototype.clear=function(){this._overlays={},this._overlayContainers=[],Fe(this._overlayRoot)},Pn.prototype._updateOverlayContainer=function(e){var t=e.element,n=e.html,o=t.x,r=t.y;if(t.waypoints){var i=xe(t);o=i.x,r=i.y}On(n,o,r),Re(e.html,"data-container-id",t.id)},Pn.prototype._updateOverlay=function(e){var t,n,o=e.position,r=e.htmlContainer,i=e.element,s=o.left,a=o.top;void 0!==o.right&&(t=i.waypoints?xe(i).width:i.width,s=-1*o.right+t),void 0!==o.bottom&&(n=i.waypoints?xe(i).height:i.height,a=-1*o.bottom+n),On(r,s||0,a||0),this._updateOverlayVisibilty(e,this._canvas.viewbox())},Pn.prototype._createOverlayContainer=function(e){var t=Je('<div class="djs-overlays" />');Me(t,{position:"absolute"}),this._overlayRoot.appendChild(t);var n={html:t,element:e,overlays:[]};return this._updateOverlayContainer(n),this._overlayContainers.push(n),n},Pn.prototype._updateRoot=function(e){var t=e.scale||1,n="matrix("+[t,0,0,t,-1*e.x*t,-1*e.y*t].join(",")+")";Rn(this._overlayRoot,n)},Pn.prototype._getOverlayContainer=function(e,t){var n=B(this._overlayContainers,function(t){return t.element===e});return n||t?n:this._createOverlayContainer(e)},Pn.prototype._addOverlay=function(e){var t,n,o=e.id,r=e.element,i=e.html;i.get&&i.constructor.prototype.jquery&&(i=i.get(0)),w(i)&&(i=Je(i)),n=this._getOverlayContainer(r),Me(t=Je('<div class="djs-overlay" data-overlay-id="'+o+'">'),{position:"absolute"}),t.appendChild(i),e.type&&Le(t).add("djs-overlay-"+e.type),Mn(t,this._canvas.findRoot(r)===this._canvas.getRootElement()),e.htmlContainer=t,n.overlays.push(e),n.html.appendChild(t),this._overlays[o]=e,this._updateOverlay(e),this._updateOverlayVisibilty(e,this._canvas.viewbox())},Pn.prototype._updateOverlayVisibilty=function(e,t){var n=e.show,o=this._canvas.findRoot(e.element),r=n&&n.minZoom,i=n&&n.maxZoom,s=e.htmlContainer,a=!0;(o!==this._canvas.getRootElement()||n&&(m(r)&&r>t.scale||m(i)&&i<t.scale))&&(a=!1),Mn(s,a),this._updateOverlayScale(e,t)},Pn.prototype._updateOverlayScale=function(e,t){var n,o,r,i=e.scale,s=e.htmlContainer,a="";!0!==i&&(!1===i?(n=1,o=1):(n=i.min,o=i.max),m(n)&&t.scale<n&&(r=(1/t.scale||1)*n),m(o)&&t.scale>o&&(r=(1/t.scale||1)*o)),m(r)&&(a="scale("+r+","+r+")"),Rn(s,a)},Pn.prototype._updateOverlaysVisibilty=function(e){var t=this;D(this._overlays,function(n){t._updateOverlayVisibilty(n,e)})},Pn.prototype._init=function(){var e=this._eventBus,t=this;e.on("canvas.viewbox.changing",function(e){t.hide()}),e.on("canvas.viewbox.changed",function(e){var n;n=e.viewbox,t._updateRoot(n),t._updateOverlaysVisibilty(n),t.show()}),e.on(["shape.remove","connection.remove"],function(e){var n=e.element;D(t.get({element:n}),function(e){t.remove(e.id)});var o=t._getOverlayContainer(n);if(o){tt(o.html);var r=t._overlayContainers.indexOf(o);-1!==r&&t._overlayContainers.splice(r,1)}}),e.on("element.changed",500,function(e){var n=e.element,o=t._getOverlayContainer(n,!0);o&&(D(o.overlays,function(e){t._updateOverlay(e)}),t._updateOverlayContainer(o))}),e.on("element.marker.update",function(e){var n=t._getOverlayContainer(e.element,!0);n&&Le(n.html)[e.add?"add":"remove"](e.marker)}),e.on("root.set",function(){t._updateOverlaysVisibilty(t._canvas.viewbox())}),e.on("diagram.clear",this.clear,this)};const Tn={__init__:["overlays"],overlays:["type",Pn]},Ln=new Sn;function $n(e){this._scheduled={},e.on("diagram.destroy",()=>{Object.keys(this._scheduled).forEach(e=>{this.cancel(e)})})}$n.$inject=["eventBus"],$n.prototype.schedule=function(e,t=Ln.next()){this.cancel(t);const n=this._schedule(e,t);return this._scheduled[t]=n,n.promise},$n.prototype._schedule=function(e,t){const n=function(){const e={};return e.promise=new Promise((t,n)=>{e.resolve=t,e.reject=n}),e}();return{executionId:setTimeout(()=>{try{this._scheduled[t]=null;try{n.resolve(e())}catch(e){n.reject(e)}}catch(e){console.error("Scheduler#_schedule execution failed",e)}}),promise:n.promise}},$n.prototype.cancel=function(e){const t=this._scheduled[e];t&&(this._cancel(t),this._scheduled[e]=null)},$n.prototype._cancel=function(e){clearTimeout(e.executionId)};const Fn={scheduler:["type",$n]};function Wn(e){return CSS.escape(e)}var In=".entry";function Gn(e,t,n,o){this._canvas=e,this._elementRegistry=t,this._eventBus=n,this._scheduler=o,this._current=null,this._init()}Gn.$inject=["canvas","elementRegistry","eventBus","scheduler"],Gn.prototype._init=function(){var e=this;this._eventBus.on("selection.changed",function(t){var n=t.newSelection,o=n.length?1===n.length?n[0]:n:null;o?e.open(o,!0):e.close()}),this._eventBus.on("elements.changed",function(t){var n=t.elements,o=e._current;if(o){var r=o.target,i=x(r)?r:[r];if(i.filter(function(e){return n.includes(e)}).length){e.close();var s=i.filter(function(t){return e._elementRegistry.get(t.id)});s.length&&e._updateAndOpen(s.length>1?s:s[0])}}}),this._eventBus.on("canvas.viewbox.changed",function(){e._updatePosition()}),this._eventBus.on("element.marker.update",function(t){if(e.isOpen()){var n=t.element,o=e._current;(x(o.target)?o.target:[o.target]).includes(n)&&e._updateVisibility()}}),this._container=this._createContainer()},Gn.prototype._createContainer=function(){var e=Je('<div class="djs-context-pad-parent"></div>');return this._canvas.getContainer().appendChild(e),e},Gn.prototype.registerProvider=function(e,t){t||(t=e,e=1e3),this._eventBus.on("contextPad.getProviders",e,function(e){e.providers.push(t)})},Gn.prototype.getEntries=function(e){var t=this._getProviders(),n=x(e)?"getMultiElementContextPadEntries":"getContextPadEntries",o={};return D(t,function(t){if(b(t[n])){var r=t[n](e);b(r)?o=r(o):D(r,function(e,t){o[t]=e})}}),o},Gn.prototype.trigger=function(e,t,n){var o,r,i=this,s=t.delegateTarget||t.target;return s?(o=Re(s,"data-action"),r=t.originalEvent||t,"mouseover"!==e?"mouseout"===e?(clearTimeout(this._timeout),void(this._mouseout&&(this._mouseout(),this._mouseout=null))):this.triggerEntry(o,e,r,n):void(this._timeout=setTimeout(function(){i._mouseout=i.triggerEntry(o,"hover",r,n)},300))):t.preventDefault()},Gn.prototype.triggerEntry=function(e,t,n,o){if(this.isShown()){var r=this._current.target,i=this._current.entries[e];if(i){var s=i.action;if(!1!==this._eventBus.fire("contextPad.trigger",{entry:i,event:n})){if(b(s)){if("click"===t)return s(n,r,o)}else if(s[t])return s[t](n,r,o);n.preventDefault()}}}},Gn.prototype.open=function(e,t){!t&&this.isOpen(e)||(this.close(),this._updateAndOpen(e))},Gn.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"contextPad.getProviders",providers:[]});return this._eventBus.fire(e),e.providers},Gn.prototype._updateAndOpen=function(e){var t,n=this.getEntries(e),o=this._createHtml(e);D(n,function(e,n){var r,i=e.group||"default",s=Je(e.html||'<div class="entry" draggable="true"></div>');Re(s,"data-action",n),(r=et("[data-group="+Wn(i)+"]",o))||(Re(r=Je('<div class="group"></div>'),"data-group",i),o.appendChild(r)),r.appendChild(s),e.className&&function(e,t){var n=Le(e);(t=x(t)?t:t.split(/\s+/g)).forEach(function(e){n.add(e)})}(s,e.className),e.title&&Re(s,"title",e.title),e.imageUrl&&(Re(t=Je("<img>"),"src",e.imageUrl),t.style.width="100%",t.style.height="100%",s.appendChild(t))}),Le(o).add("open"),this._current={entries:n,html:o,target:e},this._updatePosition(),this._updateVisibility(),this._eventBus.fire("contextPad.open",{current:this._current})},Gn.prototype._createHtml=function(e){var t=this,n=Je('<div class="djs-context-pad"></div>');return Xe(n,In,"click",function(e){t.trigger("click",e)}),Xe(n,In,"dragstart",function(e){t.trigger("dragstart",e)}),Xe(n,In,"mouseover",function(e){t.trigger("mouseover",e)}),Xe(n,In,"mouseout",function(e){t.trigger("mouseout",e)}),Ue.bind(n,"mousedown",function(e){e.stopPropagation()}),this._container.appendChild(n),this._eventBus.fire("contextPad.create",{target:e,pad:n}),n},Gn.prototype.getPad=function(e){let t;return console.warn(new Error("ContextPad#getPad is deprecated and will be removed in future library versions, cf. https://github.com/bpmn-io/diagram-js/pull/888")),t=this.isOpen()&&function(e,t){return e=x(e)?e:[e],t=x(t)?t:[t],e.length===t.length&&z(e,function(e){return t.includes(e)})}(this._current.target,e)?this._current.html:this._createHtml(e),{html:t}},Gn.prototype.close=function(){this.isOpen()&&(clearTimeout(this._timeout),this._container.innerHTML="",this._eventBus.fire("contextPad.close",{current:this._current}),this._current=null)},Gn.prototype.isOpen=function(e){var t=this._current;if(!t)return!1;if(!e)return!0;var n=t.target;return x(e)===x(n)&&(x(e)?e.length===n.length&&z(e,function(e){return n.includes(e)}):n===e)},Gn.prototype.isShown=function(){return this.isOpen()&&Le(this._current.html).has("open")},Gn.prototype.show=function(){this.isOpen()&&(Le(this._current.html).add("open"),this._updatePosition(),this._eventBus.fire("contextPad.show",{current:this._current}))},Gn.prototype.hide=function(){this.isOpen()&&(Le(this._current.html).remove("open"),this._eventBus.fire("contextPad.hide",{current:this._current}))},Gn.prototype._getPosition=function(e){if(!x(e)&&st(e)){var t=this._canvas.viewbox(),n=(i=e).waypoints[i.waypoints.length-1],o=n.x*t.scale-t.x*t.scale,r=n.y*t.scale-t.y*t.scale;return{left:o+8*this._canvas.zoom(),top:r}}var i,s=this._canvas.getContainer().getBoundingClientRect(),a=this._getTargetBounds(e);return{left:a.right-s.left+8*this._canvas.zoom(),top:a.top-s.top}},Gn.prototype._updatePosition=function(){this._scheduler.schedule(()=>{if(this.isOpen()){var e=this._current.html,t=this._getPosition(this._current.target);"x"in t&&"y"in t?(e.style.left=t.x+"px",e.style.top=t.y+"px"):["top","right","bottom","left"].forEach(function(n){n in t&&(e.style[n]=t[n]+"px")})}},"ContextPad#_updatePosition")},Gn.prototype._updateVisibility=function(){this._scheduler.schedule(()=>{if(this.isOpen()){var e=this,t=this._current.target;(x(t)?t:[t]).some(function(t){return e._canvas.hasMarker(t,"djs-element-hidden")})?e.hide():e.show()}},"ContextPad#_updateVisibility")},Gn.prototype._getTargetBounds=function(e){var t=this;return(x(e)?e:[e]).map(function(e){return t._canvas.getGraphics(e)}).reduce(function(e,t){const n=t.getBoundingClientRect();return e.top=Math.min(e.top,n.top),e.right=Math.max(e.right,n.right),e.bottom=Math.max(e.bottom,n.bottom),e.left=Math.min(e.left,n.left),e.x=e.left,e.y=e.top,e.width=e.right-e.left,e.height=e.bottom-e.top,e},{top:1/0,right:-1/0,bottom:-1/0,left:1/0})};const qn={__depends__:[en,Fn,Tn],contextPad:["type",Gn]},Vn=new Sn("ps");var Nn=["marker-start","marker-mid","marker-end"],Hn=["circle","ellipse","line","path","polygon","polyline","path","rect"];function Un(e,t,n,o){this._elementRegistry=e,this._canvas=n,this._styles=o}Un.$inject=["elementRegistry","eventBus","canvas","styles"],Un.prototype.cleanUp=function(){console.warn("PreviewSupport#cleanUp is deprecated and will be removed in future versions. You do not need to manually clean up previews anymore. cf. https://github.com/bpmn-io/diagram-js/pull/906")},Un.prototype.getGfx=function(e){return this._elementRegistry.getGraphics(e)},Un.prototype.addDragger=function(e,t,n,o="djs-dragger"){var r=Q(n=n||this.getGfx(e)),i=n.getBoundingClientRect();return this._cloneMarkers($t(r),o),U(r,this._styles.cls(o,[],{x:i.top,y:i.left})),V(t,r),U(r,"data-preview-support-element-id",e.id),r},Un.prototype.addFrame=function(e,t){var n=te("rect",{class:"djs-resize-overlay",width:e.width,height:e.height,x:e.x,y:e.y});return V(t,n),U(n,"data-preview-support-element-id",e.id),n},Un.prototype._cloneMarkers=function(e,t="djs-dragger",n=e){var o=this;e.childNodes&&e.childNodes.forEach(e=>{o._cloneMarkers(e,t,n)}),function(e){return-1!==Hn.indexOf(e.nodeName)}(e)&&Nn.forEach(function(r){if(U(e,r)){var i=function(e,t,n){return et("marker#"+U(e,t).match(/url\(['"]?#([^'"]*)['"]?\)/)[1],n||document)}(e,r,o._canvas.getContainer());i&&o._cloneMarker(n,e,i,r,t)}})},Un.prototype._cloneMarker=function(e,t,n,o,r="djs-dragger"){var i=[n.id,r,Vn.next()].join("-"),s=et("marker#"+n.id,e);e=e||this._canvas._svg;var a=s||Q(n);a.id=i,X(a).add(r);var c=et(":scope > defs",e);c||V(e,c=te("defs")),V(c,a),U(t,o,"url(#"+a.id+")")};const Yn={__init__:["previewSupport"],previewSupport:["type",Un]};var Xn="drop-ok",Zn="drop-not-ok",Kn="attach-ok",Qn="new-parent",Jn="create";function eo(e,t,n,o,r){function i(t,n){[Kn,Xn,Zn,Qn].forEach(function(o){o===n?e.addMarker(t,o):e.removeMarker(t,o)})}function s(){var e=t.context();e&&e.prefix===Jn&&t.cancel()}n.on(["create.move","create.hover"],function(e){var t=e.context,n=t.elements,o=e.hover,s=t.source,a=t.hints||{};if(!o)return t.canExecute=!1,void(t.target=null);to(e);var c={x:e.x,y:e.y},l=t.canExecute=o&&function(e,t,n,o,i){if(!t)return!1;var s=B(e=k(e,function(t){var n=t.labelTarget;return!(t.parent||at(t)&&-1!==e.indexOf(n))}),function(e){return!st(e)}),a=!1,c=!1,l=!1;no(e)&&(a=r.allowed("shape.attach",{position:n,shape:s,target:t})),a||(l=no(e)?r.allowed("shape.create",{position:n,shape:s,source:o,target:t}):r.allowed("elements.create",{elements:e,position:n,target:t}));var d=i.connectionTarget;return l||a?(s&&o&&(c=r.allowed("connection.create",{source:d===o?s:o,target:d===o?o:s,hints:{targetParent:t,targetAttach:a}})),{attach:a,connect:c}):(null===l||null===a)&&null}(n,o,c,s,a);o&&null!==l&&(t.target=o,l&&l.attach?i(o,Kn):i(o,l?Qn:Zn))}),n.on(["create.end","create.out","create.cleanup"],function(e){var t=e.hover;t&&i(t,null)}),n.on("create.end",function(e){var t=e.context,n=t.source,r=t.shape,i=t.elements,s=t.target,a=t.canExecute,c=a&&a.attach,l=a&&a.connect,d=t.hints||{};if(!1===a||!s)return!1;to(e);var p={x:e.x,y:e.y};r=l?o.appendShape(n,r,p,s,{attach:c,connection:!0===l?{}:l,connectionTarget:d.connectionTarget}):B(i=o.createElements(i,p,s,G({},d,{attach:c})),function(e){return!st(e)}),G(t,{elements:i,shape:r}),G(e,{elements:i,shape:r})}),n.on("create.init",function(){n.on("elements.changed",s),n.once(["create.cancel","create.end"],2e3,function(){n.off("elements.changed",s)})}),this.start=function(e,n,o){x(n)||(n=[n]);var r=B(n,function(e){return!st(e)});if(r){o=G({elements:n,hints:{},shape:r},o||{}),D(n,function(e){C(e.x)||(e.x=0),C(e.y)||(e.y=0)});var i=xe(k(n,function(e){return!e.hidden}));D(n,function(e){st(e)&&(e.waypoints=P(e.waypoints,function(e){return{x:e.x-i.x-i.width/2,y:e.y-i.y-i.height/2}})),G(e,{x:e.x-i.x-i.width/2,y:e.y-i.y-i.height/2})}),t.init(e,Jn,{cursor:"grabbing",autoActivate:!0,data:{shape:r,elements:n,context:o}})}}}function to(e){var t=e.context.createConstraints;t&&(t.left&&(e.x=Math.max(e.x,t.left)),t.right&&(e.x=Math.min(e.x,t.right)),t.top&&(e.y=Math.max(e.y,t.top)),t.bottom&&(e.y=Math.min(e.y,t.bottom)))}function no(e){return e&&1===e.length&&!st(e[0])}function oo(e,t,n,o,r){t.on("create.move",750,function(t){var i=t.hover,s=t.context,a=s.elements,c=s.dragGroup;c||(c=s.dragGroup=function(e){var t=te("g");U(t,r.cls("djs-drag-group",["no-events"]));var i=te("g");return e.forEach(function(e){var r;e.hidden||(e.waypoints?(r=n._createContainer("connection",i),n.drawConnection($t(r),e)):(r=n._createContainer("shape",i),n.drawShape($t(r),e),Ft(r,e.x,e.y)),o.addDragger(e,t,r))}),t}(a)),i?(c.parentNode||V(e.getActiveLayer(),c),Ft(c,t.x,t.y)):se(c)}),t.on("create.cleanup",function(e){var t=e.context.dragGroup;t&&se(t)})}eo.$inject=["canvas","dragging","eventBus","modeling","rules"],oo.$inject=["canvas","eventBus","graphicsFactory","previewSupport","styles"];const ro={__depends__:[Cn,Yn,dn,cn],__init__:["create","createPreview"],create:["type",eo],createPreview:["type",oo]};function io(e){this._eventBus=e,this._tools=[],this._active=null}io.$inject=["eventBus"],io.prototype.registerTool=function(e,t){var n=this._tools;if(!t)throw new Error('A tool has to be registered with it\'s "events"');n.push(e),this.bindEvents(e,t)},io.prototype.isActive=function(e){return e&&this._active===e},io.prototype.length=function(e){return this._tools.length},io.prototype.setActive=function(e){var t=this._eventBus;this._active!==e&&(this._active=e,t.fire("tool-manager.update",{tool:e}))},io.prototype.bindEvents=function(e,t){var n=this._eventBus,o=[];n.on(t.tool+".init",function(t){t.context.reactivate||!this.isActive(e)?this.setActive(e):this.setActive(null)},this),D(t,function(e){o.push(e+".ended"),o.push(e+".canceled")}),n.on(o,250,function(e){this._active&&(function(e){var t=e.originalEvent&&e.originalEvent.target;return t&&We(t,'.group[data-group="tools"]')}(e)||this.setActive(null))},this)};const so={__depends__:[Cn],__init__:["toolManager"],toolManager:["type",io]};function ao(e){var t=this;function n(e){t._lastMoveEvent=e}this._lastMoveEvent=null,e.on("canvas.init",function(e){(t._svg=e.svg).addEventListener("mousemove",n)}),e.on("canvas.destroy",function(){t._lastMouseEvent=null,t._svg.removeEventListener("mousemove",n)})}ao.$inject=["eventBus"],ao.prototype.getLastMoveEvent=function(){return this._lastMoveEvent||function(){var e=document.createEvent("MouseEvent");return e.initMouseEvent&&e.initMouseEvent("mousemove",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e}()};const co={__init__:["mouse"],mouse:["type",ao]};var lo="crosshair";function po(e,t,n,o,r,i,s){this._selection=r,this._dragging=n,this._mouse=s;var a=this;i.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"}),e.on("lasso.selection.end",function(t){var n=t.originalEvent.target;(t.hover||n instanceof SVGElement)&&e.once("lasso.selection.ended",function(){a.activateLasso(t.originalEvent,!0)})}),e.on("lasso.end",0,function(e){var t=e.context,n=uo(e),r=o.filter(function(e){return e}),i=Zt(e);a.select(r,n,i?t.selection:[])}),e.on("lasso.start",function(e){var n=e.context;n.bbox=uo(e),function(e){var n,o=t.getActiveLayer();U(n=e.frame=te("rect"),{class:"djs-lasso-overlay",width:1,height:1,x:0,y:0}),V(o,n)}(n),n.selection=r.get()}),e.on("lasso.move",function(e){var t=e.context;t.bbox=uo(e),function(e){var t=e.frame,n=e.bbox;U(t,{x:n.x,y:n.y,width:n.width,height:n.height})}(t)}),e.on("lasso.cleanup",function(e){!function(e){e.frame&&se(e.frame)}(e.context)}),e.on("element.mousedown",1500,function(e){if(Zt(e))return a.activateLasso(e.originalEvent),!0})}function uo(e){var t={x:e.x-e.dx,y:e.y-e.dy},n={x:e.x,y:e.y};return t.x<=n.x&&t.y<n.y||t.x<n.x&&t.y<=n.y?{x:t.x,y:t.y,width:n.x-t.x,height:n.y-t.y}:t.x>=n.x&&t.y<n.y||t.x>n.x&&t.y<=n.y?{x:n.x,y:t.y,width:t.x-n.x,height:n.y-t.y}:t.x<=n.x&&t.y>n.y||t.x<n.x&&t.y>=n.y?{x:t.x,y:n.y,width:n.x-t.x,height:t.y-n.y}:t.x>=n.x&&t.y>n.y||t.x>n.x&&t.y>=n.y?{x:n.x,y:n.y,width:t.x-n.x,height:t.y-n.y}:{x:n.x,y:n.y,width:0,height:0}}po.$inject=["eventBus","canvas","dragging","elementRegistry","selection","toolManager","mouse"],po.prototype.activateLasso=function(e,t){this._dragging.init(e,"lasso",{autoActivate:t,cursor:lo,data:{context:{}}})},po.prototype.activateSelection=function(e,t){this._dragging.init(e,"lasso.selection",{trapClick:!1,autoActivate:t,cursor:lo,data:{context:{}},keepSelection:!0})},po.prototype.select=function(e,t,n=[]){var o=function(e,t){var n={};return D(e,function(e){var o=e;o.waypoints&&(o=xe(o)),!C(t.y)&&o.x>t.x&&(n[e.id]=e),!C(t.x)&&o.y>t.y&&(n[e.id]=e),o.x>t.x&&o.y>t.y&&(C(t.width)&&C(t.height)&&o.width+o.x<t.width+t.x&&o.height+o.y<t.height+t.y?n[e.id]=e:C(t.width)&&C(t.height)||(n[e.id]=e))}),n}(e,t);this._selection.select([...n,...O(o)])},po.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)},po.prototype.isActive=function(){var e=this._dragging.context();return e&&/^lasso/.test(e.prefix)};const ho={__depends__:[so,co],__init__:["lassoTool"],lassoTool:["type",po]};function Ao(e,t){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[],trigger:null},this._injector=t,this._eventBus=e,this._uid=1,e.on(["diagram.destroy","diagram.clear"],function(){this.clear(!1)},this)}Ao.$inject=["eventBus","injector"],Ao.prototype.execute=function(e,t){if(!e)throw new Error("command required");this._currentExecution.trigger="execute";const n={command:e,context:t};this._pushAction(n),this._internalExecute(n),this._popAction()},Ao.prototype.canExecute=function(e,t){const n={command:e,context:t},o=this._getHandler(e);let r=this._fire(e,"canExecute",n);if(void 0===r){if(!o)return!1;o.canExecute&&(r=o.canExecute(t))}return r},Ao.prototype.clear=function(e){this._stack.length=0,this._stackIdx=-1,!1!==e&&this._fire("changed",{trigger:"clear"})},Ao.prototype.undo=function(){let e,t=this._getUndoAction();if(t){for(this._currentExecution.trigger="undo",this._pushAction(t);t&&(this._internalUndo(t),e=this._getUndoAction(),e&&e.id===t.id);)t=e;this._popAction()}},Ao.prototype.redo=function(){let e,t=this._getRedoAction();if(t){for(this._currentExecution.trigger="redo",this._pushAction(t);t&&(this._internalExecute(t,!0),e=this._getRedoAction(),e&&e.id===t.id);)t=e;this._popAction()}},Ao.prototype.register=function(e,t){this._setHandler(e,t)},Ao.prototype.registerHandler=function(e,t){if(!e||!t)throw new Error("command and handlerCls must be defined");const n=this._injector.instantiate(t);this.register(e,n)},Ao.prototype.canUndo=function(){return!!this._getUndoAction()},Ao.prototype.canRedo=function(){return!!this._getRedoAction()},Ao.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]},Ao.prototype._getUndoAction=function(){return this._stack[this._stackIdx]},Ao.prototype._internalUndo=function(e){const t=e.command,n=e.context,o=this._getHandler(t);this._atomicDo(()=>{this._fire(t,"revert",e),o.revert&&this._markDirty(o.revert(n)),this._revertedAction(e),this._fire(t,"reverted",e)})},Ao.prototype._fire=function(e,t,n){arguments.length<3&&(n=t,t=null);const o=t?[e+"."+t,t]:[e];let r;n=this._eventBus.createEvent(n);for(const e of o)if(r=this._eventBus.fire("commandStack."+e,n),n.cancelBubble)break;return r},Ao.prototype._createId=function(){return this._uid++},Ao.prototype._atomicDo=function(e){const t=this._currentExecution;t.atomic=!0;try{e()}finally{t.atomic=!1}},Ao.prototype._internalExecute=function(e,t){const n=e.command,o=e.context,r=this._getHandler(n);if(!r)throw new Error("no command handler registered for <"+n+">");this._pushAction(e),t||(this._fire(n,"preExecute",e),r.preExecute&&r.preExecute(o),this._fire(n,"preExecuted",e)),this._atomicDo(()=>{this._fire(n,"execute",e),r.execute&&this._markDirty(r.execute(o)),this._executedAction(e,t),this._fire(n,"executed",e)}),t||(this._fire(n,"postExecute",e),r.postExecute&&r.postExecute(o),this._fire(n,"postExecuted",e)),this._popAction()},Ao.prototype._pushAction=function(e){const t=this._currentExecution,n=t.actions,o=n[0];if(t.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+e.command+")");e.id||(e.id=o&&o.id||this._createId()),n.push(e)},Ao.prototype._popAction=function(){const e=this._currentExecution,t=e.trigger,n=e.actions,o=e.dirty;n.pop(),n.length||(this._eventBus.fire("elements.changed",{elements:R("id",o.reverse())}),o.length=0,this._fire("changed",{trigger:t}),e.trigger=null)},Ao.prototype._markDirty=function(e){const t=this._currentExecution;e&&(e=x(e)?e:[e],t.dirty=t.dirty.concat(e))},Ao.prototype._executedAction=function(e,t){const n=++this._stackIdx;t||this._stack.splice(n,this._stack.length,e)},Ao.prototype._revertedAction=function(e){this._stackIdx--},Ao.prototype._getHandler=function(e){return this._handlerMap[e]},Ao.prototype._setHandler=function(e,t){if(!e||!t)throw new Error("command and handler required");if(this._handlerMap[e])throw new Error("overriding handler for command <"+e+">");this._handlerMap[e]=t};const fo={commandStack:["type",Ao]};function go(e,t,n,o){e.on("element.changed",function(o){var r=o.element;(r.parent||r===t.getRootElement())&&(o.gfx=n.getGraphics(r)),o.gfx&&e.fire(_e(r)+".changed",o)}),e.on("elements.changed",function(t){var n=t.elements;n.forEach(function(t){e.fire("element.changed",{element:t})}),o.updateContainments(n)}),e.on("shape.changed",function(e){o.update("shape",e.element,e.gfx)}),e.on("connection.changed",function(e){o.update("connection",e.element,e.gfx)})}go.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];const vo={__init__:["changeSupport"],changeSupport:["type",go]};function yo(e,t){this._modeling=e,this._canvas=t}function mo(e){this._modeling=e}function Eo(e,t){this._canvas=e,this._layouter=t}yo.$inject=["modeling","canvas"],yo.prototype.preExecute=function(e){var t=this._modeling,n=e.elements,o=e.alignment;D(n,function(e){var n={x:0,y:0};m(o.left)?n.x=o.left-e.x:m(o.right)?n.x=o.right-e.width-e.x:m(o.center)?n.x=o.center-Math.round(e.width/2)-e.x:m(o.top)?n.y=o.top-e.y:m(o.bottom)?n.y=o.bottom-e.height-e.y:m(o.middle)&&(n.y=o.middle-Math.round(e.height/2)-e.y),t.moveElements([e],n,e.parent)})},yo.prototype.postExecute=function(e){},mo.$inject=["modeling"],mo.prototype.preExecute=function(e){var t=e.source;if(!t)throw new Error("source required");var n=e.target||t.parent,o=e.shape,r=e.hints||{};o=e.shape=this._modeling.createShape(o,e.position,n,{attach:r.attach}),e.shape=o},mo.prototype.postExecute=function(e){var t,n,o=e.hints||{};t=e.source,n=e.shape,B(t.outgoing,function(e){return e.target===n})||(o.connectionTarget===e.source?this._modeling.connect(e.shape,e.source,e.connection):this._modeling.connect(e.source,e.shape,e.connection))},Eo.$inject=["canvas","layouter"],Eo.prototype.execute=function(e){var t=e.connection,n=e.source,o=e.target,r=e.parent,i=e.parentIndex,s=e.hints;if(!n||!o)throw new Error("source and target required");if(!r)throw new Error("parent required");return t.source=n,t.target=o,t.waypoints||(t.waypoints=this._layouter.layoutConnection(t,s)),this._canvas.addConnection(t,r,i),t},Eo.prototype.revert=function(e){var t=e.connection;return this._canvas.removeConnection(t),t.source=null,t.target=null,t};var xo=Math.round;function _o(e){this._modeling=e}_o.$inject=["modeling"],_o.prototype.preExecute=function(e){var t=e.elements,n=e.parent,o=e.parentIndex,r=e.position,i=e.hints,s=this._modeling;D(t,function(e){C(e.x)||(e.x=0),C(e.y)||(e.y=0)});var a=xe(k(t,function(e){return!e.hidden}));D(t,function(e){st(e)&&(e.waypoints=P(e.waypoints,function(e){return{x:xo(e.x-a.x-a.width/2+r.x),y:xo(e.y-a.y-a.height/2+r.y)}})),G(e,{x:xo(e.x-a.x-a.width/2+r.x),y:xo(e.y-a.y-a.height/2+r.y)})});var c=ve(t),l={};D(t,function(e){if(st(e))l[e.id]=C(o)?s.createConnection(l[e.source.id],l[e.target.id],o,e,e.parent||n,i):s.createConnection(l[e.source.id],l[e.target.id],e,e.parent||n,i);else{var t=G({},i);-1===c.indexOf(e)&&(t.autoResize=!1),at(e)&&(t=function(e,t){let n={};return D(Object(e),function(e,o){-1===t.indexOf(o)&&(n[o]=e)}),n}(t,["attach"])),l[e.id]=C(o)?s.createShape(e,q(e,["x","y","width","height"]),e.parent||n,o,t):s.createShape(e,q(e,["x","y","width","height"]),e.parent||n,t)}}),e.elements=O(l)};var Co=Math.round;function bo(e){this._canvas=e}function wo(e){bo.call(this,e)}bo.$inject=["canvas"],bo.prototype.execute=function(e){var t=e.shape,n=e.position,o=e.parent,r=e.parentIndex;if(!o)throw new Error("parent required");if(!n)throw new Error("position required");return void 0!==n.width?G(t,n):G(t,{x:n.x-Co(t.width/2),y:n.y-Co(t.height/2)}),this._canvas.addShape(t,o,r),t},bo.prototype.revert=function(e){var t=e.shape;return this._canvas.removeShape(t),t},A(wo,bo),wo.$inject=["canvas"];var jo=bo.prototype.execute;wo.prototype.execute=function(e){var t=e.shape;return function(e){["width","height"].forEach(function(t){void 0===e[t]&&(e[t]=0)})}(t),t.labelTarget=e.labelTarget,jo.call(this,e)};var Bo=bo.prototype.revert;function ko(e,t){if("function"!=typeof t)throw new Error("removeFn iterator must be a function");if(e){for(var n;n=e[0];)t(n);return e}}function Do(e,t){this._canvas=e,this._modeling=t}function So(e,t){this._modeling=e,this._elementRegistry=t}function zo(e,t){this._canvas=e,this._modeling=t}function Po(e){this._modeling=e}wo.prototype.revert=function(e){return e.shape.labelTarget=null,Bo.call(this,e)},Do.$inject=["canvas","modeling"],Do.prototype.preExecute=function(e){var t=this._modeling,n=e.connection;ko(n.incoming,function(e){t.removeConnection(e,{nested:!0})}),ko(n.outgoing,function(e){t.removeConnection(e,{nested:!0})})},Do.prototype.execute=function(e){var t=e.connection,n=t.parent;return e.parent=n,e.parentIndex=rt(n.children,t),e.source=t.source,e.target=t.target,this._canvas.removeConnection(t),t.source=null,t.target=null,t},Do.prototype.revert=function(e){var t=e.connection,n=e.parent,o=e.parentIndex;return t.source=e.source,t.target=e.target,ot(n.children,t,o),this._canvas.addConnection(t,n),t},So.$inject=["modeling","elementRegistry"],So.prototype.postExecute=function(e){var t=this._modeling,n=this._elementRegistry;D(e.elements,function(e){n.get(e.id)&&(e.waypoints?t.removeConnection(e):t.removeShape(e))})},zo.$inject=["canvas","modeling"],zo.prototype.preExecute=function(e){var t=this._modeling,n=e.shape;ko(n.incoming,function(e){t.removeConnection(e,{nested:!0})}),ko(n.outgoing,function(e){t.removeConnection(e,{nested:!0})}),ko(n.children,function(e){st(e)?t.removeConnection(e,{nested:!0}):t.removeShape(e,{nested:!0})})},zo.prototype.execute=function(e){var t=this._canvas,n=e.shape,o=n.parent;return e.oldParent=o,e.oldParentIndex=rt(o.children,n),t.removeShape(n),n},zo.prototype.revert=function(e){var t=this._canvas,n=e.shape,o=e.oldParent,r=e.oldParentIndex;return ot(o.children,n,r),t.addShape(n,o),n},Po.$inject=["modeling"];var Oo={x:"y",y:"x"};function Mo(e,t){this._layouter=e,this._canvas=t}function Ro(){}function To(e,t,n){var o=vn(t),r=vn(n),i=yn(e,o),s=i.x*(n.width/t.width),a=i.y*(n.height/t.height);return ct({x:r.x+s,y:r.y+a})}function Lo(e,t,n){var o=Go(e),r=qo(o,t),i=o[0];return r.length?r[r.length-1]:To(i.original||i,n,t)}function $o(e,t,n){var o=Go(e),r=qo(o,t),i=o[o.length-1];return r.length?r[0]:To(i.original||i,n,t)}function Fo(e,t,n){var o=Go(e),r=Io(t,n),i=o[0];return To(i.original||i,r,t)}function Wo(e,t,n){var o=Go(e),r=Io(t,n),i=o[o.length-1];return To(i.original||i,r,t)}function Io(e,t){return{x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height}}function Go(e){var t=e.waypoints;if(!t.length)throw new Error("connection#"+e.id+": no waypoints");return t}function qo(e,t){return k(P(e,Vo),function(e){return function(e,t){return"intersect"===function(e,t,n){_(n=n||0)||(n={x:n,y:n});var o=lt(e),r=lt(t),i=o.bottom+n.y<=r.top,s=o.left-n.x>=r.right,a=o.top-n.y>=r.bottom,c=i?"top":a?"bottom":null,l=o.right+n.x<=r.left?"left":s?"right":null;return l&&c?c+"-"+l:l||c||"intersect"}(t,e,1)}(e,t)})}function Vo(e){return e.original||e}function No(){this.allShapes={},this.allConnections={},this.enclosedElements={},this.enclosedConnections={},this.topLevel={}}function Ho(e){this._modeling=e}function Uo(e){this._helper=new Ho(e)}function Yo(e){this._modeling=e,this._helper=new Ho(e)}function Xo(e){this._modeling=e}function Zo(e){return e.original||e}function Ko(e,t){this._modeling=e,this._rules=t}function Qo(e){this._modeling=e}function Jo(e,t){return-1!==e.indexOf(t)}function er(e){this._modeling=e}function tr(e){return G({},e)}function nr(e){switch(e){case"n":case"s":return"y";case"w":case"e":return"x"}}function or(e,t,n){var o=nr(n);return/e|s/.test(n)?e[o]>t:/n|w/.test(n)?e[o]<t:void 0}function rr(e,t){return-1!==e.indexOf(t)}function ir(e){this._modeling=e}function sr(e){var t={};return D(e,function(e){t[e.id]=e.hidden,e.children&&(t=G({},t,sr(e.children)))}),t}function ar(e,t){var n=[];return D(e,function(e){e.hidden=t,n=n.concat(e),e.children&&(n=n.concat(ar(e.children,e.collapsed||t)))}),n}function cr(e,t){var n=[];return D(e,function(e){e.hidden=t[e.id],n=n.concat(e),e.children&&(n=n.concat(cr(e.children,t)))}),n}function lr(e){this._modeling=e}function dr(e,t){return nt(e&&e.attachers,t)}function pr(e,t,n){if(e){var o=e.attachers;o||(e.attachers=o=[]),ot(o,t,n)}}function ur(){}function hr(e,t,n){this._eventBus=e,this._elementFactory=t,this._commandStack=n;var o=this;e.on("diagram.init",function(){o.registerHandlers(n)})}function Ar(){}Po.prototype.preExecute=function(e){var t=this._modeling,n=e.groups,o=e.axis,r=e.dimension;function i(e,t){e.range.min=Math.min(t[o],e.range.min),e.range.max=Math.max(t[o]+t[r],e.range.max)}function s(e){return e[o]+e[r]/2}function a(e){return e.length-1}function c(e){return e.max-e.min}var l,d,p=n[0],u=a(n),h=n[u],A=0;D(n,function(e,l){var d,p,h;e.elements.length<2?l&&l!==n.length-1&&(i(e,e.elements[0]),A+=c(e.range)):(d=function(e,t){t=L(t);let n=[];return D(e,function(e,o){let r=t(e,o),i={d:r,v:e};for(var s=0;s<n.length;s++){let{d:e}=n[s];if(r<e)return void n.splice(s,0,i)}n.push(i)}),P(n,e=>e.v)}(e.elements,o),p=d[0],l===u&&(p=d[a(d)]),h=s(p),e.range=null,D(d,function(n){!function(e,n){var r={y:0};r[o]=e-s(n),r[o]&&(r[Oo[o]]=0,t.moveElements([n],r,n.parent))}(h,n),null!==e.range?i(e,n):e.range={min:n[o],max:n[o]+n[r]}}),l&&l!==n.length-1&&(A+=c(e.range)))}),d=Math.abs(h.range.min-p.range.max),(l=Math.round((d-A)/(n.length-1)))<n.length-1||D(n,function(e,i){var s,a={};e!==p&&e!==h&&(s=n[i-1],e.range.max=0,D(e.elements,function(n,i){a[Oo[o]]=0,a[o]=s.range.max-n[o]+l,e.range.min!==n[o]&&(a[o]+=n[o]-e.range.min),a[o]&&t.moveElements([n],a,n.parent),e.range.max=Math.max(n[o]+n[r],i?e.range.max:0)}))})},Po.prototype.postExecute=function(e){},Mo.$inject=["layouter","canvas"],Mo.prototype.execute=function(e){var t=e.connection;return G(e,{oldWaypoints:t.waypoints}),t.waypoints=this._layouter.layoutConnection(t,e.hints),t},Mo.prototype.revert=function(e){var t=e.connection;return t.waypoints=e.oldWaypoints,t},Ro.prototype.execute=function(e){var t=e.connection,n=e.delta,o=e.newParent||t.parent,r=e.newParentIndex,i=t.parent;return e.oldParent=i,e.oldParentIndex=nt(i.children,t),ot(o.children,t,r),t.parent=o,D(t.waypoints,function(e){e.x+=n.x,e.y+=n.y,e.original&&(e.original.x+=n.x,e.original.y+=n.y)}),t},Ro.prototype.revert=function(e){var t=e.connection,n=t.parent,o=e.oldParent,r=e.oldParentIndex,i=e.delta;return nt(n.children,t),ot(o.children,t,r),t.parent=o,D(t.waypoints,function(e){e.x-=i.x,e.y-=i.y,e.original&&(e.original.x-=i.x,e.original.y-=i.y)}),t},No.prototype.add=function(e,t){return this.addAll([e],t)},No.prototype.addAll=function(e,t){var n=function(e,t,n){y(t)&&(t=!0),_(t)&&(n=t,t=!0);var o=be((n=n||{}).allShapes),r=be(n.allConnections),i=be(n.enclosedElements),s=be(n.enclosedConnections),a=be(n.topLevel,t&&M(e,function(e){return e.id}));function c(e){a[e.source.id]&&a[e.target.id]&&(a[e.id]=[e]),o[e.source.id]&&o[e.target.id]&&(s[e.id]=i[e.id]=e),r[e.id]=e}return Ee(e,function(e){if(i[e.id]=e,!e.waypoints)return o[e.id]=e,D(e.incoming,c),D(e.outgoing,c),e.children;s[e.id]=r[e.id]=e}),{allShapes:o,allConnections:r,topLevel:a,enclosedConnections:s,enclosedElements:i}}(e,!!t,this);return G(this,n),this},Ho.prototype.moveRecursive=function(e,t,n){return e?this.moveClosure(this.getClosure(e),t,n):[]},Ho.prototype.moveClosure=function(e,t,n,o,r){var i=this._modeling,s=e.allShapes,a=e.allConnections,c=e.enclosedConnections,l=e.topLevel,d=!1;r&&r.parent===n&&(d=!0),D(s,function(e){i.moveShape(e,t,l[e.id]&&!d&&n,{recurse:!1,layout:!1})}),D(a,function(e){var o=!!s[e.source.id],r=!!s[e.target.id];c[e.id]&&o&&r?i.moveConnection(e,t,l[e.id]&&!d&&n):i.layoutConnection(e,{connectionStart:o&&Fo(e,e.source,t),connectionEnd:r&&Wo(e,e.target,t)})})},Ho.prototype.getClosure=function(e){return(new No).addAll(e,!0)},Uo.$inject=["modeling"],Uo.prototype.preExecute=function(e){e.closure=this._helper.getClosure(e.shapes)},Uo.prototype.postExecute=function(e){var t,n=e.hints;n&&n.primaryShape&&(t=n.primaryShape,n.oldParent=t.parent),this._helper.moveClosure(e.closure,e.delta,e.newParent,e.newHost,t)},Yo.$inject=["modeling"],Yo.prototype.execute=function(e){var t=e.shape,n=e.delta,o=e.newParent||t.parent,r=e.newParentIndex,i=t.parent;return e.oldBounds=q(t,["x","y","width","height"]),e.oldParent=i,e.oldParentIndex=nt(i.children,t),ot(o.children,t,r),G(t,{parent:o,x:t.x+n.x,y:t.y+n.y}),t},Yo.prototype.postExecute=function(e){var t=e.shape,n=e.delta,o=e.hints,r=this._modeling;!1!==o.layout&&(D(t.incoming,function(e){r.layoutConnection(e,{connectionEnd:Wo(e,t,n)})}),D(t.outgoing,function(e){r.layoutConnection(e,{connectionStart:Fo(e,t,n)})})),!1!==o.recurse&&this.moveChildren(e)},Yo.prototype.revert=function(e){var t=e.shape,n=e.oldParent,o=e.oldParentIndex,r=e.delta;return ot(n.children,t,o),G(t,{parent:n,x:t.x-r.x,y:t.y-r.y}),t},Yo.prototype.moveChildren=function(e){var t=e.delta,n=e.shape;this._helper.moveRecursive(n.children,t,null)},Yo.prototype.getNewParent=function(e){return e.newParent||e.shape.parent},Xo.$inject=["modeling"],Xo.prototype.execute=function(e){var t=e.newSource,n=e.newTarget,o=e.connection,r=e.dockingOrPoints;if(!t&&!n)throw new Error("newSource or newTarget required");return x(r)&&(e.oldWaypoints=o.waypoints,o.waypoints=r),t&&(e.oldSource=o.source,o.source=t),n&&(e.oldTarget=o.target,o.target=n),o},Xo.prototype.postExecute=function(e){var t=e.connection,n=e.newSource,o=e.newTarget,r=e.dockingOrPoints,i=e.hints||{},s={};i.connectionStart&&(s.connectionStart=i.connectionStart),i.connectionEnd&&(s.connectionEnd=i.connectionEnd),!1!==i.layoutConnection&&(!n||o&&"source"!==i.docking||(s.connectionStart=s.connectionStart||Zo(x(r)?r[0]:r)),!o||n&&"target"!==i.docking||(s.connectionEnd=s.connectionEnd||Zo(x(r)?r[r.length-1]:r)),i.newWaypoints&&(s.waypoints=i.newWaypoints),this._modeling.layoutConnection(t,s))},Xo.prototype.revert=function(e){var t=e.oldSource,n=e.oldTarget,o=e.oldWaypoints,r=e.connection;return t&&(r.source=t),n&&(r.target=n),o&&(r.waypoints=o),r},Ko.$inject=["modeling","rules"],Ko.prototype.preExecute=function(e){var t,n=this,o=this._modeling,r=this._rules,i=e.oldShape,s=e.newData,a=e.hints||{};function c(e,t,n){return r.allowed("connection.reconnect",{connection:n,source:e,target:t})}var l,d={x:s.x,y:s.y},p={x:i.x,y:i.y,width:i.width,height:i.height};t=e.newShape=e.newShape||n.createShape(s,d,i.parent,a),i.host&&o.updateAttachment(t,i.host),!1!==a.moveChildren&&(l=i.children.slice(),o.moveElements(l,{x:0,y:0},t,a));var u=i.incoming.slice(),h=i.outgoing.slice();D(u,function(e){c(e.source,t,e)&&n.reconnectEnd(e,t,$o(e,t,p),a)}),D(h,function(e){var o=e.target;c(t,o,e)&&n.reconnectStart(e,t,Lo(e,t,p),a)})},Ko.prototype.postExecute=function(e){var t=e.oldShape;this._modeling.removeShape(t)},Ko.prototype.execute=function(e){},Ko.prototype.revert=function(e){},Ko.prototype.createShape=function(e,t,n,o){return this._modeling.createShape(e,t,n,o)},Ko.prototype.reconnectStart=function(e,t,n,o){this._modeling.reconnectStart(e,t,n,o)},Ko.prototype.reconnectEnd=function(e,t,n,o){this._modeling.reconnectEnd(e,t,n,o)},Qo.$inject=["modeling"],Qo.prototype.execute=function(e){var t=e.shape,n=e.newBounds,o=e.minBounds;if(void 0===n.x||void 0===n.y||void 0===n.width||void 0===n.height)throw new Error("newBounds must have {x, y, width, height} properties");if(o&&(n.width<o.width||n.height<o.height))throw new Error("width and height cannot be less than minimum height and width");if(!o&&n.width<10||n.height<10)throw new Error("width and height cannot be less than 10px");return e.oldBounds={width:t.width,height:t.height,x:t.x,y:t.y},G(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t},Qo.prototype.postExecute=function(e){var t=this._modeling,n=e.shape,o=e.oldBounds;!1!==(e.hints||{}).layout&&(D(n.incoming,function(e){t.layoutConnection(e,{connectionEnd:$o(e,n,o)})}),D(n.outgoing,function(e){t.layoutConnection(e,{connectionStart:Lo(e,n,o)})}))},Qo.prototype.revert=function(e){var t=e.shape,n=e.oldBounds;return G(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t},er.$inject=["modeling"],er.prototype.preExecute=function(e){var t=e.delta,n=e.direction,o=e.movingShapes,r=e.resizingShapes,i=e.start,s={};this.moveShapes(o,t),D(r,function(e){s[e.id]=function(e){return{x:e.x,y:e.y,height:e.height,width:e.width}}(e)}),this.resizeShapes(r,t,n),this.updateConnectionWaypoints(function(e,t){var n=[];return D(e.concat(t),function(o){var r=o.incoming,i=o.outgoing;D(r.concat(i),function(o){var r=o.source,i=o.target;(Jo(e,r)||Jo(e,i)||Jo(t,r)||Jo(t,i))&&(Jo(n,o)||n.push(o))})}),n}(o,r),t,n,i,o,r,s)},er.prototype.execute=function(){},er.prototype.revert=function(){},er.prototype.moveShapes=function(e,t){var n=this;D(e,function(e){n._modeling.moveShape(e,t,null,{autoResize:!1,layout:!1,recurse:!1})})},er.prototype.resizeShapes=function(e,t,n){var o=this;D(e,function(e){var r=function(e,t,n){var o=e.x,r=e.y,i=e.width,s=e.height,a=n.x,c=n.y;switch(t){case"n":return{x:o,y:r+c,width:i,height:s-c};case"s":return{x:o,y:r,width:i,height:s+c};case"w":return{x:o+a,y:r,width:i-a,height:s};case"e":return{x:o,y:r,width:i+a,height:s};default:throw new Error("unknown direction: "+t)}}(e,n,t);o._modeling.resizeShape(e,r,null,{attachSupport:!1,autoResize:!1,layout:!1})})},er.prototype.updateConnectionWaypoints=function(e,t,n,o,r,i,s){var a=this,c=r.concat(i);D(e,function(e){var l=e.source,d=e.target,p=function(e){return P(e.waypoints,function(e){return(e=tr(e)).original&&(e.original=tr(e.original)),e})}(e),u=nr(n),h={};rr(c,l)&&rr(c,d)?(p=P(p,function(e){return or(e,o,n)&&(e[u]=e[u]+t[u]),e.original&&or(e.original,o,n)&&(e.original[u]=e.original[u]+t[u]),e}),a._modeling.updateWaypoints(e,p,{labelBehavior:!1})):(rr(c,l)||rr(c,d))&&(rr(r,l)?h.connectionStart=Fo(e,l,t):rr(r,d)?h.connectionEnd=Wo(e,d,t):rr(i,l)?h.connectionStart=Lo(e,l,s[l.id]):rr(i,d)&&(h.connectionEnd=$o(e,d,s[d.id])),a._modeling.layoutConnection(e,h))})},ir.$inject=["modeling"],ir.prototype.execute=function(e){var t=e.shape,n=t.children;e.oldChildrenVisibility=sr(n),t.collapsed=!t.collapsed;var o=ar(n,t.collapsed);return[t].concat(o)},ir.prototype.revert=function(e){var t=e.shape,n=e.oldChildrenVisibility,o=cr(t.children,n);return t.collapsed=!t.collapsed,[t].concat(o)},lr.$inject=["modeling"],lr.prototype.execute=function(e){var t=e.shape,n=e.newHost,o=t.host;return e.oldHost=o,e.attacherIdx=dr(o,t),pr(n,t),t.host=n,t},lr.prototype.revert=function(e){var t=e.shape,n=e.newHost,o=e.oldHost,r=e.attacherIdx;return t.host=o,dr(n,t),pr(o,t,r),t},ur.prototype.execute=function(e){var t=e.connection,n=e.newWaypoints;return e.oldWaypoints=t.waypoints,t.waypoints=n,t},ur.prototype.revert=function(e){var t=e.connection,n=e.oldWaypoints;return t.waypoints=n,t},hr.$inject=["eventBus","elementFactory","commandStack"],hr.prototype.getHandlers=function(){return{"shape.append":mo,"shape.create":bo,"shape.delete":zo,"shape.move":Yo,"shape.resize":Qo,"shape.replace":Ko,"shape.toggleCollapse":ir,spaceTool:er,"label.create":wo,"connection.create":Eo,"connection.delete":Do,"connection.move":Ro,"connection.layout":Mo,"connection.updateWaypoints":ur,"connection.reconnect":Xo,"elements.create":_o,"elements.move":Uo,"elements.delete":So,"elements.distribute":Po,"elements.align":yo,"element.updateAttachment":lr}},hr.prototype.registerHandlers=function(e){D(this.getHandlers(),function(t,n){e.registerHandler(n,t)})},hr.prototype.moveShape=function(e,t,n,o,r){"object"==typeof o&&(r=o,o=null);var i={shape:e,delta:t,newParent:n,newParentIndex:o,hints:r||{}};this._commandStack.execute("shape.move",i)},hr.prototype.updateAttachment=function(e,t){var n={shape:e,newHost:t};this._commandStack.execute("element.updateAttachment",n)},hr.prototype.moveElements=function(e,t,n,o){var r,i=(o=o||{}).attach,s=n;!0===i?(r=n,s=n.parent):!1===i&&(r=null);var a={shapes:e,delta:t,newParent:s,newHost:r,hints:o};this._commandStack.execute("elements.move",a)},hr.prototype.moveConnection=function(e,t,n,o,r){"object"==typeof o&&(r=o,o=void 0);var i={connection:e,delta:t,newParent:n,newParentIndex:o,hints:r||{}};this._commandStack.execute("connection.move",i)},hr.prototype.layoutConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.layout",n)},hr.prototype.createConnection=function(e,t,n,o,r,i){"object"==typeof n&&(i=r,r=o,o=n,n=void 0);var s={source:e,target:t,parent:r,parentIndex:n,connection:o=this._create("connection",o),hints:i};return this._commandStack.execute("connection.create",s),s.connection},hr.prototype.createShape=function(e,t,n,o,r){"number"!=typeof o&&(r=o,o=void 0);var i,s,a=(r=r||{}).attach;e=this._create("shape",e),a?(i=n.parent,s=n):i=n;var c={position:t,shape:e,parent:i,parentIndex:o,host:s,hints:r};return this._commandStack.execute("shape.create",c),c.shape},hr.prototype.createElements=function(e,t,n,o,r){x(e)||(e=[e]),"number"!=typeof o&&(r=o,o=void 0);var i={position:t,elements:e,parent:n,parentIndex:o,hints:r=r||{}};return this._commandStack.execute("elements.create",i),i.elements},hr.prototype.createLabel=function(e,t,n,o){n=this._create("label",n);var r={labelTarget:e,position:t,parent:o||e.parent,shape:n};return this._commandStack.execute("label.create",r),r.shape},hr.prototype.appendShape=function(e,t,n,o,r){r=r||{};var i={source:e,position:n,target:o,shape:t=this._create("shape",t),connection:r.connection,connectionParent:r.connectionParent,hints:r};return this._commandStack.execute("shape.append",i),i.shape},hr.prototype.removeElements=function(e){var t={elements:e};this._commandStack.execute("elements.delete",t)},hr.prototype.distributeElements=function(e,t,n){var o={groups:e,axis:t,dimension:n};this._commandStack.execute("elements.distribute",o)},hr.prototype.removeShape=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.delete",n)},hr.prototype.removeConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.delete",n)},hr.prototype.replaceShape=function(e,t,n){var o={oldShape:e,newData:t,hints:n||{}};return this._commandStack.execute("shape.replace",o),o.newShape},hr.prototype.alignElements=function(e,t){var n={elements:e,alignment:t};this._commandStack.execute("elements.align",n)},hr.prototype.resizeShape=function(e,t,n,o){var r={shape:e,newBounds:t,minBounds:n,hints:o};this._commandStack.execute("shape.resize",r)},hr.prototype.createSpace=function(e,t,n,o,r){var i={delta:n,direction:o,movingShapes:e,resizingShapes:t,start:r};this._commandStack.execute("spaceTool",i)},hr.prototype.updateWaypoints=function(e,t,n){var o={connection:e,newWaypoints:t,hints:n||{}};this._commandStack.execute("connection.updateWaypoints",o)},hr.prototype.reconnect=function(e,t,n,o,r){var i={connection:e,newSource:t,newTarget:n,dockingOrPoints:o,hints:r||{}};this._commandStack.execute("connection.reconnect",i)},hr.prototype.reconnectStart=function(e,t,n,o){o||(o={}),this.reconnect(e,t,e.target,n,G(o,{docking:"source"}))},hr.prototype.reconnectEnd=function(e,t,n,o){o||(o={}),this.reconnect(e,e.source,t,n,G(o,{docking:"target"}))},hr.prototype.connect=function(e,t,n,o){return this.createConnection(e,t,n||{},e.parent,o)},hr.prototype._create=function(e,t){return t instanceof Bt?t:this._elementFactory.create(e,t)},hr.prototype.toggleCollapse=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.toggleCollapse",n)},Ar.prototype.layoutConnection=function(e,t){return[(t=t||{}).connectionStart||pt(t.source||e.source),t.connectionEnd||pt(t.target||e.target)]};const fr={__depends__:[fo,vo,cn,dn],__init__:["modeling"],modeling:["type",hr],layouter:["type",Ar]};function gr(e,t){var n;function o(e){return function(e){if(!We(e.target,".djs-draggable")){var t=e.button;if(!(t>=2||e.ctrlKey||e.shiftKey||e.altKey))return n={button:t,start:Ut(e)},Ue.bind(document,"mousemove",r),Ue.bind(document,"mouseup",i),!0}}(e.originalEvent)}function r(o){var r,i=n.start,s=n.button,a=Ut(o),c=yn(a,i);!n.dragging&&(r=c,Math.sqrt(Math.pow(r.x,2)+Math.pow(r.y,2))>15)&&(n.dragging=!0,0===s&&gn(e),An("grab")),n.dragging&&(c=yn(a,n.last||n.start),t.scroll({dx:c.x,dy:c.y}),n.last=a),o.preventDefault()}function i(e){Ue.unbind(document,"mousemove",r),Ue.unbind(document,"mouseup",i),n=null,fn()}e.on("canvas.focus.changed",function(t){t.focused?e.on("element.mousedown",500,o):e.off("element.mousedown",o)}),this.isActive=function(){return!!n}}gr.$inject=["eventBus","canvas"];const vr={__init__:["moveCanvas"],moveCanvas:["type",gr]};function yr(e,t){this._eventBus=e,this.offset=5;var n=t.cls("djs-outline",["no-fill"]),o=this;function r(e){var t=te("rect");return U(t,G({x:0,y:0,rx:4,width:100,height:100},n)),t}e.on(["shape.added","shape.changed"],500,function(e){var t=e.element,n=e.gfx,i=et(".djs-outline",n);i||V(n,i=o.getOutline(t)||r()),o.updateShapeOutline(i,t)}),e.on(["connection.added","connection.changed"],function(e){var t=e.element,n=e.gfx,i=et(".djs-outline",n);i||V(n,i=r()),o.updateConnectionOutline(i,t)})}function mr(e,t,n){this._canvas=t;var o=this;e.on("element.changed",function(e){n.isSelected(e.element)&&o._updateMultiSelectionOutline(n.get())}),e.on("selection.changed",function(e){var t=e.newSelection;o._updateMultiSelectionOutline(t)})}yr.prototype.updateShapeOutline=function(e,t){var n=!1,o=this._getProviders();o.length&&D(o,function(o){n=n||o.updateOutline(t,e)}),n||U(e,{x:-this.offset,y:-this.offset,width:t.width+2*this.offset,height:t.height+2*this.offset})},yr.prototype.updateConnectionOutline=function(e,t){var n=xe(t);U(e,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+2*this.offset,height:n.height+2*this.offset})},yr.prototype.registerProvider=function(e,t){t||(t=e,e=1e3),this._eventBus.on("outline.getProviders",e,function(e){e.providers.push(t)})},yr.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"outline.getProviders",providers:[]});return this._eventBus.fire(e),e.providers},yr.prototype.getOutline=function(e){var t;return D(this._getProviders(),function(n){b(n.getOutline)&&(t=t||n.getOutline(e))}),t},yr.$inject=["eventBus","styles","elementRegistry"],mr.prototype._updateMultiSelectionOutline=function(e){var t=this._canvas.getLayer("selectionOutline");K(t);var n=e.length>1;if(X(this._canvas.getContainer())[n?"add":"remove"]("djs-multi-select"),n){var o=function(e){return{x:e.x-6,y:e.y-6,width:e.width+12,height:e.height+12}}(xe(e)),r=te("rect");U(r,G({rx:3},o)),X(r).add("djs-selection-outline"),V(t,r)}},mr.$inject=["eventBus","canvas","selection"];const Er={__depends__:[cn],__init__:["outline","multiSelectionOutline"],outline:["type",yr],multiSelectionOutline:["type",mr]};var xr=Math.round;function _r(e,t,n,o,r){function i(e,t,n,o){return r.allowed("elements.move",{shapes:e,delta:t,position:n,target:o})}function s(e,n,o,r){if(_(o)&&(r=o,o=!1),!n.waypoints&&n.parent&&!X(e.target).has("djs-hit-no-move")){var i=function(e){return{x:e.x+xr(e.width/2),y:e.y+xr(e.height/2)}}(n);return t.init(e,i,"shape.move",{cursor:"grabbing",autoActivate:o,data:{shape:n,context:r||{}}}),!0}}e.on("shape.move.start",1500,function(e){var t=e.context,n=e.shape,r=o.get().slice();-1===r.indexOf(n)&&(r=[n]),r=function(e){var t=M(e,"id");return k(e,function(e){for(;e=e.parent;)if(t[e.id])return!1;return!0})}(r),G(t,{shapes:r,validatedShapes:r,shape:n})}),e.on("shape.move.start",1250,function(e){var t=e.context,n=t.validatedShapes;if(!(t.canExecute=i(n)))return!1}),e.on("shape.move.move",500,function(e){var t,n=e.context,o=n.validatedShapes,r=e.hover,s={x:e.dx,y:e.dy};t=i(o,s,{x:e.x,y:e.y},r),n.delta=s,n.canExecute=t,n.target=null!==t?r:null}),e.on("shape.move.end",function(e){var t=e.context,o=t.delta,r=t.canExecute,i="attach"===r,s=t.shapes;if(!1===r)return!1;o.x=xr(o.x),o.y=xr(o.y),0===o.x&&0===o.y||n.moveElements(s,o,t.target,{primaryShape:t.shape,attach:i})}),e.on("element.mousedown",function(e){if(Xt(e)){var t=Nt(e);if(!t)throw new Error("must supply DOM mousedown event");return s(t,e.element)}}),this.start=s}_r.$inject=["eventBus","dragging","modeling","selection","rules"];var Cr="djs-dragging",br="drop-ok",wr="drop-not-ok",jr="new-parent",Br="attach-ok";function kr(e,t,n,o){function r(e){var t,n,o,r,i=(t=!1,n=-1,o=[],r=[],Ee(e,function(e,i,s){me(o,e,t);var a=e.children;if((-1===n||s<n)&&a&&me(r,a,t))return a}),o),s=i.flatMap(e=>(e.incoming||[]).concat(e.outgoing||[])),a=i.concat(s);return[...new Set(a)]}function i(e,n){[Br,br,wr,jr].forEach(function(o){o===n?t.addMarker(e,o):t.removeMarker(e,o)})}e.on("shape.move.start",499,function(e){var i,s,a,c=e.context,l=c.shapes,d=c.allDraggedElements,p=k(s=r(l),function(e){return!st(e)||B(s,T({id:e.source.id}))&&B(s,T({id:e.target.id}))});if(!c.dragGroup){var u=te("g");U(u,n.cls("djs-drag-group",["no-events"])),V(t.getActiveLayer(),u),c.dragGroup=u}p.forEach(function(e){o.addDragger(e,c.dragGroup)}),d?(i=[d,r(l)],d=Array.prototype.concat.apply([],i)):d=r(l),D(d,function(e){t.addMarker(e,Cr)}),c.allDraggedElements=d,c.differentParents=1!==(a=M(l,function(e){return e.parent&&e.parent.id}),function(e){return e&&Object.keys(e)||[]}(a).length)}),e.on("shape.move.move",499,function(e){var t=e.context,n=t.dragGroup,o=t.target,r=t.shape.parent,s=t.canExecute;o&&("attach"===s?i(o,Br):t.canExecute&&r&&o.id!==r.id?i(o,jr):i(o,t.canExecute?br:wr)),Ft(n,e.dx,e.dy)}),e.on(["shape.move.out","shape.move.cleanup"],function(e){var t=e.context.target;t&&i(t,null)}),e.on("shape.move.cleanup",function(e){var n=e.context,o=n.allDraggedElements,r=n.dragGroup;D(o,function(e){t.removeMarker(e,Cr)}),r&&se(r)}),this.makeDraggable=function(e,n,r){o.addDragger(n,e.dragGroup),r&&t.addMarker(n,Cr),e.allDraggedElements?e.allDraggedElements.push(n):e.allDraggedElements=[n]}}kr.$inject=["eventBus","canvas","styles","previewSupport"];const Dr={__depends__:[en,cn,Er,dn,Cn,Yn],__init__:["move","movePreview"],move:["type",_r],movePreview:["type",kr]};var Sr=".djs-palette-toggle",zr=".entry",Pr=Sr+", "+zr,Or="djs-palette-",Mr="open",Rr="two-column";function Tr(e,t){this._eventBus=e,this._canvas=t;var n=this;e.on("tool-manager.update",function(e){var t=e.tool;n.updateToolHighlight(t)}),e.on("i18n.changed",function(){n._update()}),e.on("diagram.init",function(){n._diagramInitialized=!0,n._rebuild()})}function Lr(e,t){var n=t.getPaletteEntries();return b(n)?n(e):(D(n,function(t,n){e[n]=t}),e)}Tr.$inject=["eventBus","canvas"],Tr.prototype.registerProvider=function(e,t){t||(t=e,e=1e3),this._eventBus.on("palette.getProviders",e,function(e){e.providers.push(t)}),this._rebuild()},Tr.prototype.getEntries=function(){return this._getProviders().reduce(Lr,{})},Tr.prototype._rebuild=function(){this._diagramInitialized&&this._getProviders().length&&(this._container||this._init(),this._update())},Tr.prototype._init=function(){var e=this,t=this._eventBus,n=this._getParentContainer(),o=this._container=Je(Tr.HTML_MARKUP);n.appendChild(o),Le(n).add(Or+"shown"),Xe(o,Pr,"click",function(t){var n,o,r=t.delegateTarget;if(o=Sr,(n=r)&&"function"==typeof n.matches&&n.matches(o))return e.toggle();e.trigger("click",t)}),Ue.bind(o,"mousedown",function(e){e.stopPropagation()}),Xe(o,zr,"dragstart",function(t){e.trigger("dragstart",t)}),t.on("canvas.resized",this._layoutChanged,this),t.fire("palette.create",{container:o})},Tr.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"palette.getProviders",providers:[]});return this._eventBus.fire(t),t.providers},Tr.prototype._toggleState=function(e){e=e||{};var t,n=this._getParentContainer(),o=this._container,r=this._eventBus,i=Le(o),s=Le(n);t="twoColumn"in e?e.twoColumn:this._needsCollapse(n.clientHeight,this._entries||{}),i.toggle(Rr,t),s.toggle(Or+Rr,t),"open"in e&&(i.toggle(Mr,e.open),s.toggle(Or+Mr,e.open)),r.fire("palette.changed",{twoColumn:t,open:this.isOpen()})},Tr.prototype._update=function(){var e=et(".djs-palette-entries",this._container),t=this._entries=this.getEntries();Fe(e),D(t,function(t,n){var o=t.group||"default",r=et("[data-group="+Wn(o)+"]",e);r||(Re(r=Je('<div class="group"></div>'),"data-group",o),e.appendChild(r));var i=t.html||(t.separator?'<hr class="separator" />':'<div class="entry" draggable="true"></div>'),s=Je(i);if(r.appendChild(s),!t.separator&&(Re(s,"data-action",n),t.title&&Re(s,"title",t.title),t.className&&function(e,t){var n=Le(e);(x(t)?t:t.split(/\s+/g)).forEach(function(e){n.add(e)})}(s,t.className),t.imageUrl)){var a=Je("<img>");Re(a,"src",t.imageUrl),s.appendChild(a)}}),this.open()},Tr.prototype.trigger=function(e,t,n){var o,r,i=t.delegateTarget||t.target;return i?(o=Re(i,"data-action"),r=t.originalEvent||t,this.triggerEntry(o,e,r,n)):t.preventDefault()},Tr.prototype.triggerEntry=function(e,t,n,o){var r,i;if((r=this._entries[e])&&(i=r.action,!1!==this._eventBus.fire("palette.trigger",{entry:r,event:n}))){if(b(i)){if("click"===t)return i(n,o)}else if(i[t])return i[t](n,o);n.preventDefault()}},Tr.prototype._layoutChanged=function(){this._toggleState({})},Tr.prototype._needsCollapse=function(e,t){return e<46*Object.keys(t).length+50},Tr.prototype.close=function(){this._toggleState({open:!1,twoColumn:!1})},Tr.prototype.open=function(){this._toggleState({open:!0})},Tr.prototype.toggle=function(){this.isOpen()?this.close():this.open()},Tr.prototype.isActiveTool=function(e){return e&&this._activeTool===e},Tr.prototype.updateToolHighlight=function(e){var t;this._toolsContainer||(t=et(".djs-palette-entries",this._container),this._toolsContainer=et("[data-group=tools]",t)),D(this._toolsContainer.children,function(t){var n=t.getAttribute("data-action");if(n){var o=Le(t);n=n.replace("-tool",""),o.contains("entry")&&n===e?o.add("highlighted-entry"):o.remove("highlighted-entry")}})},Tr.prototype.isOpen=function(){return Le(this._container).has(Mr)},Tr.prototype._getParentContainer=function(){return this._canvas.getContainer()},Tr.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>';const $r={__init__:["palette"],palette:["type",Tr]};var Fr=Math.max,Wr=Math.min;function Ir(e,t,n){var o=t[e],r=n.min&&n.min[e],i=n.max&&n.max[e];return C(r)&&(o=(/top|left/.test(e)?Wr:Fr)(o,r)),C(i)&&(o=(/top|left/.test(e)?Fr:Wr)(o,i)),o}function Gr(e,t){return void 0!==e?e:20}function qr(e){return!e.waypoints&&"label"!==e.type}function Vr(e,t,n,o){this._dragging=o,this._rules=t;var r=this;e.on("resize.start",function(e){var t,n,o;n=(t=e.context).resizeConstraints,o=t.minBounds,void 0===n&&(void 0===o&&(o=r.computeMinResizeBox(t)),t.resizeConstraints={min:lt(o)})}),e.on("resize.move",function(e){var t={x:e.dx,y:e.dy};!function(e,t){var n,o=e.shape,i=e.direction,s=e.resizeConstraints;e.delta=t,n=function(e,t,n){var o=n.x,r=n.y,i={x:e.x,y:e.y,width:e.width,height:e.height};return-1!==t.indexOf("n")?(i.y=e.y+r,i.height=e.height-r):-1!==t.indexOf("s")&&(i.height=e.height+r),-1!==t.indexOf("e")?i.width=e.width+o:-1!==t.indexOf("w")&&(i.x=e.x+o,i.width=e.width-o),i}(o,i,t),e.newBounds=function(e,t){if(!t)return e;var n=lt(e);return dt({top:Ir("top",n,t),right:Ir("right",n,t),bottom:Ir("bottom",n,t),left:Ir("left",n,t)})}(n,s),e.canExecute=r.canResize(e)}(e.context,t)}),e.on("resize.end",function(e){!function(e){var t,o=e.shape,r=e.canExecute,i=e.newBounds;if(r){if(t=i,!function(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}(o,i={x:Math.round(t.x),y:Math.round(t.y),width:Math.round(t.width),height:Math.round(t.height)}))return;n.resizeShape(o,i)}}(e.context)})}function Nr(e,t){var n=pt(e),o=lt(e),r={x:n.x,y:n.y};return-1!==t.indexOf("n")?r.y=o.top:-1!==t.indexOf("s")&&(r.y=o.bottom),-1!==t.indexOf("e")?r.x=o.right:-1!==t.indexOf("w")&&(r.x=o.left),r}function Hr(e){var t="resize-";return"n"===e||"s"===e?t+"ns":"e"===e||"w"===e?t+"ew":"nw"===e||"se"===e?t+"nwse":t+"nesw"}Vr.prototype.canResize=function(e){var t=this._rules,n=q(e,["newBounds","shape","delta","direction"]);return t.allowed("shape.resize",n)},Vr.prototype.activate=function(e,t,n){var o,r,i=this._dragging;if("string"==typeof n&&(n={direction:n}),!(r=(o=G({shape:t},n)).direction))throw new Error("must provide a direction (n|w|s|e|nw|se|ne|sw)");i.init(e,Nr(t,r),"resize",{autoActivate:!0,cursor:Hr(r),data:{shape:t,context:o}})},Vr.prototype.computeMinResizeBox=function(e){var t,n,o,r,i,s,a,c=e.shape;return t=e.direction,n=c,o=e.minDimensions||{width:10,height:10},r=function(e,t){var n;if((n=void 0===e.length?k(e.children,qr):e).length)return function(e,t){var n,o,r,i;return"object"==typeof t?(n=Gr(t.left),o=Gr(t.right),r=Gr(t.top),i=Gr(t.bottom)):n=o=r=i=Gr(t),{x:e.x-n,y:e.y-r,width:e.width+n+o,height:e.height+r+i}}(xe(n),t)}(c,e.childrenBoxPadding),i=lt(n),s={top:/n/.test(t)?i.bottom-o.height:i.top,left:/w/.test(t)?i.right-o.width:i.left,bottom:/s/.test(t)?i.top+o.height:i.bottom,right:/e/.test(t)?i.left+o.width:i.right},a=r?lt(r):s,dt({top:Wr(s.top,a.top),left:Wr(s.left,a.left),bottom:Fr(s.bottom,a.bottom),right:Fr(s.right,a.right)})},Vr.$inject=["eventBus","rules","modeling","dragging"];var Ur="djs-resizing",Yr="resize-not-ok";function Xr(e,t,n){e.on("resize.move",500,function(e){var o,r,i,s;r=(o=e.context).shape,i=o.newBounds,(s=o.frame)||(s=o.frame=n.addFrame(r,t.getActiveLayer()),t.addMarker(r,Ur)),i.width>5&&U(s,{x:i.x,width:i.width}),i.height>5&&U(s,{y:i.y,height:i.height}),o.canExecute?X(s).remove(Yr):X(s).add(Yr)}),e.on("resize.cleanup",function(e){var n,o;o=(n=e.context).shape,n.frame&&se(n.frame),t.removeMarker(o,Ur)})}Xr.$inject=["eventBus","canvas","previewSupport"];var Zr="djs-resizer",Kr=["n","w","s","e","nw","ne","se","sw"];function Qr(e,t,n,o){this._resize=o,this._canvas=t;var r=this;e.on("selection.changed",function(e){var t=e.newSelection;r.removeResizers(),1===t.length&&D(t,I(r.addResizer,r))}),e.on("shape.changed",function(e){var t=e.element;n.isSelected(t)&&(r.removeResizers(),r.addResizer(t))})}Qr.prototype.makeDraggable=function(e,t,n){var o=this._resize;function r(t){Xt(t)&&o.activate(t,e,n)}Ue.bind(t,"mousedown",r),Ue.bind(t,"touchstart",r)},Qr.prototype._createResizer=function(e,t,n,o){var r=this._getResizersParent(),i=function(e){var t={x:0,y:0};return-1!==e.indexOf("e")?t.x=6:-1!==e.indexOf("w")&&(t.x=-6),-1!==e.indexOf("s")?t.y=6:-1!==e.indexOf("n")&&(t.y=-6),t}(o),s=te("g");X(s).add(Zr),X(s).add(Zr+"-"+e.id),X(s).add(Zr+"-"+o),V(r,s);var a=te("rect");U(a,{x:-4+i.x,y:-4+i.y,width:8,height:8}),X(a).add(Zr+"-visual"),V(s,a);var c=te("rect");return U(c,{x:-10+i.x,y:-10+i.y,width:20,height:20}),X(c).add(Zr+"-hit"),V(s,c),function(e,t,n){var o=ie();o.setTranslate(t,n);var r=ie();r.setRotate(0,0,0);var i=ie();i.setScale(1,1),ce(e,[o,r,i])}(s,t,n),s},Qr.prototype.createResizer=function(e,t){var n=Nr(e,t),o=this._createResizer(e,n.x,n.y,t);this.makeDraggable(e,o,t)},Qr.prototype.addResizer=function(e){var t=this;!st(e)&&this._resize.canResize({shape:e})&&D(Kr,function(n){t.createResizer(e,n)})},Qr.prototype.removeResizers=function(){K(this._getResizersParent())},Qr.prototype._getResizersParent=function(){return this._canvas.getLayer("resizers")},Qr.$inject=["eventBus","canvas","selection","resize"];const Jr={__depends__:[dn,Cn,Yn],__init__:["resize","resizePreview","resizeHandles"],resize:["type",Vr],resizePreview:["type",Xr],resizeHandles:["type",Qr]};function ei(e){return Math.log(e)/Math.log(10)}function ti(e,t){var n=ei(e.min),o=ei(e.max);return(Math.abs(n)+Math.abs(o))/t}var ni=Math.sign||function(e){return e>=0?1:-1},oi={min:.2,max:4};function ri(e,t,n){e=e||{},this._enabled=!1,this._canvas=n,this._container=n._container,this._handleWheel=I(this._handleWheel,this),this._totalDelta=0,this._scale=e.scale||.75;var o=this;t.on("canvas.focus.changed",function(t){o._init(t.focused&&!1!==e.enabled)})}ri.$inject=["config.zoomScroll","eventBus","canvas"],ri.prototype.scroll=function(e){this._canvas.scroll(e)},ri.prototype.reset=function(){this._canvas.zoom("fit-viewport")},ri.prototype.zoom=function(e,t){var n=ti(oi,20);this._totalDelta+=e,Math.abs(this._totalDelta)>.1&&(this._zoom(e,t,n),this._totalDelta=0)},ri.prototype._handleWheel=function(e){if(this._canvas.isFocused()){var t=this._container;e.preventDefault();var n,o=e.ctrlKey||/mac/i.test(navigator.platform)&&e.metaKey,r=e.shiftKey,i=-1*this._scale;if(i*=o?0===e.deltaMode?.02:.32:0===e.deltaMode?1:16,o){var s=t.getBoundingClientRect(),a={x:e.clientX-s.left,y:e.clientY-s.top};n=Math.sqrt(Math.pow(e.deltaY,2)+Math.pow(e.deltaX,2))*ni(e.deltaY)*i,this.zoom(n,a)}else n=r?{dx:i*e.deltaY,dy:0}:{dx:i*e.deltaX,dy:i*e.deltaY},this.scroll(n)}},ri.prototype.stepZoom=function(e,t){var n=ti(oi,10);this._zoom(e,t,n)},ri.prototype._zoom=function(e,t,n){var o=this._canvas,r=e>0?1:-1,i=ei(o.zoom()),s=Math.round(i/n)*n;s+=n*r;var a,c,l=Math.pow(10,s);o.zoom((a=oi,c=l,Math.max(a.min,Math.min(a.max,c))),t)},ri.prototype.toggle=function(e){var t=this._container,n=this._handleWheel,o=this._enabled;return void 0===e&&(e=!o),o!==e&&Ue[e?"bind":"unbind"](t,"wheel",n,!1),this._enabled=e,e},ri.prototype._init=function(e){this.toggle(e)};const ii={__init__:["zoomScroll"],zoomScroll:["type",ri]};var si=n(72),ai=n.n(si),ci=n(825),li=n.n(ci),di=n(659),pi=n.n(di),ui=n(56),hi=n.n(ui),Ai=n(540),fi=n.n(Ai),gi=n(113),vi=n.n(gi),yi=n(530),mi={};function Ei(e){this._eventBus=e}function xi(e){return function(t,n,o,r,i){(b(t)||C(t))&&(i=r,r=o,o=n,n=t,t=null),this.on(t,e,n,o,r,i)}}function _i(e){Ei.call(this,e),this.init()}mi.styleTagTransform=vi(),mi.setAttributes=hi(),mi.insert=pi().bind(null,"head"),mi.domAPI=li(),mi.insertStyleElement=fi(),ai()(yi.A,mi),yi.A&&yi.A.locals&&yi.A.locals,Ei.$inject=["eventBus"],Ei.prototype.on=function(e,t,n,o,r,i){if((b(t)||C(t))&&(i=r,r=o,o=n,n=t,t=null),b(n)&&(i=r,r=o,o=n,n=1e3),_(r)&&(i=r,r=!1),!b(o))throw new Error("handlerFn must be a function");x(e)||(e=[e]);var s=this._eventBus;D(e,function(e){var a=["commandStack",e,t].filter(function(e){return e}).join(".");s.on(a,n,r?function(e,t){return function(n){return e.call(t||null,n.context,n.command,n)}}(o,i):o,i)})},Ei.prototype.canExecute=xi("canExecute"),Ei.prototype.preExecute=xi("preExecute"),Ei.prototype.preExecuted=xi("preExecuted"),Ei.prototype.execute=xi("execute"),Ei.prototype.executed=xi("executed"),Ei.prototype.postExecute=xi("postExecute"),Ei.prototype.postExecuted=xi("postExecuted"),Ei.prototype.revert=xi("revert"),Ei.prototype.reverted=xi("reverted"),_i.$inject=["eventBus"],A(_i,Ei),_i.prototype.addRule=function(e,t,n){var o=this;"string"==typeof e&&(e=[e]),e.forEach(function(e){o.canExecute(e,t,function(e,t,o){return n(e)},!0)})},_i.prototype.init=function(){};const Ci={__init__:["exampleContextPadProvider","examplePaletteProvider","exampleRuleProvider"],exampleContextPadProvider:["type",class{static $inject=["connect","contextPad","modeling"];constructor(e,t,n){this.connect=e,this.modeling=n,t.registerProvider(this)}getContextPadEntries(e){const{connect:t,modeling:n}=this,o=()=>{n.removeElements([e])},r=(e,n,o)=>{t.start(e,n,o)};return{delete:{group:"edit",className:"context-pad-icon-remove",title:"Remove",action:{click:o,dragstart:o}},connect:{group:"edit",className:"context-pad-icon-connect",title:"Connect",action:{click:r,dragstart:r}}}}}],examplePaletteProvider:["type",class{static $inject=["create","elementFactory","lassoTool","palette"];constructor(e,t,n,o){this.create=e,this.elementFactory=t,this.lassoTool=n,this.palette=o,o.registerProvider(this)}getPaletteEntries(){const{create:e,elementFactory:t,lassoTool:n,palette:o}=this;return{"lasso-tool":{group:"tools",className:"palette-icon-lasso-tool",title:"Activate Lasso Tool",action:{click:e=>n.activateSelection(e)}},"tool-separator":{group:"tools"},"create-shape":{group:"create",className:"palette-icon-create-shape",title:"Create Shape",action:{click:()=>{const n=t.createShape({width:100,height:80});e.start(event,n)}}},"create-frame":{group:"create",className:"palette-icon-create-frame",title:"Create Frame",action:{click:()=>{const n=t.createShape({width:300,height:200,isFrame:!0});e.start(event,n)}}}}}}],exampleRuleProvider:["type",class extends _i{static $inject=["eventBus"];constructor(e){super(e)}init(){this.addRule("shape.create",e=>{const t=e.target,n=e.shape;return t.parent===n.target}),this.addRule("connection.create",e=>{const t=e.target,n=e.source;return t.parent===n.parent}),this.addRule("shape.resize",e=>Ce(e.shape))}}]},bi={__init__:[["defaultRenderer",function(e){e.CONNECTION_STYLE={fill:"none",strokeWidth:5,stroke:"#000"},e.SHAPE_STYLE={fill:"white",stroke:"#000",strokeWidth:2},e.FRAME_STYLE={fill:"none",stroke:"#000",strokeDasharray:4,strokeWidth:2}}]]};function wi(e){const{container:t,additionalModules:n=[]}=e;return new qt({canvas:{container:t},modules:[Dn,qn,ro,ho,fr,vr,Dr,Er,$r,Jr,dn,cn,ii,Ci,bi,...n]})}return o.default})());
//# sourceMappingURL=editor.js.map