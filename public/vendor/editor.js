!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Editor=t():e.Editor=t()}(self,()=>(()=>{"use strict";var e={56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},72:e=>{var t=[];function n(e){for(var n=-1,o=0;o<t.length;o++)if(t[o].identifier===e){n=o;break}return n}function o(e,o){for(var i={},s=[],a=0;a<e.length;a++){var c=e[a],l=o.base?c[0]+o.base:c[0],u=i[l]||0,d="".concat(l," ").concat(u);i[l]=u+1;var p=n(d),h={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)t[p].references++,t[p].updater(h);else{var f=r(h,o);o.byIndex=a,t.splice(a,0,{identifier:d,updater:f,references:1})}s.push(d)}return s}function r(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var i=o(e=e||[],r=r||{});return function(e){e=e||[];for(var s=0;s<i.length;s++){var a=n(i[s]);t[a].references--}for(var c=o(e,r),l=0;l<i.length;l++){var u=n(i[l]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}i=c}}},76:e=>{e.exports="data:image/svg+xml,%3Csvg%0A%20%20%20%20%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20%0A%20%20%20%20%20fill%3D%22none%22%0A%20%20%20%20%20stroke%3D%22%23000%22%0A%20%20%20%20%20stroke-width%3D%221.5%22%0A%20%20%20%20%20width%3D%2246%22%0A%20%20%20%20%20height%3D%2246%22%3E%0A%20%20%3Crect%20x%3D%2210%22%20y%3D%2210%22%20width%3D%2216%22%20height%3D%2216%22%20stroke-dasharray%3D%225%2C%205%22%20%2F%3E%0A%20%20%3Cline%20x1%3D%2216%22%20y1%3D%2226%22%20x2%3D%2236%22%20y2%3D%2226%22%20stroke%3D%22black%22%20%2F%3E%0A%20%20%3Cline%20x1%3D%2226%22%20y1%3D%2216%22%20x2%3D%2226%22%20y2%3D%2236%22%20stroke%3D%22black%22%20%2F%3E%0A%3C%2Fsvg%3E"},100:e=>{e.exports='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"%3E%3Ccircle cx="12" cy="12" r="8"/%3E%3C/svg%3E'},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},161:e=>{e.exports='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 11 32" fill="currentColor"%3E%3Crect x="3" y="2" width="5" height="28" rx="0" /%3E%3C/svg%3E'},166:e=>{e.exports='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"%3E%3Cpath d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/%3E%3C/svg%3E'},171:e=>{e.exports="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20stroke%3D%22%23000%22%20stroke-width%3D%221.5%22%20width%3D%2246%22%20height%3D%2246%22%3E%3Cline%20x1%3D%225%22%20y1%3D%225%22%20x2%3D%2215%22%20y2%3D%2215%22%2F%3E%3Cline%20x1%3D%2215%22%20y1%3D%225%22%20x2%3D%225%22%20y2%3D%2215%22%2F%3E%3C%2Fsvg%3E"},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n="",o=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),o&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),o&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n}).join("")},t.i=function(e,n,o,r,i){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(o)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(s[c]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);o&&s[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),r&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=r):u[4]="".concat(r)),t.push(u))}},t}},354:e=>{e.exports=function(e){var t=e[1],n=e[3];if(!n)return t;if("function"==typeof btoa){var o=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),i="/*# ".concat(r," */");return[t].concat([i]).join("\n")}return[t].join("\n")}},417:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},502:e=>{e.exports='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"%3E%3Cline x1="5" y1="12" x2="19" y2="12"%3E%3C/line%3E%3Cpolyline points="12 5 19 12 12 19"%3E%3C/polyline%3E%3C/svg%3E'},530:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(354),r=n.n(o),i=n(314),s=n.n(i)()(r());s.push([e.id,'/**\n * color definitions\n */\n.djs-parent {\n  --color-grey-225-10-15: hsl(225, 10%, 15%);\n  --color-grey-225-10-35: hsl(225, 10%, 35%);\n  --color-grey-225-10-55: hsl(225, 10%, 55%);\n  --color-grey-225-10-75: hsl(225, 10%, 75%);\n  --color-grey-225-10-80: hsl(225, 10%, 80%);\n  --color-grey-225-10-85: hsl(225, 10%, 85%);\n  --color-grey-225-10-90: hsl(225, 10%, 90%);\n  --color-grey-225-10-95: hsl(225, 10%, 95%);\n  --color-grey-225-10-97: hsl(225, 10%, 97%);\n\n  --color-blue-205-100-45: hsl(205, 100%, 45%);\n  --color-blue-205-100-45-opacity-30: hsla(205, 100%, 45%, 30%);\n  --color-blue-205-100-50: hsl(205, 100%, 50%);\n  --color-blue-205-100-50-opacity-15: hsla(205, 100%, 50%, 15%);\n  --color-blue-205-100-70: hsl(205, 100%, 75%);\n  --color-blue-205-100-95: hsl(205, 100%, 95%);\n\n  --color-green-150-86-44: hsl(150, 86%, 44%);\n\n  --color-red-360-100-40: hsl(360, 100%, 40%);\n  --color-red-360-100-45: hsl(360, 100%, 45%);\n  --color-red-360-100-92: hsl(360, 100%, 92%);\n  --color-red-360-100-97: hsl(360, 100%, 97%);\n\n  --color-white: hsl(0, 0%, 100%);\n  --color-black: hsl(0, 0%, 0%);\n  --color-black-opacity-10: hsla(0, 0%, 0%, 10%);\n  --color-black-opacity-30: hsla(0, 0%, 0%, 30%);\n\n  --canvas-fill-color: var(--color-white);\n\n  --bendpoint-fill-color: var(--color-blue-205-100-45);\n  --bendpoint-stroke-color: var(--canvas-fill-color);\n\n  --context-pad-entry-background-color: var(--color-white);\n  --context-pad-entry-hover-background-color: var(--color-grey-225-10-95);\n\n  --element-dragger-color: var(--color-blue-205-100-50);\n  --element-hover-outline-fill-color: var(--color-blue-205-100-45);\n  --element-selected-outline-stroke-color: var(--color-blue-205-100-50);\n  --element-selected-outline-secondary-stroke-color: var(--color-blue-205-100-70);\n\n  --lasso-fill-color: var(--color-blue-205-100-50-opacity-15);\n  --lasso-stroke-color: var(--element-selected-outline-stroke-color);\n\n  --palette-entry-color: var(--color-grey-225-10-15);\n  --palette-entry-hover-color: var(--color-blue-205-100-45);\n  --palette-entry-selected-color: var(--color-blue-205-100-50);\n  --palette-separator-color: var(--color-grey-225-10-75);\n  --palette-toggle-hover-background-color: var(--color-grey-225-10-55);\n  --palette-background-color: var(--color-grey-225-10-97);\n  --palette-border-color: var(--color-grey-225-10-75);\n\n  --popup-font-family: "IBM Plex Sans", sans-serif;\n  --popup-font-size: 14px;\n  --popup-header-entry-selected-color: var(--color-blue-205-100-50);\n  --popup-header-font-weight: bolder;\n  --popup-header-group-divider-color: var(--color-grey-225-10-75);\n  --popup-background-color: var(--color-white);\n  --popup-border-color: transparent;\n  --popup-shadow-color: var(--color-black-opacity-30);\n  --popup-description-color: var(--color-grey-225-10-55);\n  --popup-no-results-color: var(--color-grey-225-10-55);\n  --popup-entry-title-color: var(--color-grey-225-10-55);\n  --popup-entry-hover-color:  var(--color-grey-225-10-95);\n  --popup-search-border-color: var(--color-grey-225-10-75);\n  --popup-search-focus-border-color: var(--color-blue-205-100-50);\n  --popup-search-focus-background-color: var(--color-blue-205-100-95);\n\n  --resizer-fill-color: var(--color-blue-205-100-45);\n  --resizer-stroke-color: var(--canvas-fill-color);\n\n  --search-font-family: "IBM Plex Sans", sans-serif;\n  --search-font-size: 14px;\n  --search-container-background-color: var(--color-white);\n  --search-shadow-color: var(--color-black-opacity-30);\n  --search-input-border-color: var(--color-grey-225-10-75);\n  --search-input-focus-border-color: var(--color-blue-205-100-50);\n  --search-input-focus-background-color: var(--color-blue-205-100-95);\n  --search-result-hover-background-color: var(--color-grey-225-10-95);\n  --search-result-secondary-color: var(--color-grey-225-10-55);\n  --search-preselected-background-color: var(--color-blue-205-100-50-opacity-15);\n\n  --shape-attach-allowed-stroke-color: var(--color-blue-205-100-50);\n  --shape-connect-allowed-fill-color: var(--color-grey-225-10-97);\n  --shape-drop-allowed-fill-color: var(--color-grey-225-10-97);\n  --shape-drop-not-allowed-fill-color: var(--color-red-360-100-97);\n  --shape-resize-preview-stroke-color: var(--color-blue-205-100-50);\n\n  --snap-line-stroke-color: var(--color-blue-205-100-45-opacity-30);\n\n  --space-tool-crosshair-stroke-color: var(--color-black);\n\n  --tooltip-error-background-color: var(--color-red-360-100-97);\n  --tooltip-error-border-color: var(--color-red-360-100-45);\n  --tooltip-error-color: var(--color-red-360-100-45);\n}\n\n/**\n * SVG styles\n */\n\n.djs-container svg.drop-not-ok {\n  background: var(--shape-drop-not-allowed-fill-color) !important;\n}\n\n.djs-container svg.new-parent {\n  background: var(--shape-drop-allowed-fill-color) !important;\n}\n\n/**\n * outline styles\n */\n\n.djs-outline,\n.djs-selection-outline {\n  fill: none;\n  shape-rendering: geometricPrecision;\n  stroke-width: 2px;\n}\n\n.djs-outline {\n  visibility: hidden;\n}\n\n.djs-selection-outline {\n  stroke: var(--element-selected-outline-stroke-color);\n}\n\n.djs-element.selected .djs-outline {\n  visibility: visible;\n\n  stroke: var(--element-selected-outline-stroke-color);\n}\n\n.djs-connection.selected .djs-outline {\n  display: none;\n}\n\n.djs-multi-select .djs-element.selected .djs-outline {\n  stroke: var(--element-selected-outline-secondary-stroke-color);\n  display: block;\n}\n\n.djs-shape.connect-ok .djs-visual > :nth-child(1) {\n  fill: var(--shape-connect-allowed-fill-color) !important;\n}\n\n.djs-shape.connect-not-ok .djs-visual > :nth-child(1),\n.djs-shape.drop-not-ok .djs-visual > :nth-child(1) {\n  fill: var(--shape-drop-not-allowed-fill-color) !important;\n}\n\n.djs-shape.new-parent .djs-visual > :nth-child(1) {\n  fill: var(--shape-drop-allowed-fill-color) !important;\n}\n\n\n/* Override move cursor during drop and connect */\n.drop-not-ok,\n.connect-not-ok,\n.drop-not-ok *,\n.connect-not-ok * {\n  cursor: not-allowed !important;\n}\n\n.drop-ok,\n.connect-ok,\n.drop-ok *,\n.connect-ok * {\n  cursor: default !important;\n}\n\n.djs-element.attach-ok .djs-visual > :nth-child(1) {\n  stroke-width: 5px !important;\n  stroke: var(--shape-attach-allowed-stroke-color) !important;\n}\n\n.djs-frame.connect-not-ok .djs-visual > :nth-child(1),\n.djs-frame.drop-not-ok .djs-visual > :nth-child(1) {\n  stroke-width: 3px !important;\n  stroke: var(--shape-drop-not-allowed-fill-color) !important;\n  fill: none !important;\n}\n\n/**\n* Selection box style\n*\n*/\n.djs-lasso-overlay {\n  fill: var(--lasso-fill-color);\n  stroke: var(--lasso-stroke-color);\n  stroke-width: 2px;\n  shape-rendering: geometricPrecision;\n  pointer-events: none;\n}\n\n/**\n * Resize styles\n */\n.djs-resize-overlay {\n  fill: none;\n\n  stroke-dasharray: 5 1 3 1;\n  stroke: var(--shape-resize-preview-stroke-color);\n\n  pointer-events: none;\n}\n\n.djs-resizer-hit {\n  fill: none;\n  pointer-events: all;\n}\n\n.djs-resizer-visual {\n  fill: var(--resizer-fill-color);\n  stroke-width: 1px;\n  stroke: var(--resizer-stroke-color);\n  shape-rendering: geometricPrecision;\n}\n\n.djs-resizer:hover .djs-resizer-visual {\n  stroke: var(--resizer-stroke-color);\n  stroke-opacity: 1;\n}\n\n.djs-cursor-resize-ns,\n.djs-resizer-n,\n.djs-resizer-s {\n  cursor: ns-resize;\n}\n\n.djs-cursor-resize-ew,\n.djs-resizer-e,\n.djs-resizer-w {\n  cursor: ew-resize;\n}\n\n.djs-cursor-resize-nwse,\n.djs-resizer-nw,\n.djs-resizer-se {\n  cursor: nwse-resize;\n}\n\n.djs-cursor-resize-nesw,\n.djs-resizer-ne,\n.djs-resizer-sw {\n  cursor: nesw-resize;\n}\n\n.djs-shape.djs-resizing > .djs-outline {\n  visibility: hidden !important;\n}\n\n.djs-shape.djs-resizing > .djs-resizer {\n  visibility: hidden;\n}\n\n.djs-dragger > .djs-resizer {\n  visibility: hidden;\n}\n\n/**\n * drag styles\n */\n.djs-dragger * {\n  fill: none !important;\n  stroke: var(--element-dragger-color) !important;\n}\n\n.djs-dragger tspan,\n.djs-dragger text {\n  fill: var(--element-dragger-color) !important;\n  stroke: none !important;\n}\n\n.djs-dragger marker circle,\n.djs-dragger marker path,\n.djs-dragger marker polygon,\n.djs-dragger marker polyline,\n.djs-dragger marker rect {\n  fill: var(--element-dragger-color) !important;\n  stroke: none !important;\n}\n\n.djs-dragger marker text,\n.djs-dragger marker tspan {\n  fill: none !important;\n  stroke: var(--element-dragger-color) !important;\n}\n\n.djs-dragging,\n.djs-dragging > * {\n  opacity: 0.3 !important;\n  pointer-events: none !important;\n}\n\n/**\n * no pointer events for visual\n */\n.djs-visual,\n.djs-outline {\n  pointer-events: none;\n}\n\n.djs-element.attach-ok .djs-hit {\n  stroke-width: 60px !important;\n}\n\n/**\n * all pointer events for hit shape\n */\n.djs-element > .djs-hit-all,\n.djs-element > .djs-hit-no-move {\n  pointer-events: all;\n}\n\n.djs-element > .djs-hit-stroke,\n.djs-element > .djs-hit-click-stroke {\n  pointer-events: stroke;\n}\n\n/**\n * shape / connection basic styles\n */\n.djs-connection .djs-visual {\n  stroke-width: 2px;\n  fill: none;\n}\n\n.djs-cursor-grab {\n  cursor: -webkit-grab;\n  cursor: -moz-grab;\n  cursor: grab;\n}\n\n.djs-cursor-grabbing {\n  cursor: -webkit-grabbing;\n  cursor: -moz-grabbing;\n  cursor: grabbing;\n}\n\n.djs-cursor-crosshair {\n  cursor: crosshair;\n}\n\n.djs-cursor-move {\n  cursor: move;\n}\n\n.djs-cursor-resize-ns {\n  cursor: ns-resize;\n}\n\n.djs-cursor-resize-ew {\n  cursor: ew-resize;\n}\n\n\n/**\n * snapping\n */\n.djs-snap-line {\n  stroke: var(--snap-line-stroke-color);\n  stroke-linecap: round;\n  stroke-width: 2px;\n  pointer-events: none;\n}\n\n/**\n * snapping\n */\n.djs-crosshair {\n  stroke: var(--space-tool-crosshair-stroke-color);\n  stroke-linecap: round;\n  stroke-width: 1px;\n  pointer-events: none;\n  shape-rendering: geometricPrecision;\n  stroke-dasharray: 5, 5;\n}\n\n/**\n * palette\n */\n\n.djs-palette {\n  position: absolute;\n  left: 20px;\n  top: 20px;\n\n  box-sizing: border-box;\n  width: 48px;\n}\n\n.djs-palette .separator {\n  margin: 5px;\n  padding-top: 5px;\n\n  border: none;\n  border-bottom: solid 1px var(--palette-separator-color);\n\n  clear: both;\n}\n\n.djs-palette .entry:before {\n  vertical-align: initial;\n}\n\n.djs-palette .djs-palette-toggle {\n  cursor: pointer;\n}\n\n.djs-palette .entry,\n.djs-palette .djs-palette-toggle {\n  color: var(--palette-entry-color);\n  font-size: 30px;\n\n  text-align: center;\n}\n\n.djs-palette .entry {\n  float: left;\n}\n\n.djs-palette .entry img {\n  max-width: 100%;\n}\n\n.djs-palette .djs-palette-entries:after {\n  content: \'\';\n  display: table;\n  clear: both;\n}\n\n.djs-palette .djs-palette-toggle:hover {\n  background: var(--palette-toggle-hover-background-color);\n}\n\n.djs-palette .entry:hover {\n  color: var(--palette-entry-hover-color);\n}\n\n.djs-palette .highlighted-entry {\n  color: var(--palette-entry-selected-color) !important;\n}\n\n.djs-palette .entry,\n.djs-palette .djs-palette-toggle {\n  width: 46px;\n  height: 46px;\n  line-height: 46px;\n  cursor: default;\n}\n\n/**\n * Palette open / two-column layout is controlled via\n * classes on the palette. Events to hook into palette\n * changed life-cycle are available in addition.\n */\n.djs-palette.two-column.open {\n  width: 94px;\n}\n\n.djs-palette:not(.open) .djs-palette-entries {\n  display: none;\n}\n\n.djs-palette:not(.open) {\n  overflow: hidden;\n}\n\n.djs-palette.open .djs-palette-toggle {\n  display: none;\n}\n\n/**\n * context-pad\n */\n.djs-context-pad {\n  position: absolute;\n  display: none;\n  pointer-events: none;\n  line-height: 1;\n  width: 72px;\n  z-index: 100;\n}\n\n.djs-context-pad .entry {\n  width: 22px;\n  height: 22px;\n  text-align: center;\n  display: inline-block;\n  font-size: 22px;\n  margin: 0 2px 2px 0;\n\n  border-radius: 3px;\n\n  cursor: default;\n\n  background-color: var(--context-pad-entry-background-color);\n  box-shadow: 0 0 2px 1px var(--context-pad-entry-background-color);\n  pointer-events: all;\n  vertical-align: middle;\n}\n\n.djs-context-pad .entry:hover {\n  background: var(--context-pad-entry-hover-background-color);\n}\n\n.djs-context-pad.open {\n  display: block;\n}\n\n/**\n * popup styles\n */\n.djs-popup {\n  line-height: 1;\n  box-sizing: border-box;\n  width: min-content;\n  background: var(--popup-background-color);\n  overflow: hidden;\n  position: fixed;\n  z-index: 200;\n  box-shadow: 0px 2px 6px var(--popup-shadow-color);\n  border: solid 1px var(--popup-border-color);\n  min-width: 120px;\n  outline: none;\n  font-size: var(--popup-font-size);\n  font-family: var(--popup-font-family);\n}\n\n.djs-popup-search input {\n  width: 100%;\n  box-sizing: border-box;\n  font-size: var(--popup-font-size);\n  padding: 3px 6px 3px 28px;\n  border-radius: 2px;\n  border: solid 1px var(--popup-search-border-color);\n  line-height: 21px;\n}\n\n.djs-popup-search input:focus {\n  background-color: var(--popup-search-focus-background-color);\n  border: solid 1px var(--popup-search-focus-border-color);\n  outline: none;\n}\n\n.djs-popup-header {\n  display: flex;\n  align-items: stretch;\n  line-height: 20px;\n  margin: 10px 12px 10px 12px;\n}\n\n.djs-popup-header .entry {\n  border-radius: 2px;\n}\n\n.djs-popup button.entry {\n  padding: 0;\n  background: transparent;\n  border: 0;\n}\n\n.djs-popup-header .entry.active {\n  color: var(--popup-header-entry-selected-color);\n}\n\n.djs-popup-header .entry.disabled {\n  color: inherit;\n}\n\n.djs-popup-header-group {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n\n.djs-popup-header-group .entry {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n}\n\n.djs-popup-header-group + .djs-popup-header-group:before {\n  content: \'\';\n  width: 1px;\n  height: 20px;\n  background: var(--popup-header-group-divider-color);\n  margin: 0 5px;\n}\n\n.djs-popup-search {\n  position: relative;\n  width: auto;\n  margin: 10px 12px;\n}\n\n.djs-popup-title {\n  font-size: var(--popup-font-size);\n  font-weight: var(--popup-header-font-weight);\n  flex: 1;\n  margin: 0;\n}\n\n.djs-popup-search-icon {\n  position: absolute;\n  left: 8px;\n  top: 7px;\n}\n\n.djs-popup-results {\n  margin: 7px 3px 7px 12px;\n  list-style: none;\n  max-height: 280px;\n  overflow: auto;\n  padding-right: 9px;\n}\n\n.djs-popup-group {\n  margin: 0;\n  padding: 0;\n  width: 100%;\n}\n\n.djs-popup-body .entry,\n.djs-popup-body .entry-header {\n  padding: 5px 7px;\n  cursor: default;\n  border-radius: 4px;\n}\n\n.djs-popup-body .entry-header {\n  font-weight: var(--popup-header-font-weight);\n  color: var(--popup-entry-title-color);\n  padding-left: 0;\n}\n\n.djs-popup [class*="icon"] .djs-popup-label,\n.djs-popup-label:not(:first-child) {\n  margin-left: .5em;\n}\n\n.djs-popup [class*="icon"]:before,\n.djs-popup-entry-icon {\n  width: 1em;\n  height: 1em;\n  display: inline-block;\n  font-size: 1.4em;\n  vertical-align: middle;\n}\n\n.djs-popup-body .entry-header:not(:first-child) {\n  margin-top: 8px;\n  margin-bottom: 2px;\n}\n\n.djs-popup-body .entry {\n  display: flex;\n  flex-direction: row;\n  align-items: stretch;\n  height: min-content;\n}\n\n.djs-popup .entry.selected {\n  background-color: var(--popup-entry-hover-color);\n}\n\n.djs-popup-body .entry:not(:first-child) {\n  margin-top: 2px;\n}\n\n.djs-popup-entry-content {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  overflow: hidden;\n}\n\n.djs-popup-entry-description {\n  color: var(--popup-description-color);\n}\n\n.djs-popup-label,\n.djs-popup-entry-description {\n  line-height: 1.4em;\n}\n\n.djs-popup .entry,\n.djs-popup .entry-header {\n  margin: 1px;\n}\n\n.djs-popup-title,\n.djs-popup-label,\n.djs-popup-entry-description,\n.djs-popup .entry-header {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.djs-popup-entry-name {\n  display: flex;\n}\n\n.djs-popup-body {\n  flex-direction: column;\n  width: auto;\n}\n\n.djs-popup *::-webkit-scrollbar {\n  width: 6px;\n}\n\n.djs-popup *::-webkit-scrollbar-thumb {\n  border-radius: 3px;\n  background-color: rgba(0, 0, 0, 0.2);\n}\n\n.djs-popup *::-webkit-scrollbar-track {\n  box-shadow: none;\n  background: transparent;\n  margin: 0;\n  padding: 5px;\n}\n\n.djs-popup-no-results {\n  padding: 0 12px 12px 12px;\n  color: var(--popup-no-results-color);\n}\n\n.djs-popup-entry-docs {\n  flex: 0;\n  flex-direction: row;\n  align-items: center;\n  padding-left: 5px;\n  display: none;\n}\n\n.djs-popup-body .entry:hover .djs-popup-entry-docs {\n  display: flex;\n}\n\n.djs-popup-entry-docs svg {\n  vertical-align: middle;\n  margin: auto 2px auto 5px;\n}\n\n/**\n *  palette styles\n */\n.djs-palette {\n  background: var(--palette-background-color);\n  border: solid 1px var(--palette-border-color);\n  border-radius: 2px;\n}\n\n/**\n * bendpoints\n */\n.djs-segment-dragger,\n.djs-bendpoint {\n  display: none;\n}\n\n.djs-segment-dragger .djs-visual {\n  display: none;\n\n  fill: var(--bendpoint-fill-color);\n  stroke: var(--bendpoint-stroke-color);\n  stroke-width: 1px;\n  stroke-opacity: 1;\n}\n\n.djs-segment-dragger:hover .djs-visual {\n  display: block;\n}\n\n.djs-bendpoint .djs-visual {\n  fill: var(--bendpoint-fill-color);\n  stroke: var(--bendpoint-stroke-color);\n  stroke-width: 1px;\n}\n\n.djs-segment-dragger:hover,\n.djs-bendpoints.hover .djs-segment-dragger,\n.djs-bendpoints.selected .djs-segment-dragger,\n.djs-bendpoint:hover,\n.djs-bendpoints.hover .djs-bendpoint,\n.djs-bendpoints.selected .djs-bendpoint {\n  display: block;\n}\n\n.djs-drag-active .djs-bendpoints * {\n  display: none;\n}\n\n.djs-bendpoints:not(.hover) .floating {\n  display: none;\n}\n\n.djs-segment-dragger:hover .djs-visual,\n.djs-segment-dragger.djs-dragging .djs-visual,\n.djs-bendpoint:hover .djs-visual,\n.djs-bendpoint.floating .djs-visual {\n  fill: var(--bendpoint-fill-color);\n  stroke: var(--bendpoint-stroke-color);\n  stroke-opacity: 1;\n}\n\n.djs-bendpoint.floating .djs-hit {\n  pointer-events: none;\n}\n\n.djs-segment-dragger .djs-hit,\n.djs-bendpoint .djs-hit {\n  fill: none;\n  pointer-events: all;\n}\n\n.djs-segment-dragger.horizontal .djs-hit {\n  cursor: ns-resize;\n}\n\n.djs-segment-dragger.vertical .djs-hit {\n  cursor: ew-resize;\n}\n\n.djs-segment-dragger.djs-dragging .djs-hit {\n  pointer-events: none;\n}\n\n.djs-updating,\n.djs-updating > * {\n  pointer-events: none !important;\n}\n\n.djs-updating .djs-context-pad,\n.djs-updating .djs-outline,\n.djs-updating .djs-bendpoint,\n.djs-multi-select .djs-bendpoint,\n.djs-multi-select .djs-segment-dragger,\n.connect-ok .djs-bendpoint,\n.connect-not-ok .djs-bendpoint,\n.drop-ok .djs-bendpoint,\n.drop-not-ok .djs-bendpoint {\n  display: none !important;\n}\n\n.djs-segment-dragger.djs-dragging,\n.djs-bendpoint.djs-dragging {\n  display: block;\n  opacity: 1.0;\n}\n\n\n/**\n * tooltips\n */\n.djs-tooltip-error {\n  width: 160px;\n  padding: 6px;\n\n  background: var(--tooltip-error-background-color);\n  border: solid 1px var(--tooltip-error-border-color);\n  border-radius: 2px;\n  color: var(--tooltip-error-color);\n  font-size: 12px;\n  line-height: 16px;\n\n  opacity: 0.75;\n}\n\n.djs-tooltip-error:hover {\n  opacity: 1;\n}\n\n\n/**\n * search pad\n */\n.djs-search-open .djs-context-pad {\n  display: none;\n}\n\n.djs-search-open .djs-connection.selected .djs-outline {\n  display: block;\n}\n\n.djs-search-container {\n  position: absolute;\n  top: 20px;\n  left: 0;\n  right: 0;\n  margin-left: auto;\n  margin-right: auto;\n\n  width: 25%;\n  min-width: 300px;\n  max-width: 400px;\n  z-index: 10;\n\n  font-family: var(--search-font-family);\n  font-size: var(--search-font-size);\n  border-radius: 2px;\n  box-shadow: 0px 2px 6px var(--search-shadow-color);\n}\n\n.djs-search-container:not(.open) {\n  display: none;\n}\n\n.djs-search-input {\n  position: relative;\n}\n\n.djs-search-input svg {\n  position: absolute;\n  left: 8px;\n  top: 7px;\n}\n\n.djs-search-input input {\n  font-size: var(--search-font-size);\n  width: 100%;\n  padding: 3px 6px 3px 28px;\n  border: 1px solid var(--search-input-border-color);\n  border-radius: 2px;\n  box-sizing: border-box;\n  line-height: 21px;\n}\n\n.djs-search-input input:focus {\n  background-color: var(--search-input-focus-background-color);\n  border: solid 1px var(--search-input-focus-border-color);\n  outline: none;\n}\n\n.djs-search-results {\n  position: relative;\n  overflow-y: auto;\n  max-height: 200px;\n  background: var(--search-container-background-color);\n}\n\n.djs-search-result {\n  padding: 6px 8px;\n}\n\n.djs-search-result-primary {\n  margin: 0 0 3px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n}\n\n.djs-search-result-secondary {\n  font-family: monospace;\n  margin: 0;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  color: var(--search-result-secondary-color);\n}\n\n.djs-search-result:hover {\n  background: var(--search-result-hover-background-color);\n}\n\n.djs-search-result-selected {\n  background: var(--search-result-hover-background-color);\n}\n\n.djs-search-result-selected:hover {\n  background: var(--search-result-hover-background-color);\n}\n\n.djs-search-open .djs-element .djs-outline {\n  fill: var(--search-preselected-background-color) !important;\n}\n\n/**\n * hidden styles\n */\n.djs-element-hidden,\n.djs-element-hidden .djs-hit,\n.djs-element-hidden .djs-outline,\n.djs-label-hidden .djs-label {\n  display: none !important;\n}\n\n.djs-element .djs-hit-stroke,\n.djs-element .djs-hit-click-stroke,\n.djs-element .djs-hit-all {\n  cursor: move;\n}',"",{version:3,sources:["webpack://./node_modules/diagram-js/assets/diagram-js.css"],names:[],mappings:"AAAA;;EAEE;AACF;EACE,0CAA0C;EAC1C,0CAA0C;EAC1C,0CAA0C;EAC1C,0CAA0C;EAC1C,0CAA0C;EAC1C,0CAA0C;EAC1C,0CAA0C;EAC1C,0CAA0C;EAC1C,0CAA0C;;EAE1C,4CAA4C;EAC5C,6DAA6D;EAC7D,4CAA4C;EAC5C,6DAA6D;EAC7D,4CAA4C;EAC5C,4CAA4C;;EAE5C,2CAA2C;;EAE3C,2CAA2C;EAC3C,2CAA2C;EAC3C,2CAA2C;EAC3C,2CAA2C;;EAE3C,+BAA+B;EAC/B,6BAA6B;EAC7B,8CAA8C;EAC9C,8CAA8C;;EAE9C,uCAAuC;;EAEvC,oDAAoD;EACpD,kDAAkD;;EAElD,wDAAwD;EACxD,uEAAuE;;EAEvE,qDAAqD;EACrD,gEAAgE;EAChE,qEAAqE;EACrE,+EAA+E;;EAE/E,2DAA2D;EAC3D,kEAAkE;;EAElE,kDAAkD;EAClD,yDAAyD;EACzD,4DAA4D;EAC5D,sDAAsD;EACtD,oEAAoE;EACpE,uDAAuD;EACvD,mDAAmD;;EAEnD,gDAAgD;EAChD,uBAAuB;EACvB,iEAAiE;EACjE,kCAAkC;EAClC,+DAA+D;EAC/D,4CAA4C;EAC5C,iCAAiC;EACjC,mDAAmD;EACnD,sDAAsD;EACtD,qDAAqD;EACrD,sDAAsD;EACtD,uDAAuD;EACvD,wDAAwD;EACxD,+DAA+D;EAC/D,mEAAmE;;EAEnE,kDAAkD;EAClD,gDAAgD;;EAEhD,iDAAiD;EACjD,wBAAwB;EACxB,uDAAuD;EACvD,oDAAoD;EACpD,wDAAwD;EACxD,+DAA+D;EAC/D,mEAAmE;EACnE,mEAAmE;EACnE,4DAA4D;EAC5D,8EAA8E;;EAE9E,iEAAiE;EACjE,+DAA+D;EAC/D,4DAA4D;EAC5D,gEAAgE;EAChE,iEAAiE;;EAEjE,iEAAiE;;EAEjE,uDAAuD;;EAEvD,6DAA6D;EAC7D,yDAAyD;EACzD,kDAAkD;AACpD;;AAEA;;EAEE;;AAEF;EACE,+DAA+D;AACjE;;AAEA;EACE,2DAA2D;AAC7D;;AAEA;;EAEE;;AAEF;;EAEE,UAAU;EACV,mCAAmC;EACnC,iBAAiB;AACnB;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,oDAAoD;AACtD;;AAEA;EACE,mBAAmB;;EAEnB,oDAAoD;AACtD;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,8DAA8D;EAC9D,cAAc;AAChB;;AAEA;EACE,wDAAwD;AAC1D;;AAEA;;EAEE,yDAAyD;AAC3D;;AAEA;EACE,qDAAqD;AACvD;;;AAGA,iDAAiD;AACjD;;;;EAIE,8BAA8B;AAChC;;AAEA;;;;EAIE,0BAA0B;AAC5B;;AAEA;EACE,4BAA4B;EAC5B,2DAA2D;AAC7D;;AAEA;;EAEE,4BAA4B;EAC5B,2DAA2D;EAC3D,qBAAqB;AACvB;;AAEA;;;CAGC;AACD;EACE,6BAA6B;EAC7B,iCAAiC;EACjC,iBAAiB;EACjB,mCAAmC;EACnC,oBAAoB;AACtB;;AAEA;;EAEE;AACF;EACE,UAAU;;EAEV,yBAAyB;EACzB,gDAAgD;;EAEhD,oBAAoB;AACtB;;AAEA;EACE,UAAU;EACV,mBAAmB;AACrB;;AAEA;EACE,+BAA+B;EAC/B,iBAAiB;EACjB,mCAAmC;EACnC,mCAAmC;AACrC;;AAEA;EACE,mCAAmC;EACnC,iBAAiB;AACnB;;AAEA;;;EAGE,iBAAiB;AACnB;;AAEA;;;EAGE,iBAAiB;AACnB;;AAEA;;;EAGE,mBAAmB;AACrB;;AAEA;;;EAGE,mBAAmB;AACrB;;AAEA;EACE,6BAA6B;AAC/B;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,kBAAkB;AACpB;;AAEA;;EAEE;AACF;EACE,qBAAqB;EACrB,+CAA+C;AACjD;;AAEA;;EAEE,6CAA6C;EAC7C,uBAAuB;AACzB;;AAEA;;;;;EAKE,6CAA6C;EAC7C,uBAAuB;AACzB;;AAEA;;EAEE,qBAAqB;EACrB,+CAA+C;AACjD;;AAEA;;EAEE,uBAAuB;EACvB,+BAA+B;AACjC;;AAEA;;EAEE;AACF;;EAEE,oBAAoB;AACtB;;AAEA;EACE,6BAA6B;AAC/B;;AAEA;;EAEE;AACF;;EAEE,mBAAmB;AACrB;;AAEA;;EAEE,sBAAsB;AACxB;;AAEA;;EAEE;AACF;EACE,iBAAiB;EACjB,UAAU;AACZ;;AAEA;EACE,oBAAoB;EACpB,iBAAiB;EACjB,YAAY;AACd;;AAEA;EACE,wBAAwB;EACxB,qBAAqB;EACrB,gBAAgB;AAClB;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,YAAY;AACd;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,iBAAiB;AACnB;;;AAGA;;EAEE;AACF;EACE,qCAAqC;EACrC,qBAAqB;EACrB,iBAAiB;EACjB,oBAAoB;AACtB;;AAEA;;EAEE;AACF;EACE,gDAAgD;EAChD,qBAAqB;EACrB,iBAAiB;EACjB,oBAAoB;EACpB,mCAAmC;EACnC,sBAAsB;AACxB;;AAEA;;EAEE;;AAEF;EACE,kBAAkB;EAClB,UAAU;EACV,SAAS;;EAET,sBAAsB;EACtB,WAAW;AACb;;AAEA;EACE,WAAW;EACX,gBAAgB;;EAEhB,YAAY;EACZ,uDAAuD;;EAEvD,WAAW;AACb;;AAEA;EACE,uBAAuB;AACzB;;AAEA;EACE,eAAe;AACjB;;AAEA;;EAEE,iCAAiC;EACjC,eAAe;;EAEf,kBAAkB;AACpB;;AAEA;EACE,WAAW;AACb;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,WAAW;EACX,cAAc;EACd,WAAW;AACb;;AAEA;EACE,wDAAwD;AAC1D;;AAEA;EACE,uCAAuC;AACzC;;AAEA;EACE,qDAAqD;AACvD;;AAEA;;EAEE,WAAW;EACX,YAAY;EACZ,iBAAiB;EACjB,eAAe;AACjB;;AAEA;;;;EAIE;AACF;EACE,WAAW;AACb;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,aAAa;AACf;;AAEA;;EAEE;AACF;EACE,kBAAkB;EAClB,aAAa;EACb,oBAAoB;EACpB,cAAc;EACd,WAAW;EACX,YAAY;AACd;;AAEA;EACE,WAAW;EACX,YAAY;EACZ,kBAAkB;EAClB,qBAAqB;EACrB,eAAe;EACf,mBAAmB;;EAEnB,kBAAkB;;EAElB,eAAe;;EAEf,2DAA2D;EAC3D,iEAAiE;EACjE,mBAAmB;EACnB,sBAAsB;AACxB;;AAEA;EACE,2DAA2D;AAC7D;;AAEA;EACE,cAAc;AAChB;;AAEA;;EAEE;AACF;EACE,cAAc;EACd,sBAAsB;EACtB,kBAAkB;EAClB,yCAAyC;EACzC,gBAAgB;EAChB,eAAe;EACf,YAAY;EACZ,iDAAiD;EACjD,2CAA2C;EAC3C,gBAAgB;EAChB,aAAa;EACb,iCAAiC;EACjC,qCAAqC;AACvC;;AAEA;EACE,WAAW;EACX,sBAAsB;EACtB,iCAAiC;EACjC,yBAAyB;EACzB,kBAAkB;EAClB,kDAAkD;EAClD,iBAAiB;AACnB;;AAEA;EACE,4DAA4D;EAC5D,wDAAwD;EACxD,aAAa;AACf;;AAEA;EACE,aAAa;EACb,oBAAoB;EACpB,iBAAiB;EACjB,2BAA2B;AAC7B;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,UAAU;EACV,uBAAuB;EACvB,SAAS;AACX;;AAEA;EACE,+CAA+C;AACjD;;AAEA;EACE,cAAc;AAChB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,mBAAmB;EACnB,gBAAgB;EAChB,SAAS;EACT,UAAU;AACZ;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,mBAAmB;AACrB;;AAEA;EACE,WAAW;EACX,UAAU;EACV,YAAY;EACZ,mDAAmD;EACnD,aAAa;AACf;;AAEA;EACE,kBAAkB;EAClB,WAAW;EACX,iBAAiB;AACnB;;AAEA;EACE,iCAAiC;EACjC,4CAA4C;EAC5C,OAAO;EACP,SAAS;AACX;;AAEA;EACE,kBAAkB;EAClB,SAAS;EACT,QAAQ;AACV;;AAEA;EACE,wBAAwB;EACxB,gBAAgB;EAChB,iBAAiB;EACjB,cAAc;EACd,kBAAkB;AACpB;;AAEA;EACE,SAAS;EACT,UAAU;EACV,WAAW;AACb;;AAEA;;EAEE,gBAAgB;EAChB,eAAe;EACf,kBAAkB;AACpB;;AAEA;EACE,4CAA4C;EAC5C,qCAAqC;EACrC,eAAe;AACjB;;AAEA;;EAEE,iBAAiB;AACnB;;AAEA;;EAEE,UAAU;EACV,WAAW;EACX,qBAAqB;EACrB,gBAAgB;EAChB,sBAAsB;AACxB;;AAEA;EACE,eAAe;EACf,kBAAkB;AACpB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,oBAAoB;EACpB,mBAAmB;AACrB;;AAEA;EACE,gDAAgD;AAClD;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,OAAO;EACP,gBAAgB;AAClB;;AAEA;EACE,qCAAqC;AACvC;;AAEA;;EAEE,kBAAkB;AACpB;;AAEA;;EAEE,WAAW;AACb;;AAEA;;;;EAIE,gBAAgB;EAChB,uBAAuB;EACvB,mBAAmB;AACrB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,sBAAsB;EACtB,WAAW;AACb;;AAEA;EACE,UAAU;AACZ;;AAEA;EACE,kBAAkB;EAClB,oCAAoC;AACtC;;AAEA;EACE,gBAAgB;EAChB,uBAAuB;EACvB,SAAS;EACT,YAAY;AACd;;AAEA;EACE,yBAAyB;EACzB,oCAAoC;AACtC;;AAEA;EACE,OAAO;EACP,mBAAmB;EACnB,mBAAmB;EACnB,iBAAiB;EACjB,aAAa;AACf;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,sBAAsB;EACtB,yBAAyB;AAC3B;;AAEA;;EAEE;AACF;EACE,2CAA2C;EAC3C,6CAA6C;EAC7C,kBAAkB;AACpB;;AAEA;;EAEE;AACF;;EAEE,aAAa;AACf;;AAEA;EACE,aAAa;;EAEb,iCAAiC;EACjC,qCAAqC;EACrC,iBAAiB;EACjB,iBAAiB;AACnB;;AAEA;EACE,cAAc;AAChB;;AAEA;EACE,iCAAiC;EACjC,qCAAqC;EACrC,iBAAiB;AACnB;;AAEA;;;;;;EAME,cAAc;AAChB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,aAAa;AACf;;AAEA;;;;EAIE,iCAAiC;EACjC,qCAAqC;EACrC,iBAAiB;AACnB;;AAEA;EACE,oBAAoB;AACtB;;AAEA;;EAEE,UAAU;EACV,mBAAmB;AACrB;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,oBAAoB;AACtB;;AAEA;;EAEE,+BAA+B;AACjC;;AAEA;;;;;;;;;EASE,wBAAwB;AAC1B;;AAEA;;EAEE,cAAc;EACd,YAAY;AACd;;;AAGA;;EAEE;AACF;EACE,YAAY;EACZ,YAAY;;EAEZ,iDAAiD;EACjD,mDAAmD;EACnD,kBAAkB;EAClB,iCAAiC;EACjC,eAAe;EACf,iBAAiB;;EAEjB,aAAa;AACf;;AAEA;EACE,UAAU;AACZ;;;AAGA;;EAEE;AACF;EACE,aAAa;AACf;;AAEA;EACE,cAAc;AAChB;;AAEA;EACE,kBAAkB;EAClB,SAAS;EACT,OAAO;EACP,QAAQ;EACR,iBAAiB;EACjB,kBAAkB;;EAElB,UAAU;EACV,gBAAgB;EAChB,gBAAgB;EAChB,WAAW;;EAEX,sCAAsC;EACtC,kCAAkC;EAClC,kBAAkB;EAClB,kDAAkD;AACpD;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,kBAAkB;EAClB,SAAS;EACT,QAAQ;AACV;;AAEA;EACE,kCAAkC;EAClC,WAAW;EACX,yBAAyB;EACzB,kDAAkD;EAClD,kBAAkB;EAClB,sBAAsB;EACtB,iBAAiB;AACnB;;AAEA;EACE,4DAA4D;EAC5D,wDAAwD;EACxD,aAAa;AACf;;AAEA;EACE,kBAAkB;EAClB,gBAAgB;EAChB,iBAAiB;EACjB,oDAAoD;AACtD;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,eAAe;EACf,uBAAuB;EACvB,gBAAgB;EAChB,mBAAmB;AACrB;;AAEA;EACE,sBAAsB;EACtB,SAAS;EACT,uBAAuB;EACvB,gBAAgB;EAChB,mBAAmB;EACnB,2CAA2C;AAC7C;;AAEA;EACE,uDAAuD;AACzD;;AAEA;EACE,uDAAuD;AACzD;;AAEA;EACE,uDAAuD;AACzD;;AAEA;EACE,2DAA2D;AAC7D;;AAEA;;EAEE;AACF;;;;EAIE,wBAAwB;AAC1B;;AAEA;;;EAGE,YAAY;AACd",sourcesContent:['/**\n * color definitions\n */\n.djs-parent {\n  --color-grey-225-10-15: hsl(225, 10%, 15%);\n  --color-grey-225-10-35: hsl(225, 10%, 35%);\n  --color-grey-225-10-55: hsl(225, 10%, 55%);\n  --color-grey-225-10-75: hsl(225, 10%, 75%);\n  --color-grey-225-10-80: hsl(225, 10%, 80%);\n  --color-grey-225-10-85: hsl(225, 10%, 85%);\n  --color-grey-225-10-90: hsl(225, 10%, 90%);\n  --color-grey-225-10-95: hsl(225, 10%, 95%);\n  --color-grey-225-10-97: hsl(225, 10%, 97%);\n\n  --color-blue-205-100-45: hsl(205, 100%, 45%);\n  --color-blue-205-100-45-opacity-30: hsla(205, 100%, 45%, 30%);\n  --color-blue-205-100-50: hsl(205, 100%, 50%);\n  --color-blue-205-100-50-opacity-15: hsla(205, 100%, 50%, 15%);\n  --color-blue-205-100-70: hsl(205, 100%, 75%);\n  --color-blue-205-100-95: hsl(205, 100%, 95%);\n\n  --color-green-150-86-44: hsl(150, 86%, 44%);\n\n  --color-red-360-100-40: hsl(360, 100%, 40%);\n  --color-red-360-100-45: hsl(360, 100%, 45%);\n  --color-red-360-100-92: hsl(360, 100%, 92%);\n  --color-red-360-100-97: hsl(360, 100%, 97%);\n\n  --color-white: hsl(0, 0%, 100%);\n  --color-black: hsl(0, 0%, 0%);\n  --color-black-opacity-10: hsla(0, 0%, 0%, 10%);\n  --color-black-opacity-30: hsla(0, 0%, 0%, 30%);\n\n  --canvas-fill-color: var(--color-white);\n\n  --bendpoint-fill-color: var(--color-blue-205-100-45);\n  --bendpoint-stroke-color: var(--canvas-fill-color);\n\n  --context-pad-entry-background-color: var(--color-white);\n  --context-pad-entry-hover-background-color: var(--color-grey-225-10-95);\n\n  --element-dragger-color: var(--color-blue-205-100-50);\n  --element-hover-outline-fill-color: var(--color-blue-205-100-45);\n  --element-selected-outline-stroke-color: var(--color-blue-205-100-50);\n  --element-selected-outline-secondary-stroke-color: var(--color-blue-205-100-70);\n\n  --lasso-fill-color: var(--color-blue-205-100-50-opacity-15);\n  --lasso-stroke-color: var(--element-selected-outline-stroke-color);\n\n  --palette-entry-color: var(--color-grey-225-10-15);\n  --palette-entry-hover-color: var(--color-blue-205-100-45);\n  --palette-entry-selected-color: var(--color-blue-205-100-50);\n  --palette-separator-color: var(--color-grey-225-10-75);\n  --palette-toggle-hover-background-color: var(--color-grey-225-10-55);\n  --palette-background-color: var(--color-grey-225-10-97);\n  --palette-border-color: var(--color-grey-225-10-75);\n\n  --popup-font-family: "IBM Plex Sans", sans-serif;\n  --popup-font-size: 14px;\n  --popup-header-entry-selected-color: var(--color-blue-205-100-50);\n  --popup-header-font-weight: bolder;\n  --popup-header-group-divider-color: var(--color-grey-225-10-75);\n  --popup-background-color: var(--color-white);\n  --popup-border-color: transparent;\n  --popup-shadow-color: var(--color-black-opacity-30);\n  --popup-description-color: var(--color-grey-225-10-55);\n  --popup-no-results-color: var(--color-grey-225-10-55);\n  --popup-entry-title-color: var(--color-grey-225-10-55);\n  --popup-entry-hover-color:  var(--color-grey-225-10-95);\n  --popup-search-border-color: var(--color-grey-225-10-75);\n  --popup-search-focus-border-color: var(--color-blue-205-100-50);\n  --popup-search-focus-background-color: var(--color-blue-205-100-95);\n\n  --resizer-fill-color: var(--color-blue-205-100-45);\n  --resizer-stroke-color: var(--canvas-fill-color);\n\n  --search-font-family: "IBM Plex Sans", sans-serif;\n  --search-font-size: 14px;\n  --search-container-background-color: var(--color-white);\n  --search-shadow-color: var(--color-black-opacity-30);\n  --search-input-border-color: var(--color-grey-225-10-75);\n  --search-input-focus-border-color: var(--color-blue-205-100-50);\n  --search-input-focus-background-color: var(--color-blue-205-100-95);\n  --search-result-hover-background-color: var(--color-grey-225-10-95);\n  --search-result-secondary-color: var(--color-grey-225-10-55);\n  --search-preselected-background-color: var(--color-blue-205-100-50-opacity-15);\n\n  --shape-attach-allowed-stroke-color: var(--color-blue-205-100-50);\n  --shape-connect-allowed-fill-color: var(--color-grey-225-10-97);\n  --shape-drop-allowed-fill-color: var(--color-grey-225-10-97);\n  --shape-drop-not-allowed-fill-color: var(--color-red-360-100-97);\n  --shape-resize-preview-stroke-color: var(--color-blue-205-100-50);\n\n  --snap-line-stroke-color: var(--color-blue-205-100-45-opacity-30);\n\n  --space-tool-crosshair-stroke-color: var(--color-black);\n\n  --tooltip-error-background-color: var(--color-red-360-100-97);\n  --tooltip-error-border-color: var(--color-red-360-100-45);\n  --tooltip-error-color: var(--color-red-360-100-45);\n}\n\n/**\n * SVG styles\n */\n\n.djs-container svg.drop-not-ok {\n  background: var(--shape-drop-not-allowed-fill-color) !important;\n}\n\n.djs-container svg.new-parent {\n  background: var(--shape-drop-allowed-fill-color) !important;\n}\n\n/**\n * outline styles\n */\n\n.djs-outline,\n.djs-selection-outline {\n  fill: none;\n  shape-rendering: geometricPrecision;\n  stroke-width: 2px;\n}\n\n.djs-outline {\n  visibility: hidden;\n}\n\n.djs-selection-outline {\n  stroke: var(--element-selected-outline-stroke-color);\n}\n\n.djs-element.selected .djs-outline {\n  visibility: visible;\n\n  stroke: var(--element-selected-outline-stroke-color);\n}\n\n.djs-connection.selected .djs-outline {\n  display: none;\n}\n\n.djs-multi-select .djs-element.selected .djs-outline {\n  stroke: var(--element-selected-outline-secondary-stroke-color);\n  display: block;\n}\n\n.djs-shape.connect-ok .djs-visual > :nth-child(1) {\n  fill: var(--shape-connect-allowed-fill-color) !important;\n}\n\n.djs-shape.connect-not-ok .djs-visual > :nth-child(1),\n.djs-shape.drop-not-ok .djs-visual > :nth-child(1) {\n  fill: var(--shape-drop-not-allowed-fill-color) !important;\n}\n\n.djs-shape.new-parent .djs-visual > :nth-child(1) {\n  fill: var(--shape-drop-allowed-fill-color) !important;\n}\n\n\n/* Override move cursor during drop and connect */\n.drop-not-ok,\n.connect-not-ok,\n.drop-not-ok *,\n.connect-not-ok * {\n  cursor: not-allowed !important;\n}\n\n.drop-ok,\n.connect-ok,\n.drop-ok *,\n.connect-ok * {\n  cursor: default !important;\n}\n\n.djs-element.attach-ok .djs-visual > :nth-child(1) {\n  stroke-width: 5px !important;\n  stroke: var(--shape-attach-allowed-stroke-color) !important;\n}\n\n.djs-frame.connect-not-ok .djs-visual > :nth-child(1),\n.djs-frame.drop-not-ok .djs-visual > :nth-child(1) {\n  stroke-width: 3px !important;\n  stroke: var(--shape-drop-not-allowed-fill-color) !important;\n  fill: none !important;\n}\n\n/**\n* Selection box style\n*\n*/\n.djs-lasso-overlay {\n  fill: var(--lasso-fill-color);\n  stroke: var(--lasso-stroke-color);\n  stroke-width: 2px;\n  shape-rendering: geometricPrecision;\n  pointer-events: none;\n}\n\n/**\n * Resize styles\n */\n.djs-resize-overlay {\n  fill: none;\n\n  stroke-dasharray: 5 1 3 1;\n  stroke: var(--shape-resize-preview-stroke-color);\n\n  pointer-events: none;\n}\n\n.djs-resizer-hit {\n  fill: none;\n  pointer-events: all;\n}\n\n.djs-resizer-visual {\n  fill: var(--resizer-fill-color);\n  stroke-width: 1px;\n  stroke: var(--resizer-stroke-color);\n  shape-rendering: geometricPrecision;\n}\n\n.djs-resizer:hover .djs-resizer-visual {\n  stroke: var(--resizer-stroke-color);\n  stroke-opacity: 1;\n}\n\n.djs-cursor-resize-ns,\n.djs-resizer-n,\n.djs-resizer-s {\n  cursor: ns-resize;\n}\n\n.djs-cursor-resize-ew,\n.djs-resizer-e,\n.djs-resizer-w {\n  cursor: ew-resize;\n}\n\n.djs-cursor-resize-nwse,\n.djs-resizer-nw,\n.djs-resizer-se {\n  cursor: nwse-resize;\n}\n\n.djs-cursor-resize-nesw,\n.djs-resizer-ne,\n.djs-resizer-sw {\n  cursor: nesw-resize;\n}\n\n.djs-shape.djs-resizing > .djs-outline {\n  visibility: hidden !important;\n}\n\n.djs-shape.djs-resizing > .djs-resizer {\n  visibility: hidden;\n}\n\n.djs-dragger > .djs-resizer {\n  visibility: hidden;\n}\n\n/**\n * drag styles\n */\n.djs-dragger * {\n  fill: none !important;\n  stroke: var(--element-dragger-color) !important;\n}\n\n.djs-dragger tspan,\n.djs-dragger text {\n  fill: var(--element-dragger-color) !important;\n  stroke: none !important;\n}\n\n.djs-dragger marker circle,\n.djs-dragger marker path,\n.djs-dragger marker polygon,\n.djs-dragger marker polyline,\n.djs-dragger marker rect {\n  fill: var(--element-dragger-color) !important;\n  stroke: none !important;\n}\n\n.djs-dragger marker text,\n.djs-dragger marker tspan {\n  fill: none !important;\n  stroke: var(--element-dragger-color) !important;\n}\n\n.djs-dragging,\n.djs-dragging > * {\n  opacity: 0.3 !important;\n  pointer-events: none !important;\n}\n\n/**\n * no pointer events for visual\n */\n.djs-visual,\n.djs-outline {\n  pointer-events: none;\n}\n\n.djs-element.attach-ok .djs-hit {\n  stroke-width: 60px !important;\n}\n\n/**\n * all pointer events for hit shape\n */\n.djs-element > .djs-hit-all,\n.djs-element > .djs-hit-no-move {\n  pointer-events: all;\n}\n\n.djs-element > .djs-hit-stroke,\n.djs-element > .djs-hit-click-stroke {\n  pointer-events: stroke;\n}\n\n/**\n * shape / connection basic styles\n */\n.djs-connection .djs-visual {\n  stroke-width: 2px;\n  fill: none;\n}\n\n.djs-cursor-grab {\n  cursor: -webkit-grab;\n  cursor: -moz-grab;\n  cursor: grab;\n}\n\n.djs-cursor-grabbing {\n  cursor: -webkit-grabbing;\n  cursor: -moz-grabbing;\n  cursor: grabbing;\n}\n\n.djs-cursor-crosshair {\n  cursor: crosshair;\n}\n\n.djs-cursor-move {\n  cursor: move;\n}\n\n.djs-cursor-resize-ns {\n  cursor: ns-resize;\n}\n\n.djs-cursor-resize-ew {\n  cursor: ew-resize;\n}\n\n\n/**\n * snapping\n */\n.djs-snap-line {\n  stroke: var(--snap-line-stroke-color);\n  stroke-linecap: round;\n  stroke-width: 2px;\n  pointer-events: none;\n}\n\n/**\n * snapping\n */\n.djs-crosshair {\n  stroke: var(--space-tool-crosshair-stroke-color);\n  stroke-linecap: round;\n  stroke-width: 1px;\n  pointer-events: none;\n  shape-rendering: geometricPrecision;\n  stroke-dasharray: 5, 5;\n}\n\n/**\n * palette\n */\n\n.djs-palette {\n  position: absolute;\n  left: 20px;\n  top: 20px;\n\n  box-sizing: border-box;\n  width: 48px;\n}\n\n.djs-palette .separator {\n  margin: 5px;\n  padding-top: 5px;\n\n  border: none;\n  border-bottom: solid 1px var(--palette-separator-color);\n\n  clear: both;\n}\n\n.djs-palette .entry:before {\n  vertical-align: initial;\n}\n\n.djs-palette .djs-palette-toggle {\n  cursor: pointer;\n}\n\n.djs-palette .entry,\n.djs-palette .djs-palette-toggle {\n  color: var(--palette-entry-color);\n  font-size: 30px;\n\n  text-align: center;\n}\n\n.djs-palette .entry {\n  float: left;\n}\n\n.djs-palette .entry img {\n  max-width: 100%;\n}\n\n.djs-palette .djs-palette-entries:after {\n  content: \'\';\n  display: table;\n  clear: both;\n}\n\n.djs-palette .djs-palette-toggle:hover {\n  background: var(--palette-toggle-hover-background-color);\n}\n\n.djs-palette .entry:hover {\n  color: var(--palette-entry-hover-color);\n}\n\n.djs-palette .highlighted-entry {\n  color: var(--palette-entry-selected-color) !important;\n}\n\n.djs-palette .entry,\n.djs-palette .djs-palette-toggle {\n  width: 46px;\n  height: 46px;\n  line-height: 46px;\n  cursor: default;\n}\n\n/**\n * Palette open / two-column layout is controlled via\n * classes on the palette. Events to hook into palette\n * changed life-cycle are available in addition.\n */\n.djs-palette.two-column.open {\n  width: 94px;\n}\n\n.djs-palette:not(.open) .djs-palette-entries {\n  display: none;\n}\n\n.djs-palette:not(.open) {\n  overflow: hidden;\n}\n\n.djs-palette.open .djs-palette-toggle {\n  display: none;\n}\n\n/**\n * context-pad\n */\n.djs-context-pad {\n  position: absolute;\n  display: none;\n  pointer-events: none;\n  line-height: 1;\n  width: 72px;\n  z-index: 100;\n}\n\n.djs-context-pad .entry {\n  width: 22px;\n  height: 22px;\n  text-align: center;\n  display: inline-block;\n  font-size: 22px;\n  margin: 0 2px 2px 0;\n\n  border-radius: 3px;\n\n  cursor: default;\n\n  background-color: var(--context-pad-entry-background-color);\n  box-shadow: 0 0 2px 1px var(--context-pad-entry-background-color);\n  pointer-events: all;\n  vertical-align: middle;\n}\n\n.djs-context-pad .entry:hover {\n  background: var(--context-pad-entry-hover-background-color);\n}\n\n.djs-context-pad.open {\n  display: block;\n}\n\n/**\n * popup styles\n */\n.djs-popup {\n  line-height: 1;\n  box-sizing: border-box;\n  width: min-content;\n  background: var(--popup-background-color);\n  overflow: hidden;\n  position: fixed;\n  z-index: 200;\n  box-shadow: 0px 2px 6px var(--popup-shadow-color);\n  border: solid 1px var(--popup-border-color);\n  min-width: 120px;\n  outline: none;\n  font-size: var(--popup-font-size);\n  font-family: var(--popup-font-family);\n}\n\n.djs-popup-search input {\n  width: 100%;\n  box-sizing: border-box;\n  font-size: var(--popup-font-size);\n  padding: 3px 6px 3px 28px;\n  border-radius: 2px;\n  border: solid 1px var(--popup-search-border-color);\n  line-height: 21px;\n}\n\n.djs-popup-search input:focus {\n  background-color: var(--popup-search-focus-background-color);\n  border: solid 1px var(--popup-search-focus-border-color);\n  outline: none;\n}\n\n.djs-popup-header {\n  display: flex;\n  align-items: stretch;\n  line-height: 20px;\n  margin: 10px 12px 10px 12px;\n}\n\n.djs-popup-header .entry {\n  border-radius: 2px;\n}\n\n.djs-popup button.entry {\n  padding: 0;\n  background: transparent;\n  border: 0;\n}\n\n.djs-popup-header .entry.active {\n  color: var(--popup-header-entry-selected-color);\n}\n\n.djs-popup-header .entry.disabled {\n  color: inherit;\n}\n\n.djs-popup-header-group {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n\n.djs-popup-header-group .entry {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n}\n\n.djs-popup-header-group + .djs-popup-header-group:before {\n  content: \'\';\n  width: 1px;\n  height: 20px;\n  background: var(--popup-header-group-divider-color);\n  margin: 0 5px;\n}\n\n.djs-popup-search {\n  position: relative;\n  width: auto;\n  margin: 10px 12px;\n}\n\n.djs-popup-title {\n  font-size: var(--popup-font-size);\n  font-weight: var(--popup-header-font-weight);\n  flex: 1;\n  margin: 0;\n}\n\n.djs-popup-search-icon {\n  position: absolute;\n  left: 8px;\n  top: 7px;\n}\n\n.djs-popup-results {\n  margin: 7px 3px 7px 12px;\n  list-style: none;\n  max-height: 280px;\n  overflow: auto;\n  padding-right: 9px;\n}\n\n.djs-popup-group {\n  margin: 0;\n  padding: 0;\n  width: 100%;\n}\n\n.djs-popup-body .entry,\n.djs-popup-body .entry-header {\n  padding: 5px 7px;\n  cursor: default;\n  border-radius: 4px;\n}\n\n.djs-popup-body .entry-header {\n  font-weight: var(--popup-header-font-weight);\n  color: var(--popup-entry-title-color);\n  padding-left: 0;\n}\n\n.djs-popup [class*="icon"] .djs-popup-label,\n.djs-popup-label:not(:first-child) {\n  margin-left: .5em;\n}\n\n.djs-popup [class*="icon"]:before,\n.djs-popup-entry-icon {\n  width: 1em;\n  height: 1em;\n  display: inline-block;\n  font-size: 1.4em;\n  vertical-align: middle;\n}\n\n.djs-popup-body .entry-header:not(:first-child) {\n  margin-top: 8px;\n  margin-bottom: 2px;\n}\n\n.djs-popup-body .entry {\n  display: flex;\n  flex-direction: row;\n  align-items: stretch;\n  height: min-content;\n}\n\n.djs-popup .entry.selected {\n  background-color: var(--popup-entry-hover-color);\n}\n\n.djs-popup-body .entry:not(:first-child) {\n  margin-top: 2px;\n}\n\n.djs-popup-entry-content {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  overflow: hidden;\n}\n\n.djs-popup-entry-description {\n  color: var(--popup-description-color);\n}\n\n.djs-popup-label,\n.djs-popup-entry-description {\n  line-height: 1.4em;\n}\n\n.djs-popup .entry,\n.djs-popup .entry-header {\n  margin: 1px;\n}\n\n.djs-popup-title,\n.djs-popup-label,\n.djs-popup-entry-description,\n.djs-popup .entry-header {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.djs-popup-entry-name {\n  display: flex;\n}\n\n.djs-popup-body {\n  flex-direction: column;\n  width: auto;\n}\n\n.djs-popup *::-webkit-scrollbar {\n  width: 6px;\n}\n\n.djs-popup *::-webkit-scrollbar-thumb {\n  border-radius: 3px;\n  background-color: rgba(0, 0, 0, 0.2);\n}\n\n.djs-popup *::-webkit-scrollbar-track {\n  box-shadow: none;\n  background: transparent;\n  margin: 0;\n  padding: 5px;\n}\n\n.djs-popup-no-results {\n  padding: 0 12px 12px 12px;\n  color: var(--popup-no-results-color);\n}\n\n.djs-popup-entry-docs {\n  flex: 0;\n  flex-direction: row;\n  align-items: center;\n  padding-left: 5px;\n  display: none;\n}\n\n.djs-popup-body .entry:hover .djs-popup-entry-docs {\n  display: flex;\n}\n\n.djs-popup-entry-docs svg {\n  vertical-align: middle;\n  margin: auto 2px auto 5px;\n}\n\n/**\n *  palette styles\n */\n.djs-palette {\n  background: var(--palette-background-color);\n  border: solid 1px var(--palette-border-color);\n  border-radius: 2px;\n}\n\n/**\n * bendpoints\n */\n.djs-segment-dragger,\n.djs-bendpoint {\n  display: none;\n}\n\n.djs-segment-dragger .djs-visual {\n  display: none;\n\n  fill: var(--bendpoint-fill-color);\n  stroke: var(--bendpoint-stroke-color);\n  stroke-width: 1px;\n  stroke-opacity: 1;\n}\n\n.djs-segment-dragger:hover .djs-visual {\n  display: block;\n}\n\n.djs-bendpoint .djs-visual {\n  fill: var(--bendpoint-fill-color);\n  stroke: var(--bendpoint-stroke-color);\n  stroke-width: 1px;\n}\n\n.djs-segment-dragger:hover,\n.djs-bendpoints.hover .djs-segment-dragger,\n.djs-bendpoints.selected .djs-segment-dragger,\n.djs-bendpoint:hover,\n.djs-bendpoints.hover .djs-bendpoint,\n.djs-bendpoints.selected .djs-bendpoint {\n  display: block;\n}\n\n.djs-drag-active .djs-bendpoints * {\n  display: none;\n}\n\n.djs-bendpoints:not(.hover) .floating {\n  display: none;\n}\n\n.djs-segment-dragger:hover .djs-visual,\n.djs-segment-dragger.djs-dragging .djs-visual,\n.djs-bendpoint:hover .djs-visual,\n.djs-bendpoint.floating .djs-visual {\n  fill: var(--bendpoint-fill-color);\n  stroke: var(--bendpoint-stroke-color);\n  stroke-opacity: 1;\n}\n\n.djs-bendpoint.floating .djs-hit {\n  pointer-events: none;\n}\n\n.djs-segment-dragger .djs-hit,\n.djs-bendpoint .djs-hit {\n  fill: none;\n  pointer-events: all;\n}\n\n.djs-segment-dragger.horizontal .djs-hit {\n  cursor: ns-resize;\n}\n\n.djs-segment-dragger.vertical .djs-hit {\n  cursor: ew-resize;\n}\n\n.djs-segment-dragger.djs-dragging .djs-hit {\n  pointer-events: none;\n}\n\n.djs-updating,\n.djs-updating > * {\n  pointer-events: none !important;\n}\n\n.djs-updating .djs-context-pad,\n.djs-updating .djs-outline,\n.djs-updating .djs-bendpoint,\n.djs-multi-select .djs-bendpoint,\n.djs-multi-select .djs-segment-dragger,\n.connect-ok .djs-bendpoint,\n.connect-not-ok .djs-bendpoint,\n.drop-ok .djs-bendpoint,\n.drop-not-ok .djs-bendpoint {\n  display: none !important;\n}\n\n.djs-segment-dragger.djs-dragging,\n.djs-bendpoint.djs-dragging {\n  display: block;\n  opacity: 1.0;\n}\n\n\n/**\n * tooltips\n */\n.djs-tooltip-error {\n  width: 160px;\n  padding: 6px;\n\n  background: var(--tooltip-error-background-color);\n  border: solid 1px var(--tooltip-error-border-color);\n  border-radius: 2px;\n  color: var(--tooltip-error-color);\n  font-size: 12px;\n  line-height: 16px;\n\n  opacity: 0.75;\n}\n\n.djs-tooltip-error:hover {\n  opacity: 1;\n}\n\n\n/**\n * search pad\n */\n.djs-search-open .djs-context-pad {\n  display: none;\n}\n\n.djs-search-open .djs-connection.selected .djs-outline {\n  display: block;\n}\n\n.djs-search-container {\n  position: absolute;\n  top: 20px;\n  left: 0;\n  right: 0;\n  margin-left: auto;\n  margin-right: auto;\n\n  width: 25%;\n  min-width: 300px;\n  max-width: 400px;\n  z-index: 10;\n\n  font-family: var(--search-font-family);\n  font-size: var(--search-font-size);\n  border-radius: 2px;\n  box-shadow: 0px 2px 6px var(--search-shadow-color);\n}\n\n.djs-search-container:not(.open) {\n  display: none;\n}\n\n.djs-search-input {\n  position: relative;\n}\n\n.djs-search-input svg {\n  position: absolute;\n  left: 8px;\n  top: 7px;\n}\n\n.djs-search-input input {\n  font-size: var(--search-font-size);\n  width: 100%;\n  padding: 3px 6px 3px 28px;\n  border: 1px solid var(--search-input-border-color);\n  border-radius: 2px;\n  box-sizing: border-box;\n  line-height: 21px;\n}\n\n.djs-search-input input:focus {\n  background-color: var(--search-input-focus-background-color);\n  border: solid 1px var(--search-input-focus-border-color);\n  outline: none;\n}\n\n.djs-search-results {\n  position: relative;\n  overflow-y: auto;\n  max-height: 200px;\n  background: var(--search-container-background-color);\n}\n\n.djs-search-result {\n  padding: 6px 8px;\n}\n\n.djs-search-result-primary {\n  margin: 0 0 3px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n}\n\n.djs-search-result-secondary {\n  font-family: monospace;\n  margin: 0;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  color: var(--search-result-secondary-color);\n}\n\n.djs-search-result:hover {\n  background: var(--search-result-hover-background-color);\n}\n\n.djs-search-result-selected {\n  background: var(--search-result-hover-background-color);\n}\n\n.djs-search-result-selected:hover {\n  background: var(--search-result-hover-background-color);\n}\n\n.djs-search-open .djs-element .djs-outline {\n  fill: var(--search-preselected-background-color) !important;\n}\n\n/**\n * hidden styles\n */\n.djs-element-hidden,\n.djs-element-hidden .djs-hit,\n.djs-element-hidden .djs-outline,\n.djs-label-hidden .djs-label {\n  display: none !important;\n}\n\n.djs-element .djs-hit-stroke,\n.djs-element .djs-hit-click-stroke,\n.djs-element .djs-hit-all {\n  cursor: move;\n}'],sourceRoot:""}]);const a=s},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},566:e=>{e.exports="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20stroke%3D%22%23000%22%20stroke-width%3D%221.5%22%20width%3D%2246%22%20height%3D%2246%22%3E%3Cline%20x1%3D%2215%22%20y1%3D%225%22%20x2%3D%225%22%20y2%3D%2215%22%2F%3E%3C%2Fsvg%3E"},592:e=>{e.exports='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="%23eb583e" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"%3E%3Cpath stroke="none" d="M0 0h24v24H0z" fill="none"/%3E%3Cpath d="M7.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /%3E%3Cpath d="M3 6v5.172a2 2 0 0 0 .586 1.414l7.71 7.71a2.41 2.41 0 0 0 3.408 0l5.592 -5.592a2.41 2.41 0 0 0 0 -3.408l-7.71 -7.71a2 2 0 0 0 -1.414 -.586h-5.172a3 3 0 0 0 -3 3z" /%3E%3C/svg%3E'},602:e=>{e.exports='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"%3E%3Cpolyline points="1 4 1 10 7 10"%3E%3C/polyline%3E%3Cpolyline points="23 20 23 14 17 14"%3E%3C/polyline%3E%3Cpath d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"%3E%3C/path%3E%3C/svg%3E'},659:e=>{var t={};e.exports=function(e,n){var o=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},743:e=>{e.exports='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="%23eb583e" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"%3E%3Cpath stroke="none" d="M0 0h24v24H0z" fill="none"/%3E%3Cpath d="M7 4v16l13 -8z" /%3E%3C/svg%3E'},771:e=>{e.exports='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"%3E%3Cpath stroke="none" d="M0 0h24v24H0z" fill="none"/%3E%3Cpath d="M7 4v16l13 -8z" /%3E%3C/svg%3E'},789:e=>{e.exports="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20stroke%3D%22%23000%22%20stroke-width%3D%221.5%22%20width%3D%2246%22%20height%3D%2246%22%3E%3Crect%20x%3D%2210%22%20y%3D%2213%22%20width%3D%2226%22%20height%3D%2220%22%2F%3E%3C%2Fsvg%3E"},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,r&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(o,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},908:e=>{e.exports='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"%3E%3Cpath stroke="none" d="M0 0h24v24H0z" fill="none"/%3E%3Cpath d="M7.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /%3E%3Cpath d="M3 6v5.172a2 2 0 0 0 .586 1.414l7.71 7.71a2.41 2.41 0 0 0 3.408 0l5.592 -5.592a2.41 2.41 0 0 0 0 -3.408l-7.71 -7.71a2 2 0 0 0 -1.414 -.586h-5.172a3 3 0 0 0 -3 3z" /%3E%3C/svg%3E'},967:(e,t,n)=>{n.d(t,{A:()=>R});var o=n(354),r=n.n(o),i=n(314),s=n.n(i),a=n(417),c=n.n(a),l=new URL(n(76),n.b),u=new URL(n(502),n.b),d=new URL(n(908),n.b),p=new URL(n(592),n.b),h=new URL(n(789),n.b),f=new URL(n(161),n.b),g=new URL(n(100),n.b),v=new URL(n(771),n.b),y=new URL(n(743),n.b),m=new URL(n(171),n.b),A=new URL(n(566),n.b),x=new URL(n(166),n.b),_=new URL(n(602),n.b),E=s()(r()),b=c()(l),w=c()(u),C=c()(d),k=c()(p),j=c()(h),B=c()(f),S=c()(g),D=c()(v),M=c()(y),z=c()(m),O=c()(A),P=c()(x),$=c()(_);E.push([e.id,`/**\n * Petri Net Editor - Icon Styles\n * This file contains all the icon styles for palette and context pad\n */\n\n/* ============================================\n   PALETTE ICONS\n   ============================================ */\n\n.palette-icon-lasso-tool {\n  background: url(${b});\n}\n\n.palette-icon-create-arrow {\n  background: url(${w}) no-repeat center center;\n  background-size: contain;\n}\n\n.palette-icon-labels {\n  background: url(${C}) no-repeat center center;\n  background-size: contain;\n}\n\n/* Active state for labels button - make SVG red when labels are hidden */\n.palette-icon-labels.active {\n  background: url(${k}) no-repeat center center !important;\n  background-size: contain !important;\n}\n\n.palette-icon-create-transition {\n  background: url(${j});\n}\n\n.palette-icon-create-empty-transition {\n  background: url(${B}) no-repeat center center;\n  background-size: contain;\n}\n\n.palette-icon-create-circle {\n  background: url(${S}) no-repeat center center;\n  background-size: contain;\n}\n\n.palette-icon-start-simulation {\n  background: url(${D}) no-repeat center center;\n  background-size: contain;\n}\n\n/* Active state style only for simulation button - make SVG red */\n.palette-icon-start-simulation.active {\n  background: url(${M}) no-repeat center center !important;\n  background-size: contain !important;\n}\n\n/* ============================================\n   CONTEXT PAD ICONS\n   ============================================ */\n\n.context-pad-icon-remove {\n  background: url(${z}) !important;\n}\n\n.context-pad-icon-connect {\n  background: url(${O}) !important;\n}\n\n.context-pad-icon-place {\n  background: url(${S}) no-repeat center center !important;\n  background-size: 16px 16px !important;\n}\n\n.context-pad-icon-tool {\n  background: url(${P}) no-repeat center center !important;\n  background-size: 16px 16px !important;\n}\n\n.context-pad-icon-transition {\n  background: url(${j}) no-repeat center center !important;\n  background-size: 16px 16px !important;\n}\n\n.context-pad-icon-replace {\n  background: url(${$}) no-repeat center center !important;\n  background-size: 16px 16px !important;\n}\n\n`,"",{version:3,sources:["webpack://./src/styles/petri-net-icons.css"],names:[],mappings:"AAAA;;;EAGE;;AAEF;;iDAEiD;;AAEjD;EACE,mDAAgqB;AAClqB;;AAEA;EACE,2EAA4W;EAC5W,wBAAwB;AAC1B;;AAEA;EACE,2EAAuiB;EACviB,wBAAwB;AAC1B;;AAEA,yEAAyE;AACzE;EACE,sFAA+iB;EAC/iB,mCAAmC;AACrC;;AAEA;EACE,mDAAgT;AAClT;;AAEA;EACE,2EAAwO;EACxO,wBAAwB;AAC1B;;AAEA;EACE,2EAAqP;EACrP,wBAAwB;AAC1B;;AAEA;EACE,2EAAuV;EACvV,wBAAwB;AAC1B;;AAEA,iEAAiE;AACjE;EACE,sFAA+V;EAC/V,mCAAmC;AACrC;;AAEA;;iDAEiD;;AAEjD;EACE,8DAA+X;AACjY;;AAEA;EACE,+DAAoT;AACtT;;AAEA;EACE,sFAAgQ;EAChQ,qCAAqC;AACvC;;AAEA;EACE,uFAAqY;EACrY,qCAAqC;AACvC;;AAEA;EACE,sFAAmV;EACnV,qCAAqC;AACvC;;AAEA;EACE,uFAAsa;EACta,qCAAqC;AACvC",sourcesContent:['/**\n * Petri Net Editor - Icon Styles\n * This file contains all the icon styles for palette and context pad\n */\n\n/* ============================================\n   PALETTE ICONS\n   ============================================ */\n\n.palette-icon-lasso-tool {\n  background: url(\'data:image/svg+xml,%3Csvg%0A%20%20%20%20%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20%0A%20%20%20%20%20fill%3D%22none%22%0A%20%20%20%20%20stroke%3D%22%23000%22%0A%20%20%20%20%20stroke-width%3D%221.5%22%0A%20%20%20%20%20width%3D%2246%22%0A%20%20%20%20%20height%3D%2246%22%3E%0A%20%20%3Crect%20x%3D%2210%22%20y%3D%2210%22%20width%3D%2216%22%20height%3D%2216%22%20stroke-dasharray%3D%225%2C%205%22%20%2F%3E%0A%20%20%3Cline%20x1%3D%2216%22%20y1%3D%2226%22%20x2%3D%2236%22%20y2%3D%2226%22%20stroke%3D%22black%22%20%2F%3E%0A%20%20%3Cline%20x1%3D%2226%22%20y1%3D%2216%22%20x2%3D%2226%22%20y2%3D%2236%22%20stroke%3D%22black%22%20%2F%3E%0A%3C%2Fsvg%3E\');\n}\n\n.palette-icon-create-arrow {\n  background: url(\'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"%3E%3Cline x1="5" y1="12" x2="19" y2="12"%3E%3C/line%3E%3Cpolyline points="12 5 19 12 12 19"%3E%3C/polyline%3E%3C/svg%3E\') no-repeat center center;\n  background-size: contain;\n}\n\n.palette-icon-labels {\n  background: url(\'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"%3E%3Cpath stroke="none" d="M0 0h24v24H0z" fill="none"/%3E%3Cpath d="M7.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /%3E%3Cpath d="M3 6v5.172a2 2 0 0 0 .586 1.414l7.71 7.71a2.41 2.41 0 0 0 3.408 0l5.592 -5.592a2.41 2.41 0 0 0 0 -3.408l-7.71 -7.71a2 2 0 0 0 -1.414 -.586h-5.172a3 3 0 0 0 -3 3z" /%3E%3C/svg%3E\') no-repeat center center;\n  background-size: contain;\n}\n\n/* Active state for labels button - make SVG red when labels are hidden */\n.palette-icon-labels.active {\n  background: url(\'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="%23eb583e" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"%3E%3Cpath stroke="none" d="M0 0h24v24H0z" fill="none"/%3E%3Cpath d="M7.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /%3E%3Cpath d="M3 6v5.172a2 2 0 0 0 .586 1.414l7.71 7.71a2.41 2.41 0 0 0 3.408 0l5.592 -5.592a2.41 2.41 0 0 0 0 -3.408l-7.71 -7.71a2 2 0 0 0 -1.414 -.586h-5.172a3 3 0 0 0 -3 3z" /%3E%3C/svg%3E\') no-repeat center center !important;\n  background-size: contain !important;\n}\n\n.palette-icon-create-transition {\n  background: url(\'data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20stroke%3D%22%23000%22%20stroke-width%3D%221.5%22%20width%3D%2246%22%20height%3D%2246%22%3E%3Crect%20x%3D%2210%22%20y%3D%2213%22%20width%3D%2226%22%20height%3D%2220%22%2F%3E%3C%2Fsvg%3E\');\n}\n\n.palette-icon-create-empty-transition {\n  background: url(\'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 11 32" fill="currentColor"%3E%3Crect x="3" y="2" width="5" height="28" rx="0" /%3E%3C/svg%3E\') no-repeat center center;\n  background-size: contain;\n}\n\n.palette-icon-create-circle {\n  background: url(\'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"%3E%3Ccircle cx="12" cy="12" r="8"/%3E%3C/svg%3E\') no-repeat center center;\n  background-size: contain;\n}\n\n.palette-icon-start-simulation {\n  background: url(\'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"%3E%3Cpath stroke="none" d="M0 0h24v24H0z" fill="none"/%3E%3Cpath d="M7 4v16l13 -8z" /%3E%3C/svg%3E\') no-repeat center center;\n  background-size: contain;\n}\n\n/* Active state style only for simulation button - make SVG red */\n.palette-icon-start-simulation.active {\n  background: url(\'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="%23eb583e" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"%3E%3Cpath stroke="none" d="M0 0h24v24H0z" fill="none"/%3E%3Cpath d="M7 4v16l13 -8z" /%3E%3C/svg%3E\') no-repeat center center !important;\n  background-size: contain !important;\n}\n\n/* ============================================\n   CONTEXT PAD ICONS\n   ============================================ */\n\n.context-pad-icon-remove {\n  background: url(\'data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20stroke%3D%22%23000%22%20stroke-width%3D%221.5%22%20width%3D%2246%22%20height%3D%2246%22%3E%3Cline%20x1%3D%225%22%20y1%3D%225%22%20x2%3D%2215%22%20y2%3D%2215%22%2F%3E%3Cline%20x1%3D%2215%22%20y1%3D%225%22%20x2%3D%225%22%20y2%3D%2215%22%2F%3E%3C%2Fsvg%3E\') !important;\n}\n\n.context-pad-icon-connect {\n  background: url(\'data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20stroke%3D%22%23000%22%20stroke-width%3D%221.5%22%20width%3D%2246%22%20height%3D%2246%22%3E%3Cline%20x1%3D%2215%22%20y1%3D%225%22%20x2%3D%225%22%20y2%3D%2215%22%2F%3E%3C%2Fsvg%3E\') !important;\n}\n\n.context-pad-icon-place {\n  background: url(\'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"%3E%3Ccircle cx="12" cy="12" r="8"/%3E%3C/svg%3E\') no-repeat center center !important;\n  background-size: 16px 16px !important;\n}\n\n.context-pad-icon-tool {\n  background: url(\'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"%3E%3Cpath d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/%3E%3C/svg%3E\') no-repeat center center !important;\n  background-size: 16px 16px !important;\n}\n\n.context-pad-icon-transition {\n  background: url(\'data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20stroke%3D%22%23000%22%20stroke-width%3D%221.5%22%20width%3D%2246%22%20height%3D%2246%22%3E%3Crect%20x%3D%2210%22%20y%3D%2213%22%20width%3D%2226%22%20height%3D%2220%22%2F%3E%3C%2Fsvg%3E\') no-repeat center center !important;\n  background-size: 16px 16px !important;\n}\n\n.context-pad-icon-replace {\n  background: url(\'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"%3E%3Cpolyline points="1 4 1 10 7 10"%3E%3C/polyline%3E%3Cpolyline points="23 20 23 14 17 14"%3E%3C/polyline%3E%3Cpath d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"%3E%3C/path%3E%3C/svg%3E\') no-repeat center center !important;\n  background-size: 16px 16px !important;\n}\n\n'],sourceRoot:""}]);const R=E}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={id:o,exports:{}};return e[o](i,i.exports,n),i.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.b=document.baseURI||self.location.href,n.nc=void 0;var o={};n.d(o,{default:()=>Bl});const r=/^class[ {]/;function i(e){return Array.isArray(e)}function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function a(...e){1===e.length&&i(e[0])&&(e=e[0]);const t=(e=[...e]).pop();return t.$inject=e,t}const c=/constructor\s*[^(]*\(\s*([^)]*)\)/m,l=/^(?:async\s+)?(?:function\s*[^(]*)?(?:\(\s*([^)]*)\)|(\w+))/m,u=/\/\*([^*]*)\*\//m;function d(e){if("function"!=typeof e)throw new Error(`Cannot annotate "${e}". Expected a function!`);const t=e.toString().match(function(e){return r.test(e.toString())}(e)?c:l);if(!t)return[];const n=t[1]||t[2];return n&&n.split(",").map(e=>{const t=e.match(u);return(t&&t[1]||e).trim()})||[]}function p(e,t){const n=t||{get:function(e,t){if(o.push(e),!1===t)return null;throw u(`No provider for "${e}"!`)}},o=[],r=this._providers=Object.create(n._providers||null),c=this._instances=Object.create(null),l=c.injector=this,u=function(e){const t=o.join(" -> ");return o.length=0,new Error(t?`${e} (Resolving: ${t})`:e)};function f(e,t){if(!r[e]&&e.includes(".")){const t=e.split(".");let n=f(t.shift());for(;t.length;)n=n[t.shift()];return n}if(s(c,e))return c[e];if(s(r,e)){if(-1!==o.indexOf(e))throw o.push(e),u("Cannot resolve circular dependency!");return o.push(e),c[e]=r[e][0](r[e][1]),o.pop(),c[e]}return n.get(e,t)}function g(e,t){if(void 0===t&&(t={}),"function"!=typeof e){if(!i(e))throw u(`Cannot invoke "${e}". Expected a function!`);e=a(e.slice())}return{fn:e,dependencies:(e.$inject||d(e)).map(e=>s(t,e)?t[e]:f(e))}}function v(e){const{fn:t,dependencies:n}=g(e);return new(Function.prototype.bind.call(t,null,...n))}function y(e,t,n){const{fn:o,dependencies:r}=g(e,n);return o.apply(t,r)}function m(e){return a(t=>e.get(t))}function A(e,t){if(t&&t.length){const n=Object.create(null),o=Object.create(null),i=[],s=[],a=[];let c,l,u,d;for(let e in r)c=r[e],-1!==t.indexOf(e)&&("private"===c[2]?(l=i.indexOf(c[3]),-1===l?(u=c[3].createChild([],t),d=m(u),i.push(c[3]),s.push(u),a.push(d),n[e]=[d,e,"private",u]):n[e]=[a[l],e,"private",s[l]]):n[e]=[c[2],c[1]],o[e]=!0),"factory"!==c[2]&&"type"!==c[2]||!c[1].$scope||t.forEach(t=>{-1!==c[1].$scope.indexOf(t)&&(n[e]=[c[2],c[1]],o[t]=!0)});t.forEach(e=>{if(!o[e])throw new Error('No provider for "'+e+'". Cannot use provider from the parent!')}),e.unshift(n)}return new p(e,l)}const x={factory:y,type:v,value:function(e){return e}};function _(e,t){const n=e.__init__||[];return function(){n.forEach(e=>{"string"==typeof e?t.get(e):t.invoke(e)})}}function E(e){const t=e.__exports__;if(t){const n=e.__modules__,o=Object.keys(e).reduce((t,n)=>("__exports__"!==n&&"__modules__"!==n&&"__init__"!==n&&"__depends__"!==n&&(t[n]=e[n]),t),Object.create(null)),i=A((n||[]).concat(o)),s=a(function(e){return i.get(e)});t.forEach(function(e){r[e]=[s,e,"private",i]});const c=(e.__init__||[]).slice();return c.unshift(function(){i.init()}),_(e=Object.assign({},e,{__init__:c}),i)}return Object.keys(e).forEach(function(t){if("__init__"===t||"__depends__"===t)return;const n=e[t];if("private"===n[2])return void(r[t]=n);const o=n[0],i=n[1];r[t]=[x[o],h(o,i),o]}),_(e,l)}function b(e,t){return-1!==e.indexOf(t)||-1!==(e=(t.__depends__||[]).reduce(b,e)).indexOf(t)?e:e.concat(t)}this.get=f,this.invoke=y,this.instantiate=v,this.createChild=A,this.init=function(e){const t=e.reduce(b,[]).map(E);let n=!1;return function(){n||(n=!0,t.forEach(e=>e()))}}(e)}function h(e,t){return"value"!==e&&i(t)&&(t=a(t.slice())),t}function f(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}function g(e,t){var n=this;t=t||1e3,e.on(["render.shape","render.connection"],t,function(e,t){var o=e.type,r=t.element,i=t.gfx,s=t.attrs;if(n.canRender(r))return"render.shape"===o?n.drawShape(i,r,s):n.drawConnection(i,r,s)}),e.on(["render.getShapePath","render.getConnectionPath"],t,function(e,t){if(n.canRender(t))return"render.getShapePath"===e.type?n.getShapePath(t):n.getConnectionPath(t)})}g.prototype.canRender=function(e){},g.prototype.drawShape=function(e,t){},g.prototype.drawConnection=function(e,t){},g.prototype.getShapePath=function(e){},g.prototype.getConnectionPath=function(e){};const v=Object.prototype.toString,y=Object.prototype.hasOwnProperty;function m(e){return void 0===e}function A(e){return void 0!==e}function x(e){return null==e}function _(e){return"[object Array]"===v.call(e)}function E(e){return"[object Object]"===v.call(e)}function b(e){return"[object Number]"===v.call(e)}function w(e){const t=v.call(e);return"[object Function]"===t||"[object AsyncFunction]"===t||"[object GeneratorFunction]"===t||"[object AsyncGeneratorFunction]"===t||"[object Proxy]"===t}function C(e){return"[object String]"===v.call(e)}function k(e,t){return!x(e)&&y.call(e,t)}function j(e,t){const n=L(t);let o;return S(e,function(e,t){if(n(e,t))return o=e,!1}),o}function B(e,t){const n=L(t);let o=[];return S(e,function(e,t){n(e,t)&&o.push(e)}),o}function S(e,t){let n,o;if(m(e))return;const r=_(e)?H:I;for(let i in e)if(k(e,i)&&(n=e[i],o=t(n,r(i)),!1===o))return n}function D(e,t,n){return S(e,function(e,o){n=t(n,e,o)}),n}function M(e,t){return!!D(e,function(e,n,o){return e&&t(n,o)},!0)}function z(e,t){let n=[];return S(e,function(e,o){n.push(t(e,o))}),n}function O(e){return z(e,e=>e)}function P(e,t,n={}){return t=F(t),S(e,function(e){let o=t(e)||"_",r=n[o];r||(r=n[o]=[]),r.push(e)}),n}function $(e,...t){e=F(e);let n={};return S(t,t=>P(t,e,n)),z(n,function(e,t){return e[0]})}function R(e,t){t=F(t);let n=[];return S(e,function(e,o){let r=t(e,o),i={d:r,v:e};for(var s=0;s<n.length;s++){let{d:e}=n[s];if(r<e)return void n.splice(s,0,i)}n.push(i)}),z(n,e=>e.v)}function T(e){return function(t){return M(e,function(e,n){return t[n]===e})}}function F(e){return w(e)?e:t=>t[e]}function L(e){return w(e)?e:t=>t===e}function I(e){return e}function H(e){return Number(e)}function N(e,t){return e.bind(t)}function W(e,...t){return Object.assign(e,...t)}function q(e,t){let n={},o=Object(e);return S(t,function(t){t in o&&(n[t]=e[t])}),n}function V(e,t){let n={};return S(Object(e),function(e,o){-1===t.indexOf(o)&&(n[o]=e)}),n}function G(e,t){return function(e,t){t.appendChild(function(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch(e){}return e}(e,t))}(t,e),e}var U={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":2,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":2,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function Y(e,t,n){var o=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=U[o];r?(2===r&&"number"==typeof n&&(n=String(n)+"px"),e.style[o]=n):e.setAttributeNS(null,t,n)}function X(e,t,n){if("string"==typeof t){if(void 0===n)return function(e,t){return U[t]?e.style[t]:e.getAttributeNS(null,t)}(e,t);Y(e,t,n)}else!function(e,t){var n,o,r=Object.keys(t);for(n=0;o=r[n];n++)Y(e,o,t[o])}(e,t);return e}const K=Object.prototype.toString;function Z(e){return new Q(e)}function Q(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}function J(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}function ee(e){return e.cloneNode(!0)}Q.prototype.add=function(e){return this.list.add(e),this},Q.prototype.remove=function(e){return"[object RegExp]"==K.call(e)?this.removeMatching(e):(this.list.remove(e),this)},Q.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},Q.prototype.toggle=function(e,t){return void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this},Q.prototype.array=function(){return Array.from(this.list)},Q.prototype.has=Q.prototype.contains=function(e){return this.list.contains(e)};var te="http://www.w3.org/2000/svg",ne='<svg xmlns="'+te+'"';function oe(e,t){var n;return"<"===(e=e.trim()).charAt(0)?(n=function(e){var t=!1;"<svg"===e.substring(0,4)?-1===e.indexOf(te)&&(e=ne+e.substring(4)):(e=ne+">"+e+"</svg>",t=!0);var n=function(e){var t;return(t=new DOMParser).async=!1,t.parseFromString(e,"text/xml")}(e);if(!t)return n;for(var o=document.createDocumentFragment(),r=n.firstChild;r.firstChild;)o.appendChild(r.firstChild);return o}(e).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(te,e),t&&X(n,t),n}var re=null;function ie(){return null===re&&(re=oe("svg")),re}function se(e,t){var n,o,r=Object.keys(t);for(n=0;o=r[n];n++)e[o]=t[o];return e}function ae(e){return e?ie().createSVGTransformFromMatrix(e):ie().createSVGTransform()}function ce(e){var t=e.parentNode;return t&&t.removeChild(e),e}function le(e,t){return t instanceof SVGMatrix?e.createSVGTransformFromMatrix(t):t}function ue(e,t){var n=e.transform.baseVal;return t&&(Array.isArray(t)||(t=[t]),function(e,t){var n,o;for(e.clear(),n=0;o=t[n];n++)e.appendItem(le(e,o))}(n,t)),n.consolidate()}function de(e){return e.flat().join(",").replace(/,?([A-Za-z]),?/g,"$1")}function pe(e){return["L",e.x,e.y]}function he(e,t,n){return["C",e.x,e.y,t.x,t.y,n.x,n.y]}function fe(e,t){const n=e.length,o=[(r=e[0],["M",r.x,r.y])];var r;for(let r=1;r<n;r++){const n=e[r-1],i=e[r],s=e[r+1];if(!s||!t){o.push(pe(i));continue}const a=Math.min(t,ve(i.x-n.x,i.y-n.y),ve(s.x-i.x,s.y-i.y));if(!a){o.push(pe(i));continue}const c=ge(i,n,a),l=ge(i,n,.5*a),u=ge(i,s,a),d=ge(i,s,.5*a);o.push(pe(c)),o.push(he(l,d,u))}return o}function ge(e,t,n){const o=t.x-e.x,r=t.y-e.y,i=n/ve(o,r);return{x:e.x+o*i,y:e.y+r*i}}function ve(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}function ye(e,t,n){b(t)&&(n=t,t=null),t||(t={});const o=oe("path",t);return b(n)&&(o.dataset.cornerRadius=String(n)),me(o,e)}function me(e,t){return X(e,{d:de(fe(t,parseInt(e.dataset.cornerRadius,10)||0))}),e}function Ae(e){return B(e,function(t){return!j(e,function(e){return e!==t&&xe(t,e)})})}function xe(e,t){if(t){if(e===t)return t;if(e.parent)return xe(e.parent,t)}}function _e(e,t,n){var o=!n||-1===e.indexOf(t);return o&&e.push(t),o}function Ee(e,t,n){n=n||0,_(e)||(e=[e]),S(e,function(e,o){var r=t(e,o,n);_(r)&&r.length&&Ee(r,t,n+1)})}function be(e,t){return function(e,t,n){var o=[],r=[];return Ee(e,function(e,i,s){_e(o,e,t);var a=e.children;if((-1===n||s<n)&&a&&_e(r,a,t))return a}),o}(e,!t,-1)}function we(e,t){var n,o,r,i;return t=!!t,_(e)||(e=[e]),S(e,function(e){var s=e;e.waypoints&&!t&&(s=we(e.waypoints,!0));var a=s.x,c=s.y,l=s.height||0,u=s.width||0;(a<n||void 0===n)&&(n=a),(c<o||void 0===o)&&(o=c),(a+u>r||void 0===r)&&(r=a+u),(c+l>i||void 0===i)&&(i=c+l)}),{x:n,y:o,height:i-o,width:r-n}}function Ce(e){return"waypoints"in e?"connection":"x"in e?"shape":"root"}function ke(e){return!(!e||!e.isFrame)}function je(e,t){return W({},e||{},t||{})}function Be(e,t){g.call(this,e,1),this.CONNECTION_STYLE=t.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=t.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=t.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}f(Be,g),Be.prototype.canRender=function(){return!0},Be.prototype.drawShape=function(e,t,n){var o=oe("rect");return X(o,{x:0,y:0,width:t.width||0,height:t.height||0}),ke(t)?X(o,W({},this.FRAME_STYLE,n||{})):X(o,W({},this.SHAPE_STYLE,n||{})),G(e,o),o},Be.prototype.drawConnection=function(e,t,n){var o=ye(t.waypoints,W({},this.CONNECTION_STYLE,n||{}));return G(e,o),o},Be.prototype.getShapePath=function(e){var t=e.x,n=e.y,o=e.width;return de([["M",t,n],["l",o,0],["l",0,e.height],["l",-o,0],["z"]])},Be.prototype.getConnectionPath=function(e){var t,n,o=e.waypoints,r=[];for(t=0;n=o[t];t++)n=n.original||n,r.push([0===t?"M":"L",n.x,n.y]);return de(r)},Be.$inject=["eventBus","styles"];const Se={__init__:["defaultRenderer"],defaultRenderer:["type",Be],styles:["type",function(){var e={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},t=this;this.cls=function(e,t,n){return W(this.style(t,n),{class:e})},this.style=function(t,n){_(t)||n||(n=t,t=[]);var o=D(t,function(t,n){return W(t,e[n]||{})},{});return n?W(o,n):o},this.computeStyle=function(e,n,o){return _(n)||(o=n,n=[]),t.style(n||[],W({},o,e||{}))}}]};function De(e,t){return t.forEach(function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach(function(n){if("default"!==n&&!(n in e)){var o=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,o.get?o:{enumerable:!0,get:function(){return t[n]}})}})}),Object.freeze(e)}const Me=Object.prototype.toString,ze=Object.prototype.hasOwnProperty;function Oe(e,t){return ze.call(e,t)}function Pe(e,t){let n,o;if(void 0===e)return;const r=(i=e,"[object Array]"===Me.call(i)?Re:$e);var i;for(let i in e)if(Oe(e,i)&&(n=e[i],o=t(n,r(i)),!1===o))return n}function $e(e){return e}function Re(e){return Number(e)}function Te(e,...t){const n=e.style;return Pe(t,function(e){e&&Pe(e,function(e,t){n[t]=e})}),e}function Fe(e,t,n){return 2==arguments.length?e.getAttribute(t):null===n?e.removeAttribute(t):(e.setAttribute(t,n),e)}const Le=Object.prototype.toString;function Ie(e){return new He(e)}function He(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}function Ne(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}function We(e,t,n){var o=n?e:e.parentNode;return o&&"function"==typeof o.closest&&o.closest(t)||null}He.prototype.add=function(e){return this.list.add(e),this},He.prototype.remove=function(e){return"[object RegExp]"==Le.call(e)?this.removeMatching(e):(this.list.remove(e),this)},He.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},He.prototype.toggle=function(e,t){return void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this},He.prototype.array=function(){return Array.from(this.list)},He.prototype.has=He.prototype.contains=function(e){return this.list.contains(e)};var qe,Ve,Ge,Ue={};function Ye(){qe=window.addEventListener?"addEventListener":"attachEvent",Ve=window.removeEventListener?"removeEventListener":"detachEvent",Ge="addEventListener"!==qe?"on":""}var Xe,Ke=De({__proto__:null,bind:Ue.bind=function(e,t,n,o){return qe||Ye(),e[qe](Ge+t,n,o||!1),n},unbind:Ue.unbind=function(e,t,n,o){return Ve||Ye(),e[Ve](Ge+t,n,o||!1),n},default:Ue},[Ue]),Ze=["focus","blur"],Qe=function(e,t,n,o,r){return-1!==Ze.indexOf(n)&&(r=!0),Ke.bind(e,n,function(n){var r=n.target||n.srcElement;n.delegateTarget=We(r,t,!0),n.delegateTarget&&o.call(e,n)},r)},Je=function(e,t,n,o){return-1!==Ze.indexOf(t)&&(o=!0),Ke.unbind(e,t,n,o)},et=!1;"undefined"!=typeof document&&((Xe=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',et=!Xe.getElementsByTagName("link").length,Xe=void 0);var tt={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:et?[1,"X<div>","</div>"]:[0,"",""]};tt.td=tt.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],tt.option=tt.optgroup=[1,'<select multiple="multiple">',"</select>"],tt.thead=tt.tbody=tt.colgroup=tt.caption=tt.tfoot=[1,"<table>","</table>"],tt.polyline=tt.ellipse=tt.polygon=tt.circle=tt.text=tt.line=tt.path=tt.rect=tt.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];var nt=function(e,t){if("string"!=typeof e)throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var o=n[1];if("body"==o)return(r=t.createElement("html")).innerHTML=e,r.removeChild(r.lastChild);var r,i=Object.prototype.hasOwnProperty.call(tt,o)?tt[o]:tt._default,s=i[0],a=i[1],c=i[2];for((r=t.createElement("div")).innerHTML=a+e+c;s--;)r=r.lastChild;if(r.firstChild==r.lastChild)return r.removeChild(r.firstChild);for(var l=t.createDocumentFragment();r.firstChild;)l.appendChild(r.removeChild(r.firstChild));return l};function ot(e,t){return e&&"function"==typeof e.matches&&e.matches(t)||!1}function rt(e,t){return(t=t||document).querySelector(e)}function it(e,t){return(t=t||document).querySelectorAll(e)}function st(e){e.parentNode&&e.parentNode.removeChild(e)}function at(e,t){if(!e||!t)return-1;var n=e.indexOf(t);return-1!==n&&e.splice(n,1),n}function ct(e,t,n){if(e&&t){"number"!=typeof n&&(n=-1);var o=e.indexOf(t);if(-1!==o){if(o===n)return;if(-1===n)return;e.splice(o,1)}-1!==n?e.splice(n,0,t):e.push(t)}}function lt(e,t){return e&&t?e.indexOf(t):-1}function ut(e,t){return e&&t?Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)):-1}function dt(e,t,n,o){if(void 0===o&&(o=5),!e||!t||!n)return!1;var r=(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x),i=ut(e,t);return Math.abs(r/i)<=o}function pt(e,t){var n=Array.from(arguments).flat();const o={x:"v",y:"h"};for(const[e,t]of Object.entries(o))if(ht(e,n))return t;return!1}function ht(e,t){const n=t[0];return M(t,function(t){return Math.abs(n[e]-t[e])<=2})}function ft(e,t){return{x:Math.round(e.x+(t.x-e.x)/2),y:Math.round(e.y+(t.y-e.y)/2)}}var gt=/,?([a-z]),?/gi,vt=parseFloat,yt=Math,mt=yt.PI,At=yt.min,xt=yt.max,_t=yt.pow,Et=yt.abs,bt=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?[\s]*,?[\s]*)+)/gi,wt=/(-?\d*\.?\d*(?:e[-+]?\d+)?)[\s]*,?[\s]*/gi,Ct=Array.isArray||function(e){return e instanceof Array};function kt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function jt(e){if("function"==typeof e||Object(e)!==e)return e;var t=new e.constructor;for(var n in e)kt(e,n)&&(t[n]=jt(e[n]));return t}function Bt(e){var t=Bt.ps=Bt.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var n in t)kt(t,n)&&n!=e&&(t[n].sleep--,!t[n].sleep&&delete t[n])}),t[e]}function St(e,t,n,o){return 1===arguments.length&&(t=e.y,n=e.width,o=e.height,e=e.x),{x:e,y:t,width:n,height:o,x2:e+n,y2:t+o}}function Dt(){return this.join(",").replace(gt,"$1")}function Mt(e){var t=jt(e);return t.toString=Dt,t}function zt(e,t,n,o,r,i,s,a,c){var l=1-c,u=_t(l,3),d=_t(l,2),p=c*c*c,h=u*t+3*d*c*o+3*l*c*c*i+p*a;return{x:Ft(u*e+3*d*c*n+3*l*c*c*r+p*s),y:Ft(h)}}function Ot(e){var t=function(e,t,n,o,r,i,s,a){for(var c,l,u,d,p,h,f,g,v=[],y=[[],[]],m=0;m<2;++m)if(0==m?(l=6*e-12*n+6*r,c=-3*e+9*n-9*r+3*s,u=3*n-3*e):(l=6*t-12*o+6*i,c=-3*t+9*o-9*i+3*a,u=3*o-3*t),Et(c)<1e-12){if(Et(l)<1e-12)continue;0<(d=-u/l)&&d<1&&v.push(d)}else f=l*l-4*u*c,g=yt.sqrt(f),f<0||(0<(p=(-l+g)/(2*c))&&p<1&&v.push(p),0<(h=(-l-g)/(2*c))&&h<1&&v.push(h));for(var A,x=v.length,_=x;x--;)A=1-(d=v[x]),y[0][x]=A*A*A*e+3*A*A*d*n+3*A*d*d*r+d*d*d*s,y[1][x]=A*A*A*t+3*A*A*d*o+3*A*d*d*i+d*d*d*a;return y[0][_]=e,y[1][_]=t,y[0][_+1]=s,y[1][_+1]=a,y[0].length=y[1].length=_+2,{x0:At(...y[0]),y0:At(...y[1]),x1:xt(...y[0]),y1:xt(...y[1])}}(...e);return St(t.x0,t.y0,t.x1-t.x0,t.y1-t.y0)}function Pt(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height}function $t(e,t,n,o,r){return e*(e*(-3*t+9*n-9*o+3*r)+6*t-12*n+6*o)-3*t+3*n}function Rt(e,t,n,o,r,i,s,a,c){null==c&&(c=1);for(var l=(c=c>1?1:c<0?0:c)/2,u=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],d=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0,h=0;h<12;h++){var f=l*u[h]+l,g=$t(f,e,n,r,s),v=$t(f,t,o,i,a),y=g*g+v*v;p+=d[h]*yt.sqrt(y)}return l*p}function Tt(e,t,n,o,r,i,s,a){if(!(xt(e,n)<At(r,s)||At(e,n)>xt(r,s)||xt(t,o)<At(i,a)||At(t,o)>xt(i,a))){var c=(e*o-t*n)*(i-a)-(t-o)*(r*a-i*s),l=(e-n)*(i-a)-(t-o)*(r-s);if(l){var u=Ft(((e*o-t*n)*(r-s)-(e-n)*(r*a-i*s))/l),d=Ft(c/l),p=+u.toFixed(2),h=+d.toFixed(2);if(!(p<+At(e,n).toFixed(2)||p>+xt(e,n).toFixed(2)||p<+At(r,s).toFixed(2)||p>+xt(r,s).toFixed(2)||h<+At(t,o).toFixed(2)||h>+xt(t,o).toFixed(2)||h<+At(i,a).toFixed(2)||h>+xt(i,a).toFixed(2)))return{x:u,y:d}}}}function Ft(e){return Math.round(1e11*e)/1e11}function Lt(e,t,n){if(o=Ot(e),r=Ot(t),o=St(o),!(Pt(r=St(r),o.x,o.y)||Pt(r,o.x2,o.y)||Pt(r,o.x,o.y2)||Pt(r,o.x2,o.y2)||Pt(o,r.x,r.y)||Pt(o,r.x2,r.y)||Pt(o,r.x,r.y2)||Pt(o,r.x2,r.y2)||(o.x<r.x2&&o.x>r.x||r.x<o.x2&&r.x>o.x)&&(o.y<r.y2&&o.y>r.y||r.y<o.y2&&r.y>o.y)))return n?0:[];for(var o,r,i=Rt(...e),s=Rt(...t),a=Nt(e)?1:~~(i/5)||1,c=Nt(t)?1:~~(s/5)||1,l=[],u=[],d={},p=n?0:[],h=0;h<a+1;h++){var f=zt(...e,h/a);l.push({x:f.x,y:f.y,t:h/a})}for(h=0;h<c+1;h++)f=zt(...t,h/c),u.push({x:f.x,y:f.y,t:h/c});for(h=0;h<a;h++)for(var g=0;g<c;g++){var v,y=l[h],m=l[h+1],A=u[g],x=u[g+1],_=Et(m.x-y.x)<.01?"y":"x",E=Et(x.x-A.x)<.01?"y":"x",b=Tt(y.x,y.y,m.x,m.y,A.x,A.y,x.x,x.y);if(b){if(d[v=b.x.toFixed(9)+"#"+b.y.toFixed(9)])continue;d[v]=!0;var w=y.t+Et((b[_]-y[_])/(m[_]-y[_]))*(m.t-y.t),C=A.t+Et((b[E]-A[E])/(x[E]-A[E]))*(x.t-A.t);w>=0&&w<=1&&C>=0&&C<=1&&(n?p++:p.push({x:b.x,y:b.y,t1:w,t2:C}))}}return p}function It(e,t,n){e=Gt(e),t=Gt(t);for(var o,r,i,s,a,c,l,u,d,p,h=n?0:[],f=0,g=e.length;f<g;f++){var v=e[f];if("M"==v[0])o=a=v[1],r=c=v[2];else{"C"==v[0]?(o=(d=[o,r,...v.slice(1)])[6],r=d[7]):(d=[o,r,o,r,a,c,a,c],o=a,r=c);for(var y=0,m=t.length;y<m;y++){var A=t[y];if("M"==A[0])i=l=A[1],s=u=A[2];else{"C"==A[0]?(i=(p=[i,s,...A.slice(1)])[6],s=p[7]):(p=[i,s,i,s,l,u,l,u],i=l,s=u);var x=Lt(d,p,n);if(n)h+=x;else{for(var _=0,E=x.length;_<E;_++)x[_].segment1=f,x[_].segment2=y,x[_].bez1=d,x[_].bez2=p;h=h.concat(x)}}}}}return h}function Ht(e){var t=Bt(e);if(t.abs)return Mt(t.abs);if(Ct(e)&&Ct(e&&e[0])||(e=function(e){if(!e)return null;var t=Bt(e);if(t.arr)return jt(t.arr);var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},o=[];return Ct(e)&&Ct(e[0])&&(o=jt(e)),o.length||String(e).replace(bt,function(e,t,r){var i=[],s=t.toLowerCase();for(r.replace(wt,function(e,t){t&&i.push(+t)}),"m"==s&&i.length>2&&(o.push([t,...i.splice(0,2)]),s="l",t="m"==t?"l":"L");i.length>=n[s]&&(o.push([t,...i.splice(0,n[s])]),n[s]););}),o.toString=Bt.toString,t.arr=jt(o),o}(e)),!e||!e.length)return[["M",0,0]];var n,o=[],r=0,i=0,s=0,a=0,c=0;"M"==e[0][0]&&(s=r=+e[0][1],a=i=+e[0][2],c++,o[0]=["M",r,i]);for(var l,u,d=c,p=e.length;d<p;d++){if(o.push(l=[]),(n=(u=e[d])[0])!=n.toUpperCase())switch(l[0]=n.toUpperCase(),l[0]){case"A":l[1]=u[1],l[2]=u[2],l[3]=u[3],l[4]=u[4],l[5]=u[5],l[6]=+u[6]+r,l[7]=+u[7]+i;break;case"V":l[1]=+u[1]+i;break;case"H":l[1]=+u[1]+r;break;case"M":s=+u[1]+r,a=+u[2]+i;default:for(var h=1,f=u.length;h<f;h++)l[h]=+u[h]+(h%2?r:i)}else for(var g=0,v=u.length;g<v;g++)l[g]=u[g];switch(n=n.toUpperCase(),l[0]){case"Z":r=+s,i=+a;break;case"H":r=l[1];break;case"V":i=l[1];break;case"M":s=l[l.length-2],a=l[l.length-1];default:r=l[l.length-2],i=l[l.length-1]}}return o.toString=Dt,t.abs=Mt(o),o}function Nt(e){return e[0]===e[2]&&e[1]===e[3]&&e[4]===e[6]&&e[5]===e[7]}function Wt(e,t,n,o){return[e,t,n,o,n,o]}function qt(e,t,n,o,r,i){var s=1/3,a=2/3;return[s*e+a*n,s*t+a*o,s*r+a*n,s*i+a*o,r,i]}function Vt(e,t,n,o,r,i,s,a,c,l){var u,d=120*mt/180,p=mt/180*(+r||0),h=[],f=function e(){var t=Array.prototype.slice.call(arguments,0).join(""),n=e.cache=e.cache||{},o=e.count=e.count||[];return kt(n,t)?(function(e,t){for(var n=0,o=e.length;n<o;n++)if(e[n]===t)return e.push(e.splice(n,1)[0])}(o,t),n[t]):(o.length>=1e3&&delete n[o.shift()],o.push(t),n[t]=function(e,t,n){return{x:e*yt.cos(n)-t*yt.sin(n),y:e*yt.sin(n)+t*yt.cos(n)}}(...arguments),n[t])};if(l)b=l[0],w=l[1],_=l[2],E=l[3];else{e=(u=f(e,t,-p)).x,t=u.y;var g=(e-(a=(u=f(a,c,-p)).x))/2,v=(t-(c=u.y))/2,y=g*g/(n*n)+v*v/(o*o);y>1&&(n*=y=yt.sqrt(y),o*=y);var m=n*n,A=o*o,x=(i==s?-1:1)*yt.sqrt(Et((m*A-m*v*v-A*g*g)/(m*v*v+A*g*g))),_=x*n*v/o+(e+a)/2,E=x*-o*g/n+(t+c)/2,b=yt.asin(((t-E)/o).toFixed(9)),w=yt.asin(((c-E)/o).toFixed(9));(b=e<_?mt-b:b)<0&&(b=2*mt+b),(w=a<_?mt-w:w)<0&&(w=2*mt+w),s&&b>w&&(b-=2*mt),!s&&w>b&&(w-=2*mt)}var C=w-b;if(Et(C)>d){var k=w,j=a,B=c;w=b+d*(s&&w>b?1:-1),h=Vt(a=_+n*yt.cos(w),c=E+o*yt.sin(w),n,o,r,0,s,j,B,[w,k,_,E])}C=w-b;var S=yt.cos(b),D=yt.sin(b),M=yt.cos(w),z=yt.sin(w),O=yt.tan(C/4),P=4/3*n*O,$=4/3*o*O,R=[e,t],T=[e+P*D,t-$*S],F=[a+P*z,c-$*M],L=[a,c];if(T[0]=2*R[0]-T[0],T[1]=2*R[1]-T[1],l)return[T,F,L].concat(h);for(var I=[],H=0,N=(h=[T,F,L].concat(h).join().split(",")).length;H<N;H++)I[H]=H%2?f(h[H-1],h[H],p).y:f(h[H],h[H+1],p).x;return I}function Gt(e){var t=Bt(e);if(t.curve)return Mt(t.curve);for(var n=Ht(e),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},r=function(e,t,n){var o,r;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C",...Vt(t.x,t.y,...e.slice(1))];break;case"S":"C"==n||"S"==n?(o=2*t.x-t.bx,r=2*t.y-t.by):(o=t.x,r=t.y),e=["C",o,r,...e.slice(1)];break;case"T":"Q"==n||"T"==n?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C",...qt(t.x,t.y,t.qx,t.qy,e[1],e[2])];break;case"Q":t.qx=e[1],t.qy=e[2],e=["C",...qt(t.x,t.y,e[1],e[2],e[3],e[4])];break;case"L":e=["C",...Wt(t.x,t.y,e[1],e[2])];break;case"H":e=["C",...Wt(t.x,t.y,e[1],t.y)];break;case"V":e=["C",...Wt(t.x,t.y,t.x,e[1])];break;case"Z":e=["C",...Wt(t.x,t.y,t.X,t.Y)]}return e},i=function(e,t){if(e[t].length>7){e[t].shift();for(var o=e[t];o.length;)s[t]="A",e.splice(t++,0,["C",...o.splice(0,6)]);e.splice(t,1),u=n.length}},s=[],a="",c="",l=0,u=n.length;l<u;l++){n[l]&&(a=n[l][0]),"C"!=a&&(s[l]=a,l&&(c=s[l-1])),n[l]=r(n[l],o,c),"A"!=s[l]&&"C"==a&&(s[l]="C"),i(n,l);var d=n[l],p=d.length;o.x=d[p-2],o.y=d[p-1],o.bx=vt(d[p-4])||o.x,o.by=vt(d[p-3])||o.y}return t.curve=Mt(n),n}function Ut(e){return E(e)&&k(e,"waypoints")}function Yt(e){return E(e)&&k(e,"labelTarget")}function Xt(e){return{x:Math.round(e.x),y:Math.round(e.y)}}function Kt(e){return{top:e.y,right:e.x+(e.width||0),bottom:e.y+(e.height||0),left:e.x}}function Zt(e){return{x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}}function Qt(e){return Ut(e)?function(e){for(var t=e.waypoints,n=t.reduce(function(e,n,o){var r=t[o-1];if(r){var i=e[e.length-1],s=i&&i.endLength||0,a=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}(r,n);e.push({start:r,end:n,startLength:s,endLength:s+a,length:a})}return e},[]),o=n.reduce(function(e,t){return e+t.length},0)/2,r=0,i=n[r];i.endLength<o;)i=n[++r];var s=(o-i.startLength)/i.length;return{x:i.start.x+(i.end.x-i.start.x)*s,y:i.start.y+(i.end.y-i.start.y)*s}}(e):Xt({x:(t=e).x+(t.width||0)/2,y:t.y+(t.height||0)/2});var t}function Jt(e,t,n){E(n=n||0)||(n={x:n,y:n});var o=Kt(e),r=Kt(t),i=o.bottom+n.y<=r.top,s=o.left-n.x>=r.right,a=o.top-n.y>=r.bottom,c=i?"top":a?"bottom":null,l=o.right+n.x<=r.left?"left":s?"right":null;return l&&c?c+"-"+l:l||c||"intersect"}function en(e,t){return Math.round(e*t)/t}function tn(e){return b(e)?e+"px":e}function nn(e,t,n){const o=oe("g");Z(o).add(t);const r=void 0!==n?n:e.childNodes.length-1;return e.insertBefore(o,e.childNodes[r]||null),o}const on={shape:["x","y","width","height"],connection:["waypoints"]};function rn(e,t,n,o){this._eventBus=t,this._elementRegistry=o,this._graphicsFactory=n,this._rootsIdx=0,this._layers={},this._planes=[],this._rootElement=null,this._focused=!1,this._init(e||{})}function sn(e,t){const n="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttribute("transform",n)}rn.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"],rn.prototype._init=function(e){const t=this._eventBus,n=this._container=function(e){const t=(e=W({},{width:"100%",height:"100%"},e)).container||document.body,n=document.createElement("div");return n.setAttribute("class","djs-container djs-parent"),Te(n,{position:"relative",overflow:"hidden",width:tn(e.width),height:tn(e.height)}),t.appendChild(n),n}(e),o=this._svg=oe("svg");X(o,{width:"100%",height:"100%"}),Fe(o,"tabindex",0),e.autoFocus&&t.on("element.hover",()=>{this.restoreFocus()}),t.on("element.mousedown",500,e=>{this.focus()}),o.addEventListener("focusin",()=>{this._setFocused(!0)}),o.addEventListener("focusout",()=>{this._setFocused(!1)}),G(n,o);const r=this._viewport=nn(o,"viewport");e.deferUpdate&&(this._viewboxChanged=function(e){let t,n,o,r;function i(t){let i=Date.now(),c=t?0:r+300-i;if(c>0)return s(c);e.apply(o,n),a()}function s(e){t=setTimeout(i,e)}function a(){t&&clearTimeout(t),t=r=n=o=void 0}function c(...e){r=Date.now(),n=e,o=this,t||s(300)}return c.flush=function(){t&&i(!0),a()},c.cancel=a,c}(N(this._viewboxChanged,this))),t.on("diagram.init",()=>{t.fire("canvas.init",{svg:o,viewport:r})}),t.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed","root.set"],()=>{delete this._cachedViewbox}),t.on("diagram.destroy",500,this._destroy,this),t.on("diagram.clear",500,this._clear,this)},rn.prototype._destroy=function(){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});const e=this._container.parentNode;e&&e.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._planes,delete this._rootElement,delete this._viewport},rn.prototype._setFocused=function(e){e!=this._focused&&(this._focused=e,this._eventBus.fire("canvas.focus.changed",{focused:e}))},rn.prototype._clear=function(){this._elementRegistry.getAll().forEach(e=>{const t=Ce(e);"root"===t?this.removeRootElement(e):this._removeElement(e,t)}),this._planes=[],this._rootElement=null,delete this._cachedViewbox},rn.prototype.focus=function(){this._svg.focus({preventScroll:!0}),this._setFocused(!0)},rn.prototype.restoreFocus=function(){document.activeElement===document.body&&this.focus()},rn.prototype.isFocused=function(){return this._focused},rn.prototype.getDefaultLayer=function(){return this.getLayer("base",0)},rn.prototype.getLayer=function(e,t){if(!e)throw new Error("must specify a name");let n=this._layers[e];if(n||(n=this._layers[e]=this._createLayer(e,t)),void 0!==t&&n.index!==t)throw new Error("layer <"+e+"> already created at index <"+t+">");return n.group},rn.prototype._getChildIndex=function(e){return D(this._layers,function(t,n){return n.visible&&e>=n.index&&t++,t},0)},rn.prototype._createLayer=function(e,t){void 0===t&&(t=1);const n=this._getChildIndex(t);return{group:nn(this._viewport,"layer-"+e,n),index:t,visible:!0}},rn.prototype.showLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=this._viewport,o=t.group,r=t.index;if(t.visible)return o;const i=this._getChildIndex(r);return n.insertBefore(o,n.childNodes[i]||null),t.visible=!0,o},rn.prototype.hideLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=t.group;return t.visible?(ce(n),t.visible=!1,n):n},rn.prototype._removeLayer=function(e){const t=this._layers[e];t&&(delete this._layers[e],ce(t.group))},rn.prototype.getActiveLayer=function(){const e=this._findPlaneForRoot(this.getRootElement());return e?e.layer:null},rn.prototype.findRoot=function(e){if("string"==typeof e&&(e=this._elementRegistry.get(e)),!e)return;const t=this._findPlaneForRoot(function(e){for(;e.parent;)e=e.parent;return e}(e))||{};return t.rootElement},rn.prototype.getRootElements=function(){return this._planes.map(function(e){return e.rootElement})},rn.prototype._findPlaneForRoot=function(e){return j(this._planes,function(t){return t.rootElement===e})},rn.prototype.getContainer=function(){return this._container},rn.prototype._updateMarker=function(e,t,n){let o;e.id||(e=this._elementRegistry.get(e)),e.markers=e.markers||new Set,o=this._elementRegistry._elements[e.id],o&&(S([o.gfx,o.secondaryGfx],function(o){o&&(n?(e.markers.add(t),Z(o).add(t)):(e.markers.delete(t),Z(o).remove(t)))}),this._eventBus.fire("element.marker.update",{element:e,gfx:o.gfx,marker:t,add:!!n}))},rn.prototype.addMarker=function(e,t){this._updateMarker(e,t,!0)},rn.prototype.removeMarker=function(e,t){this._updateMarker(e,t,!1)},rn.prototype.hasMarker=function(e,t){return e.id||(e=this._elementRegistry.get(e)),!!e.markers&&e.markers.has(t)},rn.prototype.toggleMarker=function(e,t){this.hasMarker(e,t)?this.removeMarker(e,t):this.addMarker(e,t)},rn.prototype.getRootElement=function(){const e=this._rootElement;return e||this._planes.length?e:this.setRootElement(this.addRootElement(null))},rn.prototype.addRootElement=function(e){const t=this._rootsIdx++;e||(e={id:"__implicitroot_"+t,children:[],isImplicit:!0});const n=e.layer="root-"+t;this._ensureValid("root",e);const o=this.getLayer(n,0);return this.hideLayer(n),this._addRoot(e,o),this._planes.push({rootElement:e,layer:o}),e},rn.prototype.removeRootElement=function(e){if("string"==typeof e&&(e=this._elementRegistry.get(e)),this._findPlaneForRoot(e))return this._removeRoot(e),this._removeLayer(e.layer),this._planes=this._planes.filter(function(t){return t.rootElement!==e}),this._rootElement===e&&(this._rootElement=null),e},rn.prototype.setRootElement=function(e){if(e===this._rootElement)return e;let t;if(!e)throw new Error("rootElement required");return t=this._findPlaneForRoot(e),t||(e=this.addRootElement(e)),this._setRoot(e),e},rn.prototype._removeRoot=function(e){const t=this._elementRegistry,n=this._eventBus;n.fire("root.remove",{element:e}),n.fire("root.removed",{element:e}),t.remove(e)},rn.prototype._addRoot=function(e,t){const n=this._elementRegistry,o=this._eventBus;o.fire("root.add",{element:e}),n.add(e,t),o.fire("root.added",{element:e,gfx:t})},rn.prototype._setRoot=function(e,t){const n=this._rootElement;n&&(this._elementRegistry.updateGraphics(n,null,!0),this.hideLayer(n.layer)),e&&(t||(t=this._findPlaneForRoot(e).layer),this._elementRegistry.updateGraphics(e,this._svg,!0),this.showLayer(e.layer)),this._rootElement=e,this._eventBus.fire("root.set",{element:e})},rn.prototype._ensureValid=function(e,t){if(!t.id)throw new Error("element must have an id");if(this._elementRegistry.get(t.id))throw new Error("element <"+t.id+"> already exists");const n=on[e],o=M(n,function(e){return void 0!==t[e]});if(!o)throw new Error("must supply { "+n.join(", ")+" } with "+e)},rn.prototype._setParent=function(e,t,n){ct(t.children,e,n),e.parent=t},rn.prototype._addElement=function(e,t,n,o){n=n||this.getRootElement();const r=this._eventBus,i=this._graphicsFactory;this._ensureValid(e,t),r.fire(e+".add",{element:t,parent:n}),this._setParent(t,n,o);const s=i.create(e,t,o);return this._elementRegistry.add(t,s),i.update(e,t,s),r.fire(e+".added",{element:t,gfx:s}),t},rn.prototype.addShape=function(e,t,n){return this._addElement("shape",e,t,n)},rn.prototype.addConnection=function(e,t,n){return this._addElement("connection",e,t,n)},rn.prototype._removeElement=function(e,t){const n=this._elementRegistry,o=this._graphicsFactory,r=this._eventBus;if(e=n.get(e.id||e))return r.fire(t+".remove",{element:e}),o.remove(e),at(e.parent&&e.parent.children,e),e.parent=null,r.fire(t+".removed",{element:e}),n.remove(e),e},rn.prototype.removeShape=function(e){return this._removeElement(e,"shape")},rn.prototype.removeConnection=function(e){return this._removeElement(e,"connection")},rn.prototype.getGraphics=function(e,t){return this._elementRegistry.getGraphics(e,t)},rn.prototype._changeViewbox=function(e){this._eventBus.fire("canvas.viewbox.changing"),e.apply(this),this._cachedViewbox=null,this._viewboxChanged()},rn.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})},rn.prototype.viewbox=function(e){if(void 0===e&&this._cachedViewbox)return structuredClone(this._cachedViewbox);const t=this._viewport,n=this.getSize();let o,r,i,s,a,c,l;return e?(this._changeViewbox(function(){a=Math.min(n.width/e.width,n.height/e.height);const o=this._svg.createSVGMatrix().scale(a).translate(-e.x,-e.y);ue(t,o)}),e):(i=this._rootElement?this.getActiveLayer():null,o=i&&i.getBBox()||{},s=ue(t),r=s?s.matrix:function(e,t,n,o,r,i){var s=ie().createSVGMatrix();switch(arguments.length){case 0:return s;case 1:return se(s,e);case 6:return se(s,{a:e,b:t,c:n,d:o,e:r,f:i})}}(),a=en(r.a,1e3),c=en(-r.e||0,1e3),l=en(-r.f||0,1e3),e=this._cachedViewbox={x:c?c/a:0,y:l?l/a:0,width:n.width/a,height:n.height/a,scale:a,inner:{width:o.width||0,height:o.height||0,x:o.x||0,y:o.y||0},outer:n})},rn.prototype.scroll=function(e){const t=this._viewport;let n=t.getCTM();return e&&this._changeViewbox(function(){e=W({dx:0,dy:0},e||{}),n=this._svg.createSVGMatrix().translate(e.dx,e.dy).multiply(n),sn(t,n)}),{x:n.e,y:n.f}},rn.prototype.scrollToElement=function(e,t){let n=100;"string"==typeof e&&(e=this._elementRegistry.get(e));const o=this.findRoot(e);if(o!==this.getRootElement()&&this.setRootElement(o),o===e)return;t||(t={}),"number"==typeof t&&(n=t),t={top:t.top||n,right:t.right||n,bottom:t.bottom||n,left:t.left||n};const r=we(e),i=Kt(r),s=this.viewbox(),a=this.zoom();let c,l;s.y+=t.top/a,s.x+=t.left/a,s.width-=(t.right+t.left)/a,s.height-=(t.bottom+t.top)/a;const u=Kt(s);if(r.width<s.width&&r.height<s.height){const e=Math.max(0,i.right-u.right),t=Math.min(0,i.left-u.left),n=Math.max(0,i.bottom-u.bottom),o=Math.min(0,i.top-u.top);c=e||t,l=n||o}else c=r.x-s.x,l=r.y-s.y;this.scroll({dx:-c*a,dy:-l*a})},rn.prototype.zoom=function(e,t){if(!e)return this.viewbox(e).scale;if("fit-viewport"===e)return this._fitViewport(t);let n,o;return this._changeViewbox(function(){"object"!=typeof t&&(n=this.viewbox().outer,t={x:n.width/2,y:n.height/2}),o=this._setZoom(e,t)}),en(o.a,1e3)},rn.prototype._fitViewport=function(e){const t=this.viewbox(),n=t.outer,o=t.inner;let r,i;return o.x>=0&&o.y>=0&&o.x+o.width<=n.width&&o.y+o.height<=n.height&&!e?i={x:0,y:0,width:Math.max(o.width+o.x,n.width),height:Math.max(o.height+o.y,n.height)}:(r=Math.min(1,n.width/o.width,n.height/o.height),i={x:o.x+(e?o.width/2-n.width/r/2:0),y:o.y+(e?o.height/2-n.height/r/2:0),width:n.width/r,height:n.height/r}),this.viewbox(i),this.viewbox(!1).scale},rn.prototype._setZoom=function(e,t){const n=this._svg,o=this._viewport,r=n.createSVGMatrix(),i=n.createSVGPoint();let s,a,c,l,u;c=o.getCTM();const d=c.a;return t?(s=W(i,t),a=s.matrixTransform(c.inverse()),l=r.translate(a.x,a.y).scale(1/d*e).translate(-a.x,-a.y),u=c.multiply(l)):u=r.scale(e),sn(this._viewport,u),u},rn.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}},rn.prototype.getAbsoluteBBox=function(e){const t=this.viewbox();let n;return n=e.waypoints?this.getGraphics(e).getBBox():e,{x:n.x*t.scale-t.x*t.scale,y:n.y*t.scale-t.y*t.scale,width:n.width*t.scale,height:n.height*t.scale}},rn.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var an="data-element-id";function cn(e){this._elements={},this._eventBus=e}function ln(e,t,n){var o=function(e,t,n,o){var r=n.inverse;return Object.defineProperty(e,"remove",{value:function(e){var n=this.indexOf(e);return-1!==n&&(this.splice(n,1),t.unset(e,r,o)),e}}),Object.defineProperty(e,"contains",{value:function(e){return-1!==this.indexOf(e)}}),Object.defineProperty(e,"add",{value:function(e,n){var i=this.indexOf(e);if(void 0===n){if(-1!==i)return;n=this.length}-1!==i&&this.splice(i,1),this.splice(n,0,e),-1===i&&t.set(e,r,o)}}),Object.defineProperty(e,"__refs_collection",{value:!0}),e}(n[t.name]||[],e,t,n);Object.defineProperty(n,t.name,{enumerable:t.enumerable,value:o}),o.length&&o.forEach(function(o){e.set(o,t.inverse,n)})}function un(e,t){if(!(this instanceof un))return new un(e,t);e.inverse=t,t.inverse=e,this.props={},this.props[e.name]=e,this.props[t.name]=t}cn.$inject=["eventBus"],cn.prototype.add=function(e,t,n){var o=e.id;this._validateId(o),X(t,an,o),n&&X(n,an,o),this._elements[o]={element:e,gfx:t,secondaryGfx:n}},cn.prototype.remove=function(e){var t=this._elements,n=e.id||e,o=n&&t[n];o&&(X(o.gfx,an,""),o.secondaryGfx&&X(o.secondaryGfx,an,""),delete t[n])},cn.prototype.updateId=function(e,t){this._validateId(t),"string"==typeof e&&(e=this.get(e)),this._eventBus.fire("element.updateId",{element:e,newId:t});var n=this.getGraphics(e),o=this.getGraphics(e,!0);this.remove(e),e.id=t,this.add(e,n,o)},cn.prototype.updateGraphics=function(e,t,n){var o=e.id||e,r=this._elements[o];return n?r.secondaryGfx=t:r.gfx=t,t&&X(t,an,o),t},cn.prototype.get=function(e){var t;t="string"==typeof e?e:e&&X(e,an);var n=this._elements[t];return n&&n.element},cn.prototype.filter=function(e){var t=[];return this.forEach(function(n,o){e(n,o)&&t.push(n)}),t},cn.prototype.find=function(e){for(var t=this._elements,n=Object.keys(t),o=0;o<n.length;o++){var r=t[n[o]],i=r.element;if(e(i,r.gfx))return i}},cn.prototype.getAll=function(){return this.filter(function(e){return e})},cn.prototype.forEach=function(e){var t=this._elements;Object.keys(t).forEach(function(n){var o=t[n],r=o.element,i=o.gfx;return e(r,i)})},cn.prototype.getGraphics=function(e,t){var n=e.id||e,o=this._elements[n];return o&&(t?o.secondaryGfx:o.gfx)},cn.prototype._validateId=function(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")},un.prototype.bind=function(e,t){if("string"==typeof t){if(!this.props[t])throw new Error("no property <"+t+"> in ref");t=this.props[t]}t.collection?ln(this,t,e):function(e,t,n){var o=t.inverse,r=n[t.name];Object.defineProperty(n,t.name,{configurable:t.configurable,enumerable:t.enumerable,get:function(){return r},set:function(t){if(t!==r){var i=r;r=null,i&&e.unset(i,o,n),r=t,e.set(r,o,n)}}})}(this,t,e)},un.prototype.ensureRefsCollection=function(e,t){var n=e[t.name];return function(e){return!0===e.__refs_collection}(n)||ln(this,t,e),n},un.prototype.ensureBound=function(e,t){(function(e,t){return Object.prototype.hasOwnProperty.call(e,t.name||t)})(e,t)||this.bind(e,t)},un.prototype.unset=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).remove(n):e[t.name]=void 0)},un.prototype.set=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).add(n):e[t.name]=n)};var dn=new un({name:"children",enumerable:!0,collection:!0},{name:"parent"}),pn=new un({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),hn=new un({name:"attachers",collection:!0},{name:"host"}),fn=new un({name:"outgoing",collection:!0},{name:"source"}),gn=new un({name:"incoming",collection:!0},{name:"target"});function vn(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(e){var t=this.label,n=this.labels;!e&&t?n.remove(t):n.add(e,0)}}),dn.bind(this,"parent"),pn.bind(this,"labels"),fn.bind(this,"outgoing"),gn.bind(this,"incoming")}function yn(){vn.call(this),dn.bind(this,"children"),hn.bind(this,"host"),hn.bind(this,"attachers")}function mn(){vn.call(this),dn.bind(this,"children")}function An(){yn.call(this),pn.bind(this,"labelTarget")}function xn(){vn.call(this),fn.bind(this,"source"),gn.bind(this,"target")}f(yn,vn),f(mn,yn),f(An,yn),f(xn,vn);var _n={connection:xn,shape:yn,label:An,root:mn};function En(){this._uid=12}En.prototype.createRoot=function(e){return this.create("root",e)},En.prototype.createLabel=function(e){return this.create("label",e)},En.prototype.createShape=function(e){return this.create("shape",e)},En.prototype.createConnection=function(e){return this.create("connection",e)},En.prototype.create=function(e,t){return(t=W({},t||{})).id||(t.id=e+"_"+this._uid++),function(e,t){var n=_n[e];if(!n)throw new Error("unknown type: <"+e+">");return W(new n,t)}(e,t)};var bn="__fn",wn=Array.prototype.slice;function Cn(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}function kn(){}function jn(e){return e.childNodes[0]}function Bn(e,t,n){var o=ae();o.setTranslate(t,n),ue(e,o)}function Sn(e,t){this._eventBus=e,this._elementRegistry=t}function Dn(e,t,n){var o=n||t.firstChild;e!==o&&t.insertBefore(e,o)}Cn.prototype.on=function(e,t,n,o){if(e=_(e)?e:[e],w(t)&&(o=n,n=t,t=1e3),!b(t))throw new Error("priority must be a number");var r=n;o&&((r=N(n,o))[bn]=n[bn]||n);var i=this;e.forEach(function(e){i._addListener(e,{priority:t,callback:r,next:null})})},Cn.prototype.once=function(e,t,n,o){var r=this;if(w(t)&&(o=n,n=t,t=1e3),!b(t))throw new Error("priority must be a number");function i(){i.__isTomb=!0;var t=n.apply(o,arguments);return r.off(e,i),t}i[bn]=n,this.on(e,t,i)},Cn.prototype.off=function(e,t){e=_(e)?e:[e];var n=this;e.forEach(function(e){n._removeListener(e,t)})},Cn.prototype.createEvent=function(e){var t=new kn;return t.init(e),t},Cn.prototype.fire=function(e,t){var n,o,r,i;if(i=wn.call(arguments),"object"==typeof e&&(e=(t=e).type),!e)throw new Error("no event type specified");if(o=this._listeners[e]){n=t instanceof kn?t:this.createEvent(t),i[0]=n;var s=n.type;e!==s&&(n.type=e);try{r=this._invokeListeners(n,i,o)}finally{e!==s&&(n.type=s)}return void 0===r&&n.defaultPrevented&&(r=!1),r}},Cn.prototype.handleError=function(e){return!1===this.fire("error",{error:e})},Cn.prototype._destroy=function(){this._listeners={}},Cn.prototype._invokeListeners=function(e,t,n){for(var o;n&&!e.cancelBubble;)o=this._invokeListener(e,t,n),n=n.next;return o},Cn.prototype._invokeListener=function(e,t,n){var o;if(n.callback.__isTomb)return o;try{o=function(e,t){return e.apply(null,t)}(n.callback,t),void 0!==o&&(e.returnValue=o,e.stopPropagation()),!1===o&&e.preventDefault()}catch(e){if(!this.handleError(e))throw console.error("unhandled error in event listener",e),e}return o},Cn.prototype._addListener=function(e,t){var n,o=this._getListeners(e);if(o){for(;o;){if(o.priority<t.priority)return t.next=o,void(n?n.next=t:this._setListeners(e,t));n=o,o=o.next}n.next=t}else this._setListeners(e,t)},Cn.prototype._getListeners=function(e){return this._listeners[e]},Cn.prototype._setListeners=function(e,t){this._listeners[e]=t},Cn.prototype._removeListener=function(e,t){var n,o,r,i=this._getListeners(e);if(t)for(;i;)n=i.next,(r=i.callback)!==t&&r[bn]!==t||(o?o.next=n:this._setListeners(e,n)),o=i,i=n;else this._setListeners(e,null)},kn.prototype.stopPropagation=function(){this.cancelBubble=!0},kn.prototype.preventDefault=function(){this.defaultPrevented=!0},kn.prototype.init=function(e){W(this,e||{})},Sn.$inject=["eventBus","elementRegistry"],Sn.prototype._getChildrenContainer=function(e){var t,n=this._elementRegistry.getGraphics(e);return e.parent?(t=function(e){return e.parentNode.childNodes[1]}(n),t||(Z(t=oe("g")).add("djs-children"),G(n.parentNode,t))):t=n,t},Sn.prototype._clear=function(e){var t=jn(e);return Ne(t),t},Sn.prototype._createContainer=function(e,t,n,o){var r=oe("g");Z(r).add("djs-group"),void 0!==n?Dn(r,t,t.childNodes[n]):G(t,r);var i=oe("g");Z(i).add("djs-element"),Z(i).add("djs-"+e),o&&Z(i).add("djs-frame"),G(r,i);var s=oe("g");return Z(s).add("djs-visual"),G(i,s),i},Sn.prototype.create=function(e,t,n){var o=this._getChildrenContainer(t.parent);return this._createContainer(e,o,n,ke(t))},Sn.prototype.updateContainments=function(e){var t,n=this,o=this._elementRegistry;t=D(e,function(e,t){return t.parent&&(e[t.parent.id]=t.parent),e},{}),S(t,function(e){var t=e.children;if(t){var r=n._getChildrenContainer(e);S(t.slice().reverse(),function(e){Dn(o.getGraphics(e).parentNode,r)})}})},Sn.prototype.drawShape=function(e,t,n={}){return this._eventBus.fire("render.shape",{gfx:e,element:t,attrs:n})},Sn.prototype.getShapePath=function(e){return this._eventBus.fire("render.getShapePath",e)},Sn.prototype.drawConnection=function(e,t,n={}){return this._eventBus.fire("render.connection",{gfx:e,element:t,attrs:n})},Sn.prototype.getConnectionPath=function(e){return this._eventBus.fire("render.getConnectionPath",e)},Sn.prototype.update=function(e,t,n){if(t.parent){var o=this._clear(n);if("shape"===e)this.drawShape(o,t),Bn(n,t.x,t.y);else{if("connection"!==e)throw new Error("unknown type: "+e);this.drawConnection(o,t)}t.hidden?X(n,"display","none"):X(n,"display","block")}},Sn.prototype.remove=function(e){ce(this._elementRegistry.getGraphics(e).parentNode)};const Mn={__depends__:[Se],__init__:["canvas"],canvas:["type",rn],elementRegistry:["type",cn],elementFactory:["type",En],eventBus:["type",Cn],graphicsFactory:["type",Sn]};function zn(e,t){this._injector=t||function(e){return t=[{config:["value",e=e||{}]},Mn].concat(e.modules||[]),(n=new p(t)).init(),n;var t,n}(e),this.get("eventBus").fire("diagram.init")}function On(e){e&&"function"==typeof e.stopPropagation&&e.stopPropagation()}function Pn(e){return e.originalEvent||e.srcEvent}function $n(e){On(e),On(Pn(e))}function Rn(e){return e.pointers&&e.pointers.length&&(e=e.pointers[0]),e.touches&&e.touches.length&&(e=e.touches[0]),e?{x:e.clientX,y:e.clientY}:null}function Tn(e,t,n){var o,r,i=this,s=n.get("dragging",!1);s&&t.on("drag.start",function(n){t.once("drag.move",1500,function(t){!function(t){if(!t.hover){var n=t.originalEvent,o=i._findTargetGfx(n),r=o&&e.get(o);o&&r&&(t.stopPropagation(),s.hover({element:r,gfx:o}),s.move(n))}}(t)})}),t.on("element.hover",function(e){o=e.gfx,r=e.element}),t.on("element.hover",1500,function(e){r&&t.fire("element.out",{element:r,gfx:o})}),t.on("element.out",function(){o=null,r=null}),this._findTargetGfx=function(e){var t;if(e instanceof MouseEvent)return t=Rn(e),We(document.elementFromPoint(t.x,t.y),"svg, .djs-element",!0)}}zn.prototype.get=function(e,t){return this._injector.get(e,t)},zn.prototype.invoke=function(e,t,n){return this._injector.invoke(e,t,n)},zn.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")},zn.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")},Tn.$inject=["elementRegistry","eventBus","injector"];const Fn={__init__:["hoverFix"],hoverFix:["type",Tn]};function Ln(){return/mac/i.test(navigator.platform)}function In(e,t){return(Pn(e)||e).button===t}function Hn(e){return In(e,0)}function Nn(e){var t=Pn(e)||e;return Hn(e)&&t.shiftKey}function Wn(e){return!0}function qn(e){return Hn(e)||function(e){return In(e,1)}(e)}function Vn(e,t,n){var o=this;function r(n,o,r){var i,s;(function(e,t){return!(c[e]||Hn)(t)})(n,o)||(r?s=t.getGraphics(r):(i=o.delegateTarget||o.target)&&(s=i,r=t.get(s)),s&&r&&!1===e.fire(n,{element:r,gfx:s,originalEvent:o})&&(o.stopPropagation(),o.preventDefault()))}var i={};function s(e){return i[e]}var a={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},c={"element.contextmenu":Wn,"element.mousedown":qn,"element.mouseup":qn,"element.click":qn,"element.dblclick":qn};function l(e,t,n,o){var s=i[n]=function(e){r(n,e)};o&&(c[n]=o),s.$delegate=Qe(e,"svg, .djs-element",t,s)}function u(e,t,n){var o=s(n);o&&Je(e,t,o.$delegate)}e.on("canvas.destroy",function(e){var t;t=e.svg,S(a,function(e,n){u(t,n,e)})}),e.on("canvas.init",function(e){var t;t=e.svg,S(a,function(e,n){l(t,n,e)})}),e.on(["shape.added","connection.added"],function(t){var n=t.element,o=t.gfx;e.fire("interactionEvents.createHit",{element:n,gfx:o})}),e.on(["shape.changed","connection.changed"],500,function(t){var n=t.element,o=t.gfx;e.fire("interactionEvents.updateHit",{element:n,gfx:o})}),e.on("interactionEvents.createHit",500,function(e){var t=e.element,n=e.gfx;o.createDefaultHit(t,n)}),e.on("interactionEvents.updateHit",function(e){var t=e.element,n=e.gfx;o.updateDefaultHit(t,n)});var d=f("djs-hit djs-hit-stroke"),p=f("djs-hit djs-hit-click-stroke"),h={all:f("djs-hit djs-hit-all"),"click-stroke":p,stroke:d,"no-move":f("djs-hit djs-hit-no-move")};function f(e,t){return t=W({stroke:"white",strokeWidth:15},t||{}),n.cls(e,["no-fill","no-border"],t)}function g(e,t){var n=h[t];if(!n)throw new Error("invalid hit type <"+t+">");return X(e,n),e}function v(e,t){G(e,t)}this.removeHits=function(e){S(it(".djs-hit",e),ce)},this.createDefaultHit=function(e,t){var n,o=e.waypoints,r=e.isFrame;return o?this.createWaypointsHit(t,o):(n=r?"stroke":"all",this.createBoxHit(t,n,{width:e.width,height:e.height}))},this.createWaypointsHit=function(e,t){var n=ye(t);return g(n,"stroke"),v(e,n),n},this.createBoxHit=function(e,t,n){n=W({x:0,y:0},n);var o=oe("rect");return g(o,t),X(o,n),v(e,o),o},this.updateDefaultHit=function(e,t){var n=rt(".djs-hit",t);if(n)return e.waypoints?me(n,e.waypoints):X(n,{width:e.width,height:e.height}),n},this.fire=r,this.triggerMouseEvent=function(e,t,n){var o=a[e];if(!o)throw new Error("unmapped DOM event name <"+e+">");return r(o,t,n)},this.mouseHandler=s,this.registerEvent=l,this.unregisterEvent=u}Vn.$inject=["eventBus","elementRegistry","styles"];const Gn={__init__:["interactionEvents"],interactionEvents:["type",Vn]};function Un(e,t){this._eventBus=e,this._canvas=t,this._selectedElements=[];var n=this;e.on(["shape.remove","connection.remove"],function(e){var t=e.element;n.deselect(t)}),e.on(["diagram.clear","root.set"],function(e){n.select(null)})}Un.$inject=["eventBus","canvas"],Un.prototype.deselect=function(e){var t=this._selectedElements,n=t.indexOf(e);if(-1!==n){var o=t.slice();t.splice(n,1),this._eventBus.fire("selection.changed",{oldSelection:o,newSelection:t})}},Un.prototype.get=function(){return this._selectedElements},Un.prototype.isSelected=function(e){return-1!==this._selectedElements.indexOf(e)},Un.prototype.select=function(e,t){var n=this._selectedElements,o=n.slice();_(e)||(e=e?[e]:[]);var r=this._canvas,i=r.getRootElement();e=e.filter(function(e){var t=r.findRoot(e);return i===t}),t?S(e,function(e){-1===n.indexOf(e)&&n.push(e)}):this._selectedElements=n=e.slice(),this._eventBus.fire("selection.changed",{oldSelection:o,newSelection:n})};var Yn="hover",Xn="selected";function Kn(e,t){function n(t,n){e.addMarker(t,n)}function o(t,n){e.removeMarker(t,n)}this._canvas=e,t.on("element.hover",function(e){n(e.element,Yn)}),t.on("element.out",function(e){o(e.element,Yn)}),t.on("selection.changed",function(e){var t=e.oldSelection,r=e.newSelection;S(t,function(e){-1===r.indexOf(e)&&function(e){o(e,Xn)}(e)}),S(r,function(e){-1===t.indexOf(e)&&function(e){n(e,Xn)}(e)})})}function Zn(e,t,n,o){e.on("create.end",500,function(e){var n=e.context,o=n.canExecute,r=n.elements,i=(n.hints||{}).autoSelect;if(o){if(!1===i)return;_(i)?t.select(i):t.select(r.filter(Qn))}}),e.on("connect.end",500,function(e){var n=e.context.connection;n&&t.select(n)}),e.on("shape.move.end",500,function(e){var n=e.previousSelection||[],r=o.get(e.context.shape.id);j(n,function(e){return r.id===e.id})||t.select(r)}),e.on("element.click",function(e){if(Hn(e)){var o=e.element;o===n.getRootElement()&&(o=null);var r=t.isSelected(o),i=t.get().length>1,s=Nn(e);if(r&&i)return s?t.deselect(o):t.select(o);r?t.deselect(o):t.select(o,s)}})}function Qn(e){return!e.hidden}Kn.$inject=["canvas","eventBus"],Zn.$inject=["eventBus","selection","canvas","elementRegistry"];const Jn={__init__:["selectionVisuals","selectionBehavior"],__depends__:[Gn],selection:["type",Un],selectionVisuals:["type",Kn],selectionBehavior:["type",Zn]};var eo=/^djs-cursor-.*$/;function to(e){var t=Ie(document.body);t.removeMatching(eo),e&&t.add("djs-cursor-"+e)}function no(){to(null)}function oo(e,t){function n(){return!1}return t=t||"element.click",e.once(t,5e3,n),function(){e.off(t,n)}}function ro(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function io(e,t){return{x:e.x-t.x,y:e.y-t.y}}var so=Math.round,ao="djs-drag-active";function co(e){e.preventDefault()}function lo(e,t,n,o){var r,i={threshold:5,trapClick:!0};function s(e){var n=t.viewbox(),o=t._container.getBoundingClientRect();return{x:n.x+(e.x-o.left)/n.scale,y:n.y+(e.y-o.top)/n.scale}}function a(t,n){n=n||r;var o=e.createEvent(W({},n.payload,n.data,{isTouch:n.isTouch}));return!1!==e.fire("drag."+t,o)&&e.fire(n.prefix+"."+t,o)}function c(e,o){var i,c=r.payload,l=r.displacement,u=r.globalStart,d=Rn(e),p=io(d,u),h=r.localStart,f=s(d),v=io(f,h);if(!r.active&&(o||(i=p,Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2))>r.threshold))){if(W(c,{x:so(h.x+l.x),y:so(h.y+l.y),dx:0,dy:0},{originalEvent:e}),!1===a("start"))return g();r.active=!0,r.keepSelection||(c.previousSelection=n.get(),n.select(null)),r.cursor&&to(r.cursor),t.addMarker(t.getRootElement(),ao)}$n(e),r.active&&(W(c,{x:so(f.x+l.x),y:so(f.y+l.y),dx:so(v.x),dy:so(v.y)},{originalEvent:e}),a("move"))}function l(e){var t=!0;r.active&&(e&&(r.payload.originalEvent=e,$n(e)),t=a("end")),!1===t&&a("rejected"),a("ended",v(!0!==t))}function u(e){(function(e,t){return-1!==(e=_(e)?e:[e]).indexOf(t.key)||-1!==e.indexOf(t.code)})("Escape",e)&&(co(e),g())}function d(t){var n;r.active&&(n=oo(e),setTimeout(n,400),co(t)),l(t)}function p(e){c(e)}function h(e){var t=r.payload;t.hoverGfx=e.gfx,t.hover=e.element,a("hover")}function f(e){a("out");var t=r.payload;t.hoverGfx=null,t.hover=null}function g(e){var t;if(r){var n=r.active;n&&a("cancel"),t=v(e),n&&a("canceled",t)}}function v(i){var s,v;a("cleanup"),no(),v=r.trapClick?d:l,Ke.unbind(document,"mousemove",c),Ke.unbind(document,"dragstart",co),Ke.unbind(document,"selectstart",co),Ke.unbind(document,"mousedown",v,!0),Ke.unbind(document,"mouseup",v,!0),Ke.unbind(document,"keyup",u),Ke.unbind(document,"touchstart",p,!0),Ke.unbind(document,"touchcancel",g,!0),Ke.unbind(document,"touchmove",c,!0),Ke.unbind(document,"touchend",l,!0),e.off("element.hover",h),e.off("element.out",f),t.removeMarker(t.getRootElement(),ao);var y=r.payload.previousSelection;return!1!==i&&y&&!n.get().length&&function(e){var t=e.filter(function(e){return o.get(e.id)});t.length&&n.select(t)}(y),s=r,r=null,s}e.on("diagram.destroy",g),this.init=function(t,n,o,v){r&&g(!1),"string"==typeof n&&(v=o,o=n,n=null);var y,m,A,x,_,E=(v=W({},i,v||{})).data||{};x=v.trapClick?d:l,t?(y=Pn(t)||t,m=Rn(t),$n(t),"dragstart"===y.type&&co(y)):(y=null,m={x:0,y:0}),A=s(m),n||(n=A),_=function(e){return"undefined"!=typeof TouchEvent&&e instanceof TouchEvent}(y),r=W({prefix:o,data:E,payload:{},globalStart:m,displacement:io(n,A),localStart:A,isTouch:_},v),v.manual||(_?(Ke.bind(document,"touchstart",p,!0),Ke.bind(document,"touchcancel",g,!0),Ke.bind(document,"touchmove",c,!0),Ke.bind(document,"touchend",l,!0)):(Ke.bind(document,"mousemove",c),Ke.bind(document,"dragstart",co),Ke.bind(document,"selectstart",co),Ke.bind(document,"mousedown",x,!0),Ke.bind(document,"mouseup",x,!0)),Ke.bind(document,"keyup",u),e.on("element.hover",h),e.on("element.out",f)),a("init"),v.autoActivate&&c(t,!0)},this.move=c,this.hover=h,this.out=f,this.end=l,this.cancel=g,this.context=function(){return r},this.setOptions=function(e){W(i,e)}}lo.$inject=["eventBus","canvas","selection","elementRegistry"];const uo={__depends__:[Fn,Jn],dragging:["type",lo]};function po(e){this._commandStack=e.get("commandStack",!1)}po.$inject=["injector"],po.prototype.allowed=function(e,t){var n=!0,o=this._commandStack;return o&&(n=o.canExecute(e,t)),void 0===n||n};const ho={__init__:["rules"],rules:["type",po]};var fo=Math.round,go=Math.max;function vo(e,t){var n=t[0],o=t[1],r={x:o.x-n.x,y:o.y-n.y},i=function(e,t,n){var o=[{n:e[0]-n[0],lambda:t[0]},{n:e[1]-n[1],lambda:t[1]}];return-(o[0].n*t[0]+o[1].n*t[1])/(o[0].lambda*t[0]+o[1].lambda*t[1])}([n.x,n.y],[r.x,r.y],[e.x,e.y]);return{x:n.x+i*r.x,y:n.y+i*r.y}}function yo(e,t){var n,o=vo(e,t);return n={x:o.x-e.x,y:o.y-e.y},Math.sqrt(Math.pow(n.x,2)+Math.pow(n.y,2))}var mo="djs-bendpoint",Ao="djs-segment-dragger";function xo(e,t,n){var o=function(e,t){var n,o=Rn(t),r=e._container.getBoundingClientRect();n={x:r.left,y:r.top};var i=e.viewbox();return{x:i.x+(o.x-n.x)/i.scale,y:i.y+(o.y-n.y)/i.scale}}(e,n);return function(e,t){return function(e,t){var n,o;for(n=0;o=e[n];n++)if(ut(o,t)<=10)return{point:e[n],bendpoint:!0,index:n};return null}(e,t)||function(e,t){var n,o,r=It(function(e,t){return[["M",e.x,e.y],["m",0,-t],["a",t,t,0,1,1,0,20],["a",t,t,0,1,1,0,-20],["z"]]}(t,10),(n=[],e.forEach(function(e,t){n.push([0===t?"M":"L",e.x,e.y])}),n)),i=r[0],s=r[r.length-1];return i?i!==s?i.segment2!==s.segment2?{point:e[o=go(i.segment2,s.segment2)-1],bendpoint:!0,index:o}:{point:{x:fo(i.x+s.x)/2,y:fo(i.y+s.y)/2},index:i.segment2}:{point:{x:fo(i.x),y:fo(i.y)},index:i.segment2}:null}(e,t)}(t,o)}function _o(e,t){var n=oe("g");Z(n).add(mo),G(e,n);var o=oe("circle");X(o,{cx:0,cy:0,r:4}),Z(o).add("djs-visual"),G(n,o);var r=oe("circle");return X(r,{cx:0,cy:0,r:10}),Z(r).add("djs-hit"),G(n,r),t&&Z(n).add(t),n}function Eo(e,t,n){var o=oe("g"),r=ft(t,n),i=pt(t,n);return G(e,o),function(e,t,n,o){var r=oe("g");G(e,r);var i=function(e,t,n){var o=t.x-e.x,r=t.y-e.y;return bo("h"===n?o:r)}(t,n,o),s=oe("rect");X(s,{x:-9,y:-3,width:18,height:6}),Z(s).add("djs-visual"),G(r,s);var a,c,l,u=oe("rect");X(u,{x:-i/2,y:-8.5,width:i,height:17}),Z(u).add("djs-hit"),G(r,u),a=r,c="v"===o?90:0,(l=ae()).setRotate(c,0,0),ue(a,l)}(o,t,n,i),Z(o).add(Ao),Z(o).add("h"===i?"horizontal":"vertical"),Bn(o,r.x,r.y),o}function bo(e){return Math.abs(Math.round(2*e/3))}function wo(e){return CSS.escape(e)}function Co(e,t,n,o,r){function i(e,t,o){Ke.bind(e,t,function(e){n.triggerMouseEvent(t,e,o),e.stopPropagation()})}function s(e,n){var o=t.getLayer("overlays"),r=rt('.djs-bendpoints[data-element-id="'+wo(e.id)+'"]',o);return!r&&n&&(X(r=oe("g"),{"data-element-id":e.id}),Z(r).add("djs-bendpoints"),G(o,r),i(r,"mousedown",e),i(r,"click",e),i(r,"dblclick",e)),r}function a(e,t){return rt('.djs-segment-dragger[data-segment-idx="'+e+'"]',t)}function c(e,t){t.waypoints.forEach(function(t,n){var o=_o(e);G(e,o),Bn(o,t.x,t.y)}),_o(e,"floating")}function l(e,t){for(var n,o,r,s=t.waypoints,a=1;a<s.length;a++)pt(n=s[a-1],o=s[a])&&(X(r=Eo(e,n,o),{"data-segment-idx":a}),i(r,"mousemove",t))}function u(e){var t=s(e);return t||(c(t=s(e,!0),e),l(t,e)),t}function d(e){var t=s(e);t&&(function(e){S(it("."+Ao,e),function(e){ce(e)})}(t),function(e){S(it("."+mo,e),function(e){ce(e)})}(t),l(t,e),c(t,e))}e.on("connection.changed",function(e){d(e.element)}),e.on("connection.remove",function(e){var t=s(e.element);t&&ce(t)}),e.on("element.marker.update",function(e){var t,n=e.element;n.waypoints&&(t=u(n),e.add?Z(t).add(e.marker):Z(t).remove(e.marker))}),e.on("element.mousemove",function(e){var n,o,r=e.element,i=r.waypoints;if(i){if(n=s(r,!0),!(o=xo(t,i,e.originalEvent)))return;!function(e,t){var n=rt(".floating",e),o=t.point;n&&Bn(n,o.x,o.y)}(n,o),o.bendpoint||function(e,t,n){var o,r,i=a(t.index,e),s=n[t.index-1],c=n[t.index],l=t.point,u=ft(s,c),d=pt(s,c);i&&(o=function(e){return rt(".djs-visual",e)}(i),r={x:l.x-u.x,y:l.y-u.y},"v"===d&&(r={x:r.y,y:r.x}),Bn(o,r.x,r.y))}(n,o,i)}}),e.on("element.mousedown",function(e){if(Hn(e)){var n=e.originalEvent,i=e.element;if(i.waypoints)return function(e,n){var i,s=n.waypoints,a=xo(t,s,e);if(a)return i=function(e,t){var n,o,r=e.waypoints;return t.index<=0||t.bendpoint?null:(o=pt((n={start:r[t.index-1],end:r[t.index]}).start,n.end))?bo("h"===o?n.end.x-n.start.x:n.end.y-n.start.y)/2:null}(n,a),function(e,t,n){var o,r,i,s,a,c,l=e.index,u=e.point;return!(l<=0||e.bendpoint)&&(i=ft(o=t[l-1],r=t[l]),s=pt(o,r),a=Math.abs(u.x-i.x),c=Math.abs(u.y-i.y),s&&a<=n&&c<=n)}(a,s,i)?r.start(e,n,a.index):o.start(e,n,a.index,!a.bendpoint),!0}(n,i)}}),e.on("selection.changed",function(e){var t=e.newSelection[0];t&&t.waypoints&&u(t)}),e.on("element.hover",function(e){var t=e.element;t.waypoints&&(u(t),n.registerEvent(e.gfx,"mousemove","element.mousemove"))}),e.on("element.out",function(e){n.unregisterEvent(e.gfx,"mousemove","element.mousemove")}),e.on("element.updateId",function(e){var t=e.element,n=e.newId;if(t.waypoints){var o=s(t);o&&X(o,{"data-element-id":n})}}),this.addHandles=u,this.updateHandles=d,this.getBendpointsContainer=s,this.getSegmentDragger=a}Co.$inject=["eventBus","canvas","interactionEvents","bendpointMove","connectionSegmentMove"];var ko=Math.round,jo="reconnectStart",Bo="reconnectEnd",So="updateWaypoints";function Do(e,t,n,o,r,i){this._injector=e,this.start=function(e,t,i,s){var a,c=n.getGraphics(t),l=t.source,u=t.target,d=t.waypoints,p=(a=s||0!==i?s||i!==d.length-1?So:Bo:jo)===So?"connection.updateWaypoints":"connection.reconnect",h=r.allowed(p,{connection:t,source:l,target:u});!1===h&&(h=r.allowed(p,{connection:t,source:u,target:l})),!1!==h&&o.init(e,"bendpoint.move",{data:{connection:t,connectionGfx:c,context:{allowed:h,bendpointIndex:i,connection:t,source:l,target:u,insert:s,type:a}}})},t.on("bendpoint.move.hover",function(e){var t,n=e.context,o=n.connection,i=o.source,s=o.target,a=e.hover,c=n.type;if(n.hover=a,a){var l=c===So?"connection.updateWaypoints":"connection.reconnect";if(t=n.allowed=r.allowed(l,{connection:o,source:c===jo?a:i,target:c===Bo?a:s}))return n.source=c===jo?a:i,void(n.target=c===Bo?a:s);!1===t&&(t=n.allowed=r.allowed(l,{connection:o,source:c===Bo?a:s,target:c===jo?a:i})),t&&(n.source=c===Bo?a:s,n.target=c===jo?a:i)}}),t.on(["bendpoint.move.out","bendpoint.move.cleanup"],function(e){var t=e.context,n=t.type;t.hover=null,t.source=null,t.target=null,n!==So&&(t.allowed=!1)}),t.on("bendpoint.move.end",function(e){var t=e.context,n=t.allowed,o=t.bendpointIndex,r=t.connection,s=t.insert,a=r.waypoints.slice(),c=t.source,l=t.target,u=t.type,d=t.hints||{},p={x:ko(e.x),y:ko(e.y)};if(!n)return!1;u===So?(s?a.splice(o,0,p):a[o]=p,d.bendpointMove={insert:s,bendpointIndex:o},a=this.cropWaypoints(r,a),i.updateWaypoints(r,function(e){e=e.slice();for(var t,n,o,r=0;e[r];)t=e[r],n=e[r-1],0===ut(t,o=e[r+1])||dt(n,o,t)?e.splice(r,1):r++;return e}(a),d)):(u===jo?(d.docking="source",Mo(t)&&(d.docking="target",d.newWaypoints=a.reverse())):u===Bo&&(d.docking="target",Mo(t)&&(d.docking="source",d.newWaypoints=a.reverse())),i.reconnect(r,c,l,p,d))},this)}function Mo(e){var t=e.hover,n=e.source,o=e.target,r=e.type;return r===jo?t&&o&&t===o&&n!==o:r===Bo?t&&n&&t===n&&n!==o:void 0}Do.$inject=["injector","eventBus","canvas","dragging","rules","modeling"],Do.prototype.cropWaypoints=function(e,t){var n=this._injector.get("connectionDocking",!1);if(!n)return t;var o=e.waypoints;return e.waypoints=t,e.waypoints=n.getCroppedWaypoints(e),t=e.waypoints,e.waypoints=o,t};var zo="updateWaypoints",Oo="connect-ok",Po="connect-not-ok",$o="connect-hover",Ro="djs-updating",To="djs-dragging";function Fo(e,t,n,o){this._injector=t;var r=t.get("connectionPreview",!1);n.on("bendpoint.move.start",function(e){var t=e.context,n=t.bendpointIndex,r=t.connection,i=t.insert,s=r.waypoints,a=s.slice();t.waypoints=s,i&&a.splice(n,0,{x:e.x,y:e.y}),r.waypoints=a,Z(t.draggerGfx=_o(o.getLayer("overlays"))).add("djs-dragging"),o.addMarker(r,To),o.addMarker(r,Ro)}),n.on("bendpoint.move.hover",function(e){var t=e.context,n=t.allowed,r=t.hover,i=t.type;if(r){if(o.addMarker(r,$o),i===zo)return;n?(o.removeMarker(r,Po),o.addMarker(r,Oo)):!1===n&&(o.removeMarker(r,Oo),o.addMarker(r,Po))}}),n.on(["bendpoint.move.out","bendpoint.move.cleanup"],1100,function(e){var t=e.context,n=t.hover,r=t.target;n&&(o.removeMarker(n,$o),o.removeMarker(n,r?Oo:Po))}),n.on("bendpoint.move.move",function(t){var n=t.context,o=n.allowed,i=n.bendpointIndex,s=n.draggerGfx,a=n.hover,c=n.type,l=n.connection,u=l.source,d=l.target,p=l.waypoints.slice(),h={x:t.x,y:t.y},f=n.hints||{},g={};r&&(f.connectionStart&&(g.connectionStart=f.connectionStart),f.connectionEnd&&(g.connectionEnd=f.connectionEnd),"reconnectStart"===c?Mo(n)?(g.connectionEnd=g.connectionEnd||h,g.source=d,g.target=a||u,p=p.reverse()):(g.connectionStart=g.connectionStart||h,g.source=a||u,g.target=d):"reconnectEnd"===c?Mo(n)?(g.connectionStart=g.connectionStart||h,g.source=a||d,g.target=u,p=p.reverse()):(g.connectionEnd=g.connectionEnd||h,g.source=u,g.target=a||d):(g.noCropping=!0,g.noLayout=!0,p[i]=h),c===zo&&(p=e.cropWaypoints(l,p)),g.waypoints=p,r.drawPreview(n,o,g)),Bn(s,t.x,t.y)},this),n.on(["bendpoint.move.end","bendpoint.move.cancel"],1100,function(e){var t=e.context,n=t.connection,i=t.draggerGfx,s=t.hover,a=t.target,c=t.waypoints;n.waypoints=c,ce(i),o.removeMarker(n,Ro),o.removeMarker(n,To),s&&(o.removeMarker(s,Oo),o.removeMarker(s,a?Oo:Po)),r&&r.cleanUp(t)})}Fo.$inject=["bendpointMove","injector","eventBus","canvas"];var Lo="connect-hover",Io="djs-updating";function Ho(e,t,n){return No(e,t,e[t]+n)}function No(e,t,n){return{x:"x"===t?n:e.x,y:"y"===t?n:e.y}}function Wo(e){return"x"===e?"y":"x"}function qo(e,t,n){var o,r;return e.original?e.original:(o=Qt(t),No(e,r=Wo(n),o[r]))}function Vo(e,t,n,o,r,i){var s=e.get("connectionDocking",!1);function a(e,t){if(!s)return t;var n,o=e.waypoints;return e.waypoints=t,n=s.getCroppedWaypoints(e),e.waypoints=o,n}function c(e){r.update("connection",e.connection,e.connectionGfx)}this.start=function(e,t,r){var i,s,a,c,l=n.getGraphics(t),u=r-1,d=r,p=t.waypoints,h=p[u],f=p[d],g=xo(n,p,e);(s=pt(h,f))&&(a="v"===s?"x":"y",0===u&&(h=qo(h,t.source,a)),d===p.length-1&&(f=qo(f,t.target,a)),i={connection:t,segmentStartIndex:u,segmentEndIndex:d,segmentStart:h,segmentEnd:f,axis:a,dragPosition:c=g?g.point:{x:(h.x+f.x)/2,y:(h.y+f.y)/2}},o.init(e,c,"connectionSegment.move",{cursor:"x"===a?"resize-ew":"resize-ns",data:{connection:t,connectionGfx:l,context:i}}))},t.on("connectionSegment.move.start",function(e){var t=e.context,o=e.connection,r=n.getLayer("overlays");t.originalWaypoints=o.waypoints.slice(),t.draggerGfx=Eo(r,t.segmentStart,t.segmentEnd),Z(t.draggerGfx).add("djs-dragging"),n.addMarker(o,Io)}),t.on("connectionSegment.move.move",function(e){var t,n,o=e.context,r=o.connection,i=o.segmentStartIndex,s=o.segmentEndIndex,l=o.segmentStart,u=o.segmentEnd,d=o.axis,p=o.originalWaypoints.slice(),h=Ho(l,d,e["d"+d]),f=Ho(u,d,e["d"+d]),g=p.length,v=0;p[i]=h,p[s]=f,i<2&&(t=Jt(r.source,h),1===i?"intersect"===t&&(p.shift(),p[0]=h,v--):"intersect"!==t&&(p.unshift(l),v++)),s>g-3&&(n=Jt(r.target,f),s===g-2?"intersect"===n&&(p.pop(),p[p.length-1]=f):"intersect"!==n&&p.push(u)),o.newWaypoints=r.waypoints=a(r,p),function(e,t,n){var o,r,i,s,a,c,l=e.newWaypoints,u=(o=n,r=l[e.segmentStartIndex+t],i=l[e.segmentEndIndex+t],s=Wo(e.axis),a=Math.max(r[s],i[s]),c=Math.min(r[s],i[s]),No(r,s,Math.min(Math.max(c+20,o[s]),a-20)));Bn(e.draggerGfx,u.x,u.y)}(o,v,e),o.newSegmentStartIndex=i+v,c(e)}),t.on("connectionSegment.move.hover",function(e){e.context.hover=e.hover,n.addMarker(e.hover,Lo)}),t.on(["connectionSegment.move.out","connectionSegment.move.cleanup"],function(e){var t=e.context.hover;t&&n.removeMarker(t,Lo)}),t.on("connectionSegment.move.cleanup",function(e){var t=e.context,o=t.connection;t.draggerGfx&&ce(t.draggerGfx),n.removeMarker(o,Io)}),t.on(["connectionSegment.move.cancel","connectionSegment.move.end"],function(e){var t=e.context;t.connection.waypoints=t.originalWaypoints,c(e)}),t.on("connectionSegment.move.end",function(e){var t=e.context,n=t.connection,o=t.newWaypoints,r=t.newSegmentStartIndex;o=o.map(function(e){return{original:e.original,x:Math.round(e.x),y:Math.round(e.y)}});var s=function(e,t){var n=0,o=e.filter(function(o,r){return!dt(e[r-1],e[r+1],o)||(n=r<=t?n-1:n,!1)});return{waypoints:o,segmentOffset:n}}(o,r),c=a(n,s.waypoints),l=s.segmentOffset,u={segmentMove:{segmentStartIndex:t.segmentStartIndex,newSegmentStartIndex:r+l}};i.updateWaypoints(n,c,u)})}function Go(e,t,n){if("string"!=typeof t)throw new Error("axis must be in [x, y]");if("number"!=typeof n&&!1!==n)throw new Error("value must be Number or false");var o,r=e[t],i=e.snapped=e.snapped||{};return!1===n?i[t]=!1:(i[t]=!0,o=n-r,e[t]+=o,e["d"+t]+=o),r}Vo.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","modeling"],Math.abs,Math.round;var Uo=Math.abs,Yo=Math.round;function Xo(e){function t(e,t){if(_(e)){for(var n=e.length;n--;)if(Uo(e[n]-t)<=10)return e[n]}else{var o=t%(e=+e);if(o<10)return t-o;if(o>e-10)return t-o+e}return t}function n(e,t){return e.waypoints?(o=function(e,t){for(var n,o=t.waypoints,r=1/0,i=0;i<o.length-1;i++){var s=yo(e,[o[i],o[i+1]]);s<r&&(r=s,n=i)}return[o[n],o[n+1]]}(n=t,e),vo(n,o)):e.width?{x:Yo(e.width/2+e.x),y:Yo(e.height/2+e.y)}:void 0;var n,o}e.on("connectionSegment.move.move",1500,function(e){var o,r,i=function(e){var t=e.context,o=t.snapPoints,r=t.connection,i=r.waypoints,s=t.segmentStart,a=t.segmentStartIndex,c=t.segmentEnd,l=t.segmentEndIndex,u=t.axis;if(o)return o;var d=[i[a-1],s,c,i[l+1]];return a<2&&d.unshift(n(r.source,e)),l>i.length-3&&d.unshift(n(r.target,e)),t.snapPoints=o={horizontal:[],vertical:[]},S(d,function(e){e&&(e=e.original||e,"y"===u&&o.horizontal.push(e.y),"x"===u&&o.vertical.push(e.x))}),o}(e),s=e.x,a=e.y;if(i){var c=s-(o=t(i.vertical,s)),l=a-(r=t(i.horizontal,a));W(e,{dx:e.dx-c,dy:e.dy-l,x:o,y:r}),(c||-1!==i.vertical.indexOf(s))&&Go(e,"x",o),(l||-1!==i.horizontal.indexOf(a))&&Go(e,"y",r)}}),e.on(["connect.hover","connect.move","connect.end"],1500,function(e){var t=e.context.hover,o=t&&n(t,e);Ut(t)&&o&&o.x&&o.y&&(Go(e,"x",o.x),Go(e,"y",o.y))}),e.on(["bendpoint.move.move","bendpoint.move.end"],1500,function(e){var o,r,i=e.context,s=function(e){var t=e.snapPoints,n=e.connection.waypoints,o=e.bendpointIndex;if(t)return t;var r=[n[o-1],n[o+1]];return e.snapPoints=t={horizontal:[],vertical:[]},S(r,function(e){e&&(e=e.original||e,t.horizontal.push(e.y),t.vertical.push(e.x))}),t}(i),a=i.hover,c=a&&n(a,e),l=e.x,u=e.y;if(s){var d=l-(o=t(c?s.vertical.concat([c.x]):s.vertical,l)),p=u-(r=t(c?s.horizontal.concat([c.y]):s.horizontal,u));W(e,{dx:e.dx-d,dy:e.dy-p,x:e.x-d,y:e.y-p}),(d||-1!==s.vertical.indexOf(l))&&Go(e,"x",o),(p||-1!==s.horizontal.indexOf(u))&&Go(e,"y",r)}})}Xo.$inject=["eventBus"];const Ko={__depends__:[uo,ho],__init__:["bendpoints","bendpointSnapping","bendpointMovePreview"],bendpoints:["type",Co],bendpointMove:["type",Do],bendpointMovePreview:["type",Fo],connectionSegmentMove:["type",Vo],bendpointSnapping:["type",Xo]};function Zo(e,t,n,o){function r(e,t){return o.allowed("connection.create",{source:e,target:t})}e.on("connect.hover",function(e){var t,n=e.context,o=n.start,i=e.hover;if(n.hover=i,!x(t=n.canExecute=r(o,i))){if(!1!==t)return n.source=o,void(n.target=i);x(t=n.canExecute=r(i,o))||!1!==t&&(n.source=i,n.target=o)}}),e.on(["connect.out","connect.cleanup"],function(e){var t=e.context;t.hover=null,t.source=null,t.target=null,t.canExecute=!1}),e.on("connect.end",function(e){var t=e.context,o=t.canExecute,r=t.connectionStart,i={x:e.x,y:e.y},s=t.source,a=t.target;if(!o)return!1;var c=null,l={connectionStart:Qo(t)?i:r,connectionEnd:Qo(t)?r:i};E(o)&&(c=o),t.connection=n.connect(s,a,c,l)}),this.start=function(e,n,o,r){E(o)||(r=o,o=Qt(n)),t.init(e,"connect",{autoActivate:r,data:{shape:n,context:{start:n,connectionStart:o}}})}}function Qo(e){var t=e.hover,n=e.source,o=e.target;return t&&n&&t===n&&n!==o}Zo.$inject=["eventBus","dragging","modeling","rules"];var Jo="connect-ok",er="connect-not-ok";function tr(e,t,n){var o=e.get("connectionPreview",!1);o&&t.on("connect.move",function(e){var t=e.context,n=t.canExecute,r=t.hover,i=t.source,s=t.start,a=t.startPosition,c=t.target,l=t.connectionStart||a,u=t.connectionEnd||{x:e.x,y:e.y},d=l,p=u;Qo(t)&&(d=u,p=l),o.drawPreview(t,n,{source:i||s,target:c||r,connectionStart:d,connectionEnd:p})}),t.on("connect.hover",900,function(e){var t=e.context,o=e.hover,r=t.canExecute;null!==r&&n.addMarker(o,r?Jo:er)}),t.on(["connect.out","connect.cleanup"],1100,function(e){var t=e.hover;t&&(n.removeMarker(t,Jo),n.removeMarker(t,er))}),o&&t.on("connect.cleanup",function(e){o.cleanUp(e.context)})}tr.$inject=["injector","eventBus","canvas"];const nr={__depends__:[Jn,ho,uo],__init__:["connectPreview"],connect:["type",Zo],connectPreview:["type",tr]};function or(e){this._counter=0,this._prefix=(e?e+"-":"")+Math.floor(1e9*Math.random())+"-"}or.prototype.next=function(){return this._prefix+ ++this._counter};var rr=new or("ov");function ir(e,t,n,o){var r,i;this._eventBus=t,this._canvas=n,this._elementRegistry=o,this._ids=rr,this._overlayDefaults=W({show:null,scale:!0},e&&e.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=(r=n.getContainer(),Te(i=nt('<div class="djs-overlay-container" />'),{position:"absolute",width:0,height:0}),r.insertBefore(i,r.firstChild),i),this._init()}function sr(e,t,n){Te(e,{left:t+"px",top:n+"px"})}function ar(e,t){e.style.display=!1===t?"none":""}function cr(e,t){e.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(n){e.style[n+"transform"]=t})}ir.$inject=["config.overlays","eventBus","canvas","elementRegistry"],ir.prototype.get=function(e){if(C(e)&&(e={id:e}),C(e.element)&&(e.element=this._elementRegistry.get(e.element)),e.element){var t=this._getOverlayContainer(e.element,!0);return t?e.type?B(t.overlays,T({type:e.type})):t.overlays.slice():[]}return e.type?B(this._overlays,T({type:e.type})):e.id?this._overlays[e.id]:null},ir.prototype.add=function(e,t,n){if(E(t)&&(n=t,t=null),e.id||(e=this._elementRegistry.get(e)),!n.position)throw new Error("must specifiy overlay position");if(!n.html)throw new Error("must specifiy overlay html");if(!e)throw new Error("invalid element specified");var o=this._ids.next();return n=W({},this._overlayDefaults,n,{id:o,type:t,element:e,html:n.html}),this._addOverlay(n),o},ir.prototype.remove=function(e){var t=this.get(e)||[];_(t)||(t=[t]);var n=this;S(t,function(e){var t=n._getOverlayContainer(e.element,!0);if(e&&(st(e.html),st(e.htmlContainer),delete e.htmlContainer,delete e.element,delete n._overlays[e.id]),t){var o=t.overlays.indexOf(e);-1!==o&&t.overlays.splice(o,1)}})},ir.prototype.isShown=function(){return"none"!==this._overlayRoot.style.display},ir.prototype.show=function(){ar(this._overlayRoot)},ir.prototype.hide=function(){ar(this._overlayRoot,!1)},ir.prototype.clear=function(){this._overlays={},this._overlayContainers=[],Ne(this._overlayRoot)},ir.prototype._updateOverlayContainer=function(e){var t=e.element,n=e.html,o=t.x,r=t.y;if(t.waypoints){var i=we(t);o=i.x,r=i.y}sr(n,o,r),Fe(e.html,"data-container-id",t.id)},ir.prototype._updateOverlay=function(e){var t,n,o=e.position,r=e.htmlContainer,i=e.element,s=o.left,a=o.top;void 0!==o.right&&(t=i.waypoints?we(i).width:i.width,s=-1*o.right+t),void 0!==o.bottom&&(n=i.waypoints?we(i).height:i.height,a=-1*o.bottom+n),sr(r,s||0,a||0),this._updateOverlayVisibilty(e,this._canvas.viewbox())},ir.prototype._createOverlayContainer=function(e){var t=nt('<div class="djs-overlays" />');Te(t,{position:"absolute"}),this._overlayRoot.appendChild(t);var n={html:t,element:e,overlays:[]};return this._updateOverlayContainer(n),this._overlayContainers.push(n),n},ir.prototype._updateRoot=function(e){var t=e.scale||1,n="matrix("+[t,0,0,t,-1*e.x*t,-1*e.y*t].join(",")+")";cr(this._overlayRoot,n)},ir.prototype._getOverlayContainer=function(e,t){var n=j(this._overlayContainers,function(t){return t.element===e});return n||t?n:this._createOverlayContainer(e)},ir.prototype._addOverlay=function(e){var t,n,o=e.id,r=e.element,i=e.html;i.get&&i.constructor.prototype.jquery&&(i=i.get(0)),C(i)&&(i=nt(i)),n=this._getOverlayContainer(r),Te(t=nt('<div class="djs-overlay" data-overlay-id="'+o+'">'),{position:"absolute"}),t.appendChild(i),e.type&&Ie(t).add("djs-overlay-"+e.type),ar(t,this._canvas.findRoot(r)===this._canvas.getRootElement()),e.htmlContainer=t,n.overlays.push(e),n.html.appendChild(t),this._overlays[o]=e,this._updateOverlay(e),this._updateOverlayVisibilty(e,this._canvas.viewbox())},ir.prototype._updateOverlayVisibilty=function(e,t){var n=e.show,o=this._canvas.findRoot(e.element),r=n&&n.minZoom,i=n&&n.maxZoom,s=e.htmlContainer,a=!0;(o!==this._canvas.getRootElement()||n&&(A(r)&&r>t.scale||A(i)&&i<t.scale))&&(a=!1),ar(s,a),this._updateOverlayScale(e,t)},ir.prototype._updateOverlayScale=function(e,t){var n,o,r,i=e.scale,s=e.htmlContainer,a="";!0!==i&&(!1===i?(n=1,o=1):(n=i.min,o=i.max),A(n)&&t.scale<n&&(r=(1/t.scale||1)*n),A(o)&&t.scale>o&&(r=(1/t.scale||1)*o)),A(r)&&(a="scale("+r+","+r+")"),cr(s,a)},ir.prototype._updateOverlaysVisibilty=function(e){var t=this;S(this._overlays,function(n){t._updateOverlayVisibilty(n,e)})},ir.prototype._init=function(){var e=this._eventBus,t=this;e.on("canvas.viewbox.changing",function(e){t.hide()}),e.on("canvas.viewbox.changed",function(e){var n;n=e.viewbox,t._updateRoot(n),t._updateOverlaysVisibilty(n),t.show()}),e.on(["shape.remove","connection.remove"],function(e){var n=e.element;S(t.get({element:n}),function(e){t.remove(e.id)});var o=t._getOverlayContainer(n);if(o){st(o.html);var r=t._overlayContainers.indexOf(o);-1!==r&&t._overlayContainers.splice(r,1)}}),e.on("element.changed",500,function(e){var n=e.element,o=t._getOverlayContainer(n,!0);o&&(S(o.overlays,function(e){t._updateOverlay(e)}),t._updateOverlayContainer(o))}),e.on("element.marker.update",function(e){var n=t._getOverlayContainer(e.element,!0);n&&Ie(n.html)[e.add?"add":"remove"](e.marker)}),e.on("root.set",function(){t._updateOverlaysVisibilty(t._canvas.viewbox())}),e.on("diagram.clear",this.clear,this)};const lr={__init__:["overlays"],overlays:["type",ir]},ur=new or;function dr(e){this._scheduled={},e.on("diagram.destroy",()=>{Object.keys(this._scheduled).forEach(e=>{this.cancel(e)})})}dr.$inject=["eventBus"],dr.prototype.schedule=function(e,t=ur.next()){this.cancel(t);const n=this._schedule(e,t);return this._scheduled[t]=n,n.promise},dr.prototype._schedule=function(e,t){const n=function(){const e={};return e.promise=new Promise((t,n)=>{e.resolve=t,e.reject=n}),e}();return{executionId:setTimeout(()=>{try{this._scheduled[t]=null;try{n.resolve(e())}catch(e){n.reject(e)}}catch(e){console.error("Scheduler#_schedule execution failed",e)}}),promise:n.promise}},dr.prototype.cancel=function(e){const t=this._scheduled[e];t&&(this._cancel(t),this._scheduled[e]=null)},dr.prototype._cancel=function(e){clearTimeout(e.executionId)};const pr={scheduler:["type",dr]};var hr=".entry";function fr(e,t,n,o){this._canvas=e,this._elementRegistry=t,this._eventBus=n,this._scheduler=o,this._current=null,this._init()}fr.$inject=["canvas","elementRegistry","eventBus","scheduler"],fr.prototype._init=function(){var e=this;this._eventBus.on("selection.changed",function(t){var n=t.newSelection,o=n.length?1===n.length?n[0]:n:null;o?e.open(o,!0):e.close()}),this._eventBus.on("elements.changed",function(t){var n=t.elements,o=e._current;if(o){var r=o.target,i=_(r)?r:[r];if(i.filter(function(e){return n.includes(e)}).length){e.close();var s=i.filter(function(t){return e._elementRegistry.get(t.id)});s.length&&e._updateAndOpen(s.length>1?s:s[0])}}}),this._eventBus.on("canvas.viewbox.changed",function(){e._updatePosition()}),this._eventBus.on("element.marker.update",function(t){if(e.isOpen()){var n=t.element,o=e._current;(_(o.target)?o.target:[o.target]).includes(n)&&e._updateVisibility()}}),this._container=this._createContainer()},fr.prototype._createContainer=function(){var e=nt('<div class="djs-context-pad-parent"></div>');return this._canvas.getContainer().appendChild(e),e},fr.prototype.registerProvider=function(e,t){t||(t=e,e=1e3),this._eventBus.on("contextPad.getProviders",e,function(e){e.providers.push(t)})},fr.prototype.getEntries=function(e){var t=this._getProviders(),n=_(e)?"getMultiElementContextPadEntries":"getContextPadEntries",o={};return S(t,function(t){if(w(t[n])){var r=t[n](e);w(r)?o=r(o):S(r,function(e,t){o[t]=e})}}),o},fr.prototype.trigger=function(e,t,n){var o,r,i=this,s=t.delegateTarget||t.target;return s?(o=Fe(s,"data-action"),r=t.originalEvent||t,"mouseover"!==e?"mouseout"===e?(clearTimeout(this._timeout),void(this._mouseout&&(this._mouseout(),this._mouseout=null))):this.triggerEntry(o,e,r,n):void(this._timeout=setTimeout(function(){i._mouseout=i.triggerEntry(o,"hover",r,n)},300))):t.preventDefault()},fr.prototype.triggerEntry=function(e,t,n,o){if(this.isShown()){var r=this._current.target,i=this._current.entries[e];if(i){var s=i.action;if(!1!==this._eventBus.fire("contextPad.trigger",{entry:i,event:n})){if(w(s)){if("click"===t)return s(n,r,o)}else if(s[t])return s[t](n,r,o);n.preventDefault()}}}},fr.prototype.open=function(e,t){!t&&this.isOpen(e)||(this.close(),this._updateAndOpen(e))},fr.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"contextPad.getProviders",providers:[]});return this._eventBus.fire(e),e.providers},fr.prototype._updateAndOpen=function(e){var t,n=this.getEntries(e),o=this._createHtml(e);S(n,function(e,n){var r,i=e.group||"default",s=nt(e.html||'<div class="entry" draggable="true"></div>');Fe(s,"data-action",n),(r=rt("[data-group="+wo(i)+"]",o))||(Fe(r=nt('<div class="group"></div>'),"data-group",i),o.appendChild(r)),r.appendChild(s),e.className&&function(e,t){var n=Ie(e);(t=_(t)?t:t.split(/\s+/g)).forEach(function(e){n.add(e)})}(s,e.className),e.title&&Fe(s,"title",e.title),e.imageUrl&&(Fe(t=nt("<img>"),"src",e.imageUrl),t.style.width="100%",t.style.height="100%",s.appendChild(t))}),Ie(o).add("open"),this._current={entries:n,html:o,target:e},this._updatePosition(),this._updateVisibility(),this._eventBus.fire("contextPad.open",{current:this._current})},fr.prototype._createHtml=function(e){var t=this,n=nt('<div class="djs-context-pad"></div>');return Qe(n,hr,"click",function(e){t.trigger("click",e)}),Qe(n,hr,"dragstart",function(e){t.trigger("dragstart",e)}),Qe(n,hr,"mouseover",function(e){t.trigger("mouseover",e)}),Qe(n,hr,"mouseout",function(e){t.trigger("mouseout",e)}),Ke.bind(n,"mousedown",function(e){e.stopPropagation()}),this._container.appendChild(n),this._eventBus.fire("contextPad.create",{target:e,pad:n}),n},fr.prototype.getPad=function(e){let t;return console.warn(new Error("ContextPad#getPad is deprecated and will be removed in future library versions, cf. https://github.com/bpmn-io/diagram-js/pull/888")),t=this.isOpen()&&function(e,t){return e=_(e)?e:[e],t=_(t)?t:[t],e.length===t.length&&M(e,function(e){return t.includes(e)})}(this._current.target,e)?this._current.html:this._createHtml(e),{html:t}},fr.prototype.close=function(){this.isOpen()&&(clearTimeout(this._timeout),this._container.innerHTML="",this._eventBus.fire("contextPad.close",{current:this._current}),this._current=null)},fr.prototype.isOpen=function(e){var t=this._current;if(!t)return!1;if(!e)return!0;var n=t.target;return _(e)===_(n)&&(_(e)?e.length===n.length&&M(e,function(e){return n.includes(e)}):n===e)},fr.prototype.isShown=function(){return this.isOpen()&&Ie(this._current.html).has("open")},fr.prototype.show=function(){this.isOpen()&&(Ie(this._current.html).add("open"),this._updatePosition(),this._eventBus.fire("contextPad.show",{current:this._current}))},fr.prototype.hide=function(){this.isOpen()&&(Ie(this._current.html).remove("open"),this._eventBus.fire("contextPad.hide",{current:this._current}))},fr.prototype._getPosition=function(e){if(!_(e)&&Ut(e)){var t=this._canvas.viewbox(),n=(i=e).waypoints[i.waypoints.length-1],o=n.x*t.scale-t.x*t.scale,r=n.y*t.scale-t.y*t.scale;return{left:o+8*this._canvas.zoom(),top:r}}var i,s=this._canvas.getContainer().getBoundingClientRect(),a=this._getTargetBounds(e);return{left:a.right-s.left+8*this._canvas.zoom(),top:a.top-s.top}},fr.prototype._updatePosition=function(){this._scheduler.schedule(()=>{if(this.isOpen()){var e=this._current.html,t=this._getPosition(this._current.target);"x"in t&&"y"in t?(e.style.left=t.x+"px",e.style.top=t.y+"px"):["top","right","bottom","left"].forEach(function(n){n in t&&(e.style[n]=t[n]+"px")})}},"ContextPad#_updatePosition")},fr.prototype._updateVisibility=function(){this._scheduler.schedule(()=>{if(this.isOpen()){var e=this,t=this._current.target;(_(t)?t:[t]).some(function(t){return e._canvas.hasMarker(t,"djs-element-hidden")})?e.hide():e.show()}},"ContextPad#_updateVisibility")},fr.prototype._getTargetBounds=function(e){var t=this;return(_(e)?e:[e]).map(function(e){return t._canvas.getGraphics(e)}).reduce(function(e,t){const n=t.getBoundingClientRect();return e.top=Math.min(e.top,n.top),e.right=Math.max(e.right,n.right),e.bottom=Math.max(e.bottom,n.bottom),e.left=Math.min(e.left,n.left),e.x=e.left,e.y=e.top,e.width=e.right-e.left,e.height=e.bottom-e.top,e},{top:1/0,right:-1/0,bottom:-1/0,left:1/0})};const gr={__depends__:[Gn,pr,lr],contextPad:["type",fr]},vr=new or("ps");var yr=["marker-start","marker-mid","marker-end"],mr=["circle","ellipse","line","path","polygon","polyline","path","rect"];function Ar(e,t,n,o){this._elementRegistry=e,this._canvas=n,this._styles=o}Ar.$inject=["elementRegistry","eventBus","canvas","styles"],Ar.prototype.cleanUp=function(){console.warn("PreviewSupport#cleanUp is deprecated and will be removed in future versions. You do not need to manually clean up previews anymore. cf. https://github.com/bpmn-io/diagram-js/pull/906")},Ar.prototype.getGfx=function(e){return this._elementRegistry.getGraphics(e)},Ar.prototype.addDragger=function(e,t,n,o="djs-dragger"){var r=ee(n=n||this.getGfx(e)),i=n.getBoundingClientRect();return this._cloneMarkers(jn(r),o),X(r,this._styles.cls(o,[],{x:i.top,y:i.left})),G(t,r),X(r,"data-preview-support-element-id",e.id),r},Ar.prototype.addFrame=function(e,t){var n=oe("rect",{class:"djs-resize-overlay",width:e.width,height:e.height,x:e.x,y:e.y});return G(t,n),X(n,"data-preview-support-element-id",e.id),n},Ar.prototype._cloneMarkers=function(e,t="djs-dragger",n=e){var o=this;e.childNodes&&e.childNodes.forEach(e=>{o._cloneMarkers(e,t,n)}),function(e){return-1!==mr.indexOf(e.nodeName)}(e)&&yr.forEach(function(r){if(X(e,r)){var i=function(e,t,n){return rt("marker#"+X(e,t).match(/url\(['"]?#([^'"]*)['"]?\)/)[1],n||document)}(e,r,o._canvas.getContainer());i&&o._cloneMarker(n,e,i,r,t)}})},Ar.prototype._cloneMarker=function(e,t,n,o,r="djs-dragger"){var i=[n.id,r,vr.next()].join("-"),s=rt("marker#"+n.id,e);e=e||this._canvas._svg;var a=s||ee(n);a.id=i,Z(a).add(r);var c=rt(":scope > defs",e);c||G(e,c=oe("defs")),G(c,a),X(t,o,"url(#"+a.id+")")};const xr={__init__:["previewSupport"],previewSupport:["type",Ar]};var _r="drop-ok",Er="drop-not-ok",br="attach-ok",wr="new-parent",Cr="create";function kr(e,t,n,o,r){function i(t,n){[br,_r,Er,wr].forEach(function(o){o===n?e.addMarker(t,o):e.removeMarker(t,o)})}function s(){var e=t.context();e&&e.prefix===Cr&&t.cancel()}n.on(["create.move","create.hover"],function(e){var t=e.context,n=t.elements,o=e.hover,s=t.source,a=t.hints||{};if(!o)return t.canExecute=!1,void(t.target=null);jr(e);var c={x:e.x,y:e.y},l=t.canExecute=o&&function(e,t,n,o,i){if(!t)return!1;var s=j(e=B(e,function(t){var n=t.labelTarget;return!(t.parent||Yt(t)&&-1!==e.indexOf(n))}),function(e){return!Ut(e)}),a=!1,c=!1,l=!1;Br(e)&&(a=r.allowed("shape.attach",{position:n,shape:s,target:t})),a||(l=Br(e)?r.allowed("shape.create",{position:n,shape:s,source:o,target:t}):r.allowed("elements.create",{elements:e,position:n,target:t}));var u=i.connectionTarget;return l||a?(s&&o&&(c=r.allowed("connection.create",{source:u===o?s:o,target:u===o?o:s,hints:{targetParent:t,targetAttach:a}})),{attach:a,connect:c}):(null===l||null===a)&&null}(n,o,c,s,a);o&&null!==l&&(t.target=o,l&&l.attach?i(o,br):i(o,l?wr:Er))}),n.on(["create.end","create.out","create.cleanup"],function(e){var t=e.hover;t&&i(t,null)}),n.on("create.end",function(e){var t=e.context,n=t.source,r=t.shape,i=t.elements,s=t.target,a=t.canExecute,c=a&&a.attach,l=a&&a.connect,u=t.hints||{};if(!1===a||!s)return!1;jr(e);var d={x:e.x,y:e.y};r=l?o.appendShape(n,r,d,s,{attach:c,connection:!0===l?{}:l,connectionTarget:u.connectionTarget}):j(i=o.createElements(i,d,s,W({},u,{attach:c})),function(e){return!Ut(e)}),W(t,{elements:i,shape:r}),W(e,{elements:i,shape:r})}),n.on("create.init",function(){n.on("elements.changed",s),n.once(["create.cancel","create.end"],2e3,function(){n.off("elements.changed",s)})}),this.start=function(e,n,o){_(n)||(n=[n]);var r=j(n,function(e){return!Ut(e)});if(r){o=W({elements:n,hints:{},shape:r},o||{}),S(n,function(e){b(e.x)||(e.x=0),b(e.y)||(e.y=0)});var i=we(B(n,function(e){return!e.hidden}));S(n,function(e){Ut(e)&&(e.waypoints=z(e.waypoints,function(e){return{x:e.x-i.x-i.width/2,y:e.y-i.y-i.height/2}})),W(e,{x:e.x-i.x-i.width/2,y:e.y-i.y-i.height/2})}),t.init(e,Cr,{cursor:"grabbing",autoActivate:!0,data:{shape:r,elements:n,context:o}})}}}function jr(e){var t=e.context.createConstraints;t&&(t.left&&(e.x=Math.max(e.x,t.left)),t.right&&(e.x=Math.min(e.x,t.right)),t.top&&(e.y=Math.max(e.y,t.top)),t.bottom&&(e.y=Math.min(e.y,t.bottom)))}function Br(e){return e&&1===e.length&&!Ut(e[0])}function Sr(e,t,n,o,r){t.on("create.move",750,function(t){var i=t.hover,s=t.context,a=s.elements,c=s.dragGroup;c||(c=s.dragGroup=function(e){var t=oe("g");X(t,r.cls("djs-drag-group",["no-events"]));var i=oe("g");return e.forEach(function(e){var r;e.hidden||(e.waypoints?(r=n._createContainer("connection",i),n.drawConnection(jn(r),e)):(r=n._createContainer("shape",i),n.drawShape(jn(r),e),Bn(r,e.x,e.y)),o.addDragger(e,t,r))}),t}(a)),i?(c.parentNode||G(e.getActiveLayer(),c),Bn(c,t.x,t.y)):ce(c)}),t.on("create.cleanup",function(e){var t=e.context.dragGroup;t&&ce(t)})}kr.$inject=["canvas","dragging","eventBus","modeling","rules"],Sr.$inject=["canvas","eventBus","graphicsFactory","previewSupport","styles"];const Dr={__depends__:[uo,xr,ho,Jn],__init__:["create","createPreview"],create:["type",kr],createPreview:["type",Sr]};function Mr(e){this._eventBus=e,this._tools=[],this._active=null}Mr.$inject=["eventBus"],Mr.prototype.registerTool=function(e,t){var n=this._tools;if(!t)throw new Error('A tool has to be registered with it\'s "events"');n.push(e),this.bindEvents(e,t)},Mr.prototype.isActive=function(e){return e&&this._active===e},Mr.prototype.length=function(e){return this._tools.length},Mr.prototype.setActive=function(e){var t=this._eventBus;this._active!==e&&(this._active=e,t.fire("tool-manager.update",{tool:e}))},Mr.prototype.bindEvents=function(e,t){var n=this._eventBus,o=[];n.on(t.tool+".init",function(t){t.context.reactivate||!this.isActive(e)?this.setActive(e):this.setActive(null)},this),S(t,function(e){o.push(e+".ended"),o.push(e+".canceled")}),n.on(o,250,function(e){this._active&&(function(e){var t=e.originalEvent&&e.originalEvent.target;return t&&We(t,'.group[data-group="tools"]')}(e)||this.setActive(null))},this)};const zr={__depends__:[uo],__init__:["toolManager"],toolManager:["type",Mr]};function Or(e){var t=this;function n(e){t._lastMoveEvent=e}this._lastMoveEvent=null,e.on("canvas.init",function(e){(t._svg=e.svg).addEventListener("mousemove",n)}),e.on("canvas.destroy",function(){t._lastMouseEvent=null,t._svg.removeEventListener("mousemove",n)})}Or.$inject=["eventBus"],Or.prototype.getLastMoveEvent=function(){return this._lastMoveEvent||((e=document.createEvent("MouseEvent")).initMouseEvent&&e.initMouseEvent("mousemove",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e);var e};const Pr={__init__:["mouse"],mouse:["type",Or]};var $r="crosshair";function Rr(e,t,n,o,r,i,s){this._selection=r,this._dragging=n,this._mouse=s;var a=this;i.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"}),e.on("lasso.selection.end",function(t){var n=t.originalEvent.target;(t.hover||n instanceof SVGElement)&&e.once("lasso.selection.ended",function(){a.activateLasso(t.originalEvent,!0)})}),e.on("lasso.end",0,function(e){var t=e.context,n=Tr(e),r=o.filter(function(e){return e}),i=Nn(e);a.select(r,n,i?t.selection:[])}),e.on("lasso.start",function(e){var n=e.context;n.bbox=Tr(e),function(e){var n,o=t.getActiveLayer();X(n=e.frame=oe("rect"),{class:"djs-lasso-overlay",width:1,height:1,x:0,y:0}),G(o,n)}(n),n.selection=r.get()}),e.on("lasso.move",function(e){var t=e.context;t.bbox=Tr(e),function(e){var t=e.frame,n=e.bbox;X(t,{x:n.x,y:n.y,width:n.width,height:n.height})}(t)}),e.on("lasso.cleanup",function(e){!function(e){e.frame&&ce(e.frame)}(e.context)}),e.on("element.mousedown",1500,function(e){if(Nn(e))return a.activateLasso(e.originalEvent),!0})}function Tr(e){var t={x:e.x-e.dx,y:e.y-e.dy},n={x:e.x,y:e.y};return t.x<=n.x&&t.y<n.y||t.x<n.x&&t.y<=n.y?{x:t.x,y:t.y,width:n.x-t.x,height:n.y-t.y}:t.x>=n.x&&t.y<n.y||t.x>n.x&&t.y<=n.y?{x:n.x,y:t.y,width:t.x-n.x,height:n.y-t.y}:t.x<=n.x&&t.y>n.y||t.x<n.x&&t.y>=n.y?{x:t.x,y:n.y,width:n.x-t.x,height:t.y-n.y}:t.x>=n.x&&t.y>n.y||t.x>n.x&&t.y>=n.y?{x:n.x,y:n.y,width:t.x-n.x,height:t.y-n.y}:{x:n.x,y:n.y,width:0,height:0}}Rr.$inject=["eventBus","canvas","dragging","elementRegistry","selection","toolManager","mouse"],Rr.prototype.activateLasso=function(e,t){this._dragging.init(e,"lasso",{autoActivate:t,cursor:$r,data:{context:{}}})},Rr.prototype.activateSelection=function(e,t){this._dragging.init(e,"lasso.selection",{trapClick:!1,autoActivate:t,cursor:$r,data:{context:{}},keepSelection:!0})},Rr.prototype.select=function(e,t,n=[]){var o=function(e,t){var n={};return S(e,function(e){var o=e;o.waypoints&&(o=we(o)),!b(t.y)&&o.x>t.x&&(n[e.id]=e),!b(t.x)&&o.y>t.y&&(n[e.id]=e),o.x>t.x&&o.y>t.y&&(b(t.width)&&b(t.height)&&o.width+o.x<t.width+t.x&&o.height+o.y<t.height+t.y?n[e.id]=e:b(t.width)&&b(t.height)||(n[e.id]=e))}),n}(e,t);this._selection.select([...n,...O(o)])},Rr.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)},Rr.prototype.isActive=function(){var e=this._dragging.context();return e&&/^lasso/.test(e.prefix)};const Fr={__depends__:[zr,Pr],__init__:["lassoTool"],lassoTool:["type",Rr]};function Lr(e,t){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[],trigger:null},this._injector=t,this._eventBus=e,this._uid=1,e.on(["diagram.destroy","diagram.clear"],function(){this.clear(!1)},this)}Lr.$inject=["eventBus","injector"],Lr.prototype.execute=function(e,t){if(!e)throw new Error("command required");this._currentExecution.trigger="execute";const n={command:e,context:t};this._pushAction(n),this._internalExecute(n),this._popAction()},Lr.prototype.canExecute=function(e,t){const n={command:e,context:t},o=this._getHandler(e);let r=this._fire(e,"canExecute",n);if(void 0===r){if(!o)return!1;o.canExecute&&(r=o.canExecute(t))}return r},Lr.prototype.clear=function(e){this._stack.length=0,this._stackIdx=-1,!1!==e&&this._fire("changed",{trigger:"clear"})},Lr.prototype.undo=function(){let e,t=this._getUndoAction();if(t){for(this._currentExecution.trigger="undo",this._pushAction(t);t&&(this._internalUndo(t),e=this._getUndoAction(),e&&e.id===t.id);)t=e;this._popAction()}},Lr.prototype.redo=function(){let e,t=this._getRedoAction();if(t){for(this._currentExecution.trigger="redo",this._pushAction(t);t&&(this._internalExecute(t,!0),e=this._getRedoAction(),e&&e.id===t.id);)t=e;this._popAction()}},Lr.prototype.register=function(e,t){this._setHandler(e,t)},Lr.prototype.registerHandler=function(e,t){if(!e||!t)throw new Error("command and handlerCls must be defined");const n=this._injector.instantiate(t);this.register(e,n)},Lr.prototype.canUndo=function(){return!!this._getUndoAction()},Lr.prototype.canRedo=function(){return!!this._getRedoAction()},Lr.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]},Lr.prototype._getUndoAction=function(){return this._stack[this._stackIdx]},Lr.prototype._internalUndo=function(e){const t=e.command,n=e.context,o=this._getHandler(t);this._atomicDo(()=>{this._fire(t,"revert",e),o.revert&&this._markDirty(o.revert(n)),this._revertedAction(e),this._fire(t,"reverted",e)})},Lr.prototype._fire=function(e,t,n){arguments.length<3&&(n=t,t=null);const o=t?[e+"."+t,t]:[e];let r;n=this._eventBus.createEvent(n);for(const e of o)if(r=this._eventBus.fire("commandStack."+e,n),n.cancelBubble)break;return r},Lr.prototype._createId=function(){return this._uid++},Lr.prototype._atomicDo=function(e){const t=this._currentExecution;t.atomic=!0;try{e()}finally{t.atomic=!1}},Lr.prototype._internalExecute=function(e,t){const n=e.command,o=e.context,r=this._getHandler(n);if(!r)throw new Error("no command handler registered for <"+n+">");this._pushAction(e),t||(this._fire(n,"preExecute",e),r.preExecute&&r.preExecute(o),this._fire(n,"preExecuted",e)),this._atomicDo(()=>{this._fire(n,"execute",e),r.execute&&this._markDirty(r.execute(o)),this._executedAction(e,t),this._fire(n,"executed",e)}),t||(this._fire(n,"postExecute",e),r.postExecute&&r.postExecute(o),this._fire(n,"postExecuted",e)),this._popAction()},Lr.prototype._pushAction=function(e){const t=this._currentExecution,n=t.actions,o=n[0];if(t.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+e.command+")");e.id||(e.id=o&&o.id||this._createId()),n.push(e)},Lr.prototype._popAction=function(){const e=this._currentExecution,t=e.trigger,n=e.actions,o=e.dirty;n.pop(),n.length||(this._eventBus.fire("elements.changed",{elements:$("id",o.reverse())}),o.length=0,this._fire("changed",{trigger:t}),e.trigger=null)},Lr.prototype._markDirty=function(e){const t=this._currentExecution;e&&(e=_(e)?e:[e],t.dirty=t.dirty.concat(e))},Lr.prototype._executedAction=function(e,t){const n=++this._stackIdx;t||this._stack.splice(n,this._stack.length,e)},Lr.prototype._revertedAction=function(e){this._stackIdx--},Lr.prototype._getHandler=function(e){return this._handlerMap[e]},Lr.prototype._setHandler=function(e,t){if(!e||!t)throw new Error("command and handler required");if(this._handlerMap[e])throw new Error("overriding handler for command <"+e+">");this._handlerMap[e]=t};const Ir={commandStack:["type",Lr]};function Hr(e,t,n,o){e.on("element.changed",function(o){var r=o.element;(r.parent||r===t.getRootElement())&&(o.gfx=n.getGraphics(r)),o.gfx&&e.fire(Ce(r)+".changed",o)}),e.on("elements.changed",function(t){var n=t.elements;n.forEach(function(t){e.fire("element.changed",{element:t})}),o.updateContainments(n)}),e.on("shape.changed",function(e){o.update("shape",e.element,e.gfx)}),e.on("connection.changed",function(e){o.update("connection",e.element,e.gfx)})}Hr.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];const Nr={__init__:["changeSupport"],changeSupport:["type",Hr]};function Wr(e,t){this._modeling=e,this._canvas=t}function qr(e){this._modeling=e}function Vr(e,t){this._canvas=e,this._layouter=t}Wr.$inject=["modeling","canvas"],Wr.prototype.preExecute=function(e){var t=this._modeling,n=e.elements,o=e.alignment;S(n,function(e){var n={x:0,y:0};A(o.left)?n.x=o.left-e.x:A(o.right)?n.x=o.right-e.width-e.x:A(o.center)?n.x=o.center-Math.round(e.width/2)-e.x:A(o.top)?n.y=o.top-e.y:A(o.bottom)?n.y=o.bottom-e.height-e.y:A(o.middle)&&(n.y=o.middle-Math.round(e.height/2)-e.y),t.moveElements([e],n,e.parent)})},Wr.prototype.postExecute=function(e){},qr.$inject=["modeling"],qr.prototype.preExecute=function(e){var t=e.source;if(!t)throw new Error("source required");var n=e.target||t.parent,o=e.shape,r=e.hints||{};o=e.shape=this._modeling.createShape(o,e.position,n,{attach:r.attach}),e.shape=o},qr.prototype.postExecute=function(e){var t,n,o=e.hints||{};t=e.source,n=e.shape,j(t.outgoing,function(e){return e.target===n})||(o.connectionTarget===e.source?this._modeling.connect(e.shape,e.source,e.connection):this._modeling.connect(e.source,e.shape,e.connection))},Vr.$inject=["canvas","layouter"],Vr.prototype.execute=function(e){var t=e.connection,n=e.source,o=e.target,r=e.parent,i=e.parentIndex,s=e.hints;if(!n||!o)throw new Error("source and target required");if(!r)throw new Error("parent required");return t.source=n,t.target=o,t.waypoints||(t.waypoints=this._layouter.layoutConnection(t,s)),this._canvas.addConnection(t,r,i),t},Vr.prototype.revert=function(e){var t=e.connection;return this._canvas.removeConnection(t),t.source=null,t.target=null,t};var Gr=Math.round;function Ur(e){this._modeling=e}Ur.$inject=["modeling"],Ur.prototype.preExecute=function(e){var t=e.elements,n=e.parent,o=e.parentIndex,r=e.position,i=e.hints,s=this._modeling;S(t,function(e){b(e.x)||(e.x=0),b(e.y)||(e.y=0)});var a=we(B(t,function(e){return!e.hidden}));S(t,function(e){Ut(e)&&(e.waypoints=z(e.waypoints,function(e){return{x:Gr(e.x-a.x-a.width/2+r.x),y:Gr(e.y-a.y-a.height/2+r.y)}})),W(e,{x:Gr(e.x-a.x-a.width/2+r.x),y:Gr(e.y-a.y-a.height/2+r.y)})});var c=Ae(t),l={};S(t,function(e){if(Ut(e))l[e.id]=b(o)?s.createConnection(l[e.source.id],l[e.target.id],o,e,e.parent||n,i):s.createConnection(l[e.source.id],l[e.target.id],e,e.parent||n,i);else{var t=W({},i);-1===c.indexOf(e)&&(t.autoResize=!1),Yt(e)&&(t=V(t,["attach"])),l[e.id]=b(o)?s.createShape(e,q(e,["x","y","width","height"]),e.parent||n,o,t):s.createShape(e,q(e,["x","y","width","height"]),e.parent||n,t)}}),e.elements=O(l)};var Yr=Math.round;function Xr(e){this._canvas=e}function Kr(e){Xr.call(this,e)}Xr.$inject=["canvas"],Xr.prototype.execute=function(e){var t=e.shape,n=e.position,o=e.parent,r=e.parentIndex;if(!o)throw new Error("parent required");if(!n)throw new Error("position required");return void 0!==n.width?W(t,n):W(t,{x:n.x-Yr(t.width/2),y:n.y-Yr(t.height/2)}),this._canvas.addShape(t,o,r),t},Xr.prototype.revert=function(e){var t=e.shape;return this._canvas.removeShape(t),t},f(Kr,Xr),Kr.$inject=["canvas"];var Zr=Xr.prototype.execute;Kr.prototype.execute=function(e){var t=e.shape;return function(e){["width","height"].forEach(function(t){void 0===e[t]&&(e[t]=0)})}(t),t.labelTarget=e.labelTarget,Zr.call(this,e)};var Qr=Xr.prototype.revert;function Jr(e,t){if("function"!=typeof t)throw new Error("removeFn iterator must be a function");if(e){for(var n;n=e[0];)t(n);return e}}function ei(e,t){this._canvas=e,this._modeling=t}function ti(e,t){this._modeling=e,this._elementRegistry=t}function ni(e,t){this._canvas=e,this._modeling=t}function oi(e){this._modeling=e}Kr.prototype.revert=function(e){return e.shape.labelTarget=null,Qr.call(this,e)},ei.$inject=["canvas","modeling"],ei.prototype.preExecute=function(e){var t=this._modeling,n=e.connection;Jr(n.incoming,function(e){t.removeConnection(e,{nested:!0})}),Jr(n.outgoing,function(e){t.removeConnection(e,{nested:!0})})},ei.prototype.execute=function(e){var t=e.connection,n=t.parent;return e.parent=n,e.parentIndex=lt(n.children,t),e.source=t.source,e.target=t.target,this._canvas.removeConnection(t),t.source=null,t.target=null,t},ei.prototype.revert=function(e){var t=e.connection,n=e.parent,o=e.parentIndex;return t.source=e.source,t.target=e.target,ct(n.children,t,o),this._canvas.addConnection(t,n),t},ti.$inject=["modeling","elementRegistry"],ti.prototype.postExecute=function(e){var t=this._modeling,n=this._elementRegistry;S(e.elements,function(e){n.get(e.id)&&(e.waypoints?t.removeConnection(e):t.removeShape(e))})},ni.$inject=["canvas","modeling"],ni.prototype.preExecute=function(e){var t=this._modeling,n=e.shape;Jr(n.incoming,function(e){t.removeConnection(e,{nested:!0})}),Jr(n.outgoing,function(e){t.removeConnection(e,{nested:!0})}),Jr(n.children,function(e){Ut(e)?t.removeConnection(e,{nested:!0}):t.removeShape(e,{nested:!0})})},ni.prototype.execute=function(e){var t=this._canvas,n=e.shape,o=n.parent;return e.oldParent=o,e.oldParentIndex=lt(o.children,n),t.removeShape(n),n},ni.prototype.revert=function(e){var t=this._canvas,n=e.shape,o=e.oldParent,r=e.oldParentIndex;return ct(o.children,n,r),t.addShape(n,o),n},oi.$inject=["modeling"];var ri={x:"y",y:"x"};function ii(e,t){this._layouter=e,this._canvas=t}function si(){}function ai(e,t,n){var o=ro(t),r=ro(n),i=io(e,o),s=i.x*(n.width/t.width),a=i.y*(n.height/t.height);return Xt({x:r.x+s,y:r.y+a})}function ci(e,t,n){var o=hi(e),r=fi(o,t),i=o[0];return r.length?r[r.length-1]:ai(i.original||i,n,t)}function li(e,t,n){var o=hi(e),r=fi(o,t),i=o[o.length-1];return r.length?r[0]:ai(i.original||i,n,t)}function ui(e,t,n){var o=hi(e),r=pi(t,n),i=o[0];return ai(i.original||i,r,t)}function di(e,t,n){var o=hi(e),r=pi(t,n),i=o[o.length-1];return ai(i.original||i,r,t)}function pi(e,t){return{x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height}}function hi(e){var t=e.waypoints;if(!t.length)throw new Error("connection#"+e.id+": no waypoints");return t}function fi(e,t){return B(z(e,gi),function(e){return function(e,t){return"intersect"===Jt(t,e,1)}(e,t)})}function gi(e){return e.original||e}function vi(){this.allShapes={},this.allConnections={},this.enclosedElements={},this.enclosedConnections={},this.topLevel={}}function yi(e){this._modeling=e}function mi(e){this._helper=new yi(e)}function Ai(e){this._modeling=e,this._helper=new yi(e)}function xi(e){this._modeling=e}function _i(e){return e.original||e}function Ei(e,t){this._modeling=e,this._rules=t}function bi(e){this._modeling=e}function wi(e,t){return-1!==e.indexOf(t)}function Ci(e){this._modeling=e}function ki(e){return W({},e)}function ji(e){switch(e){case"n":case"s":return"y";case"w":case"e":return"x"}}function Bi(e,t,n){var o=ji(n);return/e|s/.test(n)?e[o]>t:/n|w/.test(n)?e[o]<t:void 0}function Si(e,t){return-1!==e.indexOf(t)}function Di(e){this._modeling=e}function Mi(e){var t={};return S(e,function(e){t[e.id]=e.hidden,e.children&&(t=W({},t,Mi(e.children)))}),t}function zi(e,t){var n=[];return S(e,function(e){e.hidden=t,n=n.concat(e),e.children&&(n=n.concat(zi(e.children,e.collapsed||t)))}),n}function Oi(e,t){var n=[];return S(e,function(e){e.hidden=t[e.id],n=n.concat(e),e.children&&(n=n.concat(Oi(e.children,t)))}),n}function Pi(e){this._modeling=e}function $i(e,t){return at(e&&e.attachers,t)}function Ri(e,t,n){if(e){var o=e.attachers;o||(e.attachers=o=[]),ct(o,t,n)}}function Ti(){}function Fi(e,t,n){this._eventBus=e,this._elementFactory=t,this._commandStack=n;var o=this;e.on("diagram.init",function(){o.registerHandlers(n)})}function Li(){}oi.prototype.preExecute=function(e){var t=this._modeling,n=e.groups,o=e.axis,r=e.dimension;function i(e,t){e.range.min=Math.min(t[o],e.range.min),e.range.max=Math.max(t[o]+t[r],e.range.max)}function s(e){return e[o]+e[r]/2}function a(e){return e.length-1}function c(e){return e.max-e.min}var l,u,d=n[0],p=a(n),h=n[p],f=0;S(n,function(e,l){var u,d,h;e.elements.length<2?l&&l!==n.length-1&&(i(e,e.elements[0]),f+=c(e.range)):(d=(u=R(e.elements,o))[0],l===p&&(d=u[a(u)]),h=s(d),e.range=null,S(u,function(n){!function(e,n){var r={y:0};r[o]=e-s(n),r[o]&&(r[ri[o]]=0,t.moveElements([n],r,n.parent))}(h,n),null!==e.range?i(e,n):e.range={min:n[o],max:n[o]+n[r]}}),l&&l!==n.length-1&&(f+=c(e.range)))}),u=Math.abs(h.range.min-d.range.max),(l=Math.round((u-f)/(n.length-1)))<n.length-1||S(n,function(e,i){var s,a={};e!==d&&e!==h&&(s=n[i-1],e.range.max=0,S(e.elements,function(n,i){a[ri[o]]=0,a[o]=s.range.max-n[o]+l,e.range.min!==n[o]&&(a[o]+=n[o]-e.range.min),a[o]&&t.moveElements([n],a,n.parent),e.range.max=Math.max(n[o]+n[r],i?e.range.max:0)}))})},oi.prototype.postExecute=function(e){},ii.$inject=["layouter","canvas"],ii.prototype.execute=function(e){var t=e.connection;return W(e,{oldWaypoints:t.waypoints}),t.waypoints=this._layouter.layoutConnection(t,e.hints),t},ii.prototype.revert=function(e){var t=e.connection;return t.waypoints=e.oldWaypoints,t},si.prototype.execute=function(e){var t=e.connection,n=e.delta,o=e.newParent||t.parent,r=e.newParentIndex,i=t.parent;return e.oldParent=i,e.oldParentIndex=at(i.children,t),ct(o.children,t,r),t.parent=o,S(t.waypoints,function(e){e.x+=n.x,e.y+=n.y,e.original&&(e.original.x+=n.x,e.original.y+=n.y)}),t},si.prototype.revert=function(e){var t=e.connection,n=t.parent,o=e.oldParent,r=e.oldParentIndex,i=e.delta;return at(n.children,t),ct(o.children,t,r),t.parent=o,S(t.waypoints,function(e){e.x-=i.x,e.y-=i.y,e.original&&(e.original.x-=i.x,e.original.y-=i.y)}),t},vi.prototype.add=function(e,t){return this.addAll([e],t)},vi.prototype.addAll=function(e,t){var n=function(e,t,n){m(t)&&(t=!0),E(t)&&(n=t,t=!0);var o=je((n=n||{}).allShapes),r=je(n.allConnections),i=je(n.enclosedElements),s=je(n.enclosedConnections),a=je(n.topLevel,t&&P(e,function(e){return e.id}));function c(e){a[e.source.id]&&a[e.target.id]&&(a[e.id]=[e]),o[e.source.id]&&o[e.target.id]&&(s[e.id]=i[e.id]=e),r[e.id]=e}return Ee(e,function(e){if(i[e.id]=e,!e.waypoints)return o[e.id]=e,S(e.incoming,c),S(e.outgoing,c),e.children;s[e.id]=r[e.id]=e}),{allShapes:o,allConnections:r,topLevel:a,enclosedConnections:s,enclosedElements:i}}(e,!!t,this);return W(this,n),this},yi.prototype.moveRecursive=function(e,t,n){return e?this.moveClosure(this.getClosure(e),t,n):[]},yi.prototype.moveClosure=function(e,t,n,o,r){var i=this._modeling,s=e.allShapes,a=e.allConnections,c=e.enclosedConnections,l=e.topLevel,u=!1;r&&r.parent===n&&(u=!0),S(s,function(e){i.moveShape(e,t,l[e.id]&&!u&&n,{recurse:!1,layout:!1})}),S(a,function(e){var o=!!s[e.source.id],r=!!s[e.target.id];c[e.id]&&o&&r?i.moveConnection(e,t,l[e.id]&&!u&&n):i.layoutConnection(e,{connectionStart:o&&ui(e,e.source,t),connectionEnd:r&&di(e,e.target,t)})})},yi.prototype.getClosure=function(e){return(new vi).addAll(e,!0)},mi.$inject=["modeling"],mi.prototype.preExecute=function(e){e.closure=this._helper.getClosure(e.shapes)},mi.prototype.postExecute=function(e){var t,n=e.hints;n&&n.primaryShape&&(t=n.primaryShape,n.oldParent=t.parent),this._helper.moveClosure(e.closure,e.delta,e.newParent,e.newHost,t)},Ai.$inject=["modeling"],Ai.prototype.execute=function(e){var t=e.shape,n=e.delta,o=e.newParent||t.parent,r=e.newParentIndex,i=t.parent;return e.oldBounds=q(t,["x","y","width","height"]),e.oldParent=i,e.oldParentIndex=at(i.children,t),ct(o.children,t,r),W(t,{parent:o,x:t.x+n.x,y:t.y+n.y}),t},Ai.prototype.postExecute=function(e){var t=e.shape,n=e.delta,o=e.hints,r=this._modeling;!1!==o.layout&&(S(t.incoming,function(e){r.layoutConnection(e,{connectionEnd:di(e,t,n)})}),S(t.outgoing,function(e){r.layoutConnection(e,{connectionStart:ui(e,t,n)})})),!1!==o.recurse&&this.moveChildren(e)},Ai.prototype.revert=function(e){var t=e.shape,n=e.oldParent,o=e.oldParentIndex,r=e.delta;return ct(n.children,t,o),W(t,{parent:n,x:t.x-r.x,y:t.y-r.y}),t},Ai.prototype.moveChildren=function(e){var t=e.delta,n=e.shape;this._helper.moveRecursive(n.children,t,null)},Ai.prototype.getNewParent=function(e){return e.newParent||e.shape.parent},xi.$inject=["modeling"],xi.prototype.execute=function(e){var t=e.newSource,n=e.newTarget,o=e.connection,r=e.dockingOrPoints;if(!t&&!n)throw new Error("newSource or newTarget required");return _(r)&&(e.oldWaypoints=o.waypoints,o.waypoints=r),t&&(e.oldSource=o.source,o.source=t),n&&(e.oldTarget=o.target,o.target=n),o},xi.prototype.postExecute=function(e){var t=e.connection,n=e.newSource,o=e.newTarget,r=e.dockingOrPoints,i=e.hints||{},s={};i.connectionStart&&(s.connectionStart=i.connectionStart),i.connectionEnd&&(s.connectionEnd=i.connectionEnd),!1!==i.layoutConnection&&(!n||o&&"source"!==i.docking||(s.connectionStart=s.connectionStart||_i(_(r)?r[0]:r)),!o||n&&"target"!==i.docking||(s.connectionEnd=s.connectionEnd||_i(_(r)?r[r.length-1]:r)),i.newWaypoints&&(s.waypoints=i.newWaypoints),this._modeling.layoutConnection(t,s))},xi.prototype.revert=function(e){var t=e.oldSource,n=e.oldTarget,o=e.oldWaypoints,r=e.connection;return t&&(r.source=t),n&&(r.target=n),o&&(r.waypoints=o),r},Ei.$inject=["modeling","rules"],Ei.prototype.preExecute=function(e){var t,n=this,o=this._modeling,r=this._rules,i=e.oldShape,s=e.newData,a=e.hints||{};function c(e,t,n){return r.allowed("connection.reconnect",{connection:n,source:e,target:t})}var l,u={x:s.x,y:s.y},d={x:i.x,y:i.y,width:i.width,height:i.height};t=e.newShape=e.newShape||n.createShape(s,u,i.parent,a),i.host&&o.updateAttachment(t,i.host),!1!==a.moveChildren&&(l=i.children.slice(),o.moveElements(l,{x:0,y:0},t,a));var p=i.incoming.slice(),h=i.outgoing.slice();S(p,function(e){c(e.source,t,e)&&n.reconnectEnd(e,t,li(e,t,d),a)}),S(h,function(e){var o=e.target;c(t,o,e)&&n.reconnectStart(e,t,ci(e,t,d),a)})},Ei.prototype.postExecute=function(e){var t=e.oldShape;this._modeling.removeShape(t)},Ei.prototype.execute=function(e){},Ei.prototype.revert=function(e){},Ei.prototype.createShape=function(e,t,n,o){return this._modeling.createShape(e,t,n,o)},Ei.prototype.reconnectStart=function(e,t,n,o){this._modeling.reconnectStart(e,t,n,o)},Ei.prototype.reconnectEnd=function(e,t,n,o){this._modeling.reconnectEnd(e,t,n,o)},bi.$inject=["modeling"],bi.prototype.execute=function(e){var t=e.shape,n=e.newBounds,o=e.minBounds;if(void 0===n.x||void 0===n.y||void 0===n.width||void 0===n.height)throw new Error("newBounds must have {x, y, width, height} properties");if(o&&(n.width<o.width||n.height<o.height))throw new Error("width and height cannot be less than minimum height and width");if(!o&&n.width<10||n.height<10)throw new Error("width and height cannot be less than 10px");return e.oldBounds={width:t.width,height:t.height,x:t.x,y:t.y},W(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t},bi.prototype.postExecute=function(e){var t=this._modeling,n=e.shape,o=e.oldBounds;!1!==(e.hints||{}).layout&&(S(n.incoming,function(e){t.layoutConnection(e,{connectionEnd:li(e,n,o)})}),S(n.outgoing,function(e){t.layoutConnection(e,{connectionStart:ci(e,n,o)})}))},bi.prototype.revert=function(e){var t=e.shape,n=e.oldBounds;return W(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t},Ci.$inject=["modeling"],Ci.prototype.preExecute=function(e){var t=e.delta,n=e.direction,o=e.movingShapes,r=e.resizingShapes,i=e.start,s={};this.moveShapes(o,t),S(r,function(e){s[e.id]=function(e){return{x:e.x,y:e.y,height:e.height,width:e.width}}(e)}),this.resizeShapes(r,t,n),this.updateConnectionWaypoints(function(e,t){var n=[];return S(e.concat(t),function(o){var r=o.incoming,i=o.outgoing;S(r.concat(i),function(o){var r=o.source,i=o.target;(wi(e,r)||wi(e,i)||wi(t,r)||wi(t,i))&&(wi(n,o)||n.push(o))})}),n}(o,r),t,n,i,o,r,s)},Ci.prototype.execute=function(){},Ci.prototype.revert=function(){},Ci.prototype.moveShapes=function(e,t){var n=this;S(e,function(e){n._modeling.moveShape(e,t,null,{autoResize:!1,layout:!1,recurse:!1})})},Ci.prototype.resizeShapes=function(e,t,n){var o=this;S(e,function(e){var r=function(e,t,n){var o=e.x,r=e.y,i=e.width,s=e.height,a=n.x,c=n.y;switch(t){case"n":return{x:o,y:r+c,width:i,height:s-c};case"s":return{x:o,y:r,width:i,height:s+c};case"w":return{x:o+a,y:r,width:i-a,height:s};case"e":return{x:o,y:r,width:i+a,height:s};default:throw new Error("unknown direction: "+t)}}(e,n,t);o._modeling.resizeShape(e,r,null,{attachSupport:!1,autoResize:!1,layout:!1})})},Ci.prototype.updateConnectionWaypoints=function(e,t,n,o,r,i,s){var a=this,c=r.concat(i);S(e,function(e){var l=e.source,u=e.target,d=function(e){return z(e.waypoints,function(e){return(e=ki(e)).original&&(e.original=ki(e.original)),e})}(e),p=ji(n),h={};Si(c,l)&&Si(c,u)?(d=z(d,function(e){return Bi(e,o,n)&&(e[p]=e[p]+t[p]),e.original&&Bi(e.original,o,n)&&(e.original[p]=e.original[p]+t[p]),e}),a._modeling.updateWaypoints(e,d,{labelBehavior:!1})):(Si(c,l)||Si(c,u))&&(Si(r,l)?h.connectionStart=ui(e,l,t):Si(r,u)?h.connectionEnd=di(e,u,t):Si(i,l)?h.connectionStart=ci(e,l,s[l.id]):Si(i,u)&&(h.connectionEnd=li(e,u,s[u.id])),a._modeling.layoutConnection(e,h))})},Di.$inject=["modeling"],Di.prototype.execute=function(e){var t=e.shape,n=t.children;e.oldChildrenVisibility=Mi(n),t.collapsed=!t.collapsed;var o=zi(n,t.collapsed);return[t].concat(o)},Di.prototype.revert=function(e){var t=e.shape,n=e.oldChildrenVisibility,o=Oi(t.children,n);return t.collapsed=!t.collapsed,[t].concat(o)},Pi.$inject=["modeling"],Pi.prototype.execute=function(e){var t=e.shape,n=e.newHost,o=t.host;return e.oldHost=o,e.attacherIdx=$i(o,t),Ri(n,t),t.host=n,t},Pi.prototype.revert=function(e){var t=e.shape,n=e.newHost,o=e.oldHost,r=e.attacherIdx;return t.host=o,$i(n,t),Ri(o,t,r),t},Ti.prototype.execute=function(e){var t=e.connection,n=e.newWaypoints;return e.oldWaypoints=t.waypoints,t.waypoints=n,t},Ti.prototype.revert=function(e){var t=e.connection,n=e.oldWaypoints;return t.waypoints=n,t},Fi.$inject=["eventBus","elementFactory","commandStack"],Fi.prototype.getHandlers=function(){return{"shape.append":qr,"shape.create":Xr,"shape.delete":ni,"shape.move":Ai,"shape.resize":bi,"shape.replace":Ei,"shape.toggleCollapse":Di,spaceTool:Ci,"label.create":Kr,"connection.create":Vr,"connection.delete":ei,"connection.move":si,"connection.layout":ii,"connection.updateWaypoints":Ti,"connection.reconnect":xi,"elements.create":Ur,"elements.move":mi,"elements.delete":ti,"elements.distribute":oi,"elements.align":Wr,"element.updateAttachment":Pi}},Fi.prototype.registerHandlers=function(e){S(this.getHandlers(),function(t,n){e.registerHandler(n,t)})},Fi.prototype.moveShape=function(e,t,n,o,r){"object"==typeof o&&(r=o,o=null);var i={shape:e,delta:t,newParent:n,newParentIndex:o,hints:r||{}};this._commandStack.execute("shape.move",i)},Fi.prototype.updateAttachment=function(e,t){var n={shape:e,newHost:t};this._commandStack.execute("element.updateAttachment",n)},Fi.prototype.moveElements=function(e,t,n,o){var r,i=(o=o||{}).attach,s=n;!0===i?(r=n,s=n.parent):!1===i&&(r=null);var a={shapes:e,delta:t,newParent:s,newHost:r,hints:o};this._commandStack.execute("elements.move",a)},Fi.prototype.moveConnection=function(e,t,n,o,r){"object"==typeof o&&(r=o,o=void 0);var i={connection:e,delta:t,newParent:n,newParentIndex:o,hints:r||{}};this._commandStack.execute("connection.move",i)},Fi.prototype.layoutConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.layout",n)},Fi.prototype.createConnection=function(e,t,n,o,r,i){"object"==typeof n&&(i=r,r=o,o=n,n=void 0);var s={source:e,target:t,parent:r,parentIndex:n,connection:o=this._create("connection",o),hints:i};return this._commandStack.execute("connection.create",s),s.connection},Fi.prototype.createShape=function(e,t,n,o,r){"number"!=typeof o&&(r=o,o=void 0);var i,s,a=(r=r||{}).attach;e=this._create("shape",e),a?(i=n.parent,s=n):i=n;var c={position:t,shape:e,parent:i,parentIndex:o,host:s,hints:r};return this._commandStack.execute("shape.create",c),c.shape},Fi.prototype.createElements=function(e,t,n,o,r){_(e)||(e=[e]),"number"!=typeof o&&(r=o,o=void 0);var i={position:t,elements:e,parent:n,parentIndex:o,hints:r=r||{}};return this._commandStack.execute("elements.create",i),i.elements},Fi.prototype.createLabel=function(e,t,n,o){n=this._create("label",n);var r={labelTarget:e,position:t,parent:o||e.parent,shape:n};return this._commandStack.execute("label.create",r),r.shape},Fi.prototype.appendShape=function(e,t,n,o,r){r=r||{};var i={source:e,position:n,target:o,shape:t=this._create("shape",t),connection:r.connection,connectionParent:r.connectionParent,hints:r};return this._commandStack.execute("shape.append",i),i.shape},Fi.prototype.removeElements=function(e){var t={elements:e};this._commandStack.execute("elements.delete",t)},Fi.prototype.distributeElements=function(e,t,n){var o={groups:e,axis:t,dimension:n};this._commandStack.execute("elements.distribute",o)},Fi.prototype.removeShape=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.delete",n)},Fi.prototype.removeConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.delete",n)},Fi.prototype.replaceShape=function(e,t,n){var o={oldShape:e,newData:t,hints:n||{}};return this._commandStack.execute("shape.replace",o),o.newShape},Fi.prototype.alignElements=function(e,t){var n={elements:e,alignment:t};this._commandStack.execute("elements.align",n)},Fi.prototype.resizeShape=function(e,t,n,o){var r={shape:e,newBounds:t,minBounds:n,hints:o};this._commandStack.execute("shape.resize",r)},Fi.prototype.createSpace=function(e,t,n,o,r){var i={delta:n,direction:o,movingShapes:e,resizingShapes:t,start:r};this._commandStack.execute("spaceTool",i)},Fi.prototype.updateWaypoints=function(e,t,n){var o={connection:e,newWaypoints:t,hints:n||{}};this._commandStack.execute("connection.updateWaypoints",o)},Fi.prototype.reconnect=function(e,t,n,o,r){var i={connection:e,newSource:t,newTarget:n,dockingOrPoints:o,hints:r||{}};this._commandStack.execute("connection.reconnect",i)},Fi.prototype.reconnectStart=function(e,t,n,o){o||(o={}),this.reconnect(e,t,e.target,n,W(o,{docking:"source"}))},Fi.prototype.reconnectEnd=function(e,t,n,o){o||(o={}),this.reconnect(e,e.source,t,n,W(o,{docking:"target"}))},Fi.prototype.connect=function(e,t,n,o){return this.createConnection(e,t,n||{},e.parent,o)},Fi.prototype._create=function(e,t){return t instanceof vn?t:this._elementFactory.create(e,t)},Fi.prototype.toggleCollapse=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.toggleCollapse",n)},Li.prototype.layoutConnection=function(e,t){return[(t=t||{}).connectionStart||Qt(t.source||e.source),t.connectionEnd||Qt(t.target||e.target)]};const Ii={__depends__:[Ir,Nr,Jn,ho],__init__:["modeling"],modeling:["type",Fi],layouter:["type",Li]};function Hi(e,t){var n;function o(e){return function(e){if(!We(e.target,".djs-draggable")){var t=e.button;if(!(t>=2||e.ctrlKey||e.shiftKey||e.altKey))return n={button:t,start:Rn(e)},Ke.bind(document,"mousemove",r),Ke.bind(document,"mouseup",i),!0}}(e.originalEvent)}function r(o){var r,i=n.start,s=n.button,a=Rn(o),c=io(a,i);!n.dragging&&(r=c,Math.sqrt(Math.pow(r.x,2)+Math.pow(r.y,2))>15)&&(n.dragging=!0,0===s&&oo(e),to("grab")),n.dragging&&(c=io(a,n.last||n.start),t.scroll({dx:c.x,dy:c.y}),n.last=a),o.preventDefault()}function i(e){Ke.unbind(document,"mousemove",r),Ke.unbind(document,"mouseup",i),n=null,no()}e.on("canvas.focus.changed",function(t){t.focused?e.on("element.mousedown",500,o):e.off("element.mousedown",o)}),this.isActive=function(){return!!n}}Hi.$inject=["eventBus","canvas"];const Ni={__init__:["moveCanvas"],moveCanvas:["type",Hi]};function Wi(e,t){this._eventBus=e,this.offset=5;var n=t.cls("djs-outline",["no-fill"]),o=this;function r(e){var t=oe("rect");return X(t,W({x:0,y:0,rx:4,width:100,height:100},n)),t}e.on(["shape.added","shape.changed"],500,function(e){var t=e.element,n=e.gfx,i=rt(".djs-outline",n);i||G(n,i=o.getOutline(t)||r()),o.updateShapeOutline(i,t)}),e.on(["connection.added","connection.changed"],function(e){var t=e.element,n=e.gfx,i=rt(".djs-outline",n);i||G(n,i=r()),o.updateConnectionOutline(i,t)})}function qi(e,t,n){this._canvas=t;var o=this;e.on("element.changed",function(e){n.isSelected(e.element)&&o._updateMultiSelectionOutline(n.get())}),e.on("selection.changed",function(e){var t=e.newSelection;o._updateMultiSelectionOutline(t)})}Wi.prototype.updateShapeOutline=function(e,t){var n=!1,o=this._getProviders();o.length&&S(o,function(o){n=n||o.updateOutline(t,e)}),n||X(e,{x:-this.offset,y:-this.offset,width:t.width+2*this.offset,height:t.height+2*this.offset})},Wi.prototype.updateConnectionOutline=function(e,t){var n=we(t);X(e,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+2*this.offset,height:n.height+2*this.offset})},Wi.prototype.registerProvider=function(e,t){t||(t=e,e=1e3),this._eventBus.on("outline.getProviders",e,function(e){e.providers.push(t)})},Wi.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"outline.getProviders",providers:[]});return this._eventBus.fire(e),e.providers},Wi.prototype.getOutline=function(e){var t;return S(this._getProviders(),function(n){w(n.getOutline)&&(t=t||n.getOutline(e))}),t},Wi.$inject=["eventBus","styles","elementRegistry"],qi.prototype._updateMultiSelectionOutline=function(e){var t=this._canvas.getLayer("selectionOutline");J(t);var n=e.length>1;if(Z(this._canvas.getContainer())[n?"add":"remove"]("djs-multi-select"),n){var o=function(e){return{x:e.x-6,y:e.y-6,width:e.width+12,height:e.height+12}}(we(e)),r=oe("rect");X(r,W({rx:3},o)),Z(r).add("djs-selection-outline"),G(t,r)}},qi.$inject=["eventBus","canvas","selection"];const Vi={__depends__:[Jn],__init__:["outline","multiSelectionOutline"],outline:["type",Wi],multiSelectionOutline:["type",qi]};var Gi=Math.round;function Ui(e,t,n,o,r){function i(e,t,n,o){return r.allowed("elements.move",{shapes:e,delta:t,position:n,target:o})}function s(e,n,o,r){if(E(o)&&(r=o,o=!1),!n.waypoints&&n.parent&&!Z(e.target).has("djs-hit-no-move")){var i=function(e){return{x:e.x+Gi(e.width/2),y:e.y+Gi(e.height/2)}}(n);return t.init(e,i,"shape.move",{cursor:"grabbing",autoActivate:o,data:{shape:n,context:r||{}}}),!0}}e.on("shape.move.start",1500,function(e){var t=e.context,n=e.shape,r=o.get().slice();-1===r.indexOf(n)&&(r=[n]),r=function(e){var t=P(e,"id");return B(e,function(e){for(;e=e.parent;)if(t[e.id])return!1;return!0})}(r),W(t,{shapes:r,validatedShapes:r,shape:n})}),e.on("shape.move.start",1250,function(e){var t=e.context,n=t.validatedShapes;if(!(t.canExecute=i(n)))return!1}),e.on("shape.move.move",500,function(e){var t,n=e.context,o=n.validatedShapes,r=e.hover,s={x:e.dx,y:e.dy};t=i(o,s,{x:e.x,y:e.y},r),n.delta=s,n.canExecute=t,n.target=null!==t?r:null}),e.on("shape.move.end",function(e){var t=e.context,o=t.delta,r=t.canExecute,i="attach"===r,s=t.shapes;if(!1===r)return!1;o.x=Gi(o.x),o.y=Gi(o.y),0===o.x&&0===o.y||n.moveElements(s,o,t.target,{primaryShape:t.shape,attach:i})}),e.on("element.mousedown",function(e){if(Hn(e)){var t=Pn(e);if(!t)throw new Error("must supply DOM mousedown event");return s(t,e.element)}}),this.start=s}Ui.$inject=["eventBus","dragging","modeling","selection","rules"];var Yi="djs-dragging",Xi="drop-ok",Ki="drop-not-ok",Zi="new-parent",Qi="attach-ok";function Ji(e,t,n,o){function r(e){var t=be(e,!0),n=t.flatMap(e=>(e.incoming||[]).concat(e.outgoing||[])),o=t.concat(n);return[...new Set(o)]}function i(e,n){[Qi,Xi,Ki,Zi].forEach(function(o){o===n?t.addMarker(e,o):t.removeMarker(e,o)})}e.on("shape.move.start",499,function(e){var i,s,a,c=e.context,l=c.shapes,u=c.allDraggedElements,d=B(s=r(l),function(e){return!Ut(e)||j(s,T({id:e.source.id}))&&j(s,T({id:e.target.id}))});if(!c.dragGroup){var p=oe("g");X(p,n.cls("djs-drag-group",["no-events"])),G(t.getActiveLayer(),p),c.dragGroup=p}d.forEach(function(e){o.addDragger(e,c.dragGroup)}),u?(i=[u,r(l)],u=Array.prototype.concat.apply([],i)):u=r(l),S(u,function(e){t.addMarker(e,Yi)}),c.allDraggedElements=u,c.differentParents=1!==(a=P(l,function(e){return e.parent&&e.parent.id}),function(e){return e&&Object.keys(e)||[]}(a).length)}),e.on("shape.move.move",499,function(e){var t=e.context,n=t.dragGroup,o=t.target,r=t.shape.parent,s=t.canExecute;o&&("attach"===s?i(o,Qi):t.canExecute&&r&&o.id!==r.id?i(o,Zi):i(o,t.canExecute?Xi:Ki)),Bn(n,e.dx,e.dy)}),e.on(["shape.move.out","shape.move.cleanup"],function(e){var t=e.context.target;t&&i(t,null)}),e.on("shape.move.cleanup",function(e){var n=e.context,o=n.allDraggedElements,r=n.dragGroup;S(o,function(e){t.removeMarker(e,Yi)}),r&&ce(r)}),this.makeDraggable=function(e,n,r){o.addDragger(n,e.dragGroup),r&&t.addMarker(n,Yi),e.allDraggedElements?e.allDraggedElements.push(n):e.allDraggedElements=[n]}}Ji.$inject=["eventBus","canvas","styles","previewSupport"];const es={__depends__:[Gn,Jn,Vi,ho,uo,xr],__init__:["move","movePreview"],move:["type",Ui],movePreview:["type",Ji]};var ts=".djs-palette-toggle",ns=".entry",os=ts+", "+ns,rs="djs-palette-",is="open",ss="two-column";function as(e,t){this._eventBus=e,this._canvas=t;var n=this;e.on("tool-manager.update",function(e){var t=e.tool;n.updateToolHighlight(t)}),e.on("i18n.changed",function(){n._update()}),e.on("diagram.init",function(){n._diagramInitialized=!0,n._rebuild()})}function cs(e,t){var n=t.getPaletteEntries();return w(n)?n(e):(S(n,function(t,n){e[n]=t}),e)}as.$inject=["eventBus","canvas"],as.prototype.registerProvider=function(e,t){t||(t=e,e=1e3),this._eventBus.on("palette.getProviders",e,function(e){e.providers.push(t)}),this._rebuild()},as.prototype.getEntries=function(){return this._getProviders().reduce(cs,{})},as.prototype._rebuild=function(){this._diagramInitialized&&this._getProviders().length&&(this._container||this._init(),this._update())},as.prototype._init=function(){var e=this,t=this._eventBus,n=this._getParentContainer(),o=this._container=nt(as.HTML_MARKUP);n.appendChild(o),Ie(n).add(rs+"shown"),Qe(o,os,"click",function(t){if(ot(t.delegateTarget,ts))return e.toggle();e.trigger("click",t)}),Ke.bind(o,"mousedown",function(e){e.stopPropagation()}),Qe(o,ns,"dragstart",function(t){e.trigger("dragstart",t)}),t.on("canvas.resized",this._layoutChanged,this),t.fire("palette.create",{container:o})},as.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"palette.getProviders",providers:[]});return this._eventBus.fire(t),t.providers},as.prototype._toggleState=function(e){e=e||{};var t,n=this._getParentContainer(),o=this._container,r=this._eventBus,i=Ie(o),s=Ie(n);t="twoColumn"in e?e.twoColumn:this._needsCollapse(n.clientHeight,this._entries||{}),i.toggle(ss,t),s.toggle(rs+ss,t),"open"in e&&(i.toggle(is,e.open),s.toggle(rs+is,e.open)),r.fire("palette.changed",{twoColumn:t,open:this.isOpen()})},as.prototype._update=function(){var e=rt(".djs-palette-entries",this._container),t=this._entries=this.getEntries();Ne(e),S(t,function(t,n){var o=t.group||"default",r=rt("[data-group="+wo(o)+"]",e);r||(Fe(r=nt('<div class="group"></div>'),"data-group",o),e.appendChild(r));var i=t.html||(t.separator?'<hr class="separator" />':'<div class="entry" draggable="true"></div>'),s=nt(i);if(r.appendChild(s),!t.separator&&(Fe(s,"data-action",n),t.title&&Fe(s,"title",t.title),t.className&&function(e,t){var n=Ie(e);(_(t)?t:t.split(/\s+/g)).forEach(function(e){n.add(e)})}(s,t.className),t.imageUrl)){var a=nt("<img>");Fe(a,"src",t.imageUrl),s.appendChild(a)}}),this.open()},as.prototype.trigger=function(e,t,n){var o,r,i=t.delegateTarget||t.target;return i?(o=Fe(i,"data-action"),r=t.originalEvent||t,this.triggerEntry(o,e,r,n)):t.preventDefault()},as.prototype.triggerEntry=function(e,t,n,o){var r,i;if((r=this._entries[e])&&(i=r.action,!1!==this._eventBus.fire("palette.trigger",{entry:r,event:n}))){if(w(i)){if("click"===t)return i(n,o)}else if(i[t])return i[t](n,o);n.preventDefault()}},as.prototype._layoutChanged=function(){this._toggleState({})},as.prototype._needsCollapse=function(e,t){return e<46*Object.keys(t).length+50},as.prototype.close=function(){this._toggleState({open:!1,twoColumn:!1})},as.prototype.open=function(){this._toggleState({open:!0})},as.prototype.toggle=function(){this.isOpen()?this.close():this.open()},as.prototype.isActiveTool=function(e){return e&&this._activeTool===e},as.prototype.updateToolHighlight=function(e){var t;this._toolsContainer||(t=rt(".djs-palette-entries",this._container),this._toolsContainer=rt("[data-group=tools]",t)),S(this._toolsContainer.children,function(t){var n=t.getAttribute("data-action");if(n){var o=Ie(t);n=n.replace("-tool",""),o.contains("entry")&&n===e?o.add("highlighted-entry"):o.remove("highlighted-entry")}})},as.prototype.isOpen=function(){return Ie(this._container).has(is)},as.prototype._getParentContainer=function(){return this._canvas.getContainer()},as.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>';const ls={__init__:["palette"],palette:["type",as]};var us=Math.max,ds=Math.min;function ps(e,t,n){var o=t[e],r=n.min&&n.min[e],i=n.max&&n.max[e];return b(r)&&(o=(/top|left/.test(e)?ds:us)(o,r)),b(i)&&(o=(/top|left/.test(e)?us:ds)(o,i)),o}function hs(e,t){return void 0!==e?e:20}function fs(e){return!e.waypoints&&"label"!==e.type}function gs(e,t,n,o){this._dragging=o,this._rules=t;var r=this;e.on("resize.start",function(e){var t,n,o;n=(t=e.context).resizeConstraints,o=t.minBounds,void 0===n&&(void 0===o&&(o=r.computeMinResizeBox(t)),t.resizeConstraints={min:Kt(o)})}),e.on("resize.move",function(e){var t={x:e.dx,y:e.dy};!function(e,t){var n,o=e.shape,i=e.direction,s=e.resizeConstraints;e.delta=t,n=function(e,t,n){var o=n.x,r=n.y,i={x:e.x,y:e.y,width:e.width,height:e.height};return-1!==t.indexOf("n")?(i.y=e.y+r,i.height=e.height-r):-1!==t.indexOf("s")&&(i.height=e.height+r),-1!==t.indexOf("e")?i.width=e.width+o:-1!==t.indexOf("w")&&(i.x=e.x+o,i.width=e.width-o),i}(o,i,t),e.newBounds=function(e,t){if(!t)return e;var n=Kt(e);return Zt({top:ps("top",n,t),right:ps("right",n,t),bottom:ps("bottom",n,t),left:ps("left",n,t)})}(n,s),e.canExecute=r.canResize(e)}(e.context,t)}),e.on("resize.end",function(e){!function(e){var t,o=e.shape,r=e.canExecute,i=e.newBounds;if(r){if(t=i,!function(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}(o,i={x:Math.round(t.x),y:Math.round(t.y),width:Math.round(t.width),height:Math.round(t.height)}))return;n.resizeShape(o,i)}}(e.context)})}function vs(e,t){var n=Qt(e),o=Kt(e),r={x:n.x,y:n.y};return-1!==t.indexOf("n")?r.y=o.top:-1!==t.indexOf("s")&&(r.y=o.bottom),-1!==t.indexOf("e")?r.x=o.right:-1!==t.indexOf("w")&&(r.x=o.left),r}function ys(e){var t="resize-";return"n"===e||"s"===e?t+"ns":"e"===e||"w"===e?t+"ew":"nw"===e||"se"===e?t+"nwse":t+"nesw"}gs.prototype.canResize=function(e){var t=this._rules,n=q(e,["newBounds","shape","delta","direction"]);return t.allowed("shape.resize",n)},gs.prototype.activate=function(e,t,n){var o,r,i=this._dragging;if("string"==typeof n&&(n={direction:n}),!(r=(o=W({shape:t},n)).direction))throw new Error("must provide a direction (n|w|s|e|nw|se|ne|sw)");i.init(e,vs(t,r),"resize",{autoActivate:!0,cursor:ys(r),data:{shape:t,context:o}})},gs.prototype.computeMinResizeBox=function(e){var t,n,o,r,i,s,a,c=e.shape;return t=e.direction,n=c,o=e.minDimensions||{width:10,height:10},r=function(e,t){var n;if((n=void 0===e.length?B(e.children,fs):e).length)return function(e,t){var n,o,r,i;return"object"==typeof t?(n=hs(t.left),o=hs(t.right),r=hs(t.top),i=hs(t.bottom)):n=o=r=i=hs(t),{x:e.x-n,y:e.y-r,width:e.width+n+o,height:e.height+r+i}}(we(n),t)}(c,e.childrenBoxPadding),i=Kt(n),s={top:/n/.test(t)?i.bottom-o.height:i.top,left:/w/.test(t)?i.right-o.width:i.left,bottom:/s/.test(t)?i.top+o.height:i.bottom,right:/e/.test(t)?i.left+o.width:i.right},a=r?Kt(r):s,Zt({top:ds(s.top,a.top),left:ds(s.left,a.left),bottom:us(s.bottom,a.bottom),right:us(s.right,a.right)})},gs.$inject=["eventBus","rules","modeling","dragging"];var ms="djs-resizing",As="resize-not-ok";function xs(e,t,n){e.on("resize.move",500,function(e){var o,r,i,s;r=(o=e.context).shape,i=o.newBounds,(s=o.frame)||(s=o.frame=n.addFrame(r,t.getActiveLayer()),t.addMarker(r,ms)),i.width>5&&X(s,{x:i.x,width:i.width}),i.height>5&&X(s,{y:i.y,height:i.height}),o.canExecute?Z(s).remove(As):Z(s).add(As)}),e.on("resize.cleanup",function(e){var n,o;o=(n=e.context).shape,n.frame&&ce(n.frame),t.removeMarker(o,ms)})}xs.$inject=["eventBus","canvas","previewSupport"];var _s="djs-resizer",Es=["n","w","s","e","nw","ne","se","sw"];function bs(e,t,n,o){this._resize=o,this._canvas=t;var r=this;e.on("selection.changed",function(e){var t=e.newSelection;r.removeResizers(),1===t.length&&S(t,N(r.addResizer,r))}),e.on("shape.changed",function(e){var t=e.element;n.isSelected(t)&&(r.removeResizers(),r.addResizer(t))})}bs.prototype.makeDraggable=function(e,t,n){var o=this._resize;function r(t){Hn(t)&&o.activate(t,e,n)}Ke.bind(t,"mousedown",r),Ke.bind(t,"touchstart",r)},bs.prototype._createResizer=function(e,t,n,o){var r=this._getResizersParent(),i=function(e){var t={x:0,y:0};return-1!==e.indexOf("e")?t.x=6:-1!==e.indexOf("w")&&(t.x=-6),-1!==e.indexOf("s")?t.y=6:-1!==e.indexOf("n")&&(t.y=-6),t}(o),s=oe("g");Z(s).add(_s),Z(s).add(_s+"-"+e.id),Z(s).add(_s+"-"+o),G(r,s);var a=oe("rect");X(a,{x:-4+i.x,y:-4+i.y,width:8,height:8}),Z(a).add(_s+"-visual"),G(s,a);var c=oe("rect");return X(c,{x:-10+i.x,y:-10+i.y,width:20,height:20}),Z(c).add(_s+"-hit"),G(s,c),function(e,t,n){var o=ae();o.setTranslate(t,n);var r=ae();r.setRotate(0,0,0);var i=ae();i.setScale(1,1),ue(e,[o,r,i])}(s,t,n),s},bs.prototype.createResizer=function(e,t){var n=vs(e,t),o=this._createResizer(e,n.x,n.y,t);this.makeDraggable(e,o,t)},bs.prototype.addResizer=function(e){var t=this;!Ut(e)&&this._resize.canResize({shape:e})&&S(Es,function(n){t.createResizer(e,n)})},bs.prototype.removeResizers=function(){J(this._getResizersParent())},bs.prototype._getResizersParent=function(){return this._canvas.getLayer("resizers")},bs.$inject=["eventBus","canvas","selection","resize"];const ws={__depends__:[ho,uo,xr],__init__:["resize","resizePreview","resizeHandles"],resize:["type",gs],resizePreview:["type",xs],resizeHandles:["type",bs]};function Cs(e){return Math.log(e)/Math.log(10)}function ks(e,t){var n=Cs(e.min),o=Cs(e.max);return(Math.abs(n)+Math.abs(o))/t}var js=Math.sign||function(e){return e>=0?1:-1},Bs={min:.2,max:4};function Ss(e,t,n){e=e||{},this._enabled=!1,this._canvas=n,this._container=n._container,this._handleWheel=N(this._handleWheel,this),this._totalDelta=0,this._scale=e.scale||.75;var o=this;t.on("canvas.focus.changed",function(t){o._init(t.focused&&!1!==e.enabled)})}Ss.$inject=["config.zoomScroll","eventBus","canvas"],Ss.prototype.scroll=function(e){this._canvas.scroll(e)},Ss.prototype.reset=function(){this._canvas.zoom("fit-viewport")},Ss.prototype.zoom=function(e,t){var n=ks(Bs,20);this._totalDelta+=e,Math.abs(this._totalDelta)>.1&&(this._zoom(e,t,n),this._totalDelta=0)},Ss.prototype._handleWheel=function(e){if(this._canvas.isFocused()){var t=this._container;e.preventDefault();var n,o=e.ctrlKey||Ln()&&e.metaKey,r=e.shiftKey,i=-1*this._scale;if(i*=o?0===e.deltaMode?.02:.32:0===e.deltaMode?1:16,o){var s=t.getBoundingClientRect(),a={x:e.clientX-s.left,y:e.clientY-s.top};n=Math.sqrt(Math.pow(e.deltaY,2)+Math.pow(e.deltaX,2))*js(e.deltaY)*i,this.zoom(n,a)}else n=r?{dx:i*e.deltaY,dy:0}:{dx:i*e.deltaX,dy:i*e.deltaY},this.scroll(n)}},Ss.prototype.stepZoom=function(e,t){var n=ks(Bs,10);this._zoom(e,t,n)},Ss.prototype._zoom=function(e,t,n){var o=this._canvas,r=e>0?1:-1,i=Cs(o.zoom()),s=Math.round(i/n)*n;s+=n*r;var a,c,l=Math.pow(10,s);o.zoom((a=Bs,c=l,Math.max(a.min,Math.min(a.max,c))),t)},Ss.prototype.toggle=function(e){var t=this._container,n=this._handleWheel,o=this._enabled;return void 0===e&&(e=!o),o!==e&&Ke[e?"bind":"unbind"](t,"wheel",n,!1),this._enabled=e,e},Ss.prototype._init=function(e){this.toggle(e)};const Ds={__init__:["zoomScroll"],zoomScroll:["type",Ss]};var Ms=Math.abs,zs=Math.round,Os={x:"width",y:"height"},Ps="crosshair",$s={n:"top",w:"left",s:"bottom",e:"right"},Rs={n:"s",w:"e",s:"n",e:"w"};function Ts(e,t,n,o,r,i,s){this._canvas=e,this._dragging=t,this._eventBus=n,this._modeling=o,this._rules=r,this._toolManager=i,this._mouse=s;var a=this;i.registerTool("space",{tool:"spaceTool.selection",dragging:"spaceTool"}),n.on("spaceTool.selection.end",function(e){n.once("spaceTool.selection.ended",function(){a.activateMakeSpace(e.originalEvent)})}),n.on("spaceTool.move",1500,function(e){var t=e.context,n=t.initialized;n||(n=t.initialized=a.init(e,t)),n&&Ls(e)}),n.on("spaceTool.end",function(e){var t=e.context,o=t.axis,r=t.direction,i=t.movingShapes,s=t.resizingShapes,c=t.start;if(t.initialized){Ls(e);var l={x:0,y:0};l[o]=zs(e["d"+o]),a.makeSpace(i,s,l,r,c),n.once("spaceTool.ended",function(e){a.activateSelection(e.originalEvent,!0,!0)})}})}function Fs(e){return{top:e.top-20,right:e.right+20,bottom:e.bottom+20,left:e.left-20}}function Ls(e){var t,n,o=e.context.spaceToolConstraints;o&&(b(o.left)&&(t=Math.max(e.x,o.left),e.dx=e.dx+t-e.x,e.x=t),b(o.right)&&(t=Math.min(e.x,o.right),e.dx=e.dx+t-e.x,e.x=t),b(o.top)&&(n=Math.max(e.y,o.top),e.dy=e.dy+n-e.y,e.y=n),b(o.bottom)&&(n=Math.min(e.y,o.bottom),e.dy=e.dy+n-e.y,e.y=n))}function Is(e,t){return-1!==e.indexOf(t)}Ts.$inject=["canvas","dragging","eventBus","modeling","rules","toolManager","mouse"],Ts.prototype.activateSelection=function(e,t,n){this._dragging.init(e,"spaceTool.selection",{autoActivate:t,cursor:Ps,data:{context:{reactivate:n}},trapClick:!1})},Ts.prototype.activateMakeSpace=function(e){this._dragging.init(e,"spaceTool",{autoActivate:!0,cursor:Ps,data:{context:{}}})},Ts.prototype.makeSpace=function(e,t,n,o,r){return this._modeling.createSpace(e,t,n,o,r)},Ts.prototype.init=function(e,t){var n=Ms(e.dx)>Ms(e.dy)?"x":"y",o=e["d"+n],r=e[n]-o;if(Ms(o)<5)return!1;o<0&&(o*=-1),function(e){var t=Pn(e)||e;return!!Hn(e)&&(Ln()?t.metaKey:t.ctrlKey)}(e)&&(o*=-1);var i=function(e,t){if("x"===e){if(t>0)return"e";if(t<0)return"w"}if("y"===e){if(t>0)return"s";if(t<0)return"n"}return null}(n,o),s=this._canvas.getRootElement();!Nn(e)&&e.hover&&(s=e.hover);var a=[...be(s,!0),...s.attachers||[]],c=this.calculateAdjustments(a,n,o,r),l=function(e,t,n,o,r){var i=e.movingShapes,s=e.resizingShapes;if(s.length){var a,c,l={};return S(s,function(e){var u,d,p,h,f,g,v=e.attachers,y=e.children,m=Kt(e),A=B(y,function(e){return!(Ut(e)||Yt(e)||Is(i,e)||Is(s,e))}),x=B(y,function(e){return!Ut(e)&&!Yt(e)&&Is(i,e)}),_=[],E=[];A.length&&(d=Fs(Kt(we(A))),u=o-m[$s[n]]+d[$s[n]],"n"===n?l.bottom=c=b(c)?Math.min(c,u):u:"w"===n?l.right=c=b(c)?Math.min(c,u):u:"s"===n?l.top=a=b(a)?Math.max(a,u):u:"e"===n&&(l.left=a=b(a)?Math.max(a,u):u)),x.length&&(p=Fs(Kt(we(x))),u=o-p[$s[Rs[n]]]+m[$s[Rs[n]]],"n"===n?l.bottom=c=b(c)?Math.min(c,u):u:"w"===n?l.right=c=b(c)?Math.min(c,u):u:"s"===n?l.top=a=b(a)?Math.max(a,u):u:"e"===n&&(l.left=a=b(a)?Math.max(a,u):u)),v&&v.length&&(v.forEach(function(e){Is(i,e)?_.push(e):E.push(e)}),_.length&&(h=Kt(we(_.map(Qt))),f=m[$s[Rs[n]]]-(h[$s[Rs[n]]]-o)),E.length&&(g=Kt(we(E.map(Qt)))[$s[n]]-(m[$s[n]]-o)),"n"===n?(u=Math.min(f||1/0,g||1/0),l.bottom=c=b(c)?Math.min(c,u):u):"w"===n?(u=Math.min(f||1/0,g||1/0),l.right=c=b(c)?Math.min(c,u):u):"s"===n?(u=Math.max(f||-1/0,g||-1/0),l.top=a=b(a)?Math.max(a,u):u):"e"===n&&(u=Math.max(f||-1/0,g||-1/0),l.left=a=b(a)?Math.max(a,u):u));var w=r&&r[e.id];w&&("n"===n?(u=o+e[Os[t]]-w[Os[t]],l.bottom=c=b(c)?Math.min(c,u):u):"w"===n?(u=o+e[Os[t]]-w[Os[t]],l.right=c=b(c)?Math.min(c,u):u):"s"===n?(u=o-e[Os[t]]+w[Os[t]],l.top=a=b(a)?Math.max(a,u):u):"e"===n&&(u=o-e[Os[t]]+w[Os[t]],l.left=a=b(a)?Math.max(a,u):u))}),l}}(c,n,i,r,this._eventBus.fire("spaceTool.getMinDimensions",{axis:n,direction:i,shapes:c.resizingShapes,start:r}));return W(t,c,{axis:n,direction:i,spaceToolConstraints:l,start:r}),to("resize-"+("x"===n?"ew":"ns")),!0},Ts.prototype.calculateAdjustments=function(e,t,n,o){var r=this._rules,i=[],s=[],a=[],c=[];function l(e){i.includes(e)||i.push(e);var t=e.label;t&&!i.includes(t)&&i.push(t)}S(e,function(e){if(e.parent&&!Yt(e))if(Ut(e))c.push(e);else{var i=e[t],u=i+e[Os[t]];if(function(e){return!!e.host}(e)&&(n>0&&Qt(e)[t]>o||n<0&&Qt(e)[t]<o))a.push(e);else{var d;if(!(n>0&&i>o||n<0&&u<o))return i<o&&u>o&&r.allowed("shape.resize",{shape:e})?(d=e,void(s.includes(d)||s.push(d))):void 0;l(e)}}}),S(i,function(e){var t=e.attachers;t&&S(t,function(e){l(e)})});var u=i.concat(s);return S(a,function(e){var t=e.host;Is(u,t)&&l(e)}),u=i.concat(s),S(c,function(e){var t=e.source,n=e.target,o=e.label;Is(u,t)&&Is(u,n)&&o&&l(o)}),{movingShapes:i,resizingShapes:s}},Ts.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)},Ts.prototype.isActive=function(){var e=this._dragging.context();return!!e&&/^spaceTool/.test(e.prefix)};var Hs="djs-dragging",Ns="djs-resizing",Ws=Math.max;function qs(e,t,n,o,r){function i(e,t){S(e,function(e){r.addDragger(e,t),n.addMarker(e,Hs)})}e.on("spaceTool.selection.start",function(e){var t=n.getLayer("space"),r=e.context,i=oe("g");X(i,o.cls("djs-crosshair-group",["no-events"])),G(t,i);var s=oe("path");X(s,"d","M 0,-10000 L 0,10000"),Z(s).add("djs-crosshair"),G(i,s);var a=oe("path");X(a,"d","M -10000,0 L 10000,0"),Z(a).add("djs-crosshair"),G(i,a),r.crosshairGroup=i}),e.on("spaceTool.selection.move",function(e){Bn(e.context.crosshairGroup,e.x,e.y)}),e.on("spaceTool.selection.cleanup",function(e){var t=e.context.crosshairGroup;t&&ce(t)}),e.on("spaceTool.move",250,function(e){var s=e.context,a=s.line,c=s.axis,l=s.movingShapes,u=s.resizingShapes;if(s.initialized){if(!s.dragGroup){var d=n.getLayer("space");X(a=oe("path"),"d","M0,0 L0,0"),Z(a).add("djs-crosshair"),G(d,a),s.line=a;var p=oe("g");X(p,o.cls("djs-drag-group",["no-events"])),G(n.getActiveLayer(),p),i(l,p),i(s.movingConnections=t.filter(function(e){var t=!1;S(l,function(n){S(n.outgoing,function(n){e===n&&(t=!0)})});var n=!1;S(l,function(t){S(t.incoming,function(t){e===t&&(n=!0)})});var o=!1;S(u,function(t){S(t.outgoing,function(t){e===t&&(o=!0)})});var r=!1;return S(u,function(t){S(t.incoming,function(t){e===t&&(r=!0)})}),Ut(e)&&(t||o)&&(n||r)}),p),s.dragGroup=p}if(!s.frameGroup){var h=oe("g");X(h,o.cls("djs-frame-group",["no-events"])),G(n.getActiveLayer(),h);var f=[];S(u,function(e){var t=r.addFrame(e,h),o=t.getBBox();f.push({element:t,initialBounds:o}),n.addMarker(e,Ns)}),s.frameGroup=h,s.frames=f}X(a,{d:{x:"M"+e.x+", -10000 L"+e.x+", 10000",y:"M -10000, "+e.y+" L 10000, "+e.y}[c]});var g={x:e.dx,y:e.dy};g[{x:"y",y:"x"}[s.axis]]=0,Bn(s.dragGroup,g.x,g.y),S(s.frames,function(e){var t,n,o=e.element,r=e.initialBounds;"e"===s.direction?X(o,{width:Ws(r.width+g.x,5)}):X(o,{width:t=Ws(r.width-g.x,5),x:r.x+r.width-t}),"s"===s.direction?X(o,{height:Ws(r.height+g.y,5)}):X(o,{height:n=Ws(r.height-g.y,5),y:r.y+r.height-n})})}}),e.on("spaceTool.cleanup",function(e){var t=e.context,o=t.movingShapes,r=t.movingConnections,i=t.resizingShapes,s=t.line,a=t.dragGroup,c=t.frameGroup;S(o,function(e){n.removeMarker(e,Hs)}),S(r,function(e){n.removeMarker(e,Hs)}),a&&(ce(s),ce(a)),S(i,function(e){n.removeMarker(e,Ns)}),c&&ce(c)})}qs.$inject=["eventBus","elementRegistry","canvas","styles","previewSupport"];const Vs={__init__:["spaceToolPreview"],__depends__:[uo,ho,zr,xr,Pr],spaceTool:["type",Ts],spaceToolPreview:["type",qs]};var Gs,Us,Ys,Xs,Ks,Zs,Qs,Js,ea,ta,na,oa={},ra=[],ia=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,sa=Array.isArray;function aa(e,t){for(var n in t)e[n]=t[n];return e}function ca(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function la(e,t,n){var o,r,i,s={};for(i in t)"key"==i?o=t[i]:"ref"==i?r=t[i]:s[i]=t[i];if(arguments.length>2&&(s.children=arguments.length>3?Gs.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(i in e.defaultProps)void 0===s[i]&&(s[i]=e.defaultProps[i]);return ua(e,s,o,r,null)}function ua(e,t,n,o,r){var i={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==r?++Ys:r,__i:-1,__u:0};return null==r&&null!=Us.vnode&&Us.vnode(i),i}function da(e){return e.children}function pa(e,t){this.props=e,this.context=t}function ha(e,t){if(null==t)return e.__?ha(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?ha(e):null}function fa(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return fa(e)}}function ga(e){(!e.__d&&(e.__d=!0)&&Xs.push(e)&&!va.__r++||Ks!=Us.debounceRendering)&&((Ks=Us.debounceRendering)||Zs)(va)}function va(){for(var e,t,n,o,r,i,s,a=1;Xs.length;)Xs.length>a&&Xs.sort(Qs),e=Xs.shift(),a=Xs.length,e.__d&&(n=void 0,o=void 0,r=(o=(t=e).__v).__e,i=[],s=[],t.__P&&((n=aa({},o)).__v=o.__v+1,Us.vnode&&Us.vnode(n),wa(t.__P,n,o,t.__n,t.__P.namespaceURI,32&o.__u?[r]:null,i,null==r?ha(o):r,!!(32&o.__u),s),n.__v=o.__v,n.__.__k[n.__i]=n,ka(i,n,s),o.__e=o.__=null,n.__e!=r&&fa(n)));va.__r=0}function ya(e,t,n,o,r,i,s,a,c,l,u){var d,p,h,f,g,v,y,m=o&&o.__k||ra,A=t.length;for(c=ma(n,t,m,c,A),d=0;d<A;d++)null!=(h=n.__k[d])&&(p=-1==h.__i?oa:m[h.__i]||oa,h.__i=d,v=wa(e,h,p,r,i,s,a,c,l,u),f=h.__e,h.ref&&p.ref!=h.ref&&(p.ref&&Sa(p.ref,null,h),u.push(h.ref,h.__c||f,h)),null==g&&null!=f&&(g=f),(y=!!(4&h.__u))||p.__k===h.__k?c=Aa(h,c,e,y):"function"==typeof h.type&&void 0!==v?c=v:f&&(c=f.nextSibling),h.__u&=-7);return n.__e=g,c}function ma(e,t,n,o,r){var i,s,a,c,l,u=n.length,d=u,p=0;for(e.__k=new Array(r),i=0;i<r;i++)null!=(s=t[i])&&"boolean"!=typeof s&&"function"!=typeof s?(c=i+p,(s=e.__k[i]="string"==typeof s||"number"==typeof s||"bigint"==typeof s||s.constructor==String?ua(null,s,null,null,null):sa(s)?ua(da,{children:s},null,null,null):null==s.constructor&&s.__b>0?ua(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s).__=e,s.__b=e.__b+1,a=null,-1!=(l=s.__i=xa(s,n,c,d))&&(d--,(a=n[l])&&(a.__u|=2)),null==a||null==a.__v?(-1==l&&(r>u?p--:r<u&&p++),"function"!=typeof s.type&&(s.__u|=4)):l!=c&&(l==c-1?p--:l==c+1?p++:(l>c?p--:p++,s.__u|=4))):e.__k[i]=null;if(d)for(i=0;i<u;i++)null!=(a=n[i])&&!(2&a.__u)&&(a.__e==o&&(o=ha(a)),Da(a,a));return o}function Aa(e,t,n,o){var r,i;if("function"==typeof e.type){for(r=e.__k,i=0;r&&i<r.length;i++)r[i]&&(r[i].__=e,t=Aa(r[i],t,n,o));return t}e.__e!=t&&(o&&(t&&e.type&&!t.parentNode&&(t=ha(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do{t=t&&t.nextSibling}while(null!=t&&8==t.nodeType);return t}function xa(e,t,n,o){var r,i,s,a=e.key,c=e.type,l=t[n],u=null!=l&&!(2&l.__u);if(null===l&&null==e.key||u&&a==l.key&&c==l.type)return n;if(o>(u?1:0))for(r=n-1,i=n+1;r>=0||i<t.length;)if(null!=(l=t[s=r>=0?r--:i++])&&!(2&l.__u)&&a==l.key&&c==l.type)return s;return-1}function _a(e,t,n){"-"==t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||ia.test(t)?n:n+"px"}function Ea(e,t,n,o,r){var i,s;e:if("style"==t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof o&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||_a(e.style,t,"");if(n)for(t in n)o&&n[t]==o[t]||_a(e.style,t,n[t])}else if("o"==t[0]&&"n"==t[1])i=t!=(t=t.replace(Js,"$1")),s=t.toLowerCase(),t=s in e||"onFocusOut"==t||"onFocusIn"==t?s.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?o?n.u=o.u:(n.u=ea,e.addEventListener(t,i?na:ta,i)):e.removeEventListener(t,i?na:ta,i);else{if("http://www.w3.org/2000/svg"==r)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!=t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==n?"":n))}}function ba(e){return function(t){if(this.l){var n=this.l[t.type+e];if(null==t.t)t.t=ea++;else if(t.t<n.u)return;return n(Us.event?Us.event(t):t)}}}function wa(e,t,n,o,r,i,s,a,c,l){var u,d,p,h,f,g,v,y,m,A,x,_,E,b,w,C,k,j=t.type;if(null!=t.constructor)return null;128&n.__u&&(c=!!(32&n.__u),i=[a=t.__e=n.__e]),(u=Us.__b)&&u(t);e:if("function"==typeof j)try{if(y=t.props,m="prototype"in j&&j.prototype.render,A=(u=j.contextType)&&o[u.__c],x=u?A?A.props.value:u.__:o,n.__c?v=(d=t.__c=n.__c).__=d.__E:(m?t.__c=d=new j(y,x):(t.__c=d=new pa(y,x),d.constructor=j,d.render=Ma),A&&A.sub(d),d.props=y,d.state||(d.state={}),d.context=x,d.__n=o,p=d.__d=!0,d.__h=[],d._sb=[]),m&&null==d.__s&&(d.__s=d.state),m&&null!=j.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=aa({},d.__s)),aa(d.__s,j.getDerivedStateFromProps(y,d.__s))),h=d.props,f=d.state,d.__v=t,p)m&&null==j.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),m&&null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(m&&null==j.getDerivedStateFromProps&&y!==h&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(y,x),!d.__e&&null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(y,d.__s,x)||t.__v==n.__v){for(t.__v!=n.__v&&(d.props=y,d.state=d.__s,d.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(e){e&&(e.__=t)}),_=0;_<d._sb.length;_++)d.__h.push(d._sb[_]);d._sb=[],d.__h.length&&s.push(d);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(y,d.__s,x),m&&null!=d.componentDidUpdate&&d.__h.push(function(){d.componentDidUpdate(h,f,g)})}if(d.context=x,d.props=y,d.__P=e,d.__e=!1,E=Us.__r,b=0,m){for(d.state=d.__s,d.__d=!1,E&&E(t),u=d.render(d.props,d.state,d.context),w=0;w<d._sb.length;w++)d.__h.push(d._sb[w]);d._sb=[]}else do{d.__d=!1,E&&E(t),u=d.render(d.props,d.state,d.context),d.state=d.__s}while(d.__d&&++b<25);d.state=d.__s,null!=d.getChildContext&&(o=aa(aa({},o),d.getChildContext())),m&&!p&&null!=d.getSnapshotBeforeUpdate&&(g=d.getSnapshotBeforeUpdate(h,f)),C=u,null!=u&&u.type===da&&null==u.key&&(C=ja(u.props.children)),a=ya(e,sa(C)?C:[C],t,n,o,r,i,s,a,c,l),d.base=t.__e,t.__u&=-161,d.__h.length&&s.push(d),v&&(d.__E=d.__=null)}catch(e){if(t.__v=null,c||null!=i)if(e.then){for(t.__u|=c?160:128;a&&8==a.nodeType&&a.nextSibling;)a=a.nextSibling;i[i.indexOf(a)]=null,t.__e=a}else{for(k=i.length;k--;)ca(i[k]);Ca(t)}else t.__e=n.__e,t.__k=n.__k,e.then||Ca(t);Us.__e(e,t,n)}else null==i&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):a=t.__e=Ba(n.__e,t,n,o,r,i,s,c,l);return(u=Us.diffed)&&u(t),128&t.__u?void 0:a}function Ca(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(Ca)}function ka(e,t,n){for(var o=0;o<n.length;o++)Sa(n[o],n[++o],n[++o]);Us.__c&&Us.__c(t,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(e){e.call(t)})}catch(e){Us.__e(e,t.__v)}})}function ja(e){return"object"!=typeof e||null==e||e.__b&&e.__b>0?e:sa(e)?e.map(ja):aa({},e)}function Ba(e,t,n,o,r,i,s,a,c){var l,u,d,p,h,f,g,v=n.props,y=t.props,m=t.type;if("svg"==m?r="http://www.w3.org/2000/svg":"math"==m?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),null!=i)for(l=0;l<i.length;l++)if((h=i[l])&&"setAttribute"in h==!!m&&(m?h.localName==m:3==h.nodeType)){e=h,i[l]=null;break}if(null==e){if(null==m)return document.createTextNode(y);e=document.createElementNS(r,m,y.is&&y),a&&(Us.__m&&Us.__m(t,i),a=!1),i=null}if(null==m)v===y||a&&e.data==y||(e.data=y);else{if(i=i&&Gs.call(e.childNodes),v=n.props||oa,!a&&null!=i)for(v={},l=0;l<e.attributes.length;l++)v[(h=e.attributes[l]).name]=h.value;for(l in v)if(h=v[l],"children"==l);else if("dangerouslySetInnerHTML"==l)d=h;else if(!(l in y)){if("value"==l&&"defaultValue"in y||"checked"==l&&"defaultChecked"in y)continue;Ea(e,l,null,h,r)}for(l in y)h=y[l],"children"==l?p=h:"dangerouslySetInnerHTML"==l?u=h:"value"==l?f=h:"checked"==l?g=h:a&&"function"!=typeof h||v[l]===h||Ea(e,l,h,v[l],r);if(u)a||d&&(u.__html==d.__html||u.__html==e.innerHTML)||(e.innerHTML=u.__html),t.__k=[];else if(d&&(e.innerHTML=""),ya("template"==t.type?e.content:e,sa(p)?p:[p],t,n,o,"foreignObject"==m?"http://www.w3.org/1999/xhtml":r,i,s,i?i[0]:n.__k&&ha(n,0),a,c),null!=i)for(l=i.length;l--;)ca(i[l]);a||(l="value","progress"==m&&null==f?e.removeAttribute("value"):null!=f&&(f!==e[l]||"progress"==m&&!f||"option"==m&&f!=v[l])&&Ea(e,l,f,v[l],r),l="checked",null!=g&&g!=e[l]&&Ea(e,l,g,v[l],r))}return e}function Sa(e,t,n){try{if("function"==typeof e){var o="function"==typeof e.__u;o&&e.__u(),o&&null==t||(e.__u=e(t))}else e.current=t}catch(e){Us.__e(e,n)}}function Da(e,t,n){var o,r;if(Us.unmount&&Us.unmount(e),(o=e.ref)&&(o.current&&o.current!=e.__e||Sa(o,null,t)),null!=(o=e.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(e){Us.__e(e,t)}o.base=o.__P=null}if(o=e.__k)for(r=0;r<o.length;r++)o[r]&&Da(o[r],t,n||"function"!=typeof e.type);n||ca(e.__e),e.__c=e.__=e.__e=void 0}function Ma(e,t,n){return this.constructor(e,n)}function za(e,t,n){var o,r,i,s;t==document&&(t=document.documentElement),Us.__&&Us.__(e,t),r=(o="function"==typeof n)?null:n&&n.__k||t.__k,i=[],s=[],wa(t,e=(!o&&n||t).__k=la(da,null,[e]),r||oa,oa,t.namespaceURI,!o&&n?[n]:r?null:t.firstChild?Gs.call(t.childNodes):null,i,!o&&n?n:r?r.__e:t.firstChild,o,s),ka(i,e,s)}Gs=ra.slice,Us={__e:function(e,t,n,o){for(var r,i,s;t=t.__;)if((r=t.__c)&&!r.__)try{if((i=r.constructor)&&null!=i.getDerivedStateFromError&&(r.setState(i.getDerivedStateFromError(e)),s=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(e,o||{}),s=r.__d),s)return r.__E=r}catch(t){e=t}throw e}},Ys=0,pa.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!=this.state?this.__s:this.__s=aa({},this.state),"function"==typeof e&&(e=e(aa({},n),this.props)),e&&aa(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),ga(this))},pa.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),ga(this))},pa.prototype.render=da,Xs=[],Zs="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Qs=function(e,t){return e.__v.__b-t.__v.__b},va.__r=0,Js=/(PointerCapture)$|Capture$/i,ea=0,ta=ba(!1),na=ba(!0);var Oa,Pa,$a,Ra,Ta=function(e,t,n,o){var r;t[0]=0;for(var i=1;i<t.length;i++){var s=t[i++],a=t[i]?(t[0]|=s?1:2,n[t[i++]]):t[++i];3===s?o[0]=a:4===s?o[1]=Object.assign(o[1]||{},a):5===s?(o[1]=o[1]||{})[t[++i]]=a:6===s?o[1][t[++i]]+=a+"":s?(r=e.apply(a,Ta(e,a,n,["",null])),o.push(r),a[0]?t[0]|=2:(t[i-2]=0,t[i]=r)):o.push(a)}return o},Fa=new Map,La=function(e){var t=Fa.get(this);return t||(t=new Map,Fa.set(this,t)),(t=Ta(this,t.get(e)||(t.set(e,t=function(e){for(var t,n,o=1,r="",i="",s=[0],a=function(e){1===o&&(e||(r=r.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?s.push(0,e,r):3===o&&(e||r)?(s.push(3,e,r),o=2):2===o&&"..."===r&&e?s.push(4,e,0):2===o&&r&&!e?s.push(5,0,!0,r):o>=5&&((r||!e&&5===o)&&(s.push(o,0,r,n),o=6),e&&(s.push(o,e,0,n),o=6)),r=""},c=0;c<e.length;c++){c&&(1===o&&a(),a(c));for(var l=0;l<e[c].length;l++)t=e[c][l],1===o?"<"===t?(a(),s=[s],o=3):r+=t:4===o?"--"===r&&">"===t?(o=1,r=""):r=t+r[0]:i?t===i?i="":r+=t:'"'===t||"'"===t?i=t:">"===t?(a(),o=1):o&&("="===t?(o=5,n=r,r=""):"/"===t&&(o<5||">"===e[c][l+1])?(a(),3===o&&(s=s[0]),o=s,(s=s[0]).push(2,0,o),o=0):" "===t||"\t"===t||"\n"===t||"\r"===t?(a(),o=2):r+=t),3===o&&"!--"===r&&(o=4,s=s[0])}return a(),s}(e)),t),arguments,[])).length>1?t:t[0]}.bind(la),Ia=0,Ha=[],Na=Us,Wa=Na.__b,qa=Na.__r,Va=Na.diffed,Ga=Na.__c,Ua=Na.unmount,Ya=Na.__;function Xa(e,t){Na.__h&&Na.__h(Pa,e,Ia||t),Ia=0;var n=Pa.__H||(Pa.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function Ka(e){return Ia=1,function(e,t){var n=Xa(Oa++,2);if(n.t=e,!n.__c&&(n.__=[cc(void 0,t),function(e){var t=n.__N?n.__N[0]:n.__[0],o=n.t(t,e);t!==o&&(n.__N=[o,n.__[1]],n.__c.setState({}))}],n.__c=Pa,!Pa.__f)){var o=function(e,t,o){if(!n.__c.__H)return!0;var i=n.__c.__H.__.filter(function(e){return!!e.__c});if(i.every(function(e){return!e.__N}))return!r||r.call(this,e,t,o);var s=n.__c.props!==e;return i.forEach(function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(s=!0)}}),r&&r.call(this,e,t,o)||s};Pa.__f=!0;var r=Pa.shouldComponentUpdate,i=Pa.componentWillUpdate;Pa.componentWillUpdate=function(e,t,n){if(this.__e){var s=r;r=void 0,o(e,t,n),r=s}i&&i.call(this,e,t,n)},Pa.shouldComponentUpdate=o}return n.__N||n.__}(cc,e)}function Za(e,t){var n=Xa(Oa++,3);!Na.__s&&ac(n.__H,t)&&(n.__=e,n.u=t,Pa.__H.__h.push(n))}function Qa(e,t){var n=Xa(Oa++,4);!Na.__s&&ac(n.__H,t)&&(n.__=e,n.u=t,Pa.__h.push(n))}function Ja(e){return Ia=5,ec(function(){return{current:e}},[])}function ec(e,t){var n=Xa(Oa++,7);return ac(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function tc(e,t){return Ia=8,ec(function(){return e},t)}function nc(){for(var e;e=Ha.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(ic),e.__H.__h.forEach(sc),e.__H.__h=[]}catch(t){e.__H.__h=[],Na.__e(t,e.__v)}}Na.__b=function(e){Pa=null,Wa&&Wa(e)},Na.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Ya&&Ya(e,t)},Na.__r=function(e){qa&&qa(e),Oa=0;var t=(Pa=e.__c).__H;t&&($a===Pa?(t.__h=[],Pa.__h=[],t.__.forEach(function(e){e.__N&&(e.__=e.__N),e.u=e.__N=void 0})):(t.__h.forEach(ic),t.__h.forEach(sc),t.__h=[],Oa=0)),$a=Pa},Na.diffed=function(e){Va&&Va(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==Ha.push(t)&&Ra===Na.requestAnimationFrame||((Ra=Na.requestAnimationFrame)||rc)(nc)),t.__H.__.forEach(function(e){e.u&&(e.__H=e.u),e.u=void 0})),$a=Pa=null},Na.__c=function(e,t){t.some(function(e){try{e.__h.forEach(ic),e.__h=e.__h.filter(function(e){return!e.__||sc(e)})}catch(n){t.some(function(e){e.__h&&(e.__h=[])}),t=[],Na.__e(n,e.__v)}}),Ga&&Ga(e,t)},Na.unmount=function(e){Ua&&Ua(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(e){try{ic(e)}catch(e){t=e}}),n.__H=void 0,t&&Na.__e(t,n.__v))};var oc="function"==typeof requestAnimationFrame;function rc(e){var t,n=function(){clearTimeout(o),oc&&cancelAnimationFrame(t),setTimeout(e)},o=setTimeout(n,35);oc&&(t=requestAnimationFrame(n))}function ic(e){var t=Pa,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),Pa=t}function sc(e){var t=Pa;e.__c=e.__(),Pa=t}function ac(e,t){return!e||e.length!==t.length||t.some(function(t,n){return t!==e[n]})}function cc(e,t){return"function"==typeof t?t(e):t}function lc(e){var t,n,o="";if("string"==typeof e||"number"==typeof e)o+=e;else if("object"==typeof e)if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=lc(e[t]))&&(o&&(o+=" "),o+=n)}else for(n in e)e[n]&&(o&&(o+=" "),o+=n);return o}const uc=function(){for(var e,t,n=0,o="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=lc(e))&&(o&&(o+=" "),o+=t);return o};function dc(e){const{headerEntries:t,onSelect:n,selectedEntry:o,setSelectedEntry:r,title:i}=e,s=ec(()=>t.reduce((e,t)=>{const n=t.group||"default",o=e.find(e=>e.id===n);return o?o.entries.push(t):e.push({id:n,entries:[t]}),e},[]),[t]);return La`
    <div class="djs-popup-header">
      <h3 class="djs-popup-title" title=${i}>${i}</h3>
      ${s.map(e=>La`
        <ul key=${e.id} class="djs-popup-header-group" data-header-group=${e.id}>

          ${e.entries.map(e=>La`
            <li key=${e.id}>
              <${e.action?"button":"span"}
                class=${function(e,t){return uc("entry",e.className,e.active?"active":"",e.disabled?"disabled":"",t?"selected":"")}(e,e===o)}
                onClick=${t=>e.action&&n(t,e)}
                title=${e.title||e.label}
                data-id=${e.id}
                onMouseEnter=${()=>e.action&&r(e)}
                onMouseLeave=${()=>e.action&&r(null)}
                onFocus=${()=>e.action&&r(e)}
                onBlur=${()=>e.action&&r(null)}
              >
                ${e.imageUrl&&La`<img class="djs-popup-entry-icon" src=${e.imageUrl} alt="" />`||e.imageHtml&&La`<div class="djs-popup-entry-icon" dangerouslySetInnerHTML=${{__html:e.imageHtml}} />`}
                ${e.label?La`
                  <span class="djs-popup-label">${e.label}</span>
                `:null}
              </${e.action?"button":"span"}>
            </li>
          `)}
        </ul>
      `)}
    </div>
  `}function pc(e){const{entry:t,selected:n,onMouseEnter:o,onMouseLeave:r,onAction:i}=e;return La`
    <li
      class=${uc("entry",{selected:n})}
      data-id=${t.id}
      title=${t.title||t.label}
      tabIndex="0"
      onClick=${i}
      onFocus=${o}
      onBlur=${r}
      onMouseEnter=${o}
      onMouseLeave=${r}
      onDragStart=${e=>i(e,t,"dragstart")}
      draggable=${!0}
    >
      <div class="djs-popup-entry-content">
        <span
          class=${uc("djs-popup-entry-name",t.className)}
        >
          ${t.imageUrl&&La`<img class="djs-popup-entry-icon" src=${t.imageUrl} alt="" />`||t.imageHtml&&La`<div class="djs-popup-entry-icon" dangerouslySetInnerHTML=${{__html:t.imageHtml}} />`}

          ${t.label?La`
            <span class="djs-popup-label">
              ${t.label}
            </span>
          `:null}
        </span>
        ${t.description&&La`
          <span
            class="djs-popup-entry-description"
            title=${t.description}
          >
            ${t.description}
          </span>
        `}
      </div>
      ${t.documentationRef&&La`
        <div class="djs-popup-entry-docs">
          <a
            href="${t.documentationRef}"
            onClick=${e=>e.stopPropagation()}
            title="Open element documentation"
            target="_blank"
            rel="noopener"
          >
            <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M10.6368 10.6375V5.91761H11.9995V10.6382C11.9995 10.9973 11.8623 11.3141 11.5878 11.5885C11.3134 11.863 10.9966 12.0002 10.6375 12.0002H1.36266C0.982345 12.0002 0.660159 11.8681 0.396102 11.6041C0.132044 11.34 1.52588e-05 11.0178 1.52588e-05 10.6375V1.36267C1.52588e-05 0.98236 0.132044 0.660173 0.396102 0.396116C0.660159 0.132058 0.982345 2.95639e-05 1.36266 2.95639e-05H5.91624V1.36267H1.36266V10.6375H10.6368ZM12 0H7.2794L7.27873 1.36197H9.68701L3.06507 7.98391L4.01541 8.93425L10.6373 2.31231V4.72059H12V0Z" fill="#818798"/>
            </svg>
          </a>
        </div>
      `}
    </li>
  `}function hc(e){const{selectedEntry:t,setSelectedEntry:n,groupedEntries:o,...r}=e,i=Ja();return Qa(()=>{const e=i.current;if(!e)return;const t=e.querySelector(".selected");var n;t&&("function"==typeof(n=t).scrollIntoViewIfNeeded?n.scrollIntoViewIfNeeded():n.scrollIntoView({scrollMode:"if-needed",block:"nearest"}))},[t]),La`
    <div class="djs-popup-results" ref=${i}>
      ${o.map(e=>La`
        ${e.name&&La`
          <div key=${e.id} class="entry-header" title=${e.name}>
            ${e.name}
          </div>
        `}
        <ul class="djs-popup-group" data-group=${e.id}>
          ${e.entries.map(e=>La`
            <${pc}
              key=${e.id}
              entry=${e}
              selected=${e===t}
              onMouseEnter=${()=>n(e)}
              onMouseLeave=${()=>n(null)}
              ...${r}
            />
          `)}
        </ul>
      `)}
    </div>
  `}function fc(e){const{onClose:t,onSelect:n,className:o,headerEntries:r,position:i,title:s,width:a,scale:c,search:l,emptyPlaceholder:u,searchFn:d,entries:p,onOpened:h,onClosed:f}=e,g=ec(()=>!!A(l)&&p.length>5,[l,p]),[v,y]=Ka(""),m=tc((e,t)=>{if(!g)return e;if(!t.trim())return e.filter(({rank:e=0})=>e>=0);const n=e.filter(({searchable:e})=>!1!==e);return d(n,t,{keys:["label","search","description"]}).map(({item:e})=>e)},[g]),[x,_]=Ka(m(p,v)),[E,b]=Ka(x[0]),C=ec(()=>function(e){const t=[],n=e=>t.find(t=>e.id===t.id);return e.forEach(e=>{const o=e.group?(e=>"string"==typeof e?{id:e}:e)(e.group):{id:"default"};(e=>!!n(e))(o)?n(o).entries.push(e):t.push({...o,entries:[e]})}),t}(x),[x]),k=tc(e=>{b(e[0]),_(e)},[_,b]);Za(()=>{k(m(p,v))},[v,p]);const j=tc(e=>{const t=function(e){const t=[];return e.forEach(e=>{e.entries.forEach(e=>{t.push(e)})}),t}(C);let n=t.indexOf(E)+e;n<0&&(n=t.length-1),n>=t.length&&(n=0),b(t[n])},[C,E,b]),B=tc(e=>"Enter"===e.key&&E?n(e,E):"ArrowUp"===e.key?(j(-1),e.preventDefault()):"ArrowDown"===e.key?(j(1),e.preventDefault()):void 0,[n,E,j]),S=tc(e=>{ot(e.target,"input")&&y(()=>e.target.value)},[y]);Za(()=>(h(),()=>{f()}),[]);const D=ec(()=>s||r.length>0,[s,r]);return La`
    <${gc}
      onClose=${t}
      onKeyup=${S}
      onKeydown=${B}
      className=${o}
      position=${i}
      width=${a}
      scale=${c}
    >
      ${D&&La`
        <${dc}
          headerEntries=${r}
          onSelect=${n}
          selectedEntry=${E}
          setSelectedEntry=${b}
          title=${s}
        />
      `}
      ${p.length>0&&La`
        <div class="djs-popup-body">

          ${g&&La`
          <div class="djs-popup-search">
            <svg class="djs-popup-search-icon" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z" fill="#22242A"/>
            </svg>
            <input type="text" spellcheck=${!1} aria-label="${s}" />
          </div>
          `}

          <${hc}
            groupedEntries=${C}
            selectedEntry=${E}
            setSelectedEntry=${b}
            onAction=${n}
          />
        </div>
      `}
    ${u&&0===x.length&&La`
      <div class="djs-popup-no-results">${w(u)?u(v):u}</div>
    `}
    </${gc}>
  `}function gc(e){const{onClose:t,onKeydown:n,onKeyup:o,className:r,children:i,position:s}=e,a=Ja();return Qa(()=>{if("function"!=typeof s)return;const e=a.current,t=s(e);e.style.left=`${t.x}px`,e.style.top=`${t.y}px`},[a.current,s]),Qa(()=>{const e=a.current;e&&(e.querySelector("input")||e).focus()},[]),Za(()=>{const e=e=>{if("Escape"===e.key)return e.preventDefault(),t()},n=e=>{if(!We(e.target,".djs-popup",!0))return t()};return document.documentElement.addEventListener("keydown",e),document.body.addEventListener("click",n),()=>{document.documentElement.removeEventListener("keydown",e),document.body.removeEventListener("click",n)}},[]),La`
    <div
      class=${uc("djs-popup",r)}
      style=${function(e){return{transform:`scale(${e.scale})`,width:`${e.width}px`,"transform-origin":"top left"}}(e)}
      onKeydown=${n}
      onKeyup=${o}
      ref=${a}
      tabIndex="-1"
    >
      ${i}
    </div>
  `}var vc=["contextPad.close","canvas.viewbox.changing","commandStack.changed"];function yc(e,t,n,o){this._eventBus=t,this._canvas=n,this._search=o,this._current=null;var r=A(e&&e.scale)?e.scale:{min:1,max:1};this._config={scale:r},t.on("diagram.destroy",()=>{this.close()}),t.on("element.changed",e=>{const t=this.isOpen()&&this._current.target;e.element===t&&this.refresh()})}function mc(e,t){return Ac(t)-Ac(e)}function Ac(e){return e.reduce((e,t)=>e+xc(t),0)}function xc(e){if(_(e))return Math.max(...e.map(xc));const t=Math.log(e.value.length);return e.match?(e.start?e.end?131.9:7.87:e.wordStart?2.19:1)*t:-.07*t}function _c(e=""){return _(e)?e.join(", "):e}function Ec(e,t){return _c(e).localeCompare(_c(t))}function bc(e,t){if(!e)return{tokens:[],matchedWords:{}};const n=[],o={},r=t.map(wc),i=[`(?<all>${r.join("\\s+")})`,...r].join("|"),s=new RegExp(i,"ig");let a,c=0;for(;a=s.exec(e);){const[r]=a,i=a.index,s=a.index+r.length,l=0===i,u=s===e.length,d=!!a.groups.all,p=l||/\s/.test(e.charAt(i-1)),h=u||/\s/.test(e.charAt(s));a.index>c&&n.push({value:e.slice(c,a.index),index:c}),n.push({value:r,index:a.index,match:!0,wordStart:p,wordEnd:h,start:l,end:u,all:d});const f=d?t:[r];for(const e of f)o[e.toLowerCase()]=!0;c=a.index+r.length}return c<e.length&&n.push({value:e.slice(c),index:c}),{tokens:n,matchedWords:o}}function wc(e){return e.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&")}yc.$inject=["config.popupMenu","eventBus","canvas","search"],yc.prototype._render=function(){const{position:e,providerId:t,entries:n,headerEntries:o,emptyPlaceholder:r,options:i}=this._current,s=Object.entries(n).map(([e,t])=>({id:e,...t})),a=Object.entries(o).map(([e,t])=>({id:e,...t})),c=e&&(t=>this._ensureVisible(t,e)),l=this._updateScale(this._current.container);za(La`
      <${fc}
        onClose=${e=>this.close(e)}
        onSelect=${(e,t,n)=>this.trigger(e,t,n)}
        position=${c}
        className=${t}
        entries=${s}
        headerEntries=${a}
        emptyPlaceholder=${r}
        scale=${l}
        onOpened=${this._onOpened.bind(this)}
        onClosed=${this._onClosed.bind(this)}
        searchFn=${this._search}
        ...${{...i}}
      />
    `,this._current.container)},yc.prototype.open=function(e,t,n,o){if(!e)throw new Error("target is missing");if(!t)throw new Error("providers for <"+t+"> not found");if(!n)throw new Error("position is missing");this.isOpen()&&this.close();const{entries:r,headerEntries:i,emptyPlaceholder:s}=this._getContext(e,t);this._current={position:n,providerId:t,target:e,entries:r,headerEntries:i,emptyPlaceholder:s,container:this._createContainer({provider:t}),options:o},this._emit("open"),this._bindAutoClose(),this._render()},yc.prototype.refresh=function(){if(!this.isOpen())return;const{target:e,providerId:t}=this._current,{entries:n,headerEntries:o,emptyPlaceholder:r}=this._getContext(e,t);this._current={...this._current,entries:n,headerEntries:o,emptyPlaceholder:r},this._emit("refresh"),this._render()},yc.prototype._getContext=function(e,t){const n=this._getProviders(t);if(!n||!n.length)throw new Error("provider for <"+t+"> not found");const o=this._getEntries(e,n),r=this._getHeaderEntries(e,n);return{entries:o,headerEntries:r,emptyPlaceholder:this._getEmptyPlaceholder(n),empty:!(Object.keys(o).length||Object.keys(r).length)}},yc.prototype.close=function(){this.isOpen()&&(this._emit("close"),this.reset(),this._canvas.restoreFocus(),this._current=null)},yc.prototype.reset=function(){const e=this._current.container;za(null,e),st(e)},yc.prototype._emit=function(e,t){this._eventBus.fire(`popupMenu.${e}`,t)},yc.prototype._onOpened=function(){this._emit("opened")},yc.prototype._onClosed=function(){this._emit("closed")},yc.prototype._createContainer=function(e){var t=this._canvas.getContainer();const n=nt(`<div class="djs-popup-parent djs-scrollable" data-popup=${e.provider}></div>`);return t.appendChild(n),n},yc.prototype._bindAutoClose=function(){this._eventBus.once(vc,this.close,this)},yc.prototype._unbindAutoClose=function(){this._eventBus.off(vc,this.close,this)},yc.prototype._updateScale=function(){var e,t,n=this._canvas.zoom(),o=this._config.scale,r=n;return!0!==o&&(!1===o?(e=1,t=1):(e=o.min,t=o.max),A(e)&&n<e&&(r=e),A(t)&&n>t&&(r=t)),r},yc.prototype._ensureVisible=function(e,t){var n=document.documentElement.getBoundingClientRect(),o=e.getBoundingClientRect(),r={},i=t.x,s=t.y;return t.x+o.width>n.width&&(r.x=!0),t.y+o.height>n.height&&(r.y=!0),r.x&&r.y?(i=t.x-o.width,s=t.y-o.height):r.x?(i=t.x-o.width,s=t.y):r.y&&t.y<o.height?(i=t.x,s=10):r.y&&(i=t.x,s=t.y-o.height),t.y<n.top&&(s=t.y+o.height),{x:i,y:s}},yc.prototype.isEmpty=function(e,t){if(!e)throw new Error("target is missing");if(!t)throw new Error("provider ID is missing");const n=this._getProviders(t);return!n||!n.length||this._getContext(e,t).empty},yc.prototype.registerProvider=function(e,t,n){n||(n=t,t=1e3),this._eventBus.on("popupMenu.getProviders."+e,t,function(e){e.providers.push(n)})},yc.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"popupMenu.getProviders."+e,providers:[]});return this._eventBus.fire(t),t.providers},yc.prototype._getEntries=function(e,t){var n={};return S(t,function(t){if(t.getPopupMenuEntries){var o=t.getPopupMenuEntries(e);w(o)?n=o(n):S(o,function(e,t){n[t]=e})}else S(t.getEntries(e),function(e){var t=e.id;if(!t)throw new Error("entry ID is missing");n[t]=V(e,["id"])})}),n},yc.prototype._getHeaderEntries=function(e,t){var n={};return S(t,function(t){if(t.getPopupMenuHeaderEntries){var o=t.getPopupMenuHeaderEntries(e);w(o)?n=o(n):S(o,function(e,t){n[t]=e})}else{if(!t.getHeaderEntries)return;S(t.getHeaderEntries(e),function(e){var t=e.id;if(!t)throw new Error("entry ID is missing");n[t]=V(e,["id"])})}}),n},yc.prototype._getEmptyPlaceholder=function(e){const t=e.find(e=>w(e.getEmptyPlaceholder));return t&&t.getEmptyPlaceholder()},yc.prototype.isOpen=function(){return!!this._current},yc.prototype.trigger=function(e,t,n="click"){if(e.preventDefault(),!t){let n=Fe(We(e.delegateTarget||e.target,".entry",!0),"data-id");t={id:n,...this._getEntry(n)}}const o=t.action;if(!1!==this._emit("trigger",{entry:t,event:e}))if(w(o)){if("click"===n)return o(e,t)}else if(o[n])return o[n](e,t)},yc.prototype._getEntry=function(e){var t=this._current.entries[e]||this._current.headerEntries[e];if(!t)throw new Error("entry not found");return t};const Cc={search:["value",function(e,t,n){const{keys:o}=n;if(!(t=t.trim().toLowerCase()))throw new Error("<pattern> must not be empty");const r=t.trim().toLowerCase().split(/\s+/);return e.flatMap(e=>{const t=function(e,t,n){const{matchedWords:o,tokens:r}=n.reduce((n,o)=>{const r=e[o],{tokens:i,matchedWords:s}=_(r)?r.reduce((e,n)=>{const{tokens:o,matchedWords:r}=bc(n,t);return{tokens:[...e.tokens,o],matchedWords:{...e.matchedWords,...r}}},{matchedWords:{},tokens:[]}):bc(r,t);return{tokens:{...n.tokens,[o]:i},matchedWords:{...n.matchedWords,...s}}},{matchedWords:{},tokens:{}});return Object.keys(o).length!==t.length?null:r}(e,r,o);return t?{item:e,tokens:t}:[]}).sort(function(e){return(t,n)=>{let o=0,r=1;for(const i of e){const e=mc(t.tokens[i],n.tokens[i]);if(0!==e){o+=e*r,r*=.9;continue}const s=Ec(t.item[i],n.item[i]);0===s||(o+=s*r,r*=.9)}return o}}(o))}]},kc={__depends__:[Cc],__init__:["popupMenu"],popupMenu:["type",yc]};var jc=Math.min,Bc=Math.max;function Sc(e){e.preventDefault()}function Dc(e){e.stopPropagation()}function Mc(e){this.container=e.container,this.parent=nt('<div class="djs-direct-editing-parent"><div class="djs-direct-editing-content" contenteditable="true"></div></div>'),this.content=rt("[contenteditable]",this.parent),this.keyHandler=e.keyHandler||function(){},this.resizeHandler=e.resizeHandler||function(){},this.autoResize=N(this.autoResize,this),this.handlePaste=N(this.handlePaste,this)}function zc(e,t){this._eventBus=e,this._canvas=t,this._providers=[],this._textbox=new Mc({container:t.getContainer(),keyHandler:N(this._handleKey,this),resizeHandler:N(this._handleResize,this)})}Mc.prototype.create=function(e,t,n,o){var r=this.parent,i=this.content,s=this.container;o=this.options=o||{};var a=q(t=this.style=t||{},["width","height","maxWidth","maxHeight","minWidth","minHeight","left","top","backgroundColor","position","overflow","border","wordWrap","textAlign","outline","transform"]);W(r.style,{width:e.width+"px",height:e.height+"px",maxWidth:e.maxWidth+"px",maxHeight:e.maxHeight+"px",minWidth:e.minWidth+"px",minHeight:e.minHeight+"px",left:e.x+"px",top:e.y+"px",backgroundColor:"#ffffff",position:"absolute",overflow:"visible",border:"1px solid #ccc",boxSizing:"border-box",wordWrap:"normal",textAlign:"center",outline:"none"},a);var c=q(t,["fontFamily","fontSize","fontWeight","lineHeight","padding","paddingTop","paddingRight","paddingBottom","paddingLeft"]);return W(i.style,{boxSizing:"border-box",width:"100%",outline:"none",wordWrap:"break-word"},c),o.centerVertically&&W(i.style,{position:"absolute",top:"50%",transform:"translate(0, -50%)"},c),i.innerText=n,Ke.bind(i,"keydown",this.keyHandler),Ke.bind(i,"mousedown",Dc),Ke.bind(i,"paste",this.handlePaste),o.autoResize&&Ke.bind(i,"input",this.autoResize),o.resizable&&this.resizable(t),s.appendChild(r),this.setSelection(i.lastChild,i.lastChild&&i.lastChild.length),r},Mc.prototype.handlePaste=function(e){var t,n=this.options,o=this.style;if(e.preventDefault(),t=e.clipboardData?e.clipboardData.getData("text/plain"):window.clipboardData.getData("Text"),this.insertText(t),n.autoResize){var r=this.autoResize(o);r&&this.resizeHandler(r)}},Mc.prototype.insertText=function(e){e=e.replace(/\r\n|\r|\n/g,"\n"),document.execCommand("insertText",!1,e)||this._insertTextIE(e)},Mc.prototype._insertTextIE=function(e){var t,n,o,r=this.getSelection(),i=r.startContainer,s=r.endContainer,a=r.startOffset,c=r.endOffset,l=r.commonAncestorContainer,u=(t=l.childNodes,[].slice.call(t));if(function(e){return e.nodeType===Node.TEXT_NODE}(l)){var d=i.textContent;i.textContent=d.substring(0,a)+e+d.substring(c),n=i,o=a+e.length}else if(i===this.content&&s===this.content){var p=document.createTextNode(e);this.content.insertBefore(p,u[a]),n=p,o=p.textContent.length}else{var h=u.indexOf(i),f=u.indexOf(s);u.forEach(function(t,n){n===h?t.textContent=i.textContent.substring(0,a)+e+s.textContent.substring(c):n>h&&n<=f&&st(t)}),n=i,o=a+e.length}n&&void 0!==o&&setTimeout(function(){self.setSelection(n,o)})},Mc.prototype.autoResize=function(){var e=this.parent,t=this.content,n=parseInt(this.style.fontSize)||12;if(t.scrollHeight>e.offsetHeight||t.scrollHeight<e.offsetHeight-n){var o=e.getBoundingClientRect(),r=t.scrollHeight;e.style.height=r+"px",this.resizeHandler({width:o.width,height:o.height,dx:0,dy:r-o.height})}},Mc.prototype.resizable=function(){var e=this,t=this.parent,n=this.resizeHandle,o=parseInt(this.style.minWidth)||0,r=parseInt(this.style.minHeight)||0,i=parseInt(this.style.maxWidth)||1/0,s=parseInt(this.style.maxHeight)||1/0;if(!n){var a,c,l,u;n=this.resizeHandle=nt('<div class="djs-direct-editing-resize-handle"></div>');var d=function(n){Sc(n),Dc(n);var d=jc(Bc(l+n.clientX-a,o),i),p=jc(Bc(u+n.clientY-c,r),s);t.style.width=d+"px",t.style.height=p+"px",e.resizeHandler({width:l,height:u,dx:n.clientX-a,dy:n.clientY-c})},p=function(e){Sc(e),Dc(e),Ke.unbind(document,"mousemove",d,!1),Ke.unbind(document,"mouseup",p,!1)};Ke.bind(n,"mousedown",function(e){Sc(e),Dc(e),a=e.clientX,c=e.clientY;var n=t.getBoundingClientRect();l=n.width,u=n.height,Ke.bind(document,"mousemove",d),Ke.bind(document,"mouseup",p)})}W(n.style,{position:"absolute",bottom:"0px",right:"0px",cursor:"nwse-resize",width:"0",height:"0",borderTop:(parseInt(this.style.fontSize)/4||3)+"px solid transparent",borderRight:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderBottom:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderLeft:(parseInt(this.style.fontSize)/4||3)+"px solid transparent"}),t.appendChild(n)},Mc.prototype.destroy=function(){var e=this.parent,t=this.content,n=this.resizeHandle;t.innerText="",e.removeAttribute("style"),t.removeAttribute("style"),Ke.unbind(t,"keydown",this.keyHandler),Ke.unbind(t,"mousedown",Dc),Ke.unbind(t,"input",this.autoResize),Ke.unbind(t,"paste",this.handlePaste),n&&(n.removeAttribute("style"),st(n)),st(e)},Mc.prototype.getValue=function(){return this.content.innerText.trim()},Mc.prototype.getSelection=function(){return window.getSelection().getRangeAt(0)},Mc.prototype.setSelection=function(e,t){var n=document.createRange();null===e?n.selectNodeContents(this.content):(n.setStart(e,t),n.setEnd(e,t));var o=window.getSelection();o.removeAllRanges(),o.addRange(n)},zc.$inject=["eventBus","canvas"],zc.prototype.registerProvider=function(e){this._providers.push(e)},zc.prototype.isActive=function(e){return!(!this._active||e&&this._active.element!==e)},zc.prototype.cancel=function(){this._active&&(this._fire("cancel"),this.close())},zc.prototype._fire=function(e,t){this._eventBus.fire("directEditing."+e,t||{active:this._active})},zc.prototype.close=function(){this._textbox.destroy(),this._fire("deactivate"),this._active=null,this.resizable=void 0,this._canvas.restoreFocus&&this._canvas.restoreFocus()},zc.prototype.complete=function(){var e=this._active;if(e){var t,n=e.context.bounds,o=this.$textbox.getBoundingClientRect(),r=this.getValue();r===e.context.text&&o.height===n.height&&o.width===n.width||(t=this._textbox.container.getBoundingClientRect(),e.provider.update(e.element,r,e.context.text,{x:o.left-t.left,y:o.top-t.top,width:o.width,height:o.height})),this._fire("complete"),this.close()}},zc.prototype.getValue=function(){return this._textbox.getValue()},zc.prototype._handleKey=function(e){e.stopPropagation();var t=e.keyCode||e.charCode;return 27===t?(e.preventDefault(),this.cancel()):13!==t||e.shiftKey?void 0:(e.preventDefault(),this.complete())},zc.prototype._handleResize=function(e){this._fire("resize",e)},zc.prototype.activate=function(e){var t;this.isActive()&&this.cancel();var n=j(this._providers,function(n){return(t=n.activate(e))?n:null});return t&&(this.$textbox=this._textbox.create(t.bounds,t.style,t.text,t.options),this._active={element:e,context:t,provider:n},t.options&&t.options.resizable&&(this.resizable=!0),this._fire("activate")),!!t};const Oc={__depends__:[Gn],__init__:["directEditing"],directEditing:["type",zc]};var Pc=n(72),$c=n.n(Pc),Rc=n(825),Tc=n.n(Rc),Fc=n(659),Lc=n.n(Fc),Ic=n(56),Hc=n.n(Ic),Nc=n(540),Wc=n.n(Nc),qc=n(113),Vc=n.n(qc),Gc=n(530),Uc={};Uc.styleTagTransform=Vc(),Uc.setAttributes=Hc(),Uc.insert=Lc().bind(null,"head"),Uc.domAPI=Tc(),Uc.insertStyleElement=Wc(),$c()(Gc.A,Uc),Gc.A&&Gc.A.locals&&Gc.A.locals;var Yc=n(967),Xc={};function Kc(e){this._eventBus=e}function Zc(e){return function(t,n,o,r,i){(w(t)||b(t))&&(i=r,r=o,o=n,n=t,t=null),this.on(t,e,n,o,r,i)}}function Qc(e){Kc.call(this,e),this.init()}Xc.styleTagTransform=Vc(),Xc.setAttributes=Hc(),Xc.insert=Lc().bind(null,"head"),Xc.domAPI=Tc(),Xc.insertStyleElement=Wc(),$c()(Yc.A,Xc),Yc.A&&Yc.A.locals&&Yc.A.locals,Kc.$inject=["eventBus"],Kc.prototype.on=function(e,t,n,o,r,i){if((w(t)||b(t))&&(i=r,r=o,o=n,n=t,t=null),w(n)&&(i=r,r=o,o=n,n=1e3),E(r)&&(i=r,r=!1),!w(o))throw new Error("handlerFn must be a function");_(e)||(e=[e]);var s=this._eventBus;S(e,function(e){var a=["commandStack",e,t].filter(function(e){return e}).join(".");s.on(a,n,r?function(e,t){return function(n){return e.call(t||null,n.context,n.command,n)}}(o,i):o,i)})},Kc.prototype.canExecute=Zc("canExecute"),Kc.prototype.preExecute=Zc("preExecute"),Kc.prototype.preExecuted=Zc("preExecuted"),Kc.prototype.execute=Zc("execute"),Kc.prototype.executed=Zc("executed"),Kc.prototype.postExecute=Zc("postExecute"),Kc.prototype.postExecuted=Zc("postExecuted"),Kc.prototype.revert=Zc("revert"),Kc.prototype.reverted=Zc("reverted"),Qc.$inject=["eventBus"],f(Qc,Kc),Qc.prototype.addRule=function(e,t,n){var o=this;"string"==typeof e&&(e=[e]),e.forEach(function(e){o.canExecute(e,t,function(e,t,o){return n(e)},!0)})},Qc.prototype.init=function(){};const Jc={__init__:["contextPadProvider","paletteProvider","ruleProvider"],contextPadProvider:["type",class{static $inject=["connect","contextPad","modeling","elementFactory","create","popupMenu","idCounterService","selection"];constructor(e,t,n,o,r,i,s,a){this.connect=e,this.modeling=n,this.elementFactory=o,this.create=r,this.popupMenu=i,this.idCounterService=s,this.selection=a,t.registerProvider(this)}getContextPadEntries(e){const{connect:t,modeling:n,elementFactory:o}=this,r=()=>{n.removeElements([e])},i=(e,n,o)=>{t.start(e,n,o)},s=t=>{const r=e.parent;if(!r)return;const i={"petri:transition":{width:70,height:70},"petri:place":{width:50,height:50}}[t]||{width:70,height:70},s=Array.isArray(e.outgoing)&&e.outgoing.length>0,a=Array.isArray(e.incoming)&&e.incoming.length>0,c=!s||a,l=e.y+e.height/2,u=c?e.x+e.width+50+i.width/2:e.x-30-i.width/2,d={id:this.idCounterService.getNextId(t),type:t,width:i.width,height:i.height};"petri:place"===t&&(d.businessObject={tokens:0});const p=o.createShape(d),h=n.createShape(p,{x:u,y:l},r);n.createConnection(e,h,{type:"petri:connection"},r),this.selection.select(h)},a=()=>{const t=e.parent;if(!t)return;let r,i;if("petri:transition"===e.type)r="petri:empty_transition",i={width:14,height:70};else{if("petri:empty_transition"!==e.type)return;r="petri:transition",i={width:70,height:70}}const s=o.createShape({id:this.idCounterService.getNextId(r),type:r,width:i.width,height:i.height}),a=e.x+e.width/2,c=e.y+e.height/2,l=e.incoming?[...e.incoming]:[],u=e.outgoing?[...e.outgoing]:[],d=n.createShape(s,{x:a,y:c},t);l.forEach(e=>{n.reconnectEnd(e,d,e.waypoints[e.waypoints.length-1])}),u.forEach(e=>{n.reconnectStart(e,d,e.waypoints[0])}),n.removeElements([e])},c={delete:{group:"edit",className:"context-pad-icon-remove",title:"Remove",action:{click:r,dragstart:r}},connect:{group:"edit",className:"context-pad-icon-connect",title:"Connect",action:{click:i,dragstart:i}}};return"petri:place"===e.type?c.transition={group:"edit",className:"context-pad-icon-transition",title:"Create transition",action:{click:()=>s("petri:transition")}}:"petri:transition"!==e.type&&"petri:empty_transition"!==e.type||(c.place={group:"edit",className:"context-pad-icon-place",title:"Create place",action:{click:()=>s("petri:place")}}),c.tool={group:"tools",className:"context-pad-icon-tool",title:"Tool action",action:{click:t=>{const n={x:t.x||t.clientX,y:t.y||t.clientY};this.popupMenu.open(e,"menu",n)}}},"petri:transition"===e.type?c.replace={group:"edit",className:"context-pad-icon-replace",title:"Replace with empty transition",action:{click:a}}:"petri:empty_transition"===e.type&&(c.replace={group:"edit",className:"context-pad-icon-replace",title:"Replace with transition",action:{click:a}}),c}}],paletteProvider:["type",class{static $inject=["create","elementFactory","lassoTool","palette","spaceTool","simulationService","idCounterService","eventBus","elementRegistry"];constructor(e,t,n,o,r,i,s,a,c){this.create=e,this.elementFactory=t,this.lassoTool=n,this.palette=o,this.spaceTool=r,this.simulationService=i,this.idCounterService=s,this.eventBus=a,this.elementRegistry=c,o.registerProvider(this)}toggleLabels(e){this.idCounterService.toggleLabels();const t=e.target.closest('[data-action="labels"]');t&&t.classList.toggle("active"),this.elementRegistry.getAll().forEach(e=>{this.eventBus.fire("element.changed",{element:e})})}updateSimulationButton(e){const t=e.target.closest('[data-action="start-simulation"]');t&&(this.simulationService.toggleSimulation()?t.classList.add("active"):t.classList.remove("active"))}getPaletteEntries(){const{create:e,elementFactory:t,lassoTool:n,spaceTool:o}=this;return{"lasso-tool":{group:"tools",className:"palette-icon-lasso-tool",title:"Activate Lasso Tool",action:{click:e=>n.activateSelection(e)}},"tool-separator":{group:"tools",separator:!0},"create-transition":{group:"create",className:"palette-icon-create-transition",title:"Transition",action:{click:n=>{const o=t.createShape({id:this.idCounterService.getNextTransitionId(),width:70,height:70,type:"petri:transition"});e.start(n,o)}}},"create-empty-transition":{group:"create",className:"palette-icon-create-empty-transition",title:"Transition",action:{click:n=>{const o=t.createShape({id:this.idCounterService.getNextTransitionId(),width:14,height:70,type:"petri:empty_transition"});e.start(n,o)}}},"create-circle":{group:"create",className:"palette-icon-create-circle",title:"Place",action:{click:n=>{const o=t.createShape({id:this.idCounterService.getNextPlaceId(),width:50,height:50,type:"petri:place",businessObject:{tokens:0}});e.start(n,o)}}},"create-separator":{group:"create",separator:!0},"start-simulation":{group:"simulation",className:"palette-icon-start-simulation",title:"Start Simulation",action:{click:e=>{this.updateSimulationButton(e)}}},"simulation-separator":{group:"simulation",separator:!0},labels:{group:"labels",className:"palette-icon-labels",title:"Toggle Labels",action:{click:e=>{this.toggleLabels(e)}}}}}}],ruleProvider:["type",class extends Qc{static $inject=["eventBus","elementRegistry"];constructor(e,t){super(e),this.elementRegistry=t}init(){this.addRule("shape.create",e=>{const t=e.target,n=e.shape;return t.parent===n.target}),this.addRule("connection.create",e=>{const{source:t,target:n}=e;return!(!t||!n)&&(("petri:place"!==t.type||"petri:place"!==n.type)&&(("petri:transition"!==t.type||"petri:transition"!==n.type)&&(("petri:empty_transition"!==t.type||"petri:empty_transition"!==n.type)&&(("petri:transition"!==t.type||"petri:empty_transition"!==n.type)&&(("petri:empty_transition"!==t.type||"petri:transition"!==n.type)&&(!(Array.isArray(t.outgoing)&&t.outgoing.some(e=>e.target===n))&&n.parent===t.parent&&{type:"petri:connection"}))))))}),this.addRule("shape.resize",e=>{const t=e.shape;return!!ke(t)||"petri:place"===t.type||"petri:transition"===t.type||"petri:empty_transition"===t.type})}}]};function el(e,t){return function(e,t){t.appendChild(function(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch(e){}return e}(e,t))}(t,e),e}var tl={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":2,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":2,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function nl(e,t,n){var o=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=tl[o];r?(2===r&&"number"==typeof n&&(n=String(n)+"px"),e.style[o]=n):e.setAttributeNS(null,t,n)}function ol(e,t,n){if("string"==typeof t){if(void 0===n)return function(e,t){return tl[t]?e.style[t]:e.getAttributeNS(null,t)}(e,t);nl(e,t,n)}else!function(e,t){var n,o,r=Object.keys(t);for(n=0;o=r[n];n++)nl(e,o,t[o])}(e,t);return e}const rl=Object.prototype.toString;function il(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}il.prototype.add=function(e){return this.list.add(e),this},il.prototype.remove=function(e){return"[object RegExp]"==rl.call(e)?this.removeMatching(e):(this.list.remove(e),this)},il.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},il.prototype.toggle=function(e,t){return void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this},il.prototype.array=function(){return Array.from(this.list)},il.prototype.has=il.prototype.contains=function(e){return this.list.contains(e)};var sl="http://www.w3.org/2000/svg",al='<svg xmlns="'+sl+'"';function cl(e,t){var n;return"<"===(e=e.trim()).charAt(0)?(n=function(e){var t=!1;"<svg"===e.substring(0,4)?-1===e.indexOf(sl)&&(e=al+e.substring(4)):(e=al+">"+e+"</svg>",t=!0);var n=function(e){var t;return(t=new DOMParser).async=!1,t.parseFromString(e,"text/xml")}(e);if(!t)return n;for(var o=document.createDocumentFragment(),r=n.firstChild;r.firstChild;)o.appendChild(r.firstChild);return o}(e).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(sl,e),t&&ol(n,t),n}class ll{constructor(e,t){this.styles=e,this.idCounterService=t}render(e,t){const n=t.businessObject?.name??"",o=this.styles.computeStyle({},{fill:"black",fontSize:12,fontFamily:"Arial, sans-serif"}),r=this._calculateLabelPosition(t);this._shouldRenderId(t)&&this._renderIdLabel(e,t,o),"petri:empty_transition"!==t.type&&this._renderNameLabel(e,n,r,o)}_shouldRenderId(e){return this.idCounterService.labelsVisible&&e.id&&("petri:place"===e.type||"petri:transition"===e.type||"petri:empty_transition"===e.type)}_renderIdLabel(e,t,n){const o=this._calculateIdPosition(t),r=cl("text");ol(r,{x:o.x,y:o.y,"text-anchor":o.textAnchor,"dominant-baseline":o.baseline}),ol(r,n),r.textContent=String(t.id),el(e,r)}_calculateIdPosition(e){if("petri:place"===e.type){const t=Math.min(e.width,e.height)/2,n=e.width/2,o=e.height/2,r=4,i=t/Math.SQRT2;return{x:n-i-r,y:o+i+r,textAnchor:"end",baseline:"hanging"}}return{x:e.width/2,y:e.height+14,textAnchor:"middle",baseline:"hanging"}}_calculateLabelPosition(e){const t=e.businessObject||{};return"petri:connection"===e.type?this._calculateConnectionLabelPosition(e,t):"petri:place"===e.type?this._calculatePlaceLabelPosition(e,t):"petri:transition"===e.type||"petri:empty_transition"===e.type?this._calculateTransitionLabelPosition(e,t):this._calculateDefaultLabelPosition(e,t)}_calculateConnectionLabelPosition(e,t){const n=e.waypoints;let o,r;if(2===n.length){const e=n[0],t=n[1];o=(e.x+t.x)/2,r=(e.y+t.y)/2}else{const e=n[Math.floor(n.length/2)];o=e.x,r=e.y}return t.labelOffset?{x:o+t.labelOffset.x,y:r+t.labelOffset.y,textAnchor:"middle",baseline:"middle"}:(e.businessObject||(e.businessObject={}),e.businessObject.labelOffset={x:0,y:-10},{x:o,y:r-10,textAnchor:"middle",baseline:"middle"})}_calculatePlaceLabelPosition(e,t){const n=Math.min(e.width,e.height)/2,o=e.width/2,r=e.height/2,i=n/Math.SQRT2;return t.labelOffset?{x:o+t.labelOffset.x,y:r+t.labelOffset.y,textAnchor:"start",baseline:"hanging"}:(e.businessObject||(e.businessObject={}),e.businessObject.labelOffset={x:i+4,y:i+4},{x:o+i+4,y:r+i+4,textAnchor:"start",baseline:"hanging"})}_calculateTransitionLabelPosition(e,t){const n=e.width/2,o=e.height/2;return t.labelOffset?{x:n+t.labelOffset.x,y:o+t.labelOffset.y,textAnchor:"middle",baseline:"middle"}:(e.businessObject||(e.businessObject={}),e.businessObject.labelOffset={x:0,y:0},{x:n,y:o,textAnchor:"middle",baseline:"middle"})}_calculateDefaultLabelPosition(e,t){const n=e.width/2,o=e.height/2;return t.labelOffset?{x:n+t.labelOffset.x,y:o+t.labelOffset.y,textAnchor:"middle",baseline:"middle"}:(e.businessObject||(e.businessObject={}),e.businessObject.labelOffset={x:0,y:0},{x:n,y:o,textAnchor:"middle",baseline:"middle"})}_renderNameLabel(e,t,n,o){const r=String(t).split("\n");if(1===r.length){const t=cl("text");ol(t,{x:n.x,y:n.y,"text-anchor":n.textAnchor,"dominant-baseline":n.baseline}),ol(t,o),t.textContent=r[0],el(e,t)}else this._renderMultiLineLabel(e,r,n,o)}_renderMultiLineLabel(e,t,n,o){let r;r="middle"===n.baseline?n.y-14*(t.length-1)/2:"hanging"===n.baseline?n.y:n.y-14*(t.length-1);const i=cl("text");t.forEach((e,t)=>{const s=cl("tspan");ol(s,{x:n.x,y:r+14*t,"text-anchor":n.textAnchor}),ol(s,o),s.textContent=e,el(i,s)}),ol(i,{"text-anchor":n.textAnchor}),el(e,i)}}class ul{constructor(e){this.styles=e}render(e,t){const n=Number.isFinite(t.businessObject?.tokens)?t.businessObject.tokens:0;if(n<=0)return;const o=t.width/2,r=t.height/2,i=Math.min(t.width,t.height)/2,s=Math.max(2,Math.min(6,i/6)),a=this.styles.computeStyle({},{fill:"black"});1===n?this._renderDot(e,o,r,s,a):2===n?(this._renderDot(e,o-2*s,r,s,a),this._renderDot(e,o+2*s,r,s,a)):3===n?(this._renderDot(e,o,r-2*s,s,a),this._renderDot(e,o-2*s,r+2*s,s,a),this._renderDot(e,o+2*s,r+2*s,s,a)):4===n?(this._renderDot(e,o-2*s,r-2*s,s,a),this._renderDot(e,o+2*s,r-2*s,s,a),this._renderDot(e,o-2*s,r+2*s,s,a),this._renderDot(e,o+2*s,r+2*s,s,a)):n>4&&this._renderTokenCount(e,o,r,n)}_renderDot(e,t,n,o,r){const i=cl("circle");ol(i,{cx:t,cy:n,r:o}),ol(i,r),el(e,i)}_renderTokenCount(e,t,n,o){const r=cl("text");ol(r,{x:t,y:n,"text-anchor":"middle","dominant-baseline":"middle"}),ol(r,this.styles.computeStyle({},{fill:"black",fontSize:12})),r.textContent=String(o),el(e,r)}}function dl(e,t,n,o){const r=t/2,i=n/2,s=.25*Math.min(t,n),a=r-s/3,c=i-s/2,l=r-s/3,u=i+s/2,d=r+s/2,p=i,h=cl("path"),f=o.computeStyle({},{fill:"darkgreen",stroke:"darkgreen",strokeWidth:1});return ol(h,{d:`M ${a} ${c} L ${l} ${u} L ${d} ${p} Z`}),ol(h,f),el(e,h),h}function pl(e,t,n){let o=e.ownerSVGElement;if(!o){let t=e;for(;t&&t.parentNode;)if(t=t.parentNode,"svg"===t.tagName||"svg"===t.nodeName){o=t;break}}if(!o)return`url(#${t})`;let r=o.querySelector("defs");if(r||(r=cl("defs"),el(o,r)),!r.querySelector("#"+t)){const e=cl("marker",{id:t,viewBox:"0 0 20 20",refX:11,refY:10,markerWidth:10,markerHeight:10,orient:"auto"});el(e,cl("path",{d:"M 1 5 L 11 10 L 1 15 Z",fill:n,stroke:n})),el(r,e)}return`url(#${t})`}const hl={__init__:["customRenderer"],customRenderer:["type",class extends g{static $inject=["eventBus","styles","connectionDocking","simulationService","idCounterService"];constructor(e,t,n,o,r){super(e,1500),this.styles=t,this.connectionDocking=n,this.simulationService=o,this.idCounterService=r,this.labelRenderer=new ll(t,r),this.tokenRenderer=new ul(t)}canRender(e){return"petri:place"===e.type||"petri:transition"===e.type||"petri:empty_transition"===e.type||"petri:connection"===e.type}drawShape(e,t){const{type:n}=t;let o;return"petri:place"===n?o=function(e,t,n){const{width:o,height:r}=t,i=o/2,s=r/2,a=Math.round((o+r)/4),c=n.computeStyle({},{stroke:"black",strokeWidth:2,fill:"white"});"none"===c.fill&&delete c.fillOpacity;const l=cl("circle");return ol(l,{cx:i,cy:s,r:a}),ol(l,c),el(e,l),l}(e,t,this.styles):"petri:transition"===n?o=function(e,t,n,o){const{width:r,height:i}=t,s=o.isTransitionEnabled(t),a=o.isTransitionFired(t);let c="white";s?c="lightgreen":a&&!s&&(c="plum");const l=n.computeStyle({},{stroke:"black",strokeWidth:2,fill:c});"none"===l.fill&&delete l.fillOpacity;const u=cl("rect");return ol(u,{x:0,y:0,width:r,height:i,rx:0,ry:0}),ol(u,l),el(e,u),s&&dl(e,r,i,n),u}(e,t,this.styles,this.simulationService):"petri:empty_transition"===n&&(o=function(e,t,n,o){const{width:r,height:i}=t,s=o.isTransitionEnabled(t),a=o.isTransitionFired(t);let c="black";s?c="lightgreen":a&&!s&&(c="plum");const l=n.computeStyle({},{stroke:"black",strokeWidth:2,fill:c,fillOpacity:1}),u=cl("rect");return ol(u,{x:0,y:0,width:r,height:i,rx:0,ry:0}),ol(u,l),el(e,u),s&&dl(e,r,i,n),u}(e,t,this.styles,this.simulationService)),this.labelRenderer.render(e,t),"petri:place"===n&&this.tokenRenderer.render(e,t),o}drawConnection(e,t){const n=this.styles.computeStyle({},{stroke:"black",strokeWidth:2,markerEnd:pl(e,"my-arrow","black")});this.connectionDocking&&(t.source||t.target)&&(t.waypoints=this.connectionDocking.getCroppedWaypoints(t));const o=ye(t.waypoints,n,5);return el(e,o),this.labelRenderer.render(e,t),o}getShapePath(e){const{type:t}=e;return"petri:place"===t?function(e){let t=e.x+e.width/2,n=e.y+e.height/2,o=e.width/2;return de([["M",t,n],["m",0,-o],["a",o,o,0,1,1,0,2*o],["a",o,o,0,1,1,0,-2*o],["z"]])}(e):function(e){let t=e.x,n=e.y,o=e.width;return de([["M",t,n],["l",o,0],["l",0,e.height],["l",-o,0],["z"]])}(e)}}]};function fl(e){return W({original:e.point.original||e.point},e.actual)}function gl(e,t){this._elementRegistry=e,this._graphicsFactory=t}gl.$inject=["elementRegistry","graphicsFactory"],gl.prototype.getCroppedWaypoints=function(e,t,n){t=t||e.source,n=n||e.target;var o=this.getDockingPoint(e,t,!0),r=this.getDockingPoint(e,n),i=e.waypoints.slice(o.idx+1,r.idx);return i.unshift(fl(o)),i.push(fl(r)),i},gl.prototype.getDockingPoint=function(e,t,n){var o,r,i=e.waypoints;return{point:r=i[o=n?0:i.length-1],actual:this._getIntersection(t,e,n)||r,idx:o}},gl.prototype._getIntersection=function(e,t,n){return o=this._getShapePath(e),r=this._getConnectionPath(t),i=n,s=function(e,t){return It(e,t)}(o,r),1===s.length||2===s.length&&ut(s[0],s[1])<1?Xt(s[0]):s.length>1?(s=R(s,function(e){var t=Math.floor(100*e.t2)||1;return t=((t=100-t)<10?"0":"")+t,e.segment2+"#"+t}),Xt(s[i?0:s.length-1])):null;var o,r,i,s},gl.prototype._getConnectionPath=function(e){return this._graphicsFactory.getConnectionPath(e)},gl.prototype._getShapePath=function(e){return this._graphicsFactory.getShapePath(e)},gl.prototype._getGfx=function(e){return this._elementRegistry.getGraphics(e)};const vl={__init__:["labelEditingProvider"],labelEditingProvider:["type",class{static $inject=["eventBus","directEditing","canvas","simulationService"];constructor(e,t,n,o){this.eventBus=e,this.directEditing=t,this.canvas=n,this.simulationService=o,t.registerProvider(this),e.on("element.dblclick",1e3,e=>{const n=e&&e.element;n&&("petri:place"===n.type?this.getTokens(n):t.activate(n))}),e.on("element.mousedown",1500,e=>{t.isActive()&&t.complete()})}activate(e){if("petri:place"!==e.type&&"petri:transition"!==e.type)return null;const t=e.businessObject?.name||"",n=this.canvas.viewbox(),o=n.scale||1;return{bounds:{x:e.x*o-n.x*o,y:e.y*o-n.y*o,width:e.width*o,height:e.height*o},text:t}}update(e,t,n,o){e.businessObject||(e.businessObject={}),e.businessObject.name=t,this.eventBus.fire("element.changed",{element:e})}getTokens(e){if(!e)return;if("petri:place"!==e.type)return;e.businessObject||(e.businessObject={});const t=e.businessObject.tokens||0,n=window.prompt("Enter the number of tokens",t);if(null!==n){const t=parseInt(n,10);!isNaN(t)&&t>=0?(e.businessObject.tokens=t,this.eventBus.fire("element.changed",{element:e}),this.simulationService.isActive&&this.simulationService.updateEnabledTransitions()):alert("Please enter a valid number of tokens (0 or greater)")}}}]},yl={__init__:["keyboardShortcuts"],keyboardShortcuts:["type",class{static $inject=["eventBus","modeling","selection","elementFactory","canvas","idCounterService"];constructor(e,t,n,o,r,i){this.eventBus=e,this.modeling=t,this.selection=n,this.elementFactory=o,this.canvas=r,this.idCounterService=i,this._clipboard=[],this._init()}_init(){document.addEventListener("keydown",this._handleKeyDown.bind(this))}_handleKeyDown(e){const t=this.canvas.getContainer();(t.contains(document.activeElement)||document.activeElement===t||document.activeElement===document.body)&&("Delete"!==e.key&&"Backspace"!==e.key||(this._handleDelete(),e.preventDefault()),(e.ctrlKey||e.metaKey)&&"c"===e.key&&(this._handleCopy(),e.preventDefault()),(e.ctrlKey||e.metaKey)&&"v"===e.key&&(this._handlePaste(),e.preventDefault()))}_handleDelete(){const e=this.selection.get();e.length>0&&this.modeling.removeElements(e)}_handleCopy(){const e=this.selection.get();e.length>0&&(this._clipboard=e.filter(e=>e&&e.type&&isFinite(e.x)&&isFinite(e.y)&&isFinite(e.width)&&isFinite(e.height)).map(e=>({type:e.type,x:e.x,y:e.y,width:e.width,height:e.height,businessObject:e.businessObject?{...e.businessObject}:void 0})),console.log("Copied",this._clipboard.length,"elements"))}_handlePaste(){if(0===this._clipboard.length)return;const e=this.canvas.getRootElement(),t=this._getPastePosition(),n=this._getElementsBounds(this._clipboard),o=[];this._clipboard.forEach((r,i)=>{const s=r.x-n.x,a=r.y-n.y,c=t.x+s,l=t.y+a;if(!(isFinite(c)&&isFinite(l)&&isFinite(r.width)&&isFinite(r.height)))return void console.warn("Skipping element with invalid coordinates:",r);let u;u="petri:transition"===r.type||"petri:empty_transition"===r.type?this.idCounterService.getNextTransitionId():this.idCounterService.getNextPlaceId();const d=this.elementFactory.createShape({id:u,type:r.type,x:c,y:l,width:r.width,height:r.height,businessObject:r.businessObject}),p=this.modeling.createShape(d,{x:c,y:l},e);o.push(p)}),this.selection.select(o),console.log("Pasted",o.length,"elements")}_getPastePosition(){const e=this.selection.get();if(e.length>0){const t=e[0];return{x:t.x+100,y:t.y+50}}const t=this.canvas.viewbox();return{x:t.x+t.width/2,y:t.y+t.height/2}}_getElementsBounds(e){if(0===e.length)return{x:0,y:0,width:0,height:0};let t=1/0,n=1/0,o=-1/0,r=-1/0;return e.forEach(e=>{t=Math.min(t,e.x),n=Math.min(n,e.y),o=Math.max(o,e.x+e.width),r=Math.max(r,e.y+e.height)}),{x:t,y:n,width:o-t,height:r-n}}}]},ml={__init__:["menuProvider"],menuProvider:["type",class{static $inject=["eventBus","popupMenu","simulationService"];constructor(e,t,n){this.eventBus=e,this.popupMenu=t,this.simulationService=n,t.registerProvider("menu",this)}getPopupMenuEntries(e){const t={};return"petri:connection"!==e.type&&"petri:place"!==e.type||(t.label={label:"Set Label",action:()=>{this.setLabel(e)}}),t.properties={label:"Properties",action:()=>{this.showProperties(e)}},t}showProperties(e){if(!e)return;let t="Element Properties\n\n";t+=`Type: ${e.type}\n`,t+=`ID: ${e.id}\n`,e.width&&e.height&&(t+=`Size: ${e.width} x ${e.height}\n`),void 0!==e.x&&void 0!==e.y&&(t+=`Position: (${e.x}, ${e.y})\n`),e.businessObject&&(e.businessObject.name&&(t+=`Name: ${e.businessObject.name}\n`),void 0!==e.businessObject.tokens&&(t+=`Tokens: ${e.businessObject.tokens}\n`)),alert(t)}setLabel(e){if(!e)return;void 0===e.businessObject&&(e.businessObject={});let t=window.prompt("Enter the new label",e.businessObject.name);null!==t&&(e.businessObject.name=t,this.eventBus.fire("element.changed",{element:e}))}}]};class Al{static $inject=["eventBus","elementRegistry","canvas"];constructor(e,t,n){this.eventBus=e,this.elementRegistry=t,this.canvas=n,this.isActive=!1,this.initialTokenState=new Map,this.enabledTransitions=new Set,this.firedTransitions=new Set}saveInitialTokenState(){this.elementRegistry.getAll().filter(e=>"petri:place"===e.type).forEach(e=>{const t=e.businessObject?.tokens||0;this.initialTokenState.set(e.id,t)})}resetTokensToInitial(){this.elementRegistry.getAll().filter(e=>"petri:place"===e.type).forEach(e=>{const t=this.initialTokenState.get(e.id)||0;e.businessObject||(e.businessObject={tokens:0}),e.businessObject.tokens=t,this.eventBus.fire("element.changed",{element:e})})}canTransitionFire(e){const t=e.incoming||[];return 0===t.length||t.every(e=>{const t=e.source;return(t.businessObject?.tokens||0)>0})}updateEnabledTransitions(){this.enabledTransitions.clear(),this.elementRegistry.getAll().filter(e=>"petri:transition"===e.type||"petri:empty_transition"===e.type).forEach(e=>{this.canTransitionFire(e)&&this.enabledTransitions.add(e.id)}),this.refreshAllTransitions()}refreshAllTransitions(){this.elementRegistry.getAll().filter(e=>"petri:transition"===e.type||"petri:empty_transition"===e.type).forEach(e=>{this.eventBus.fire("element.changed",{element:e})})}fireTransition(e){if(!this.isActive||!this.isTransitionEnabled(e))return;const t=e.incoming||[],n=e.outgoing||[],o=[];t.forEach(e=>{const t=e.source;t.businessObject||(t.businessObject={tokens:0});const n=t.businessObject.tokens||0;t.businessObject.tokens=Math.max(0,n-1),o.push(t)}),n.forEach(e=>{const t=e.target;t.businessObject||(t.businessObject={tokens:0});const n=t.businessObject.tokens||0;t.businessObject.tokens=n+1,o.push(t)}),this.firedTransitions.add(e.id),o.forEach(e=>{this.eventBus.fire("element.changed",{element:e})}),this.updateEnabledTransitions()}isTransitionEnabled(e){return this.enabledTransitions.has(e.id)}isTransitionFired(e){return this.firedTransitions.has(e.id)}}const xl={__init__:["simulationService"],simulationService:["type",class extends Al{static $inject=["eventBus","elementRegistry","canvas"];constructor(e,t,n){super(e,t,n),this.eventBus.on(["elements.changed","connection.added","connection.removed","shape.added","shape.removed"],()=>{this.isActive&&this.updateEnabledTransitions()}),this.eventBus.on("element.click",e=>{const t=e.element;"petri:transition"!==t.type&&"petri:empty_transition"!==t.type||this.isTransitionEnabled(t)&&this.fireTransition(t)})}toggleSimulation(){this.isActive=!this.isActive;const e=this.elementRegistry.getAll();return console.log(e),this.isActive?(0===this.initialTokenState.size&&this.saveInitialTokenState(),this.saveInitialTokenState(),this.firedTransitions.clear(),this.updateEnabledTransitions()):(this.enabledTransitions.clear(),this.firedTransitions.clear(),this.refreshAllTransitions(),this.resetTokensToInitial()),this.isActive}}]};class _l{static parse(e,t,n,o,r,i){const s=e.getAttribute("id"),a=e.querySelector("graphics > position"),c=e.querySelector("graphics > dimension"),l=e.querySelector("initialMarking > text"),u=a?parseFloat(a.getAttribute("x")):100,d=a?parseFloat(a.getAttribute("y")):100,p=r?50:c?parseFloat(c.getAttribute("x")):50,h=r?50:c?parseFloat(c.getAttribute("y")):50,f=l?parseInt(l.textContent):0,g=i(e),v=g?g.text:"",y=g?g.offsetX:null,m=g?g.offsetY:null,A=t.createShape({id:s,type:"petri:place",x:u,y:d,width:p,height:h,businessObject:{name:v,tokens:f,...null!==y&&null!==m&&{labelOffset:{x:y,y:m}}}});return n.addShape(A,o),A}}class El{static parse(e,t,n,o,r,i){const s=e.getAttribute("id"),a=e.querySelector("graphics > position"),c=e.querySelector("graphics > dimension"),l=a?parseFloat(a.getAttribute("x")):100,u=a?parseFloat(a.getAttribute("y")):100,d=r?70:c?parseFloat(c.getAttribute("x")):70,p=r?70:c?parseFloat(c.getAttribute("y")):70,h=i(e),f=h?h.text:"",g=h?h.offsetX:null,v=h?h.offsetY:null;let y=!1;const m=e.querySelector(":scope > toolspecific");if(m&&"petrinet.io"===m.getAttribute("tool")){const e=m.querySelector('property[key="transitionType"]');e&&"empty"===e.getAttribute("value")&&(y=!0)}if(!y){const t=e.querySelector("graphics > toolspecific");if(t&&"petrinet.io"===t.getAttribute("tool")){const e=t.querySelector('property[key="transitionType"]');e&&"empty"===e.getAttribute("value")&&(y=!0)}}const A=y?"petri:empty_transition":"petri:transition",x=t.createShape({id:s,type:A,x:l,y:u,width:d,height:p,businessObject:{name:f,...null!==g&&null!==v&&{labelOffset:{x:g,y:v}}}});return n.addShape(x,o),x}}class bl{static parse(e,t,n,o,r,i){const s=e.getAttribute("source"),a=e.getAttribute("target"),c=t.get(s),l=t.get(a);if(c&&l){const t={x:c.x+c.width/2,y:c.y+c.height/2},s={x:l.x+l.width/2,y:l.y+l.height/2},a=e.querySelectorAll("graphics > position");let u=[t];a.length>0&&a.forEach(e=>{u.push({x:parseFloat(e.getAttribute("x")),y:parseFloat(e.getAttribute("y"))})}),u.push(s);const d=i(e),p=d?d.text:"",h=d?d.offsetX:null,f=d?d.offsetY:null,g=e.getAttribute("id"),v=n.createConnection({id:g,type:"petri:connection",waypoints:u,source:c,target:l,businessObject:{name:p,...null!==h&&null!==f&&{labelOffset:{x:h,y:f}}}});o.addConnection(v,r)}}}const wl={__init__:["svgExporter","pnmlExporter","pnmlImporter"],svgExporter:["type",class{static $inject=["canvas","elementRegistry","simulationService"];constructor(e,t,n){this.canvas=e,this.elementRegistry=t,this.simulationService=n}exportSvg(e="petri-net.svg",t={}){return new Promise((t,n)=>{try{const n=this.canvas.getContainer(),o=n.querySelector("svg");if(!o)throw new Error("SVG element not found");const r=n.querySelector(".viewport");if(!r)throw new Error("Viewport layer not found");const i=o.querySelector("defs"),s=this._calculateBounds(),a=this._getInnerSVG(r),c=i?"<defs>"+this._getInnerSVG(i)+"</defs>":"",l='<?xml version="1.0" encoding="utf-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+s.width+'" height="'+s.height+'" viewBox="'+s.minX+" "+s.minY+" "+s.width+" "+s.height+'" version="1.1">'+c+a+"</svg>";this._downloadSvgString(l,e),t({svg:l})}catch(e){n(e)}})}_calculateBounds(){const e=this.elementRegistry.getAll();let t=1/0,n=1/0,o=-1/0,r=-1/0;return e.forEach(e=>{e.width&&e.height&&(t=Math.min(t,e.x),n=Math.min(n,e.y),o=Math.max(o,e.x+e.width),r=Math.max(r,e.y+e.height)),e.waypoints&&e.waypoints.forEach(e=>{t=Math.min(t,e.x),n=Math.min(n,e.y),o=Math.max(o,e.x),r=Math.max(r,e.y)})}),t===1/0&&(t=0,n=0,o=800,r=600),t-=40,n-=40,o+=40,r+=40,{minX:t,minY:n,width:o-t,height:r-n}}_getInnerSVG(e){const t=new XMLSerializer;let n="";for(let o=0;o<e.childNodes.length;o++)n+=t.serializeToString(e.childNodes[o]);return n}_downloadSvgString(e,t){const n=new Blob([e],{type:"image/svg+xml"}),o=URL.createObjectURL(n),r=document.createElement("a");r.href=o,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(o)}}],pnmlExporter:["type",class{static $inject=["canvas","elementRegistry"];constructor(e,t){this.canvas=e,this.elementRegistry=t}getPnmlString(){const e=this.canvas.getRootElement(),t=this.elementRegistry.filter(t=>t.parent===e);let n=this._getXmlHeader();return t.forEach(e=>{"petri:place"===e.type?n+=function(e){const t=e.businessObject?.labelOffset?.x??0,n=e.businessObject?.labelOffset?.y??0;return`            <place id="${e.id}">\n                <graphics>\n                    <position x="${e.x}" y="${e.y}" />\n                    <dimension x="${e.width}" y="${e.height}" />\n                </graphics>\n                <name>\n                    <text>${e.businessObject?.name||""}</text>\n                    <graphics>\n                        <offset x="${t}" y="${n}" />\n                    </graphics>\n                </name>\n                <initialMarking>\n                    <text>${e.businessObject?.tokens||0}</text>\n                </initialMarking>\n            </place>\n`}(e):"petri:transition"===e.type?n+=function(e){const t=e.businessObject?.labelOffset?.x??0,n=e.businessObject?.labelOffset?.y??0;return`            <transition id="${e.id}">\n                <graphics>\n                    <position x="${e.x}" y="${e.y}" />\n                    <dimension x="${e.width}" y="${e.height}" />\n                </graphics>\n                <name>\n                    <text>${e.businessObject?.name||""}</text>\n                    <graphics>\n                        <offset x="${t}" y="${n}" />\n                    </graphics>\n                </name>\n            </transition>\n`}(e):"petri:empty_transition"===e.type?n+=function(e){return`            <transition id="${e.id}">\n                <graphics>\n                    <position x="${e.x}" y="${e.y}" />\n                    <dimension x="${e.width}" y="${e.height}" />\n                </graphics>\n                <toolspecific tool="petrinet.io" version="1.0">\n                    <property key="transitionType" value="empty" />\n                </toolspecific>\n            </transition>\n`}(e):"petri:connection"===e.type&&(n+=function(e){let t="";if(e.waypoints&&e.waypoints.length>0)for(let n=1;n<e.waypoints.length-1;n++){const o=e.waypoints[n];t+=`                    <position x="${o.x}" y="${o.y}" />\n`}const n=e.businessObject?.labelOffset?.x??0,o=e.businessObject?.labelOffset?.y??0,r=e.businessObject?.name||"";return`            <arc id="${e.id}" source="${e.source.id}" target="${e.target.id}">\n                <graphics>\n${t}                </graphics>\n                <inscription>\n                    <text>${r}</text>\n                    <graphics>\n                        <offset x="${n}" y="${o}" />\n                    </graphics>\n                </inscription>\n            </arc>\n`}(e))}),n+=this._getXmlFooter(),n}_getXmlHeader(){return'<?xml version="1.0" encoding="UTF-8"?>\n<pnml>\n    <net id="ptnet1" type="http://www.pnml.org/version-2009/grammar/ptnet">\n        <page id="top-level">\n'}_getXmlFooter(){return"        </page>\n    </net>\n</pnml>"}exportPnml(e="petri-net.pnml"){try{const t=this.getPnmlString(),n=new Blob([t],{type:"application/xml"}),o=URL.createObjectURL(n),r=document.createElement("a");r.href=o,r.download=e,r.click(),URL.revokeObjectURL(o)}catch(e){console.error("Error in exportPnml:",e),alert("Export failed: "+e.message)}}}],pnmlImporter:["type",class{static $inject=["canvas","elementFactory","elementRegistry","modeling","idCounterService"];constructor(e,t,n,o,r){this.canvas=e,this.elementFactory=t,this.elementRegistry=n,this.modeling=o,this.idCounterService=r,this.defaultPnml=!1}findLabel(e){const t=Array.from(e.children);for(const e of t){if("graphics"===e.tagName||"toolspecific"===e.tagName||"initialMarking"===e.tagName)continue;const t=e.querySelector("text");if(t){if("inscription"===e.tagName&&"1"===t.textContent.trim())continue;const n=t.textContent||"",o=e.querySelector("graphics > offset");return{text:n,offsetX:o?parseFloat(o.getAttribute("x")):null,offsetY:o?parseFloat(o.getAttribute("y")):null}}}return null}importPnml(e){try{this._clearCanvas();const t=this._parseXml(e);if(!t)return;const n=this._createRoot(),o=new Map;this._parsePlaces(t,n,o),this._parseTransitions(t,n,o),this._parseArcs(t,n,o)}catch(e){console.error("Error in importPnml:",e),alert("Import failed: "+e.message)}}_clearCanvas(){const e=this.canvas.getRootElement();if(e){const t=this.elementRegistry.filter(t=>t.parent===e&&t!==e);t.length>0&&this.modeling.removeElements(t)}}_parseXml(e){const t=(new DOMParser).parseFromString(e,"text/xml"),n=t.querySelector("parsererror");return n?(console.error("XML parsing error:",n.textContent),null):([...t.querySelectorAll("finalMarking"),...t.querySelectorAll("finalmarkings")].forEach(e=>e.remove()),t)}_createRoot(){const e=this.elementFactory.createRoot();return this.canvas.setRootElement(e),e}_parsePlaces(e,t,n){e.querySelectorAll("place").forEach(e=>{const o=_l.parse(e,this.elementFactory,this.canvas,t,this.defaultPnml,this.findLabel.bind(this));n.set(o.id,o)})}_parseTransitions(e,t,n){e.querySelectorAll("transition").forEach(e=>{const o=El.parse(e,this.elementFactory,this.canvas,t,this.defaultPnml,this.findLabel.bind(this));n.set(o.id,o)})}_parseArcs(e,t,n){e.querySelectorAll("arc").forEach(e=>{bl.parse(e,n,this.elementFactory,this.canvas,t,this.findLabel.bind(this))})}loadFromFile(){const e=document.createElement("input");e.type="file",e.accept=".pnml,.xml",e.onchange=e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{const t=e.target.result;this.importPnml(t)},e.readAsText(t)}},e.click()}}]},Cl={__init__:["idCounterService"],idCounterService:["type",class{static $inject=["elementRegistry"];constructor(e){this.elementRegistry=e,this.placeCounter=1,this.transitionCounter=1,this.labelsVisible=!0}getNextPlaceId(){const e=this.elementRegistry.getAll().filter(e=>"petri:place"===e.type),t=new Set(e.map(e=>e.id).map(e=>{const t=parseInt(e.substring(1));return isNaN(t)?null:t}).filter(e=>null!==e));let n=1;for(;t.has(n);)n++;return n>=this.placeCounter&&(this.placeCounter=n+1),`p${n}`}getNextTransitionId(){const e=this.elementRegistry.getAll().filter(e=>"petri:transition"===e.type||"petri:empty_transition"===e.type),t=new Set(e.map(e=>e.id).filter(e=>e.startsWith("t")).map(e=>{const t=parseInt(e.substring(1));return isNaN(t)?null:t}).filter(e=>null!==e));let n=1;for(;t.has(n);)n++;return n>=this.transitionCounter&&(this.transitionCounter=n+1),`t${n}`}getNextId(e){if(e)return"petri:place"===e?this.getNextPlaceId():"petri:transition"===e||"petri:empty_transition"===e?this.getNextTransitionId():void 0}toggleLabels(){this.labelsVisible=!this.labelsVisible}}]},kl={__init__:[["defaultRenderer",function(e){e.CONNECTION_STYLE={fill:"none",strokeWidth:5,stroke:"#000"},e.SHAPE_STYLE={fill:"white",stroke:"#000",strokeWidth:2},e.FRAME_STYLE={fill:"none",stroke:"#000",strokeDasharray:4,strokeWidth:2}}]]},jl={__init__:["connectionDocking"],connectionDocking:["type",gl]};function Bl(e){const{container:t,additionalModules:n=[]}=e;return new zn({canvas:{container:t},modules:[Ko,nr,gr,Dr,Fr,Ii,Ni,es,Vi,ls,kc,ws,ho,Jn,Ds,Gn,Vs,Oc,Jc,kl,hl,jl,vl,yl,ml,xl,wl,Cl,...n]})}return o.default})());
//# sourceMappingURL=editor.js.map