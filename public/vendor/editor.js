!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Editor=t():e.Editor=t()}(self,()=>(()=>{"use strict";var e={56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},72:e=>{var t=[];function n(e){for(var n=-1,o=0;o<t.length;o++)if(t[o].identifier===e){n=o;break}return n}function o(e,o){for(var i={},s=[],a=0;a<e.length;a++){var c=e[a],l=o.base?c[0]+o.base:c[0],d=i[l]||0,p="".concat(l," ").concat(d);i[l]=d+1;var u=n(p),h={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==u)t[u].references++,t[u].updater(h);else{var f=r(h,o);o.byIndex=a,t.splice(a,0,{identifier:p,updater:f,references:1})}s.push(p)}return s}function r(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var i=o(e=e||[],r=r||{});return function(e){e=e||[];for(var s=0;s<i.length;s++){var a=n(i[s]);t[a].references--}for(var c=o(e,r),l=0;l<i.length;l++){var d=n(i[l]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}i=c}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n="",o=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),o&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),o&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n}).join("")},t.i=function(e,n,o,r,i){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(o)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(s[c]=!0)}for(var l=0;l<e.length;l++){var d=[].concat(e[l]);o&&s[d[0]]||(void 0!==i&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=i),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),r&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=r):d[4]="".concat(r)),t.push(d))}},t}},354:e=>{e.exports=function(e){var t=e[1],n=e[3];if(!n)return t;if("function"==typeof btoa){var o=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),i="/*# ".concat(r," */");return[t].concat([i]).join("\n")}return[t].join("\n")}},530:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(354),r=n.n(o),i=n(314),s=n.n(i)()(r());s.push([e.id,'/**\n * color definitions\n */\n.djs-parent {\n  --color-grey-225-10-15: hsl(225, 10%, 15%);\n  --color-grey-225-10-35: hsl(225, 10%, 35%);\n  --color-grey-225-10-55: hsl(225, 10%, 55%);\n  --color-grey-225-10-75: hsl(225, 10%, 75%);\n  --color-grey-225-10-80: hsl(225, 10%, 80%);\n  --color-grey-225-10-85: hsl(225, 10%, 85%);\n  --color-grey-225-10-90: hsl(225, 10%, 90%);\n  --color-grey-225-10-95: hsl(225, 10%, 95%);\n  --color-grey-225-10-97: hsl(225, 10%, 97%);\n\n  --color-blue-205-100-45: hsl(205, 100%, 45%);\n  --color-blue-205-100-45-opacity-30: hsla(205, 100%, 45%, 30%);\n  --color-blue-205-100-50: hsl(205, 100%, 50%);\n  --color-blue-205-100-50-opacity-15: hsla(205, 100%, 50%, 15%);\n  --color-blue-205-100-70: hsl(205, 100%, 75%);\n  --color-blue-205-100-95: hsl(205, 100%, 95%);\n\n  --color-green-150-86-44: hsl(150, 86%, 44%);\n\n  --color-red-360-100-40: hsl(360, 100%, 40%);\n  --color-red-360-100-45: hsl(360, 100%, 45%);\n  --color-red-360-100-92: hsl(360, 100%, 92%);\n  --color-red-360-100-97: hsl(360, 100%, 97%);\n\n  --color-white: hsl(0, 0%, 100%);\n  --color-black: hsl(0, 0%, 0%);\n  --color-black-opacity-10: hsla(0, 0%, 0%, 10%);\n  --color-black-opacity-30: hsla(0, 0%, 0%, 30%);\n\n  --canvas-fill-color: var(--color-white);\n\n  --bendpoint-fill-color: var(--color-blue-205-100-45);\n  --bendpoint-stroke-color: var(--canvas-fill-color);\n\n  --context-pad-entry-background-color: var(--color-white);\n  --context-pad-entry-hover-background-color: var(--color-grey-225-10-95);\n\n  --element-dragger-color: var(--color-blue-205-100-50);\n  --element-hover-outline-fill-color: var(--color-blue-205-100-45);\n  --element-selected-outline-stroke-color: var(--color-blue-205-100-50);\n  --element-selected-outline-secondary-stroke-color: var(--color-blue-205-100-70);\n\n  --lasso-fill-color: var(--color-blue-205-100-50-opacity-15);\n  --lasso-stroke-color: var(--element-selected-outline-stroke-color);\n\n  --palette-entry-color: var(--color-grey-225-10-15);\n  --palette-entry-hover-color: var(--color-blue-205-100-45);\n  --palette-entry-selected-color: var(--color-blue-205-100-50);\n  --palette-separator-color: var(--color-grey-225-10-75);\n  --palette-toggle-hover-background-color: var(--color-grey-225-10-55);\n  --palette-background-color: var(--color-grey-225-10-97);\n  --palette-border-color: var(--color-grey-225-10-75);\n\n  --popup-font-family: "IBM Plex Sans", sans-serif;\n  --popup-font-size: 14px;\n  --popup-header-entry-selected-color: var(--color-blue-205-100-50);\n  --popup-header-font-weight: bolder;\n  --popup-header-group-divider-color: var(--color-grey-225-10-75);\n  --popup-background-color: var(--color-white);\n  --popup-border-color: transparent;\n  --popup-shadow-color: var(--color-black-opacity-30);\n  --popup-description-color: var(--color-grey-225-10-55);\n  --popup-no-results-color: var(--color-grey-225-10-55);\n  --popup-entry-title-color: var(--color-grey-225-10-55);\n  --popup-entry-hover-color:  var(--color-grey-225-10-95);\n  --popup-search-border-color: var(--color-grey-225-10-75);\n  --popup-search-focus-border-color: var(--color-blue-205-100-50);\n  --popup-search-focus-background-color: var(--color-blue-205-100-95);\n\n  --resizer-fill-color: var(--color-blue-205-100-45);\n  --resizer-stroke-color: var(--canvas-fill-color);\n\n  --search-font-family: "IBM Plex Sans", sans-serif;\n  --search-font-size: 14px;\n  --search-container-background-color: var(--color-white);\n  --search-shadow-color: var(--color-black-opacity-30);\n  --search-input-border-color: var(--color-grey-225-10-75);\n  --search-input-focus-border-color: var(--color-blue-205-100-50);\n  --search-input-focus-background-color: var(--color-blue-205-100-95);\n  --search-result-hover-background-color: var(--color-grey-225-10-95);\n  --search-result-secondary-color: var(--color-grey-225-10-55);\n  --search-preselected-background-color: var(--color-blue-205-100-50-opacity-15);\n\n  --shape-attach-allowed-stroke-color: var(--color-blue-205-100-50);\n  --shape-connect-allowed-fill-color: var(--color-grey-225-10-97);\n  --shape-drop-allowed-fill-color: var(--color-grey-225-10-97);\n  --shape-drop-not-allowed-fill-color: var(--color-red-360-100-97);\n  --shape-resize-preview-stroke-color: var(--color-blue-205-100-50);\n\n  --snap-line-stroke-color: var(--color-blue-205-100-45-opacity-30);\n\n  --space-tool-crosshair-stroke-color: var(--color-black);\n\n  --tooltip-error-background-color: var(--color-red-360-100-97);\n  --tooltip-error-border-color: var(--color-red-360-100-45);\n  --tooltip-error-color: var(--color-red-360-100-45);\n}\n\n/**\n * SVG styles\n */\n\n.djs-container svg.drop-not-ok {\n  background: var(--shape-drop-not-allowed-fill-color) !important;\n}\n\n.djs-container svg.new-parent {\n  background: var(--shape-drop-allowed-fill-color) !important;\n}\n\n/**\n * outline styles\n */\n\n.djs-outline,\n.djs-selection-outline {\n  fill: none;\n  shape-rendering: geometricPrecision;\n  stroke-width: 2px;\n}\n\n.djs-outline {\n  visibility: hidden;\n}\n\n.djs-selection-outline {\n  stroke: var(--element-selected-outline-stroke-color);\n}\n\n.djs-element.selected .djs-outline {\n  visibility: visible;\n\n  stroke: var(--element-selected-outline-stroke-color);\n}\n\n.djs-connection.selected .djs-outline {\n  display: none;\n}\n\n.djs-multi-select .djs-element.selected .djs-outline {\n  stroke: var(--element-selected-outline-secondary-stroke-color);\n  display: block;\n}\n\n.djs-shape.connect-ok .djs-visual > :nth-child(1) {\n  fill: var(--shape-connect-allowed-fill-color) !important;\n}\n\n.djs-shape.connect-not-ok .djs-visual > :nth-child(1),\n.djs-shape.drop-not-ok .djs-visual > :nth-child(1) {\n  fill: var(--shape-drop-not-allowed-fill-color) !important;\n}\n\n.djs-shape.new-parent .djs-visual > :nth-child(1) {\n  fill: var(--shape-drop-allowed-fill-color) !important;\n}\n\n\n/* Override move cursor during drop and connect */\n.drop-not-ok,\n.connect-not-ok,\n.drop-not-ok *,\n.connect-not-ok * {\n  cursor: not-allowed !important;\n}\n\n.drop-ok,\n.connect-ok,\n.drop-ok *,\n.connect-ok * {\n  cursor: default !important;\n}\n\n.djs-element.attach-ok .djs-visual > :nth-child(1) {\n  stroke-width: 5px !important;\n  stroke: var(--shape-attach-allowed-stroke-color) !important;\n}\n\n.djs-frame.connect-not-ok .djs-visual > :nth-child(1),\n.djs-frame.drop-not-ok .djs-visual > :nth-child(1) {\n  stroke-width: 3px !important;\n  stroke: var(--shape-drop-not-allowed-fill-color) !important;\n  fill: none !important;\n}\n\n/**\n* Selection box style\n*\n*/\n.djs-lasso-overlay {\n  fill: var(--lasso-fill-color);\n  stroke: var(--lasso-stroke-color);\n  stroke-width: 2px;\n  shape-rendering: geometricPrecision;\n  pointer-events: none;\n}\n\n/**\n * Resize styles\n */\n.djs-resize-overlay {\n  fill: none;\n\n  stroke-dasharray: 5 1 3 1;\n  stroke: var(--shape-resize-preview-stroke-color);\n\n  pointer-events: none;\n}\n\n.djs-resizer-hit {\n  fill: none;\n  pointer-events: all;\n}\n\n.djs-resizer-visual {\n  fill: var(--resizer-fill-color);\n  stroke-width: 1px;\n  stroke: var(--resizer-stroke-color);\n  shape-rendering: geometricPrecision;\n}\n\n.djs-resizer:hover .djs-resizer-visual {\n  stroke: var(--resizer-stroke-color);\n  stroke-opacity: 1;\n}\n\n.djs-cursor-resize-ns,\n.djs-resizer-n,\n.djs-resizer-s {\n  cursor: ns-resize;\n}\n\n.djs-cursor-resize-ew,\n.djs-resizer-e,\n.djs-resizer-w {\n  cursor: ew-resize;\n}\n\n.djs-cursor-resize-nwse,\n.djs-resizer-nw,\n.djs-resizer-se {\n  cursor: nwse-resize;\n}\n\n.djs-cursor-resize-nesw,\n.djs-resizer-ne,\n.djs-resizer-sw {\n  cursor: nesw-resize;\n}\n\n.djs-shape.djs-resizing > .djs-outline {\n  visibility: hidden !important;\n}\n\n.djs-shape.djs-resizing > .djs-resizer {\n  visibility: hidden;\n}\n\n.djs-dragger > .djs-resizer {\n  visibility: hidden;\n}\n\n/**\n * drag styles\n */\n.djs-dragger * {\n  fill: none !important;\n  stroke: var(--element-dragger-color) !important;\n}\n\n.djs-dragger tspan,\n.djs-dragger text {\n  fill: var(--element-dragger-color) !important;\n  stroke: none !important;\n}\n\n.djs-dragger marker circle,\n.djs-dragger marker path,\n.djs-dragger marker polygon,\n.djs-dragger marker polyline,\n.djs-dragger marker rect {\n  fill: var(--element-dragger-color) !important;\n  stroke: none !important;\n}\n\n.djs-dragger marker text,\n.djs-dragger marker tspan {\n  fill: none !important;\n  stroke: var(--element-dragger-color) !important;\n}\n\n.djs-dragging,\n.djs-dragging > * {\n  opacity: 0.3 !important;\n  pointer-events: none !important;\n}\n\n/**\n * no pointer events for visual\n */\n.djs-visual,\n.djs-outline {\n  pointer-events: none;\n}\n\n.djs-element.attach-ok .djs-hit {\n  stroke-width: 60px !important;\n}\n\n/**\n * all pointer events for hit shape\n */\n.djs-element > .djs-hit-all,\n.djs-element > .djs-hit-no-move {\n  pointer-events: all;\n}\n\n.djs-element > .djs-hit-stroke,\n.djs-element > .djs-hit-click-stroke {\n  pointer-events: stroke;\n}\n\n/**\n * shape / connection basic styles\n */\n.djs-connection .djs-visual {\n  stroke-width: 2px;\n  fill: none;\n}\n\n.djs-cursor-grab {\n  cursor: -webkit-grab;\n  cursor: -moz-grab;\n  cursor: grab;\n}\n\n.djs-cursor-grabbing {\n  cursor: -webkit-grabbing;\n  cursor: -moz-grabbing;\n  cursor: grabbing;\n}\n\n.djs-cursor-crosshair {\n  cursor: crosshair;\n}\n\n.djs-cursor-move {\n  cursor: move;\n}\n\n.djs-cursor-resize-ns {\n  cursor: ns-resize;\n}\n\n.djs-cursor-resize-ew {\n  cursor: ew-resize;\n}\n\n\n/**\n * snapping\n */\n.djs-snap-line {\n  stroke: var(--snap-line-stroke-color);\n  stroke-linecap: round;\n  stroke-width: 2px;\n  pointer-events: none;\n}\n\n/**\n * snapping\n */\n.djs-crosshair {\n  stroke: var(--space-tool-crosshair-stroke-color);\n  stroke-linecap: round;\n  stroke-width: 1px;\n  pointer-events: none;\n  shape-rendering: geometricPrecision;\n  stroke-dasharray: 5, 5;\n}\n\n/**\n * palette\n */\n\n.djs-palette {\n  position: absolute;\n  left: 20px;\n  top: 20px;\n\n  box-sizing: border-box;\n  width: 48px;\n}\n\n.djs-palette .separator {\n  margin: 5px;\n  padding-top: 5px;\n\n  border: none;\n  border-bottom: solid 1px var(--palette-separator-color);\n\n  clear: both;\n}\n\n.djs-palette .entry:before {\n  vertical-align: initial;\n}\n\n.djs-palette .djs-palette-toggle {\n  cursor: pointer;\n}\n\n.djs-palette .entry,\n.djs-palette .djs-palette-toggle {\n  color: var(--palette-entry-color);\n  font-size: 30px;\n\n  text-align: center;\n}\n\n.djs-palette .entry {\n  float: left;\n}\n\n.djs-palette .entry img {\n  max-width: 100%;\n}\n\n.djs-palette .djs-palette-entries:after {\n  content: \'\';\n  display: table;\n  clear: both;\n}\n\n.djs-palette .djs-palette-toggle:hover {\n  background: var(--palette-toggle-hover-background-color);\n}\n\n.djs-palette .entry:hover {\n  color: var(--palette-entry-hover-color);\n}\n\n.djs-palette .highlighted-entry {\n  color: var(--palette-entry-selected-color) !important;\n}\n\n.djs-palette .entry,\n.djs-palette .djs-palette-toggle {\n  width: 46px;\n  height: 46px;\n  line-height: 46px;\n  cursor: default;\n}\n\n/**\n * Palette open / two-column layout is controlled via\n * classes on the palette. Events to hook into palette\n * changed life-cycle are available in addition.\n */\n.djs-palette.two-column.open {\n  width: 94px;\n}\n\n.djs-palette:not(.open) .djs-palette-entries {\n  display: none;\n}\n\n.djs-palette:not(.open) {\n  overflow: hidden;\n}\n\n.djs-palette.open .djs-palette-toggle {\n  display: none;\n}\n\n/**\n * context-pad\n */\n.djs-context-pad {\n  position: absolute;\n  display: none;\n  pointer-events: none;\n  line-height: 1;\n  width: 72px;\n  z-index: 100;\n}\n\n.djs-context-pad .entry {\n  width: 22px;\n  height: 22px;\n  text-align: center;\n  display: inline-block;\n  font-size: 22px;\n  margin: 0 2px 2px 0;\n\n  border-radius: 3px;\n\n  cursor: default;\n\n  background-color: var(--context-pad-entry-background-color);\n  box-shadow: 0 0 2px 1px var(--context-pad-entry-background-color);\n  pointer-events: all;\n  vertical-align: middle;\n}\n\n.djs-context-pad .entry:hover {\n  background: var(--context-pad-entry-hover-background-color);\n}\n\n.djs-context-pad.open {\n  display: block;\n}\n\n/**\n * popup styles\n */\n.djs-popup {\n  line-height: 1;\n  box-sizing: border-box;\n  width: min-content;\n  background: var(--popup-background-color);\n  overflow: hidden;\n  position: fixed;\n  z-index: 200;\n  box-shadow: 0px 2px 6px var(--popup-shadow-color);\n  border: solid 1px var(--popup-border-color);\n  min-width: 120px;\n  outline: none;\n  font-size: var(--popup-font-size);\n  font-family: var(--popup-font-family);\n}\n\n.djs-popup-search input {\n  width: 100%;\n  box-sizing: border-box;\n  font-size: var(--popup-font-size);\n  padding: 3px 6px 3px 28px;\n  border-radius: 2px;\n  border: solid 1px var(--popup-search-border-color);\n  line-height: 21px;\n}\n\n.djs-popup-search input:focus {\n  background-color: var(--popup-search-focus-background-color);\n  border: solid 1px var(--popup-search-focus-border-color);\n  outline: none;\n}\n\n.djs-popup-header {\n  display: flex;\n  align-items: stretch;\n  line-height: 20px;\n  margin: 10px 12px 10px 12px;\n}\n\n.djs-popup-header .entry {\n  border-radius: 2px;\n}\n\n.djs-popup button.entry {\n  padding: 0;\n  background: transparent;\n  border: 0;\n}\n\n.djs-popup-header .entry.active {\n  color: var(--popup-header-entry-selected-color);\n}\n\n.djs-popup-header .entry.disabled {\n  color: inherit;\n}\n\n.djs-popup-header-group {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n\n.djs-popup-header-group .entry {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n}\n\n.djs-popup-header-group + .djs-popup-header-group:before {\n  content: \'\';\n  width: 1px;\n  height: 20px;\n  background: var(--popup-header-group-divider-color);\n  margin: 0 5px;\n}\n\n.djs-popup-search {\n  position: relative;\n  width: auto;\n  margin: 10px 12px;\n}\n\n.djs-popup-title {\n  font-size: var(--popup-font-size);\n  font-weight: var(--popup-header-font-weight);\n  flex: 1;\n  margin: 0;\n}\n\n.djs-popup-search-icon {\n  position: absolute;\n  left: 8px;\n  top: 7px;\n}\n\n.djs-popup-results {\n  margin: 7px 3px 7px 12px;\n  list-style: none;\n  max-height: 280px;\n  overflow: auto;\n  padding-right: 9px;\n}\n\n.djs-popup-group {\n  margin: 0;\n  padding: 0;\n  width: 100%;\n}\n\n.djs-popup-body .entry,\n.djs-popup-body .entry-header {\n  padding: 5px 7px;\n  cursor: default;\n  border-radius: 4px;\n}\n\n.djs-popup-body .entry-header {\n  font-weight: var(--popup-header-font-weight);\n  color: var(--popup-entry-title-color);\n  padding-left: 0;\n}\n\n.djs-popup [class*="icon"] .djs-popup-label,\n.djs-popup-label:not(:first-child) {\n  margin-left: .5em;\n}\n\n.djs-popup [class*="icon"]:before,\n.djs-popup-entry-icon {\n  width: 1em;\n  height: 1em;\n  display: inline-block;\n  font-size: 1.4em;\n  vertical-align: middle;\n}\n\n.djs-popup-body .entry-header:not(:first-child) {\n  margin-top: 8px;\n  margin-bottom: 2px;\n}\n\n.djs-popup-body .entry {\n  display: flex;\n  flex-direction: row;\n  align-items: stretch;\n  height: min-content;\n}\n\n.djs-popup .entry.selected {\n  background-color: var(--popup-entry-hover-color);\n}\n\n.djs-popup-body .entry:not(:first-child) {\n  margin-top: 2px;\n}\n\n.djs-popup-entry-content {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  overflow: hidden;\n}\n\n.djs-popup-entry-description {\n  color: var(--popup-description-color);\n}\n\n.djs-popup-label,\n.djs-popup-entry-description {\n  line-height: 1.4em;\n}\n\n.djs-popup .entry,\n.djs-popup .entry-header {\n  margin: 1px;\n}\n\n.djs-popup-title,\n.djs-popup-label,\n.djs-popup-entry-description,\n.djs-popup .entry-header {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.djs-popup-entry-name {\n  display: flex;\n}\n\n.djs-popup-body {\n  flex-direction: column;\n  width: auto;\n}\n\n.djs-popup *::-webkit-scrollbar {\n  width: 6px;\n}\n\n.djs-popup *::-webkit-scrollbar-thumb {\n  border-radius: 3px;\n  background-color: rgba(0, 0, 0, 0.2);\n}\n\n.djs-popup *::-webkit-scrollbar-track {\n  box-shadow: none;\n  background: transparent;\n  margin: 0;\n  padding: 5px;\n}\n\n.djs-popup-no-results {\n  padding: 0 12px 12px 12px;\n  color: var(--popup-no-results-color);\n}\n\n.djs-popup-entry-docs {\n  flex: 0;\n  flex-direction: row;\n  align-items: center;\n  padding-left: 5px;\n  display: none;\n}\n\n.djs-popup-body .entry:hover .djs-popup-entry-docs {\n  display: flex;\n}\n\n.djs-popup-entry-docs svg {\n  vertical-align: middle;\n  margin: auto 2px auto 5px;\n}\n\n/**\n *  palette styles\n */\n.djs-palette {\n  background: var(--palette-background-color);\n  border: solid 1px var(--palette-border-color);\n  border-radius: 2px;\n}\n\n/**\n * bendpoints\n */\n.djs-segment-dragger,\n.djs-bendpoint {\n  display: none;\n}\n\n.djs-segment-dragger .djs-visual {\n  display: none;\n\n  fill: var(--bendpoint-fill-color);\n  stroke: var(--bendpoint-stroke-color);\n  stroke-width: 1px;\n  stroke-opacity: 1;\n}\n\n.djs-segment-dragger:hover .djs-visual {\n  display: block;\n}\n\n.djs-bendpoint .djs-visual {\n  fill: var(--bendpoint-fill-color);\n  stroke: var(--bendpoint-stroke-color);\n  stroke-width: 1px;\n}\n\n.djs-segment-dragger:hover,\n.djs-bendpoints.hover .djs-segment-dragger,\n.djs-bendpoints.selected .djs-segment-dragger,\n.djs-bendpoint:hover,\n.djs-bendpoints.hover .djs-bendpoint,\n.djs-bendpoints.selected .djs-bendpoint {\n  display: block;\n}\n\n.djs-drag-active .djs-bendpoints * {\n  display: none;\n}\n\n.djs-bendpoints:not(.hover) .floating {\n  display: none;\n}\n\n.djs-segment-dragger:hover .djs-visual,\n.djs-segment-dragger.djs-dragging .djs-visual,\n.djs-bendpoint:hover .djs-visual,\n.djs-bendpoint.floating .djs-visual {\n  fill: var(--bendpoint-fill-color);\n  stroke: var(--bendpoint-stroke-color);\n  stroke-opacity: 1;\n}\n\n.djs-bendpoint.floating .djs-hit {\n  pointer-events: none;\n}\n\n.djs-segment-dragger .djs-hit,\n.djs-bendpoint .djs-hit {\n  fill: none;\n  pointer-events: all;\n}\n\n.djs-segment-dragger.horizontal .djs-hit {\n  cursor: ns-resize;\n}\n\n.djs-segment-dragger.vertical .djs-hit {\n  cursor: ew-resize;\n}\n\n.djs-segment-dragger.djs-dragging .djs-hit {\n  pointer-events: none;\n}\n\n.djs-updating,\n.djs-updating > * {\n  pointer-events: none !important;\n}\n\n.djs-updating .djs-context-pad,\n.djs-updating .djs-outline,\n.djs-updating .djs-bendpoint,\n.djs-multi-select .djs-bendpoint,\n.djs-multi-select .djs-segment-dragger,\n.connect-ok .djs-bendpoint,\n.connect-not-ok .djs-bendpoint,\n.drop-ok .djs-bendpoint,\n.drop-not-ok .djs-bendpoint {\n  display: none !important;\n}\n\n.djs-segment-dragger.djs-dragging,\n.djs-bendpoint.djs-dragging {\n  display: block;\n  opacity: 1.0;\n}\n\n\n/**\n * tooltips\n */\n.djs-tooltip-error {\n  width: 160px;\n  padding: 6px;\n\n  background: var(--tooltip-error-background-color);\n  border: solid 1px var(--tooltip-error-border-color);\n  border-radius: 2px;\n  color: var(--tooltip-error-color);\n  font-size: 12px;\n  line-height: 16px;\n\n  opacity: 0.75;\n}\n\n.djs-tooltip-error:hover {\n  opacity: 1;\n}\n\n\n/**\n * search pad\n */\n.djs-search-open .djs-context-pad {\n  display: none;\n}\n\n.djs-search-open .djs-connection.selected .djs-outline {\n  display: block;\n}\n\n.djs-search-container {\n  position: absolute;\n  top: 20px;\n  left: 0;\n  right: 0;\n  margin-left: auto;\n  margin-right: auto;\n\n  width: 25%;\n  min-width: 300px;\n  max-width: 400px;\n  z-index: 10;\n\n  font-family: var(--search-font-family);\n  font-size: var(--search-font-size);\n  border-radius: 2px;\n  box-shadow: 0px 2px 6px var(--search-shadow-color);\n}\n\n.djs-search-container:not(.open) {\n  display: none;\n}\n\n.djs-search-input {\n  position: relative;\n}\n\n.djs-search-input svg {\n  position: absolute;\n  left: 8px;\n  top: 7px;\n}\n\n.djs-search-input input {\n  font-size: var(--search-font-size);\n  width: 100%;\n  padding: 3px 6px 3px 28px;\n  border: 1px solid var(--search-input-border-color);\n  border-radius: 2px;\n  box-sizing: border-box;\n  line-height: 21px;\n}\n\n.djs-search-input input:focus {\n  background-color: var(--search-input-focus-background-color);\n  border: solid 1px var(--search-input-focus-border-color);\n  outline: none;\n}\n\n.djs-search-results {\n  position: relative;\n  overflow-y: auto;\n  max-height: 200px;\n  background: var(--search-container-background-color);\n}\n\n.djs-search-result {\n  padding: 6px 8px;\n}\n\n.djs-search-result-primary {\n  margin: 0 0 3px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n}\n\n.djs-search-result-secondary {\n  font-family: monospace;\n  margin: 0;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  color: var(--search-result-secondary-color);\n}\n\n.djs-search-result:hover {\n  background: var(--search-result-hover-background-color);\n}\n\n.djs-search-result-selected {\n  background: var(--search-result-hover-background-color);\n}\n\n.djs-search-result-selected:hover {\n  background: var(--search-result-hover-background-color);\n}\n\n.djs-search-open .djs-element .djs-outline {\n  fill: var(--search-preselected-background-color) !important;\n}\n\n/**\n * hidden styles\n */\n.djs-element-hidden,\n.djs-element-hidden .djs-hit,\n.djs-element-hidden .djs-outline,\n.djs-label-hidden .djs-label {\n  display: none !important;\n}\n\n.djs-element .djs-hit-stroke,\n.djs-element .djs-hit-click-stroke,\n.djs-element .djs-hit-all {\n  cursor: move;\n}',"",{version:3,sources:["webpack://./node_modules/diagram-js/assets/diagram-js.css"],names:[],mappings:"AAAA;;EAEE;AACF;EACE,0CAA0C;EAC1C,0CAA0C;EAC1C,0CAA0C;EAC1C,0CAA0C;EAC1C,0CAA0C;EAC1C,0CAA0C;EAC1C,0CAA0C;EAC1C,0CAA0C;EAC1C,0CAA0C;;EAE1C,4CAA4C;EAC5C,6DAA6D;EAC7D,4CAA4C;EAC5C,6DAA6D;EAC7D,4CAA4C;EAC5C,4CAA4C;;EAE5C,2CAA2C;;EAE3C,2CAA2C;EAC3C,2CAA2C;EAC3C,2CAA2C;EAC3C,2CAA2C;;EAE3C,+BAA+B;EAC/B,6BAA6B;EAC7B,8CAA8C;EAC9C,8CAA8C;;EAE9C,uCAAuC;;EAEvC,oDAAoD;EACpD,kDAAkD;;EAElD,wDAAwD;EACxD,uEAAuE;;EAEvE,qDAAqD;EACrD,gEAAgE;EAChE,qEAAqE;EACrE,+EAA+E;;EAE/E,2DAA2D;EAC3D,kEAAkE;;EAElE,kDAAkD;EAClD,yDAAyD;EACzD,4DAA4D;EAC5D,sDAAsD;EACtD,oEAAoE;EACpE,uDAAuD;EACvD,mDAAmD;;EAEnD,gDAAgD;EAChD,uBAAuB;EACvB,iEAAiE;EACjE,kCAAkC;EAClC,+DAA+D;EAC/D,4CAA4C;EAC5C,iCAAiC;EACjC,mDAAmD;EACnD,sDAAsD;EACtD,qDAAqD;EACrD,sDAAsD;EACtD,uDAAuD;EACvD,wDAAwD;EACxD,+DAA+D;EAC/D,mEAAmE;;EAEnE,kDAAkD;EAClD,gDAAgD;;EAEhD,iDAAiD;EACjD,wBAAwB;EACxB,uDAAuD;EACvD,oDAAoD;EACpD,wDAAwD;EACxD,+DAA+D;EAC/D,mEAAmE;EACnE,mEAAmE;EACnE,4DAA4D;EAC5D,8EAA8E;;EAE9E,iEAAiE;EACjE,+DAA+D;EAC/D,4DAA4D;EAC5D,gEAAgE;EAChE,iEAAiE;;EAEjE,iEAAiE;;EAEjE,uDAAuD;;EAEvD,6DAA6D;EAC7D,yDAAyD;EACzD,kDAAkD;AACpD;;AAEA;;EAEE;;AAEF;EACE,+DAA+D;AACjE;;AAEA;EACE,2DAA2D;AAC7D;;AAEA;;EAEE;;AAEF;;EAEE,UAAU;EACV,mCAAmC;EACnC,iBAAiB;AACnB;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,oDAAoD;AACtD;;AAEA;EACE,mBAAmB;;EAEnB,oDAAoD;AACtD;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,8DAA8D;EAC9D,cAAc;AAChB;;AAEA;EACE,wDAAwD;AAC1D;;AAEA;;EAEE,yDAAyD;AAC3D;;AAEA;EACE,qDAAqD;AACvD;;;AAGA,iDAAiD;AACjD;;;;EAIE,8BAA8B;AAChC;;AAEA;;;;EAIE,0BAA0B;AAC5B;;AAEA;EACE,4BAA4B;EAC5B,2DAA2D;AAC7D;;AAEA;;EAEE,4BAA4B;EAC5B,2DAA2D;EAC3D,qBAAqB;AACvB;;AAEA;;;CAGC;AACD;EACE,6BAA6B;EAC7B,iCAAiC;EACjC,iBAAiB;EACjB,mCAAmC;EACnC,oBAAoB;AACtB;;AAEA;;EAEE;AACF;EACE,UAAU;;EAEV,yBAAyB;EACzB,gDAAgD;;EAEhD,oBAAoB;AACtB;;AAEA;EACE,UAAU;EACV,mBAAmB;AACrB;;AAEA;EACE,+BAA+B;EAC/B,iBAAiB;EACjB,mCAAmC;EACnC,mCAAmC;AACrC;;AAEA;EACE,mCAAmC;EACnC,iBAAiB;AACnB;;AAEA;;;EAGE,iBAAiB;AACnB;;AAEA;;;EAGE,iBAAiB;AACnB;;AAEA;;;EAGE,mBAAmB;AACrB;;AAEA;;;EAGE,mBAAmB;AACrB;;AAEA;EACE,6BAA6B;AAC/B;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,kBAAkB;AACpB;;AAEA;;EAEE;AACF;EACE,qBAAqB;EACrB,+CAA+C;AACjD;;AAEA;;EAEE,6CAA6C;EAC7C,uBAAuB;AACzB;;AAEA;;;;;EAKE,6CAA6C;EAC7C,uBAAuB;AACzB;;AAEA;;EAEE,qBAAqB;EACrB,+CAA+C;AACjD;;AAEA;;EAEE,uBAAuB;EACvB,+BAA+B;AACjC;;AAEA;;EAEE;AACF;;EAEE,oBAAoB;AACtB;;AAEA;EACE,6BAA6B;AAC/B;;AAEA;;EAEE;AACF;;EAEE,mBAAmB;AACrB;;AAEA;;EAEE,sBAAsB;AACxB;;AAEA;;EAEE;AACF;EACE,iBAAiB;EACjB,UAAU;AACZ;;AAEA;EACE,oBAAoB;EACpB,iBAAiB;EACjB,YAAY;AACd;;AAEA;EACE,wBAAwB;EACxB,qBAAqB;EACrB,gBAAgB;AAClB;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,YAAY;AACd;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,iBAAiB;AACnB;;;AAGA;;EAEE;AACF;EACE,qCAAqC;EACrC,qBAAqB;EACrB,iBAAiB;EACjB,oBAAoB;AACtB;;AAEA;;EAEE;AACF;EACE,gDAAgD;EAChD,qBAAqB;EACrB,iBAAiB;EACjB,oBAAoB;EACpB,mCAAmC;EACnC,sBAAsB;AACxB;;AAEA;;EAEE;;AAEF;EACE,kBAAkB;EAClB,UAAU;EACV,SAAS;;EAET,sBAAsB;EACtB,WAAW;AACb;;AAEA;EACE,WAAW;EACX,gBAAgB;;EAEhB,YAAY;EACZ,uDAAuD;;EAEvD,WAAW;AACb;;AAEA;EACE,uBAAuB;AACzB;;AAEA;EACE,eAAe;AACjB;;AAEA;;EAEE,iCAAiC;EACjC,eAAe;;EAEf,kBAAkB;AACpB;;AAEA;EACE,WAAW;AACb;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,WAAW;EACX,cAAc;EACd,WAAW;AACb;;AAEA;EACE,wDAAwD;AAC1D;;AAEA;EACE,uCAAuC;AACzC;;AAEA;EACE,qDAAqD;AACvD;;AAEA;;EAEE,WAAW;EACX,YAAY;EACZ,iBAAiB;EACjB,eAAe;AACjB;;AAEA;;;;EAIE;AACF;EACE,WAAW;AACb;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,aAAa;AACf;;AAEA;;EAEE;AACF;EACE,kBAAkB;EAClB,aAAa;EACb,oBAAoB;EACpB,cAAc;EACd,WAAW;EACX,YAAY;AACd;;AAEA;EACE,WAAW;EACX,YAAY;EACZ,kBAAkB;EAClB,qBAAqB;EACrB,eAAe;EACf,mBAAmB;;EAEnB,kBAAkB;;EAElB,eAAe;;EAEf,2DAA2D;EAC3D,iEAAiE;EACjE,mBAAmB;EACnB,sBAAsB;AACxB;;AAEA;EACE,2DAA2D;AAC7D;;AAEA;EACE,cAAc;AAChB;;AAEA;;EAEE;AACF;EACE,cAAc;EACd,sBAAsB;EACtB,kBAAkB;EAClB,yCAAyC;EACzC,gBAAgB;EAChB,eAAe;EACf,YAAY;EACZ,iDAAiD;EACjD,2CAA2C;EAC3C,gBAAgB;EAChB,aAAa;EACb,iCAAiC;EACjC,qCAAqC;AACvC;;AAEA;EACE,WAAW;EACX,sBAAsB;EACtB,iCAAiC;EACjC,yBAAyB;EACzB,kBAAkB;EAClB,kDAAkD;EAClD,iBAAiB;AACnB;;AAEA;EACE,4DAA4D;EAC5D,wDAAwD;EACxD,aAAa;AACf;;AAEA;EACE,aAAa;EACb,oBAAoB;EACpB,iBAAiB;EACjB,2BAA2B;AAC7B;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,UAAU;EACV,uBAAuB;EACvB,SAAS;AACX;;AAEA;EACE,+CAA+C;AACjD;;AAEA;EACE,cAAc;AAChB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,mBAAmB;EACnB,gBAAgB;EAChB,SAAS;EACT,UAAU;AACZ;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,mBAAmB;AACrB;;AAEA;EACE,WAAW;EACX,UAAU;EACV,YAAY;EACZ,mDAAmD;EACnD,aAAa;AACf;;AAEA;EACE,kBAAkB;EAClB,WAAW;EACX,iBAAiB;AACnB;;AAEA;EACE,iCAAiC;EACjC,4CAA4C;EAC5C,OAAO;EACP,SAAS;AACX;;AAEA;EACE,kBAAkB;EAClB,SAAS;EACT,QAAQ;AACV;;AAEA;EACE,wBAAwB;EACxB,gBAAgB;EAChB,iBAAiB;EACjB,cAAc;EACd,kBAAkB;AACpB;;AAEA;EACE,SAAS;EACT,UAAU;EACV,WAAW;AACb;;AAEA;;EAEE,gBAAgB;EAChB,eAAe;EACf,kBAAkB;AACpB;;AAEA;EACE,4CAA4C;EAC5C,qCAAqC;EACrC,eAAe;AACjB;;AAEA;;EAEE,iBAAiB;AACnB;;AAEA;;EAEE,UAAU;EACV,WAAW;EACX,qBAAqB;EACrB,gBAAgB;EAChB,sBAAsB;AACxB;;AAEA;EACE,eAAe;EACf,kBAAkB;AACpB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,oBAAoB;EACpB,mBAAmB;AACrB;;AAEA;EACE,gDAAgD;AAClD;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,OAAO;EACP,gBAAgB;AAClB;;AAEA;EACE,qCAAqC;AACvC;;AAEA;;EAEE,kBAAkB;AACpB;;AAEA;;EAEE,WAAW;AACb;;AAEA;;;;EAIE,gBAAgB;EAChB,uBAAuB;EACvB,mBAAmB;AACrB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,sBAAsB;EACtB,WAAW;AACb;;AAEA;EACE,UAAU;AACZ;;AAEA;EACE,kBAAkB;EAClB,oCAAoC;AACtC;;AAEA;EACE,gBAAgB;EAChB,uBAAuB;EACvB,SAAS;EACT,YAAY;AACd;;AAEA;EACE,yBAAyB;EACzB,oCAAoC;AACtC;;AAEA;EACE,OAAO;EACP,mBAAmB;EACnB,mBAAmB;EACnB,iBAAiB;EACjB,aAAa;AACf;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,sBAAsB;EACtB,yBAAyB;AAC3B;;AAEA;;EAEE;AACF;EACE,2CAA2C;EAC3C,6CAA6C;EAC7C,kBAAkB;AACpB;;AAEA;;EAEE;AACF;;EAEE,aAAa;AACf;;AAEA;EACE,aAAa;;EAEb,iCAAiC;EACjC,qCAAqC;EACrC,iBAAiB;EACjB,iBAAiB;AACnB;;AAEA;EACE,cAAc;AAChB;;AAEA;EACE,iCAAiC;EACjC,qCAAqC;EACrC,iBAAiB;AACnB;;AAEA;;;;;;EAME,cAAc;AAChB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,aAAa;AACf;;AAEA;;;;EAIE,iCAAiC;EACjC,qCAAqC;EACrC,iBAAiB;AACnB;;AAEA;EACE,oBAAoB;AACtB;;AAEA;;EAEE,UAAU;EACV,mBAAmB;AACrB;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,oBAAoB;AACtB;;AAEA;;EAEE,+BAA+B;AACjC;;AAEA;;;;;;;;;EASE,wBAAwB;AAC1B;;AAEA;;EAEE,cAAc;EACd,YAAY;AACd;;;AAGA;;EAEE;AACF;EACE,YAAY;EACZ,YAAY;;EAEZ,iDAAiD;EACjD,mDAAmD;EACnD,kBAAkB;EAClB,iCAAiC;EACjC,eAAe;EACf,iBAAiB;;EAEjB,aAAa;AACf;;AAEA;EACE,UAAU;AACZ;;;AAGA;;EAEE;AACF;EACE,aAAa;AACf;;AAEA;EACE,cAAc;AAChB;;AAEA;EACE,kBAAkB;EAClB,SAAS;EACT,OAAO;EACP,QAAQ;EACR,iBAAiB;EACjB,kBAAkB;;EAElB,UAAU;EACV,gBAAgB;EAChB,gBAAgB;EAChB,WAAW;;EAEX,sCAAsC;EACtC,kCAAkC;EAClC,kBAAkB;EAClB,kDAAkD;AACpD;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,kBAAkB;EAClB,SAAS;EACT,QAAQ;AACV;;AAEA;EACE,kCAAkC;EAClC,WAAW;EACX,yBAAyB;EACzB,kDAAkD;EAClD,kBAAkB;EAClB,sBAAsB;EACtB,iBAAiB;AACnB;;AAEA;EACE,4DAA4D;EAC5D,wDAAwD;EACxD,aAAa;AACf;;AAEA;EACE,kBAAkB;EAClB,gBAAgB;EAChB,iBAAiB;EACjB,oDAAoD;AACtD;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,eAAe;EACf,uBAAuB;EACvB,gBAAgB;EAChB,mBAAmB;AACrB;;AAEA;EACE,sBAAsB;EACtB,SAAS;EACT,uBAAuB;EACvB,gBAAgB;EAChB,mBAAmB;EACnB,2CAA2C;AAC7C;;AAEA;EACE,uDAAuD;AACzD;;AAEA;EACE,uDAAuD;AACzD;;AAEA;EACE,uDAAuD;AACzD;;AAEA;EACE,2DAA2D;AAC7D;;AAEA;;EAEE;AACF;;;;EAIE,wBAAwB;AAC1B;;AAEA;;;EAGE,YAAY;AACd",sourcesContent:['/**\n * color definitions\n */\n.djs-parent {\n  --color-grey-225-10-15: hsl(225, 10%, 15%);\n  --color-grey-225-10-35: hsl(225, 10%, 35%);\n  --color-grey-225-10-55: hsl(225, 10%, 55%);\n  --color-grey-225-10-75: hsl(225, 10%, 75%);\n  --color-grey-225-10-80: hsl(225, 10%, 80%);\n  --color-grey-225-10-85: hsl(225, 10%, 85%);\n  --color-grey-225-10-90: hsl(225, 10%, 90%);\n  --color-grey-225-10-95: hsl(225, 10%, 95%);\n  --color-grey-225-10-97: hsl(225, 10%, 97%);\n\n  --color-blue-205-100-45: hsl(205, 100%, 45%);\n  --color-blue-205-100-45-opacity-30: hsla(205, 100%, 45%, 30%);\n  --color-blue-205-100-50: hsl(205, 100%, 50%);\n  --color-blue-205-100-50-opacity-15: hsla(205, 100%, 50%, 15%);\n  --color-blue-205-100-70: hsl(205, 100%, 75%);\n  --color-blue-205-100-95: hsl(205, 100%, 95%);\n\n  --color-green-150-86-44: hsl(150, 86%, 44%);\n\n  --color-red-360-100-40: hsl(360, 100%, 40%);\n  --color-red-360-100-45: hsl(360, 100%, 45%);\n  --color-red-360-100-92: hsl(360, 100%, 92%);\n  --color-red-360-100-97: hsl(360, 100%, 97%);\n\n  --color-white: hsl(0, 0%, 100%);\n  --color-black: hsl(0, 0%, 0%);\n  --color-black-opacity-10: hsla(0, 0%, 0%, 10%);\n  --color-black-opacity-30: hsla(0, 0%, 0%, 30%);\n\n  --canvas-fill-color: var(--color-white);\n\n  --bendpoint-fill-color: var(--color-blue-205-100-45);\n  --bendpoint-stroke-color: var(--canvas-fill-color);\n\n  --context-pad-entry-background-color: var(--color-white);\n  --context-pad-entry-hover-background-color: var(--color-grey-225-10-95);\n\n  --element-dragger-color: var(--color-blue-205-100-50);\n  --element-hover-outline-fill-color: var(--color-blue-205-100-45);\n  --element-selected-outline-stroke-color: var(--color-blue-205-100-50);\n  --element-selected-outline-secondary-stroke-color: var(--color-blue-205-100-70);\n\n  --lasso-fill-color: var(--color-blue-205-100-50-opacity-15);\n  --lasso-stroke-color: var(--element-selected-outline-stroke-color);\n\n  --palette-entry-color: var(--color-grey-225-10-15);\n  --palette-entry-hover-color: var(--color-blue-205-100-45);\n  --palette-entry-selected-color: var(--color-blue-205-100-50);\n  --palette-separator-color: var(--color-grey-225-10-75);\n  --palette-toggle-hover-background-color: var(--color-grey-225-10-55);\n  --palette-background-color: var(--color-grey-225-10-97);\n  --palette-border-color: var(--color-grey-225-10-75);\n\n  --popup-font-family: "IBM Plex Sans", sans-serif;\n  --popup-font-size: 14px;\n  --popup-header-entry-selected-color: var(--color-blue-205-100-50);\n  --popup-header-font-weight: bolder;\n  --popup-header-group-divider-color: var(--color-grey-225-10-75);\n  --popup-background-color: var(--color-white);\n  --popup-border-color: transparent;\n  --popup-shadow-color: var(--color-black-opacity-30);\n  --popup-description-color: var(--color-grey-225-10-55);\n  --popup-no-results-color: var(--color-grey-225-10-55);\n  --popup-entry-title-color: var(--color-grey-225-10-55);\n  --popup-entry-hover-color:  var(--color-grey-225-10-95);\n  --popup-search-border-color: var(--color-grey-225-10-75);\n  --popup-search-focus-border-color: var(--color-blue-205-100-50);\n  --popup-search-focus-background-color: var(--color-blue-205-100-95);\n\n  --resizer-fill-color: var(--color-blue-205-100-45);\n  --resizer-stroke-color: var(--canvas-fill-color);\n\n  --search-font-family: "IBM Plex Sans", sans-serif;\n  --search-font-size: 14px;\n  --search-container-background-color: var(--color-white);\n  --search-shadow-color: var(--color-black-opacity-30);\n  --search-input-border-color: var(--color-grey-225-10-75);\n  --search-input-focus-border-color: var(--color-blue-205-100-50);\n  --search-input-focus-background-color: var(--color-blue-205-100-95);\n  --search-result-hover-background-color: var(--color-grey-225-10-95);\n  --search-result-secondary-color: var(--color-grey-225-10-55);\n  --search-preselected-background-color: var(--color-blue-205-100-50-opacity-15);\n\n  --shape-attach-allowed-stroke-color: var(--color-blue-205-100-50);\n  --shape-connect-allowed-fill-color: var(--color-grey-225-10-97);\n  --shape-drop-allowed-fill-color: var(--color-grey-225-10-97);\n  --shape-drop-not-allowed-fill-color: var(--color-red-360-100-97);\n  --shape-resize-preview-stroke-color: var(--color-blue-205-100-50);\n\n  --snap-line-stroke-color: var(--color-blue-205-100-45-opacity-30);\n\n  --space-tool-crosshair-stroke-color: var(--color-black);\n\n  --tooltip-error-background-color: var(--color-red-360-100-97);\n  --tooltip-error-border-color: var(--color-red-360-100-45);\n  --tooltip-error-color: var(--color-red-360-100-45);\n}\n\n/**\n * SVG styles\n */\n\n.djs-container svg.drop-not-ok {\n  background: var(--shape-drop-not-allowed-fill-color) !important;\n}\n\n.djs-container svg.new-parent {\n  background: var(--shape-drop-allowed-fill-color) !important;\n}\n\n/**\n * outline styles\n */\n\n.djs-outline,\n.djs-selection-outline {\n  fill: none;\n  shape-rendering: geometricPrecision;\n  stroke-width: 2px;\n}\n\n.djs-outline {\n  visibility: hidden;\n}\n\n.djs-selection-outline {\n  stroke: var(--element-selected-outline-stroke-color);\n}\n\n.djs-element.selected .djs-outline {\n  visibility: visible;\n\n  stroke: var(--element-selected-outline-stroke-color);\n}\n\n.djs-connection.selected .djs-outline {\n  display: none;\n}\n\n.djs-multi-select .djs-element.selected .djs-outline {\n  stroke: var(--element-selected-outline-secondary-stroke-color);\n  display: block;\n}\n\n.djs-shape.connect-ok .djs-visual > :nth-child(1) {\n  fill: var(--shape-connect-allowed-fill-color) !important;\n}\n\n.djs-shape.connect-not-ok .djs-visual > :nth-child(1),\n.djs-shape.drop-not-ok .djs-visual > :nth-child(1) {\n  fill: var(--shape-drop-not-allowed-fill-color) !important;\n}\n\n.djs-shape.new-parent .djs-visual > :nth-child(1) {\n  fill: var(--shape-drop-allowed-fill-color) !important;\n}\n\n\n/* Override move cursor during drop and connect */\n.drop-not-ok,\n.connect-not-ok,\n.drop-not-ok *,\n.connect-not-ok * {\n  cursor: not-allowed !important;\n}\n\n.drop-ok,\n.connect-ok,\n.drop-ok *,\n.connect-ok * {\n  cursor: default !important;\n}\n\n.djs-element.attach-ok .djs-visual > :nth-child(1) {\n  stroke-width: 5px !important;\n  stroke: var(--shape-attach-allowed-stroke-color) !important;\n}\n\n.djs-frame.connect-not-ok .djs-visual > :nth-child(1),\n.djs-frame.drop-not-ok .djs-visual > :nth-child(1) {\n  stroke-width: 3px !important;\n  stroke: var(--shape-drop-not-allowed-fill-color) !important;\n  fill: none !important;\n}\n\n/**\n* Selection box style\n*\n*/\n.djs-lasso-overlay {\n  fill: var(--lasso-fill-color);\n  stroke: var(--lasso-stroke-color);\n  stroke-width: 2px;\n  shape-rendering: geometricPrecision;\n  pointer-events: none;\n}\n\n/**\n * Resize styles\n */\n.djs-resize-overlay {\n  fill: none;\n\n  stroke-dasharray: 5 1 3 1;\n  stroke: var(--shape-resize-preview-stroke-color);\n\n  pointer-events: none;\n}\n\n.djs-resizer-hit {\n  fill: none;\n  pointer-events: all;\n}\n\n.djs-resizer-visual {\n  fill: var(--resizer-fill-color);\n  stroke-width: 1px;\n  stroke: var(--resizer-stroke-color);\n  shape-rendering: geometricPrecision;\n}\n\n.djs-resizer:hover .djs-resizer-visual {\n  stroke: var(--resizer-stroke-color);\n  stroke-opacity: 1;\n}\n\n.djs-cursor-resize-ns,\n.djs-resizer-n,\n.djs-resizer-s {\n  cursor: ns-resize;\n}\n\n.djs-cursor-resize-ew,\n.djs-resizer-e,\n.djs-resizer-w {\n  cursor: ew-resize;\n}\n\n.djs-cursor-resize-nwse,\n.djs-resizer-nw,\n.djs-resizer-se {\n  cursor: nwse-resize;\n}\n\n.djs-cursor-resize-nesw,\n.djs-resizer-ne,\n.djs-resizer-sw {\n  cursor: nesw-resize;\n}\n\n.djs-shape.djs-resizing > .djs-outline {\n  visibility: hidden !important;\n}\n\n.djs-shape.djs-resizing > .djs-resizer {\n  visibility: hidden;\n}\n\n.djs-dragger > .djs-resizer {\n  visibility: hidden;\n}\n\n/**\n * drag styles\n */\n.djs-dragger * {\n  fill: none !important;\n  stroke: var(--element-dragger-color) !important;\n}\n\n.djs-dragger tspan,\n.djs-dragger text {\n  fill: var(--element-dragger-color) !important;\n  stroke: none !important;\n}\n\n.djs-dragger marker circle,\n.djs-dragger marker path,\n.djs-dragger marker polygon,\n.djs-dragger marker polyline,\n.djs-dragger marker rect {\n  fill: var(--element-dragger-color) !important;\n  stroke: none !important;\n}\n\n.djs-dragger marker text,\n.djs-dragger marker tspan {\n  fill: none !important;\n  stroke: var(--element-dragger-color) !important;\n}\n\n.djs-dragging,\n.djs-dragging > * {\n  opacity: 0.3 !important;\n  pointer-events: none !important;\n}\n\n/**\n * no pointer events for visual\n */\n.djs-visual,\n.djs-outline {\n  pointer-events: none;\n}\n\n.djs-element.attach-ok .djs-hit {\n  stroke-width: 60px !important;\n}\n\n/**\n * all pointer events for hit shape\n */\n.djs-element > .djs-hit-all,\n.djs-element > .djs-hit-no-move {\n  pointer-events: all;\n}\n\n.djs-element > .djs-hit-stroke,\n.djs-element > .djs-hit-click-stroke {\n  pointer-events: stroke;\n}\n\n/**\n * shape / connection basic styles\n */\n.djs-connection .djs-visual {\n  stroke-width: 2px;\n  fill: none;\n}\n\n.djs-cursor-grab {\n  cursor: -webkit-grab;\n  cursor: -moz-grab;\n  cursor: grab;\n}\n\n.djs-cursor-grabbing {\n  cursor: -webkit-grabbing;\n  cursor: -moz-grabbing;\n  cursor: grabbing;\n}\n\n.djs-cursor-crosshair {\n  cursor: crosshair;\n}\n\n.djs-cursor-move {\n  cursor: move;\n}\n\n.djs-cursor-resize-ns {\n  cursor: ns-resize;\n}\n\n.djs-cursor-resize-ew {\n  cursor: ew-resize;\n}\n\n\n/**\n * snapping\n */\n.djs-snap-line {\n  stroke: var(--snap-line-stroke-color);\n  stroke-linecap: round;\n  stroke-width: 2px;\n  pointer-events: none;\n}\n\n/**\n * snapping\n */\n.djs-crosshair {\n  stroke: var(--space-tool-crosshair-stroke-color);\n  stroke-linecap: round;\n  stroke-width: 1px;\n  pointer-events: none;\n  shape-rendering: geometricPrecision;\n  stroke-dasharray: 5, 5;\n}\n\n/**\n * palette\n */\n\n.djs-palette {\n  position: absolute;\n  left: 20px;\n  top: 20px;\n\n  box-sizing: border-box;\n  width: 48px;\n}\n\n.djs-palette .separator {\n  margin: 5px;\n  padding-top: 5px;\n\n  border: none;\n  border-bottom: solid 1px var(--palette-separator-color);\n\n  clear: both;\n}\n\n.djs-palette .entry:before {\n  vertical-align: initial;\n}\n\n.djs-palette .djs-palette-toggle {\n  cursor: pointer;\n}\n\n.djs-palette .entry,\n.djs-palette .djs-palette-toggle {\n  color: var(--palette-entry-color);\n  font-size: 30px;\n\n  text-align: center;\n}\n\n.djs-palette .entry {\n  float: left;\n}\n\n.djs-palette .entry img {\n  max-width: 100%;\n}\n\n.djs-palette .djs-palette-entries:after {\n  content: \'\';\n  display: table;\n  clear: both;\n}\n\n.djs-palette .djs-palette-toggle:hover {\n  background: var(--palette-toggle-hover-background-color);\n}\n\n.djs-palette .entry:hover {\n  color: var(--palette-entry-hover-color);\n}\n\n.djs-palette .highlighted-entry {\n  color: var(--palette-entry-selected-color) !important;\n}\n\n.djs-palette .entry,\n.djs-palette .djs-palette-toggle {\n  width: 46px;\n  height: 46px;\n  line-height: 46px;\n  cursor: default;\n}\n\n/**\n * Palette open / two-column layout is controlled via\n * classes on the palette. Events to hook into palette\n * changed life-cycle are available in addition.\n */\n.djs-palette.two-column.open {\n  width: 94px;\n}\n\n.djs-palette:not(.open) .djs-palette-entries {\n  display: none;\n}\n\n.djs-palette:not(.open) {\n  overflow: hidden;\n}\n\n.djs-palette.open .djs-palette-toggle {\n  display: none;\n}\n\n/**\n * context-pad\n */\n.djs-context-pad {\n  position: absolute;\n  display: none;\n  pointer-events: none;\n  line-height: 1;\n  width: 72px;\n  z-index: 100;\n}\n\n.djs-context-pad .entry {\n  width: 22px;\n  height: 22px;\n  text-align: center;\n  display: inline-block;\n  font-size: 22px;\n  margin: 0 2px 2px 0;\n\n  border-radius: 3px;\n\n  cursor: default;\n\n  background-color: var(--context-pad-entry-background-color);\n  box-shadow: 0 0 2px 1px var(--context-pad-entry-background-color);\n  pointer-events: all;\n  vertical-align: middle;\n}\n\n.djs-context-pad .entry:hover {\n  background: var(--context-pad-entry-hover-background-color);\n}\n\n.djs-context-pad.open {\n  display: block;\n}\n\n/**\n * popup styles\n */\n.djs-popup {\n  line-height: 1;\n  box-sizing: border-box;\n  width: min-content;\n  background: var(--popup-background-color);\n  overflow: hidden;\n  position: fixed;\n  z-index: 200;\n  box-shadow: 0px 2px 6px var(--popup-shadow-color);\n  border: solid 1px var(--popup-border-color);\n  min-width: 120px;\n  outline: none;\n  font-size: var(--popup-font-size);\n  font-family: var(--popup-font-family);\n}\n\n.djs-popup-search input {\n  width: 100%;\n  box-sizing: border-box;\n  font-size: var(--popup-font-size);\n  padding: 3px 6px 3px 28px;\n  border-radius: 2px;\n  border: solid 1px var(--popup-search-border-color);\n  line-height: 21px;\n}\n\n.djs-popup-search input:focus {\n  background-color: var(--popup-search-focus-background-color);\n  border: solid 1px var(--popup-search-focus-border-color);\n  outline: none;\n}\n\n.djs-popup-header {\n  display: flex;\n  align-items: stretch;\n  line-height: 20px;\n  margin: 10px 12px 10px 12px;\n}\n\n.djs-popup-header .entry {\n  border-radius: 2px;\n}\n\n.djs-popup button.entry {\n  padding: 0;\n  background: transparent;\n  border: 0;\n}\n\n.djs-popup-header .entry.active {\n  color: var(--popup-header-entry-selected-color);\n}\n\n.djs-popup-header .entry.disabled {\n  color: inherit;\n}\n\n.djs-popup-header-group {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n\n.djs-popup-header-group .entry {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n}\n\n.djs-popup-header-group + .djs-popup-header-group:before {\n  content: \'\';\n  width: 1px;\n  height: 20px;\n  background: var(--popup-header-group-divider-color);\n  margin: 0 5px;\n}\n\n.djs-popup-search {\n  position: relative;\n  width: auto;\n  margin: 10px 12px;\n}\n\n.djs-popup-title {\n  font-size: var(--popup-font-size);\n  font-weight: var(--popup-header-font-weight);\n  flex: 1;\n  margin: 0;\n}\n\n.djs-popup-search-icon {\n  position: absolute;\n  left: 8px;\n  top: 7px;\n}\n\n.djs-popup-results {\n  margin: 7px 3px 7px 12px;\n  list-style: none;\n  max-height: 280px;\n  overflow: auto;\n  padding-right: 9px;\n}\n\n.djs-popup-group {\n  margin: 0;\n  padding: 0;\n  width: 100%;\n}\n\n.djs-popup-body .entry,\n.djs-popup-body .entry-header {\n  padding: 5px 7px;\n  cursor: default;\n  border-radius: 4px;\n}\n\n.djs-popup-body .entry-header {\n  font-weight: var(--popup-header-font-weight);\n  color: var(--popup-entry-title-color);\n  padding-left: 0;\n}\n\n.djs-popup [class*="icon"] .djs-popup-label,\n.djs-popup-label:not(:first-child) {\n  margin-left: .5em;\n}\n\n.djs-popup [class*="icon"]:before,\n.djs-popup-entry-icon {\n  width: 1em;\n  height: 1em;\n  display: inline-block;\n  font-size: 1.4em;\n  vertical-align: middle;\n}\n\n.djs-popup-body .entry-header:not(:first-child) {\n  margin-top: 8px;\n  margin-bottom: 2px;\n}\n\n.djs-popup-body .entry {\n  display: flex;\n  flex-direction: row;\n  align-items: stretch;\n  height: min-content;\n}\n\n.djs-popup .entry.selected {\n  background-color: var(--popup-entry-hover-color);\n}\n\n.djs-popup-body .entry:not(:first-child) {\n  margin-top: 2px;\n}\n\n.djs-popup-entry-content {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  overflow: hidden;\n}\n\n.djs-popup-entry-description {\n  color: var(--popup-description-color);\n}\n\n.djs-popup-label,\n.djs-popup-entry-description {\n  line-height: 1.4em;\n}\n\n.djs-popup .entry,\n.djs-popup .entry-header {\n  margin: 1px;\n}\n\n.djs-popup-title,\n.djs-popup-label,\n.djs-popup-entry-description,\n.djs-popup .entry-header {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.djs-popup-entry-name {\n  display: flex;\n}\n\n.djs-popup-body {\n  flex-direction: column;\n  width: auto;\n}\n\n.djs-popup *::-webkit-scrollbar {\n  width: 6px;\n}\n\n.djs-popup *::-webkit-scrollbar-thumb {\n  border-radius: 3px;\n  background-color: rgba(0, 0, 0, 0.2);\n}\n\n.djs-popup *::-webkit-scrollbar-track {\n  box-shadow: none;\n  background: transparent;\n  margin: 0;\n  padding: 5px;\n}\n\n.djs-popup-no-results {\n  padding: 0 12px 12px 12px;\n  color: var(--popup-no-results-color);\n}\n\n.djs-popup-entry-docs {\n  flex: 0;\n  flex-direction: row;\n  align-items: center;\n  padding-left: 5px;\n  display: none;\n}\n\n.djs-popup-body .entry:hover .djs-popup-entry-docs {\n  display: flex;\n}\n\n.djs-popup-entry-docs svg {\n  vertical-align: middle;\n  margin: auto 2px auto 5px;\n}\n\n/**\n *  palette styles\n */\n.djs-palette {\n  background: var(--palette-background-color);\n  border: solid 1px var(--palette-border-color);\n  border-radius: 2px;\n}\n\n/**\n * bendpoints\n */\n.djs-segment-dragger,\n.djs-bendpoint {\n  display: none;\n}\n\n.djs-segment-dragger .djs-visual {\n  display: none;\n\n  fill: var(--bendpoint-fill-color);\n  stroke: var(--bendpoint-stroke-color);\n  stroke-width: 1px;\n  stroke-opacity: 1;\n}\n\n.djs-segment-dragger:hover .djs-visual {\n  display: block;\n}\n\n.djs-bendpoint .djs-visual {\n  fill: var(--bendpoint-fill-color);\n  stroke: var(--bendpoint-stroke-color);\n  stroke-width: 1px;\n}\n\n.djs-segment-dragger:hover,\n.djs-bendpoints.hover .djs-segment-dragger,\n.djs-bendpoints.selected .djs-segment-dragger,\n.djs-bendpoint:hover,\n.djs-bendpoints.hover .djs-bendpoint,\n.djs-bendpoints.selected .djs-bendpoint {\n  display: block;\n}\n\n.djs-drag-active .djs-bendpoints * {\n  display: none;\n}\n\n.djs-bendpoints:not(.hover) .floating {\n  display: none;\n}\n\n.djs-segment-dragger:hover .djs-visual,\n.djs-segment-dragger.djs-dragging .djs-visual,\n.djs-bendpoint:hover .djs-visual,\n.djs-bendpoint.floating .djs-visual {\n  fill: var(--bendpoint-fill-color);\n  stroke: var(--bendpoint-stroke-color);\n  stroke-opacity: 1;\n}\n\n.djs-bendpoint.floating .djs-hit {\n  pointer-events: none;\n}\n\n.djs-segment-dragger .djs-hit,\n.djs-bendpoint .djs-hit {\n  fill: none;\n  pointer-events: all;\n}\n\n.djs-segment-dragger.horizontal .djs-hit {\n  cursor: ns-resize;\n}\n\n.djs-segment-dragger.vertical .djs-hit {\n  cursor: ew-resize;\n}\n\n.djs-segment-dragger.djs-dragging .djs-hit {\n  pointer-events: none;\n}\n\n.djs-updating,\n.djs-updating > * {\n  pointer-events: none !important;\n}\n\n.djs-updating .djs-context-pad,\n.djs-updating .djs-outline,\n.djs-updating .djs-bendpoint,\n.djs-multi-select .djs-bendpoint,\n.djs-multi-select .djs-segment-dragger,\n.connect-ok .djs-bendpoint,\n.connect-not-ok .djs-bendpoint,\n.drop-ok .djs-bendpoint,\n.drop-not-ok .djs-bendpoint {\n  display: none !important;\n}\n\n.djs-segment-dragger.djs-dragging,\n.djs-bendpoint.djs-dragging {\n  display: block;\n  opacity: 1.0;\n}\n\n\n/**\n * tooltips\n */\n.djs-tooltip-error {\n  width: 160px;\n  padding: 6px;\n\n  background: var(--tooltip-error-background-color);\n  border: solid 1px var(--tooltip-error-border-color);\n  border-radius: 2px;\n  color: var(--tooltip-error-color);\n  font-size: 12px;\n  line-height: 16px;\n\n  opacity: 0.75;\n}\n\n.djs-tooltip-error:hover {\n  opacity: 1;\n}\n\n\n/**\n * search pad\n */\n.djs-search-open .djs-context-pad {\n  display: none;\n}\n\n.djs-search-open .djs-connection.selected .djs-outline {\n  display: block;\n}\n\n.djs-search-container {\n  position: absolute;\n  top: 20px;\n  left: 0;\n  right: 0;\n  margin-left: auto;\n  margin-right: auto;\n\n  width: 25%;\n  min-width: 300px;\n  max-width: 400px;\n  z-index: 10;\n\n  font-family: var(--search-font-family);\n  font-size: var(--search-font-size);\n  border-radius: 2px;\n  box-shadow: 0px 2px 6px var(--search-shadow-color);\n}\n\n.djs-search-container:not(.open) {\n  display: none;\n}\n\n.djs-search-input {\n  position: relative;\n}\n\n.djs-search-input svg {\n  position: absolute;\n  left: 8px;\n  top: 7px;\n}\n\n.djs-search-input input {\n  font-size: var(--search-font-size);\n  width: 100%;\n  padding: 3px 6px 3px 28px;\n  border: 1px solid var(--search-input-border-color);\n  border-radius: 2px;\n  box-sizing: border-box;\n  line-height: 21px;\n}\n\n.djs-search-input input:focus {\n  background-color: var(--search-input-focus-background-color);\n  border: solid 1px var(--search-input-focus-border-color);\n  outline: none;\n}\n\n.djs-search-results {\n  position: relative;\n  overflow-y: auto;\n  max-height: 200px;\n  background: var(--search-container-background-color);\n}\n\n.djs-search-result {\n  padding: 6px 8px;\n}\n\n.djs-search-result-primary {\n  margin: 0 0 3px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n}\n\n.djs-search-result-secondary {\n  font-family: monospace;\n  margin: 0;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  color: var(--search-result-secondary-color);\n}\n\n.djs-search-result:hover {\n  background: var(--search-result-hover-background-color);\n}\n\n.djs-search-result-selected {\n  background: var(--search-result-hover-background-color);\n}\n\n.djs-search-result-selected:hover {\n  background: var(--search-result-hover-background-color);\n}\n\n.djs-search-open .djs-element .djs-outline {\n  fill: var(--search-preselected-background-color) !important;\n}\n\n/**\n * hidden styles\n */\n.djs-element-hidden,\n.djs-element-hidden .djs-hit,\n.djs-element-hidden .djs-outline,\n.djs-label-hidden .djs-label {\n  display: none !important;\n}\n\n.djs-element .djs-hit-stroke,\n.djs-element .djs-hit-click-stroke,\n.djs-element .djs-hit-all {\n  cursor: move;\n}'],sourceRoot:""}]);const a=s},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},659:e=>{var t={};e.exports=function(e,n){var o=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,r&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(o,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={id:o,exports:{}};return e[o](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0;var o={};n.d(o,{default:()=>Gs});const r=/^class[ {]/;function i(e){return Array.isArray(e)}function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function a(...e){1===e.length&&i(e[0])&&(e=e[0]);const t=(e=[...e]).pop();return t.$inject=e,t}const c=/constructor\s*[^(]*\(\s*([^)]*)\)/m,l=/^(?:async\s+)?(?:function\s*[^(]*)?(?:\(\s*([^)]*)\)|(\w+))/m,d=/\/\*([^*]*)\*\//m;function p(e){if("function"!=typeof e)throw new Error(`Cannot annotate "${e}". Expected a function!`);const t=e.toString().match(function(e){return r.test(e.toString())}(e)?c:l);if(!t)return[];const n=t[1]||t[2];return n&&n.split(",").map(e=>{const t=e.match(d);return(t&&t[1]||e).trim()})||[]}function u(e,t){const n=t||{get:function(e,t){if(o.push(e),!1===t)return null;throw d(`No provider for "${e}"!`)}},o=[],r=this._providers=Object.create(n._providers||null),c=this._instances=Object.create(null),l=c.injector=this,d=function(e){const t=o.join(" -> ");return o.length=0,new Error(t?`${e} (Resolving: ${t})`:e)};function f(e,t){if(!r[e]&&e.includes(".")){const t=e.split(".");let n=f(t.shift());for(;t.length;)n=n[t.shift()];return n}if(s(c,e))return c[e];if(s(r,e)){if(-1!==o.indexOf(e))throw o.push(e),d("Cannot resolve circular dependency!");return o.push(e),c[e]=r[e][0](r[e][1]),o.pop(),c[e]}return n.get(e,t)}function g(e,t){if(void 0===t&&(t={}),"function"!=typeof e){if(!i(e))throw d(`Cannot invoke "${e}". Expected a function!`);e=a(e.slice())}return{fn:e,dependencies:(e.$inject||p(e)).map(e=>s(t,e)?t[e]:f(e))}}function v(e){const{fn:t,dependencies:n}=g(e);return new(Function.prototype.bind.call(t,null,...n))}function A(e,t,n){const{fn:o,dependencies:r}=g(e,n);return o.apply(t,r)}function y(e){return a(t=>e.get(t))}function m(e,t){if(t&&t.length){const n=Object.create(null),o=Object.create(null),i=[],s=[],a=[];let c,l,d,p;for(let e in r)c=r[e],-1!==t.indexOf(e)&&("private"===c[2]?(l=i.indexOf(c[3]),-1===l?(d=c[3].createChild([],t),p=y(d),i.push(c[3]),s.push(d),a.push(p),n[e]=[p,e,"private",d]):n[e]=[a[l],e,"private",s[l]]):n[e]=[c[2],c[1]],o[e]=!0),"factory"!==c[2]&&"type"!==c[2]||!c[1].$scope||t.forEach(t=>{-1!==c[1].$scope.indexOf(t)&&(n[e]=[c[2],c[1]],o[t]=!0)});t.forEach(e=>{if(!o[e])throw new Error('No provider for "'+e+'". Cannot use provider from the parent!')}),e.unshift(n)}return new u(e,l)}const x={factory:A,type:v,value:function(e){return e}};function E(e,t){const n=e.__init__||[];return function(){n.forEach(e=>{"string"==typeof e?t.get(e):t.invoke(e)})}}function _(e){const t=e.__exports__;if(t){const n=e.__modules__,o=Object.keys(e).reduce((t,n)=>("__exports__"!==n&&"__modules__"!==n&&"__init__"!==n&&"__depends__"!==n&&(t[n]=e[n]),t),Object.create(null)),i=m((n||[]).concat(o)),s=a(function(e){return i.get(e)});t.forEach(function(e){r[e]=[s,e,"private",i]});const c=(e.__init__||[]).slice();return c.unshift(function(){i.init()}),E(e=Object.assign({},e,{__init__:c}),i)}return Object.keys(e).forEach(function(t){if("__init__"===t||"__depends__"===t)return;const n=e[t];if("private"===n[2])return void(r[t]=n);const o=n[0],i=n[1];r[t]=[x[o],h(o,i),o]}),E(e,l)}function b(e,t){return-1!==e.indexOf(t)||-1!==(e=(t.__depends__||[]).reduce(b,e)).indexOf(t)?e:e.concat(t)}this.get=f,this.invoke=A,this.instantiate=v,this.createChild=m,this.init=function(e){const t=e.reduce(b,[]).map(_);let n=!1;return function(){n||(n=!0,t.forEach(e=>e()))}}(e)}function h(e,t){return"value"!==e&&i(t)&&(t=a(t.slice())),t}function f(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}function g(e,t){var n=this;t=t||1e3,e.on(["render.shape","render.connection"],t,function(e,t){var o=e.type,r=t.element,i=t.gfx,s=t.attrs;if(n.canRender(r))return"render.shape"===o?n.drawShape(i,r,s):n.drawConnection(i,r,s)}),e.on(["render.getShapePath","render.getConnectionPath"],t,function(e,t){if(n.canRender(t))return"render.getShapePath"===e.type?n.getShapePath(t):n.getConnectionPath(t)})}g.prototype.canRender=function(e){},g.prototype.drawShape=function(e,t){},g.prototype.drawConnection=function(e,t){},g.prototype.getShapePath=function(e){},g.prototype.getConnectionPath=function(e){};const v=Object.prototype.toString,A=Object.prototype.hasOwnProperty;function y(e){return void 0===e}function m(e){return void 0!==e}function x(e){return null==e}function E(e){return"[object Array]"===v.call(e)}function _(e){return"[object Object]"===v.call(e)}function b(e){return"[object Number]"===v.call(e)}function C(e){const t=v.call(e);return"[object Function]"===t||"[object AsyncFunction]"===t||"[object GeneratorFunction]"===t||"[object AsyncGeneratorFunction]"===t||"[object Proxy]"===t}function w(e){return"[object String]"===v.call(e)}function j(e,t){return!x(e)&&A.call(e,t)}function k(e,t){const n=$(t);let o;return S(e,function(e,t){if(n(e,t))return o=e,!1}),o}function B(e,t){const n=$(t);let o=[];return S(e,function(e,t){n(e,t)&&o.push(e)}),o}function S(e,t){let n,o;if(y(e))return;const r=E(e)?H:W;for(let i in e)if(j(e,i)&&(n=e[i],o=t(n,r(i)),!1===o))return n}function D(e,t,n){return S(e,function(e,o){n=t(n,e,o)}),n}function z(e,t){return!!D(e,function(e,n,o){return e&&t(n,o)},!0)}function M(e,t){let n=[];return S(e,function(e,o){n.push(t(e,o))}),n}function P(e){return M(e,e=>e)}function O(e,t,n={}){return t=F(t),S(e,function(e){let o=t(e)||"_",r=n[o];r||(r=n[o]=[]),r.push(e)}),n}function R(e,...t){e=F(e);let n={};return S(t,t=>O(t,e,n)),M(n,function(e,t){return e[0]})}function T(e,t){t=F(t);let n=[];return S(e,function(e,o){let r=t(e,o),i={d:r,v:e};for(var s=0;s<n.length;s++){let{d:e}=n[s];if(r<e)return void n.splice(s,0,i)}n.push(i)}),M(n,e=>e.v)}function L(e){return function(t){return z(e,function(e,n){return t[n]===e})}}function F(e){return C(e)?e:t=>t[e]}function $(e){return C(e)?e:t=>t===e}function W(e){return e}function H(e){return Number(e)}function q(e,t){return e.bind(t)}function I(e,...t){return Object.assign(e,...t)}function G(e,t){let n={},o=Object(e);return S(t,function(t){t in o&&(n[t]=e[t])}),n}function N(e,t){return function(e,t){t.appendChild(function(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch(e){}return e}(e,t))}(t,e),e}var V={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":2,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":2,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function U(e,t,n){var o=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=V[o];r?(2===r&&"number"==typeof n&&(n=String(n)+"px"),e.style[o]=n):e.setAttributeNS(null,t,n)}function Y(e,t,n){if("string"==typeof t){if(void 0===n)return function(e,t){return V[t]?e.style[t]:e.getAttributeNS(null,t)}(e,t);U(e,t,n)}else!function(e,t){var n,o,r=Object.keys(t);for(n=0;o=r[n];n++)U(e,o,t[o])}(e,t);return e}const X=Object.prototype.toString;function Z(e){return new K(e)}function K(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}function Q(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}function J(e){return e.cloneNode(!0)}K.prototype.add=function(e){return this.list.add(e),this},K.prototype.remove=function(e){return"[object RegExp]"==X.call(e)?this.removeMatching(e):(this.list.remove(e),this)},K.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},K.prototype.toggle=function(e,t){return void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this},K.prototype.array=function(){return Array.from(this.list)},K.prototype.has=K.prototype.contains=function(e){return this.list.contains(e)};var ee="http://www.w3.org/2000/svg",te='<svg xmlns="'+ee+'"';function ne(e,t){var n;return"<"===(e=e.trim()).charAt(0)?(n=function(e){var t=!1;"<svg"===e.substring(0,4)?-1===e.indexOf(ee)&&(e=te+e.substring(4)):(e=te+">"+e+"</svg>",t=!0);var n=function(e){var t;return(t=new DOMParser).async=!1,t.parseFromString(e,"text/xml")}(e);if(!t)return n;for(var o=document.createDocumentFragment(),r=n.firstChild;r.firstChild;)o.appendChild(r.firstChild);return o}(e).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(ee,e),t&&Y(n,t),n}var oe=null;function re(){return null===oe&&(oe=ne("svg")),oe}function ie(e,t){var n,o,r=Object.keys(t);for(n=0;o=r[n];n++)e[o]=t[o];return e}function se(e){return e?re().createSVGTransformFromMatrix(e):re().createSVGTransform()}function ae(e){var t=e.parentNode;return t&&t.removeChild(e),e}function ce(e,t){return t instanceof SVGMatrix?e.createSVGTransformFromMatrix(t):t}function le(e,t){var n=e.transform.baseVal;return t&&(Array.isArray(t)||(t=[t]),function(e,t){var n,o;for(e.clear(),n=0;o=t[n];n++)e.appendItem(ce(e,o))}(n,t)),n.consolidate()}function de(e){return e.flat().join(",").replace(/,?([A-Za-z]),?/g,"$1")}function pe(e){return["L",e.x,e.y]}function ue(e,t,n){return["C",e.x,e.y,t.x,t.y,n.x,n.y]}function he(e,t){const n=e.length,o=[(r=e[0],["M",r.x,r.y])];var r;for(let r=1;r<n;r++){const n=e[r-1],i=e[r],s=e[r+1];if(!s||!t){o.push(pe(i));continue}const a=Math.min(t,ge(i.x-n.x,i.y-n.y),ge(s.x-i.x,s.y-i.y));if(!a){o.push(pe(i));continue}const c=fe(i,n,a),l=fe(i,n,.5*a),d=fe(i,s,a),p=fe(i,s,.5*a);o.push(pe(c)),o.push(ue(l,p,d))}return o}function fe(e,t,n){const o=t.x-e.x,r=t.y-e.y,i=n/ge(o,r);return{x:e.x+o*i,y:e.y+r*i}}function ge(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}function ve(e,t,n){b(t)&&(n=t,t=null),t||(t={});const o=ne("path",t);return b(n)&&(o.dataset.cornerRadius=String(n)),Ae(o,e)}function Ae(e,t){return Y(e,{d:de(he(t,parseInt(e.dataset.cornerRadius,10)||0))}),e}function ye(e){return B(e,function(t){return!k(e,function(e){return e!==t&&me(t,e)})})}function me(e,t){if(t){if(e===t)return t;if(e.parent)return me(e.parent,t)}}function xe(e,t,n){var o=!n||-1===e.indexOf(t);return o&&e.push(t),o}function Ee(e,t,n){n=n||0,E(e)||(e=[e]),S(e,function(e,o){var r=t(e,o,n);E(r)&&r.length&&Ee(r,t,n+1)})}function _e(e,t){return function(e,t,n){var o=[],r=[];return Ee(e,function(e,i,s){xe(o,e,t);var a=e.children;if((-1===n||s<n)&&a&&xe(r,a,t))return a}),o}(e,!t,-1)}function be(e,t){var n,o,r,i;return t=!!t,E(e)||(e=[e]),S(e,function(e){var s=e;e.waypoints&&!t&&(s=be(e.waypoints,!0));var a=s.x,c=s.y,l=s.height||0,d=s.width||0;(a<n||void 0===n)&&(n=a),(c<o||void 0===o)&&(o=c),(a+d>r||void 0===r)&&(r=a+d),(c+l>i||void 0===i)&&(i=c+l)}),{x:n,y:o,height:i-o,width:r-n}}function Ce(e){return"waypoints"in e?"connection":"x"in e?"shape":"root"}function we(e){return!(!e||!e.isFrame)}function je(e,t){return I({},e||{},t||{})}function ke(e,t){g.call(this,e,1),this.CONNECTION_STYLE=t.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=t.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=t.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}f(ke,g),ke.prototype.canRender=function(){return!0},ke.prototype.drawShape=function(e,t,n){var o=ne("rect");return Y(o,{x:0,y:0,width:t.width||0,height:t.height||0}),we(t)?Y(o,I({},this.FRAME_STYLE,n||{})):Y(o,I({},this.SHAPE_STYLE,n||{})),N(e,o),o},ke.prototype.drawConnection=function(e,t,n){var o=ve(t.waypoints,I({},this.CONNECTION_STYLE,n||{}));return N(e,o),o},ke.prototype.getShapePath=function(e){var t=e.x,n=e.y,o=e.width;return de([["M",t,n],["l",o,0],["l",0,e.height],["l",-o,0],["z"]])},ke.prototype.getConnectionPath=function(e){var t,n,o=e.waypoints,r=[];for(t=0;n=o[t];t++)n=n.original||n,r.push([0===t?"M":"L",n.x,n.y]);return de(r)},ke.$inject=["eventBus","styles"];const Be={__init__:["defaultRenderer"],defaultRenderer:["type",ke],styles:["type",function(){var e={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},t=this;this.cls=function(e,t,n){return I(this.style(t,n),{class:e})},this.style=function(t,n){E(t)||n||(n=t,t=[]);var o=D(t,function(t,n){return I(t,e[n]||{})},{});return n?I(o,n):o},this.computeStyle=function(e,n,o){return E(n)||(o=n,n=[]),t.style(n||[],I({},o,e||{}))}}]};function Se(e,t){return t.forEach(function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach(function(n){if("default"!==n&&!(n in e)){var o=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,o.get?o:{enumerable:!0,get:function(){return t[n]}})}})}),Object.freeze(e)}const De=Object.prototype.toString,ze=Object.prototype.hasOwnProperty;function Me(e,t){return ze.call(e,t)}function Pe(e,t){let n,o;if(void 0===e)return;const r=(i=e,"[object Array]"===De.call(i)?Re:Oe);var i;for(let i in e)if(Me(e,i)&&(n=e[i],o=t(n,r(i)),!1===o))return n}function Oe(e){return e}function Re(e){return Number(e)}function Te(e,...t){const n=e.style;return Pe(t,function(e){e&&Pe(e,function(e,t){n[t]=e})}),e}function Le(e,t,n){return 2==arguments.length?e.getAttribute(t):null===n?e.removeAttribute(t):(e.setAttribute(t,n),e)}const Fe=Object.prototype.toString;function $e(e){return new We(e)}function We(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}function He(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}function qe(e,t,n){var o=n?e:e.parentNode;return o&&"function"==typeof o.closest&&o.closest(t)||null}We.prototype.add=function(e){return this.list.add(e),this},We.prototype.remove=function(e){return"[object RegExp]"==Fe.call(e)?this.removeMatching(e):(this.list.remove(e),this)},We.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},We.prototype.toggle=function(e,t){return void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this},We.prototype.array=function(){return Array.from(this.list)},We.prototype.has=We.prototype.contains=function(e){return this.list.contains(e)};var Ie,Ge,Ne,Ve={};function Ue(){Ie=window.addEventListener?"addEventListener":"attachEvent",Ge=window.removeEventListener?"removeEventListener":"detachEvent",Ne="addEventListener"!==Ie?"on":""}var Ye,Xe=Se({__proto__:null,bind:Ve.bind=function(e,t,n,o){return Ie||Ue(),e[Ie](Ne+t,n,o||!1),n},unbind:Ve.unbind=function(e,t,n,o){return Ge||Ue(),e[Ge](Ne+t,n,o||!1),n},default:Ve},[Ve]),Ze=["focus","blur"],Ke=function(e,t,n,o,r){return-1!==Ze.indexOf(n)&&(r=!0),Xe.bind(e,n,function(n){var r=n.target||n.srcElement;n.delegateTarget=qe(r,t,!0),n.delegateTarget&&o.call(e,n)},r)},Qe=function(e,t,n,o){return-1!==Ze.indexOf(t)&&(o=!0),Xe.unbind(e,t,n,o)},Je=!1;"undefined"!=typeof document&&((Ye=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',Je=!Ye.getElementsByTagName("link").length,Ye=void 0);var et={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:Je?[1,"X<div>","</div>"]:[0,"",""]};et.td=et.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],et.option=et.optgroup=[1,'<select multiple="multiple">',"</select>"],et.thead=et.tbody=et.colgroup=et.caption=et.tfoot=[1,"<table>","</table>"],et.polyline=et.ellipse=et.polygon=et.circle=et.text=et.line=et.path=et.rect=et.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];var tt=function(e,t){if("string"!=typeof e)throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var o=n[1];if("body"==o)return(r=t.createElement("html")).innerHTML=e,r.removeChild(r.lastChild);var r,i=Object.prototype.hasOwnProperty.call(et,o)?et[o]:et._default,s=i[0],a=i[1],c=i[2];for((r=t.createElement("div")).innerHTML=a+e+c;s--;)r=r.lastChild;if(r.firstChild==r.lastChild)return r.removeChild(r.firstChild);for(var l=t.createDocumentFragment();r.firstChild;)l.appendChild(r.removeChild(r.firstChild));return l};function nt(e,t){return(t=t||document).querySelector(e)}function ot(e){e.parentNode&&e.parentNode.removeChild(e)}function rt(e,t){if(!e||!t)return-1;var n=e.indexOf(t);return-1!==n&&e.splice(n,1),n}function it(e,t,n){if(e&&t){"number"!=typeof n&&(n=-1);var o=e.indexOf(t);if(-1!==o){if(o===n)return;if(-1===n)return;e.splice(o,1)}-1!==n?e.splice(n,0,t):e.push(t)}}function st(e,t){return e&&t?e.indexOf(t):-1}var at=/,?([a-z]),?/gi,ct=parseFloat,lt=Math,dt=lt.PI,pt=lt.min,ut=lt.max,ht=lt.pow,ft=lt.abs,gt=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?[\s]*,?[\s]*)+)/gi,vt=/(-?\d*\.?\d*(?:e[-+]?\d+)?)[\s]*,?[\s]*/gi,At=Array.isArray||function(e){return e instanceof Array};function yt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function mt(e){if("function"==typeof e||Object(e)!==e)return e;var t=new e.constructor;for(var n in e)yt(e,n)&&(t[n]=mt(e[n]));return t}function xt(e){var t=xt.ps=xt.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var n in t)yt(t,n)&&n!=e&&(t[n].sleep--,!t[n].sleep&&delete t[n])}),t[e]}function Et(e,t,n,o){return 1===arguments.length&&(t=e.y,n=e.width,o=e.height,e=e.x),{x:e,y:t,width:n,height:o,x2:e+n,y2:t+o}}function _t(){return this.join(",").replace(at,"$1")}function bt(e){var t=mt(e);return t.toString=_t,t}function Ct(e,t,n,o,r,i,s,a,c){var l=1-c,d=ht(l,3),p=ht(l,2),u=c*c*c,h=d*t+3*p*c*o+3*l*c*c*i+u*a;return{x:Dt(d*e+3*p*c*n+3*l*c*c*r+u*s),y:Dt(h)}}function wt(e){var t=function(e,t,n,o,r,i,s,a){for(var c,l,d,p,u,h,f,g,v=[],A=[[],[]],y=0;y<2;++y)if(0==y?(l=6*e-12*n+6*r,c=-3*e+9*n-9*r+3*s,d=3*n-3*e):(l=6*t-12*o+6*i,c=-3*t+9*o-9*i+3*a,d=3*o-3*t),ft(c)<1e-12){if(ft(l)<1e-12)continue;0<(p=-d/l)&&p<1&&v.push(p)}else f=l*l-4*d*c,g=lt.sqrt(f),f<0||(0<(u=(-l+g)/(2*c))&&u<1&&v.push(u),0<(h=(-l-g)/(2*c))&&h<1&&v.push(h));for(var m,x=v.length,E=x;x--;)m=1-(p=v[x]),A[0][x]=m*m*m*e+3*m*m*p*n+3*m*p*p*r+p*p*p*s,A[1][x]=m*m*m*t+3*m*m*p*o+3*m*p*p*i+p*p*p*a;return A[0][E]=e,A[1][E]=t,A[0][E+1]=s,A[1][E+1]=a,A[0].length=A[1].length=E+2,{x0:pt(...A[0]),y0:pt(...A[1]),x1:ut(...A[0]),y1:ut(...A[1])}}(...e);return Et(t.x0,t.y0,t.x1-t.x0,t.y1-t.y0)}function jt(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height}function kt(e,t,n,o,r){return e*(e*(-3*t+9*n-9*o+3*r)+6*t-12*n+6*o)-3*t+3*n}function Bt(e,t,n,o,r,i,s,a,c){null==c&&(c=1);for(var l=(c=c>1?1:c<0?0:c)/2,d=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],p=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],u=0,h=0;h<12;h++){var f=l*d[h]+l,g=kt(f,e,n,r,s),v=kt(f,t,o,i,a),A=g*g+v*v;u+=p[h]*lt.sqrt(A)}return l*u}function St(e,t,n,o,r,i,s,a){if(!(ut(e,n)<pt(r,s)||pt(e,n)>ut(r,s)||ut(t,o)<pt(i,a)||pt(t,o)>ut(i,a))){var c=(e*o-t*n)*(i-a)-(t-o)*(r*a-i*s),l=(e-n)*(i-a)-(t-o)*(r-s);if(l){var d=Dt(((e*o-t*n)*(r-s)-(e-n)*(r*a-i*s))/l),p=Dt(c/l),u=+d.toFixed(2),h=+p.toFixed(2);if(!(u<+pt(e,n).toFixed(2)||u>+ut(e,n).toFixed(2)||u<+pt(r,s).toFixed(2)||u>+ut(r,s).toFixed(2)||h<+pt(t,o).toFixed(2)||h>+ut(t,o).toFixed(2)||h<+pt(i,a).toFixed(2)||h>+ut(i,a).toFixed(2)))return{x:d,y:p}}}}function Dt(e){return Math.round(1e11*e)/1e11}function zt(e,t,n){if(o=wt(e),r=wt(t),o=Et(o),!(jt(r=Et(r),o.x,o.y)||jt(r,o.x2,o.y)||jt(r,o.x,o.y2)||jt(r,o.x2,o.y2)||jt(o,r.x,r.y)||jt(o,r.x2,r.y)||jt(o,r.x,r.y2)||jt(o,r.x2,r.y2)||(o.x<r.x2&&o.x>r.x||r.x<o.x2&&r.x>o.x)&&(o.y<r.y2&&o.y>r.y||r.y<o.y2&&r.y>o.y)))return n?0:[];for(var o,r,i=Bt(...e),s=Bt(...t),a=Pt(e)?1:~~(i/5)||1,c=Pt(t)?1:~~(s/5)||1,l=[],d=[],p={},u=n?0:[],h=0;h<a+1;h++){var f=Ct(...e,h/a);l.push({x:f.x,y:f.y,t:h/a})}for(h=0;h<c+1;h++)f=Ct(...t,h/c),d.push({x:f.x,y:f.y,t:h/c});for(h=0;h<a;h++)for(var g=0;g<c;g++){var v,A=l[h],y=l[h+1],m=d[g],x=d[g+1],E=ft(y.x-A.x)<.01?"y":"x",_=ft(x.x-m.x)<.01?"y":"x",b=St(A.x,A.y,y.x,y.y,m.x,m.y,x.x,x.y);if(b){if(p[v=b.x.toFixed(9)+"#"+b.y.toFixed(9)])continue;p[v]=!0;var C=A.t+ft((b[E]-A[E])/(y[E]-A[E]))*(y.t-A.t),w=m.t+ft((b[_]-m[_])/(x[_]-m[_]))*(x.t-m.t);C>=0&&C<=1&&w>=0&&w<=1&&(n?u++:u.push({x:b.x,y:b.y,t1:C,t2:w}))}}return u}function Mt(e){var t=xt(e);if(t.abs)return bt(t.abs);if(At(e)&&At(e&&e[0])||(e=function(e){if(!e)return null;var t=xt(e);if(t.arr)return mt(t.arr);var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},o=[];return At(e)&&At(e[0])&&(o=mt(e)),o.length||String(e).replace(gt,function(e,t,r){var i=[],s=t.toLowerCase();for(r.replace(vt,function(e,t){t&&i.push(+t)}),"m"==s&&i.length>2&&(o.push([t,...i.splice(0,2)]),s="l",t="m"==t?"l":"L");i.length>=n[s]&&(o.push([t,...i.splice(0,n[s])]),n[s]););}),o.toString=xt.toString,t.arr=mt(o),o}(e)),!e||!e.length)return[["M",0,0]];var n,o=[],r=0,i=0,s=0,a=0,c=0;"M"==e[0][0]&&(s=r=+e[0][1],a=i=+e[0][2],c++,o[0]=["M",r,i]);for(var l,d,p=c,u=e.length;p<u;p++){if(o.push(l=[]),(n=(d=e[p])[0])!=n.toUpperCase())switch(l[0]=n.toUpperCase(),l[0]){case"A":l[1]=d[1],l[2]=d[2],l[3]=d[3],l[4]=d[4],l[5]=d[5],l[6]=+d[6]+r,l[7]=+d[7]+i;break;case"V":l[1]=+d[1]+i;break;case"H":l[1]=+d[1]+r;break;case"M":s=+d[1]+r,a=+d[2]+i;default:for(var h=1,f=d.length;h<f;h++)l[h]=+d[h]+(h%2?r:i)}else for(var g=0,v=d.length;g<v;g++)l[g]=d[g];switch(n=n.toUpperCase(),l[0]){case"Z":r=+s,i=+a;break;case"H":r=l[1];break;case"V":i=l[1];break;case"M":s=l[l.length-2],a=l[l.length-1];default:r=l[l.length-2],i=l[l.length-1]}}return o.toString=_t,t.abs=bt(o),o}function Pt(e){return e[0]===e[2]&&e[1]===e[3]&&e[4]===e[6]&&e[5]===e[7]}function Ot(e,t,n,o){return[e,t,n,o,n,o]}function Rt(e,t,n,o,r,i){var s=1/3,a=2/3;return[s*e+a*n,s*t+a*o,s*r+a*n,s*i+a*o,r,i]}function Tt(e,t,n,o,r,i,s,a,c,l){var d,p,u=120*dt/180,h=dt/180*(+r||0),f=[],g=(p=function(e,t,n){return{x:e*lt.cos(n)-t*lt.sin(n),y:e*lt.sin(n)+t*lt.cos(n)}},function e(){var t=Array.prototype.slice.call(arguments,0).join(""),n=e.cache=e.cache||{},o=e.count=e.count||[];return yt(n,t)?(function(e,t){for(var n=0,o=e.length;n<o;n++)if(e[n]===t)return e.push(e.splice(n,1)[0])}(o,t),n[t]):(o.length>=1e3&&delete n[o.shift()],o.push(t),n[t]=p(...arguments),n[t])});if(l)C=l[0],w=l[1],_=l[2],b=l[3];else{e=(d=g(e,t,-h)).x,t=d.y;var v=(e-(a=(d=g(a,c,-h)).x))/2,A=(t-(c=d.y))/2,y=v*v/(n*n)+A*A/(o*o);y>1&&(n*=y=lt.sqrt(y),o*=y);var m=n*n,x=o*o,E=(i==s?-1:1)*lt.sqrt(ft((m*x-m*A*A-x*v*v)/(m*A*A+x*v*v))),_=E*n*A/o+(e+a)/2,b=E*-o*v/n+(t+c)/2,C=lt.asin(((t-b)/o).toFixed(9)),w=lt.asin(((c-b)/o).toFixed(9));(C=e<_?dt-C:C)<0&&(C=2*dt+C),(w=a<_?dt-w:w)<0&&(w=2*dt+w),s&&C>w&&(C-=2*dt),!s&&w>C&&(w-=2*dt)}var j=w-C;if(ft(j)>u){var k=w,B=a,S=c;w=C+u*(s&&w>C?1:-1),f=Tt(a=_+n*lt.cos(w),c=b+o*lt.sin(w),n,o,r,0,s,B,S,[w,k,_,b])}j=w-C;var D=lt.cos(C),z=lt.sin(C),M=lt.cos(w),P=lt.sin(w),O=lt.tan(j/4),R=4/3*n*O,T=4/3*o*O,L=[e,t],F=[e+R*z,t-T*D],$=[a+R*P,c-T*M],W=[a,c];if(F[0]=2*L[0]-F[0],F[1]=2*L[1]-F[1],l)return[F,$,W].concat(f);for(var H=[],q=0,I=(f=[F,$,W].concat(f).join().split(",")).length;q<I;q++)H[q]=q%2?g(f[q-1],f[q],h).y:g(f[q],f[q+1],h).x;return H}function Lt(e){var t=xt(e);if(t.curve)return bt(t.curve);for(var n=Mt(e),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},r=function(e,t,n){var o,r;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C",...Tt(t.x,t.y,...e.slice(1))];break;case"S":"C"==n||"S"==n?(o=2*t.x-t.bx,r=2*t.y-t.by):(o=t.x,r=t.y),e=["C",o,r,...e.slice(1)];break;case"T":"Q"==n||"T"==n?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C",...Rt(t.x,t.y,t.qx,t.qy,e[1],e[2])];break;case"Q":t.qx=e[1],t.qy=e[2],e=["C",...Rt(t.x,t.y,e[1],e[2],e[3],e[4])];break;case"L":e=["C",...Ot(t.x,t.y,e[1],e[2])];break;case"H":e=["C",...Ot(t.x,t.y,e[1],t.y)];break;case"V":e=["C",...Ot(t.x,t.y,t.x,e[1])];break;case"Z":e=["C",...Ot(t.x,t.y,t.X,t.Y)]}return e},i=function(e,t){if(e[t].length>7){e[t].shift();for(var o=e[t];o.length;)s[t]="A",e.splice(t++,0,["C",...o.splice(0,6)]);e.splice(t,1),d=n.length}},s=[],a="",c="",l=0,d=n.length;l<d;l++){n[l]&&(a=n[l][0]),"C"!=a&&(s[l]=a,l&&(c=s[l-1])),n[l]=r(n[l],o,c),"A"!=s[l]&&"C"==a&&(s[l]="C"),i(n,l);var p=n[l],u=p.length;o.x=p[u-2],o.y=p[u-1],o.bx=ct(p[u-4])||o.x,o.by=ct(p[u-3])||o.y}return t.curve=bt(n),n}function Ft(e){return _(e)&&j(e,"waypoints")}function $t(e){return _(e)&&j(e,"labelTarget")}function Wt(e){return{x:Math.round(e.x),y:Math.round(e.y)}}function Ht(e){return{top:e.y,right:e.x+(e.width||0),bottom:e.y+(e.height||0),left:e.x}}function qt(e){return{x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}}function It(e){return Ft(e)?function(e){for(var t=e.waypoints,n=t.reduce(function(e,n,o){var r,i,s=t[o-1];if(s){var a=e[e.length-1],c=a&&a.endLength||0,l=(r=s,i=n,Math.sqrt(Math.pow(r.x-i.x,2)+Math.pow(r.y-i.y,2)));e.push({start:s,end:n,startLength:c,endLength:c+l,length:l})}return e},[]),o=n.reduce(function(e,t){return e+t.length},0)/2,r=0,i=n[r];i.endLength<o;)i=n[++r];var s=(o-i.startLength)/i.length;return{x:i.start.x+(i.end.x-i.start.x)*s,y:i.start.y+(i.end.y-i.start.y)*s}}(e):Wt({x:(t=e).x+(t.width||0)/2,y:t.y+(t.height||0)/2});var t}function Gt(e,t,n){var o,r,i=function(e,t,n){e=Lt(e),t=Lt(t);for(var o,r,i,s,a,c,l,d,p,u,h=[],f=0,g=e.length;f<g;f++){var v=e[f];if("M"==v[0])o=a=v[1],r=c=v[2];else{"C"==v[0]?(o=(p=[o,r,...v.slice(1)])[6],r=p[7]):(p=[o,r,o,r,a,c,a,c],o=a,r=c);for(var A=0,y=t.length;A<y;A++){var m=t[A];if("M"==m[0])i=l=m[1],s=d=m[2];else{"C"==m[0]?(i=(u=[i,s,...m.slice(1)])[6],s=u[7]):(u=[i,s,i,s,l,d,l,d],i=l,s=d);for(var x=zt(p,u,n),E=0,_=x.length;E<_;E++)x[E].segment1=f,x[E].segment2=A,x[E].bez1=p,x[E].bez2=u;h=h.concat(x)}}}}return h}(e,t);return 1===i.length||2===i.length&&(o=i[0],r=i[1],(o&&r?Math.sqrt(Math.pow(o.x-r.x,2)+Math.pow(o.y-r.y,2)):-1)<1)?Wt(i[0]):i.length>1?Wt((i=T(i,function(e){var t=Math.floor(100*e.t2)||1;return t=((t=100-t)<10?"0":"")+t,e.segment2+"#"+t}))[n?0:i.length-1]):null}function Nt(e,t){return Math.round(e*t)/t}function Vt(e){return b(e)?e+"px":e}function Ut(e,t,n){const o=ne("g");Z(o).add(t);const r=void 0!==n?n:e.childNodes.length-1;return e.insertBefore(o,e.childNodes[r]||null),o}const Yt={shape:["x","y","width","height"],connection:["waypoints"]};function Xt(e,t,n,o){this._eventBus=t,this._elementRegistry=o,this._graphicsFactory=n,this._rootsIdx=0,this._layers={},this._planes=[],this._rootElement=null,this._focused=!1,this._init(e||{})}function Zt(e,t){const n="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttribute("transform",n)}Xt.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"],Xt.prototype._init=function(e){const t=this._eventBus,n=this._container=function(e){const t=(e=I({},{width:"100%",height:"100%"},e)).container||document.body,n=document.createElement("div");return n.setAttribute("class","djs-container djs-parent"),Te(n,{position:"relative",overflow:"hidden",width:Vt(e.width),height:Vt(e.height)}),t.appendChild(n),n}(e),o=this._svg=ne("svg");Y(o,{width:"100%",height:"100%"}),Le(o,"tabindex",0),e.autoFocus&&t.on("element.hover",()=>{this.restoreFocus()}),t.on("element.mousedown",500,e=>{this.focus()}),o.addEventListener("focusin",()=>{this._setFocused(!0)}),o.addEventListener("focusout",()=>{this._setFocused(!1)}),N(n,o);const r=this._viewport=Ut(o,"viewport");e.deferUpdate&&(this._viewboxChanged=function(e){let t,n,o,r;function i(t){let i=Date.now(),c=t?0:r+300-i;if(c>0)return s(c);e.apply(o,n),a()}function s(e){t=setTimeout(i,e)}function a(){t&&clearTimeout(t),t=r=n=o=void 0}function c(...e){r=Date.now(),n=e,o=this,t||s(300)}return c.flush=function(){t&&i(!0),a()},c.cancel=a,c}(q(this._viewboxChanged,this))),t.on("diagram.init",()=>{t.fire("canvas.init",{svg:o,viewport:r})}),t.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed","root.set"],()=>{delete this._cachedViewbox}),t.on("diagram.destroy",500,this._destroy,this),t.on("diagram.clear",500,this._clear,this)},Xt.prototype._destroy=function(){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});const e=this._container.parentNode;e&&e.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._planes,delete this._rootElement,delete this._viewport},Xt.prototype._setFocused=function(e){e!=this._focused&&(this._focused=e,this._eventBus.fire("canvas.focus.changed",{focused:e}))},Xt.prototype._clear=function(){this._elementRegistry.getAll().forEach(e=>{const t=Ce(e);"root"===t?this.removeRootElement(e):this._removeElement(e,t)}),this._planes=[],this._rootElement=null,delete this._cachedViewbox},Xt.prototype.focus=function(){this._svg.focus({preventScroll:!0}),this._setFocused(!0)},Xt.prototype.restoreFocus=function(){document.activeElement===document.body&&this.focus()},Xt.prototype.isFocused=function(){return this._focused},Xt.prototype.getDefaultLayer=function(){return this.getLayer("base",0)},Xt.prototype.getLayer=function(e,t){if(!e)throw new Error("must specify a name");let n=this._layers[e];if(n||(n=this._layers[e]=this._createLayer(e,t)),void 0!==t&&n.index!==t)throw new Error("layer <"+e+"> already created at index <"+t+">");return n.group},Xt.prototype._getChildIndex=function(e){return D(this._layers,function(t,n){return n.visible&&e>=n.index&&t++,t},0)},Xt.prototype._createLayer=function(e,t){void 0===t&&(t=1);const n=this._getChildIndex(t);return{group:Ut(this._viewport,"layer-"+e,n),index:t,visible:!0}},Xt.prototype.showLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=this._viewport,o=t.group,r=t.index;if(t.visible)return o;const i=this._getChildIndex(r);return n.insertBefore(o,n.childNodes[i]||null),t.visible=!0,o},Xt.prototype.hideLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=t.group;return t.visible?(ae(n),t.visible=!1,n):n},Xt.prototype._removeLayer=function(e){const t=this._layers[e];t&&(delete this._layers[e],ae(t.group))},Xt.prototype.getActiveLayer=function(){const e=this._findPlaneForRoot(this.getRootElement());return e?e.layer:null},Xt.prototype.findRoot=function(e){if("string"==typeof e&&(e=this._elementRegistry.get(e)),!e)return;const t=this._findPlaneForRoot(function(e){for(;e.parent;)e=e.parent;return e}(e))||{};return t.rootElement},Xt.prototype.getRootElements=function(){return this._planes.map(function(e){return e.rootElement})},Xt.prototype._findPlaneForRoot=function(e){return k(this._planes,function(t){return t.rootElement===e})},Xt.prototype.getContainer=function(){return this._container},Xt.prototype._updateMarker=function(e,t,n){let o;e.id||(e=this._elementRegistry.get(e)),e.markers=e.markers||new Set,o=this._elementRegistry._elements[e.id],o&&(S([o.gfx,o.secondaryGfx],function(o){o&&(n?(e.markers.add(t),Z(o).add(t)):(e.markers.delete(t),Z(o).remove(t)))}),this._eventBus.fire("element.marker.update",{element:e,gfx:o.gfx,marker:t,add:!!n}))},Xt.prototype.addMarker=function(e,t){this._updateMarker(e,t,!0)},Xt.prototype.removeMarker=function(e,t){this._updateMarker(e,t,!1)},Xt.prototype.hasMarker=function(e,t){return e.id||(e=this._elementRegistry.get(e)),!!e.markers&&e.markers.has(t)},Xt.prototype.toggleMarker=function(e,t){this.hasMarker(e,t)?this.removeMarker(e,t):this.addMarker(e,t)},Xt.prototype.getRootElement=function(){const e=this._rootElement;return e||this._planes.length?e:this.setRootElement(this.addRootElement(null))},Xt.prototype.addRootElement=function(e){const t=this._rootsIdx++;e||(e={id:"__implicitroot_"+t,children:[],isImplicit:!0});const n=e.layer="root-"+t;this._ensureValid("root",e);const o=this.getLayer(n,0);return this.hideLayer(n),this._addRoot(e,o),this._planes.push({rootElement:e,layer:o}),e},Xt.prototype.removeRootElement=function(e){if("string"==typeof e&&(e=this._elementRegistry.get(e)),this._findPlaneForRoot(e))return this._removeRoot(e),this._removeLayer(e.layer),this._planes=this._planes.filter(function(t){return t.rootElement!==e}),this._rootElement===e&&(this._rootElement=null),e},Xt.prototype.setRootElement=function(e){if(e===this._rootElement)return e;let t;if(!e)throw new Error("rootElement required");return t=this._findPlaneForRoot(e),t||(e=this.addRootElement(e)),this._setRoot(e),e},Xt.prototype._removeRoot=function(e){const t=this._elementRegistry,n=this._eventBus;n.fire("root.remove",{element:e}),n.fire("root.removed",{element:e}),t.remove(e)},Xt.prototype._addRoot=function(e,t){const n=this._elementRegistry,o=this._eventBus;o.fire("root.add",{element:e}),n.add(e,t),o.fire("root.added",{element:e,gfx:t})},Xt.prototype._setRoot=function(e,t){const n=this._rootElement;n&&(this._elementRegistry.updateGraphics(n,null,!0),this.hideLayer(n.layer)),e&&(t||(t=this._findPlaneForRoot(e).layer),this._elementRegistry.updateGraphics(e,this._svg,!0),this.showLayer(e.layer)),this._rootElement=e,this._eventBus.fire("root.set",{element:e})},Xt.prototype._ensureValid=function(e,t){if(!t.id)throw new Error("element must have an id");if(this._elementRegistry.get(t.id))throw new Error("element <"+t.id+"> already exists");const n=Yt[e],o=z(n,function(e){return void 0!==t[e]});if(!o)throw new Error("must supply { "+n.join(", ")+" } with "+e)},Xt.prototype._setParent=function(e,t,n){it(t.children,e,n),e.parent=t},Xt.prototype._addElement=function(e,t,n,o){n=n||this.getRootElement();const r=this._eventBus,i=this._graphicsFactory;this._ensureValid(e,t),r.fire(e+".add",{element:t,parent:n}),this._setParent(t,n,o);const s=i.create(e,t,o);return this._elementRegistry.add(t,s),i.update(e,t,s),r.fire(e+".added",{element:t,gfx:s}),t},Xt.prototype.addShape=function(e,t,n){return this._addElement("shape",e,t,n)},Xt.prototype.addConnection=function(e,t,n){return this._addElement("connection",e,t,n)},Xt.prototype._removeElement=function(e,t){const n=this._elementRegistry,o=this._graphicsFactory,r=this._eventBus;if(e=n.get(e.id||e))return r.fire(t+".remove",{element:e}),o.remove(e),rt(e.parent&&e.parent.children,e),e.parent=null,r.fire(t+".removed",{element:e}),n.remove(e),e},Xt.prototype.removeShape=function(e){return this._removeElement(e,"shape")},Xt.prototype.removeConnection=function(e){return this._removeElement(e,"connection")},Xt.prototype.getGraphics=function(e,t){return this._elementRegistry.getGraphics(e,t)},Xt.prototype._changeViewbox=function(e){this._eventBus.fire("canvas.viewbox.changing"),e.apply(this),this._cachedViewbox=null,this._viewboxChanged()},Xt.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})},Xt.prototype.viewbox=function(e){if(void 0===e&&this._cachedViewbox)return structuredClone(this._cachedViewbox);const t=this._viewport,n=this.getSize();let o,r,i,s,a,c,l;return e?(this._changeViewbox(function(){a=Math.min(n.width/e.width,n.height/e.height);const o=this._svg.createSVGMatrix().scale(a).translate(-e.x,-e.y);le(t,o)}),e):(i=this._rootElement?this.getActiveLayer():null,o=i&&i.getBBox()||{},s=le(t),r=s?s.matrix:function(e,t,n,o,r,i){var s=re().createSVGMatrix();switch(arguments.length){case 0:return s;case 1:return ie(s,e);case 6:return ie(s,{a:e,b:t,c:n,d:o,e:r,f:i})}}(),a=Nt(r.a,1e3),c=Nt(-r.e||0,1e3),l=Nt(-r.f||0,1e3),e=this._cachedViewbox={x:c?c/a:0,y:l?l/a:0,width:n.width/a,height:n.height/a,scale:a,inner:{width:o.width||0,height:o.height||0,x:o.x||0,y:o.y||0},outer:n})},Xt.prototype.scroll=function(e){const t=this._viewport;let n=t.getCTM();return e&&this._changeViewbox(function(){e=I({dx:0,dy:0},e||{}),n=this._svg.createSVGMatrix().translate(e.dx,e.dy).multiply(n),Zt(t,n)}),{x:n.e,y:n.f}},Xt.prototype.scrollToElement=function(e,t){let n=100;"string"==typeof e&&(e=this._elementRegistry.get(e));const o=this.findRoot(e);if(o!==this.getRootElement()&&this.setRootElement(o),o===e)return;t||(t={}),"number"==typeof t&&(n=t),t={top:t.top||n,right:t.right||n,bottom:t.bottom||n,left:t.left||n};const r=be(e),i=Ht(r),s=this.viewbox(),a=this.zoom();let c,l;s.y+=t.top/a,s.x+=t.left/a,s.width-=(t.right+t.left)/a,s.height-=(t.bottom+t.top)/a;const d=Ht(s);if(r.width<s.width&&r.height<s.height){const e=Math.max(0,i.right-d.right),t=Math.min(0,i.left-d.left),n=Math.max(0,i.bottom-d.bottom),o=Math.min(0,i.top-d.top);c=e||t,l=n||o}else c=r.x-s.x,l=r.y-s.y;this.scroll({dx:-c*a,dy:-l*a})},Xt.prototype.zoom=function(e,t){if(!e)return this.viewbox(e).scale;if("fit-viewport"===e)return this._fitViewport(t);let n,o;return this._changeViewbox(function(){"object"!=typeof t&&(n=this.viewbox().outer,t={x:n.width/2,y:n.height/2}),o=this._setZoom(e,t)}),Nt(o.a,1e3)},Xt.prototype._fitViewport=function(e){const t=this.viewbox(),n=t.outer,o=t.inner;let r,i;return o.x>=0&&o.y>=0&&o.x+o.width<=n.width&&o.y+o.height<=n.height&&!e?i={x:0,y:0,width:Math.max(o.width+o.x,n.width),height:Math.max(o.height+o.y,n.height)}:(r=Math.min(1,n.width/o.width,n.height/o.height),i={x:o.x+(e?o.width/2-n.width/r/2:0),y:o.y+(e?o.height/2-n.height/r/2:0),width:n.width/r,height:n.height/r}),this.viewbox(i),this.viewbox(!1).scale},Xt.prototype._setZoom=function(e,t){const n=this._svg,o=this._viewport,r=n.createSVGMatrix(),i=n.createSVGPoint();let s,a,c,l,d;c=o.getCTM();const p=c.a;return t?(s=I(i,t),a=s.matrixTransform(c.inverse()),l=r.translate(a.x,a.y).scale(1/p*e).translate(-a.x,-a.y),d=c.multiply(l)):d=r.scale(e),Zt(this._viewport,d),d},Xt.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}},Xt.prototype.getAbsoluteBBox=function(e){const t=this.viewbox();let n;return n=e.waypoints?this.getGraphics(e).getBBox():e,{x:n.x*t.scale-t.x*t.scale,y:n.y*t.scale-t.y*t.scale,width:n.width*t.scale,height:n.height*t.scale}},Xt.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var Kt="data-element-id";function Qt(e){this._elements={},this._eventBus=e}function Jt(e,t,n){var o=function(e,t,n,o){var r=n.inverse;return Object.defineProperty(e,"remove",{value:function(e){var n=this.indexOf(e);return-1!==n&&(this.splice(n,1),t.unset(e,r,o)),e}}),Object.defineProperty(e,"contains",{value:function(e){return-1!==this.indexOf(e)}}),Object.defineProperty(e,"add",{value:function(e,n){var i=this.indexOf(e);if(void 0===n){if(-1!==i)return;n=this.length}-1!==i&&this.splice(i,1),this.splice(n,0,e),-1===i&&t.set(e,r,o)}}),Object.defineProperty(e,"__refs_collection",{value:!0}),e}(n[t.name]||[],e,t,n);Object.defineProperty(n,t.name,{enumerable:t.enumerable,value:o}),o.length&&o.forEach(function(o){e.set(o,t.inverse,n)})}function en(e,t){if(!(this instanceof en))return new en(e,t);e.inverse=t,t.inverse=e,this.props={},this.props[e.name]=e,this.props[t.name]=t}Qt.$inject=["eventBus"],Qt.prototype.add=function(e,t,n){var o=e.id;this._validateId(o),Y(t,Kt,o),n&&Y(n,Kt,o),this._elements[o]={element:e,gfx:t,secondaryGfx:n}},Qt.prototype.remove=function(e){var t=this._elements,n=e.id||e,o=n&&t[n];o&&(Y(o.gfx,Kt,""),o.secondaryGfx&&Y(o.secondaryGfx,Kt,""),delete t[n])},Qt.prototype.updateId=function(e,t){this._validateId(t),"string"==typeof e&&(e=this.get(e)),this._eventBus.fire("element.updateId",{element:e,newId:t});var n=this.getGraphics(e),o=this.getGraphics(e,!0);this.remove(e),e.id=t,this.add(e,n,o)},Qt.prototype.updateGraphics=function(e,t,n){var o=e.id||e,r=this._elements[o];return n?r.secondaryGfx=t:r.gfx=t,t&&Y(t,Kt,o),t},Qt.prototype.get=function(e){var t;t="string"==typeof e?e:e&&Y(e,Kt);var n=this._elements[t];return n&&n.element},Qt.prototype.filter=function(e){var t=[];return this.forEach(function(n,o){e(n,o)&&t.push(n)}),t},Qt.prototype.find=function(e){for(var t=this._elements,n=Object.keys(t),o=0;o<n.length;o++){var r=t[n[o]],i=r.element;if(e(i,r.gfx))return i}},Qt.prototype.getAll=function(){return this.filter(function(e){return e})},Qt.prototype.forEach=function(e){var t=this._elements;Object.keys(t).forEach(function(n){var o=t[n],r=o.element,i=o.gfx;return e(r,i)})},Qt.prototype.getGraphics=function(e,t){var n=e.id||e,o=this._elements[n];return o&&(t?o.secondaryGfx:o.gfx)},Qt.prototype._validateId=function(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")},en.prototype.bind=function(e,t){if("string"==typeof t){if(!this.props[t])throw new Error("no property <"+t+"> in ref");t=this.props[t]}t.collection?Jt(this,t,e):function(e,t,n){var o=t.inverse,r=n[t.name];Object.defineProperty(n,t.name,{configurable:t.configurable,enumerable:t.enumerable,get:function(){return r},set:function(t){if(t!==r){var i=r;r=null,i&&e.unset(i,o,n),r=t,e.set(r,o,n)}}})}(this,t,e)},en.prototype.ensureRefsCollection=function(e,t){var n=e[t.name];return function(e){return!0===e.__refs_collection}(n)||Jt(this,t,e),n},en.prototype.ensureBound=function(e,t){(function(e,t){return Object.prototype.hasOwnProperty.call(e,t.name||t)})(e,t)||this.bind(e,t)},en.prototype.unset=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).remove(n):e[t.name]=void 0)},en.prototype.set=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).add(n):e[t.name]=n)};var tn=new en({name:"children",enumerable:!0,collection:!0},{name:"parent"}),nn=new en({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),on=new en({name:"attachers",collection:!0},{name:"host"}),rn=new en({name:"outgoing",collection:!0},{name:"source"}),sn=new en({name:"incoming",collection:!0},{name:"target"});function an(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(e){var t=this.label,n=this.labels;!e&&t?n.remove(t):n.add(e,0)}}),tn.bind(this,"parent"),nn.bind(this,"labels"),rn.bind(this,"outgoing"),sn.bind(this,"incoming")}function cn(){an.call(this),tn.bind(this,"children"),on.bind(this,"host"),on.bind(this,"attachers")}function ln(){an.call(this),tn.bind(this,"children")}function dn(){cn.call(this),nn.bind(this,"labelTarget")}function pn(){an.call(this),rn.bind(this,"source"),sn.bind(this,"target")}f(cn,an),f(ln,cn),f(dn,cn),f(pn,an);var un={connection:pn,shape:cn,label:dn,root:ln};function hn(){this._uid=12}hn.prototype.createRoot=function(e){return this.create("root",e)},hn.prototype.createLabel=function(e){return this.create("label",e)},hn.prototype.createShape=function(e){return this.create("shape",e)},hn.prototype.createConnection=function(e){return this.create("connection",e)},hn.prototype.create=function(e,t){return(t=I({},t||{})).id||(t.id=e+"_"+this._uid++),function(e,t){var n=un[e];if(!n)throw new Error("unknown type: <"+e+">");return I(new n,t)}(e,t)};var fn="__fn",gn=Array.prototype.slice;function vn(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}function An(){}function yn(e){return e.childNodes[0]}function mn(e,t,n){var o=se();o.setTranslate(t,n),le(e,o)}function xn(e,t){this._eventBus=e,this._elementRegistry=t}function En(e,t,n){var o=n||t.firstChild;e!==o&&t.insertBefore(e,o)}vn.prototype.on=function(e,t,n,o){if(e=E(e)?e:[e],C(t)&&(o=n,n=t,t=1e3),!b(t))throw new Error("priority must be a number");var r=n;o&&((r=q(n,o))[fn]=n[fn]||n);var i=this;e.forEach(function(e){i._addListener(e,{priority:t,callback:r,next:null})})},vn.prototype.once=function(e,t,n,o){var r=this;if(C(t)&&(o=n,n=t,t=1e3),!b(t))throw new Error("priority must be a number");function i(){i.__isTomb=!0;var t=n.apply(o,arguments);return r.off(e,i),t}i[fn]=n,this.on(e,t,i)},vn.prototype.off=function(e,t){e=E(e)?e:[e];var n=this;e.forEach(function(e){n._removeListener(e,t)})},vn.prototype.createEvent=function(e){var t=new An;return t.init(e),t},vn.prototype.fire=function(e,t){var n,o,r,i;if(i=gn.call(arguments),"object"==typeof e&&(e=(t=e).type),!e)throw new Error("no event type specified");if(o=this._listeners[e]){n=t instanceof An?t:this.createEvent(t),i[0]=n;var s=n.type;e!==s&&(n.type=e);try{r=this._invokeListeners(n,i,o)}finally{e!==s&&(n.type=s)}return void 0===r&&n.defaultPrevented&&(r=!1),r}},vn.prototype.handleError=function(e){return!1===this.fire("error",{error:e})},vn.prototype._destroy=function(){this._listeners={}},vn.prototype._invokeListeners=function(e,t,n){for(var o;n&&!e.cancelBubble;)o=this._invokeListener(e,t,n),n=n.next;return o},vn.prototype._invokeListener=function(e,t,n){var o;if(n.callback.__isTomb)return o;try{o=function(e,t){return e.apply(null,t)}(n.callback,t),void 0!==o&&(e.returnValue=o,e.stopPropagation()),!1===o&&e.preventDefault()}catch(e){if(!this.handleError(e))throw console.error("unhandled error in event listener",e),e}return o},vn.prototype._addListener=function(e,t){var n,o=this._getListeners(e);if(o){for(;o;){if(o.priority<t.priority)return t.next=o,void(n?n.next=t:this._setListeners(e,t));n=o,o=o.next}n.next=t}else this._setListeners(e,t)},vn.prototype._getListeners=function(e){return this._listeners[e]},vn.prototype._setListeners=function(e,t){this._listeners[e]=t},vn.prototype._removeListener=function(e,t){var n,o,r,i=this._getListeners(e);if(t)for(;i;)n=i.next,(r=i.callback)!==t&&r[fn]!==t||(o?o.next=n:this._setListeners(e,n)),o=i,i=n;else this._setListeners(e,null)},An.prototype.stopPropagation=function(){this.cancelBubble=!0},An.prototype.preventDefault=function(){this.defaultPrevented=!0},An.prototype.init=function(e){I(this,e||{})},xn.$inject=["eventBus","elementRegistry"],xn.prototype._getChildrenContainer=function(e){var t,n=this._elementRegistry.getGraphics(e);return e.parent?(t=function(e){return e.parentNode.childNodes[1]}(n),t||(Z(t=ne("g")).add("djs-children"),N(n.parentNode,t))):t=n,t},xn.prototype._clear=function(e){var t=yn(e);return He(t),t},xn.prototype._createContainer=function(e,t,n,o){var r=ne("g");Z(r).add("djs-group"),void 0!==n?En(r,t,t.childNodes[n]):N(t,r);var i=ne("g");Z(i).add("djs-element"),Z(i).add("djs-"+e),o&&Z(i).add("djs-frame"),N(r,i);var s=ne("g");return Z(s).add("djs-visual"),N(i,s),i},xn.prototype.create=function(e,t,n){var o=this._getChildrenContainer(t.parent);return this._createContainer(e,o,n,we(t))},xn.prototype.updateContainments=function(e){var t,n=this,o=this._elementRegistry;t=D(e,function(e,t){return t.parent&&(e[t.parent.id]=t.parent),e},{}),S(t,function(e){var t=e.children;if(t){var r=n._getChildrenContainer(e);S(t.slice().reverse(),function(e){En(o.getGraphics(e).parentNode,r)})}})},xn.prototype.drawShape=function(e,t,n={}){return this._eventBus.fire("render.shape",{gfx:e,element:t,attrs:n})},xn.prototype.getShapePath=function(e){return this._eventBus.fire("render.getShapePath",e)},xn.prototype.drawConnection=function(e,t,n={}){return this._eventBus.fire("render.connection",{gfx:e,element:t,attrs:n})},xn.prototype.getConnectionPath=function(e){return this._eventBus.fire("render.getConnectionPath",e)},xn.prototype.update=function(e,t,n){if(t.parent){var o=this._clear(n);if("shape"===e)this.drawShape(o,t),mn(n,t.x,t.y);else{if("connection"!==e)throw new Error("unknown type: "+e);this.drawConnection(o,t)}t.hidden?Y(n,"display","none"):Y(n,"display","block")}},xn.prototype.remove=function(e){ae(this._elementRegistry.getGraphics(e).parentNode)};const _n={__depends__:[Be],__init__:["canvas"],canvas:["type",Xt],elementRegistry:["type",Qt],elementFactory:["type",hn],eventBus:["type",vn],graphicsFactory:["type",xn]};function bn(e,t){this._injector=t||function(e){return t=[{config:["value",e=e||{}]},_n].concat(e.modules||[]),(n=new u(t)).init(),n;var t,n}(e),this.get("eventBus").fire("diagram.init")}function Cn(e){e&&"function"==typeof e.stopPropagation&&e.stopPropagation()}function wn(e){return e.originalEvent||e.srcEvent}function jn(e){Cn(e),Cn(wn(e))}function kn(e){return e.pointers&&e.pointers.length&&(e=e.pointers[0]),e.touches&&e.touches.length&&(e=e.touches[0]),e?{x:e.clientX,y:e.clientY}:null}function Bn(){return/mac/i.test(navigator.platform)}function Sn(e,t){return(wn(e)||e).button===t}function Dn(e){return Sn(e,0)}function zn(e){var t=wn(e)||e;return Dn(e)&&t.shiftKey}function Mn(e){return!0}function Pn(e){return Dn(e)||function(e){return Sn(e,1)}(e)}function On(e,t,n){var o=this;function r(n,o,r){var i,s;(function(e,t){return!(c[e]||Dn)(t)})(n,o)||(r?s=t.getGraphics(r):(i=o.delegateTarget||o.target)&&(s=i,r=t.get(s)),s&&r&&!1===e.fire(n,{element:r,gfx:s,originalEvent:o})&&(o.stopPropagation(),o.preventDefault()))}var i={};function s(e){return i[e]}var a={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},c={"element.contextmenu":Mn,"element.mousedown":Pn,"element.mouseup":Pn,"element.click":Pn,"element.dblclick":Pn};function l(e,t,n,o){var s=i[n]=function(e){r(n,e)};o&&(c[n]=o),s.$delegate=Ke(e,"svg, .djs-element",t,s)}function d(e,t,n){var o=s(n);o&&Qe(e,t,o.$delegate)}e.on("canvas.destroy",function(e){var t;t=e.svg,S(a,function(e,n){d(t,n,e)})}),e.on("canvas.init",function(e){var t;t=e.svg,S(a,function(e,n){l(t,n,e)})}),e.on(["shape.added","connection.added"],function(t){var n=t.element,o=t.gfx;e.fire("interactionEvents.createHit",{element:n,gfx:o})}),e.on(["shape.changed","connection.changed"],500,function(t){var n=t.element,o=t.gfx;e.fire("interactionEvents.updateHit",{element:n,gfx:o})}),e.on("interactionEvents.createHit",500,function(e){var t=e.element,n=e.gfx;o.createDefaultHit(t,n)}),e.on("interactionEvents.updateHit",function(e){var t=e.element,n=e.gfx;o.updateDefaultHit(t,n)});var p=f("djs-hit djs-hit-stroke"),u=f("djs-hit djs-hit-click-stroke"),h={all:f("djs-hit djs-hit-all"),"click-stroke":u,stroke:p,"no-move":f("djs-hit djs-hit-no-move")};function f(e,t){return t=I({stroke:"white",strokeWidth:15},t||{}),n.cls(e,["no-fill","no-border"],t)}function g(e,t){var n=h[t];if(!n)throw new Error("invalid hit type <"+t+">");return Y(e,n),e}function v(e,t){N(e,t)}this.removeHits=function(e){S((e||document).querySelectorAll(".djs-hit"),ae)},this.createDefaultHit=function(e,t){var n,o=e.waypoints,r=e.isFrame;return o?this.createWaypointsHit(t,o):(n=r?"stroke":"all",this.createBoxHit(t,n,{width:e.width,height:e.height}))},this.createWaypointsHit=function(e,t){var n=ve(t);return g(n,"stroke"),v(e,n),n},this.createBoxHit=function(e,t,n){n=I({x:0,y:0},n);var o=ne("rect");return g(o,t),Y(o,n),v(e,o),o},this.updateDefaultHit=function(e,t){var n=nt(".djs-hit",t);if(n)return e.waypoints?Ae(n,e.waypoints):Y(n,{width:e.width,height:e.height}),n},this.fire=r,this.triggerMouseEvent=function(e,t,n){var o=a[e];if(!o)throw new Error("unmapped DOM event name <"+e+">");return r(o,t,n)},this.mouseHandler=s,this.registerEvent=l,this.unregisterEvent=d}bn.prototype.get=function(e,t){return this._injector.get(e,t)},bn.prototype.invoke=function(e,t,n){return this._injector.invoke(e,t,n)},bn.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")},bn.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")},On.$inject=["eventBus","elementRegistry","styles"];const Rn={__init__:["interactionEvents"],interactionEvents:["type",On]};function Tn(e,t){this._eventBus=e,this._canvas=t,this._selectedElements=[];var n=this;e.on(["shape.remove","connection.remove"],function(e){var t=e.element;n.deselect(t)}),e.on(["diagram.clear","root.set"],function(e){n.select(null)})}Tn.$inject=["eventBus","canvas"],Tn.prototype.deselect=function(e){var t=this._selectedElements,n=t.indexOf(e);if(-1!==n){var o=t.slice();t.splice(n,1),this._eventBus.fire("selection.changed",{oldSelection:o,newSelection:t})}},Tn.prototype.get=function(){return this._selectedElements},Tn.prototype.isSelected=function(e){return-1!==this._selectedElements.indexOf(e)},Tn.prototype.select=function(e,t){var n=this._selectedElements,o=n.slice();E(e)||(e=e?[e]:[]);var r=this._canvas,i=r.getRootElement();e=e.filter(function(e){var t=r.findRoot(e);return i===t}),t?S(e,function(e){-1===n.indexOf(e)&&n.push(e)}):this._selectedElements=n=e.slice(),this._eventBus.fire("selection.changed",{oldSelection:o,newSelection:n})};var Ln="hover",Fn="selected";function $n(e,t){function n(t,n){e.addMarker(t,n)}function o(t,n){e.removeMarker(t,n)}this._canvas=e,t.on("element.hover",function(e){n(e.element,Ln)}),t.on("element.out",function(e){o(e.element,Ln)}),t.on("selection.changed",function(e){var t=e.oldSelection,r=e.newSelection;S(t,function(e){-1===r.indexOf(e)&&o(e,Fn)}),S(r,function(e){-1===t.indexOf(e)&&n(e,Fn)})})}function Wn(e,t,n,o){e.on("create.end",500,function(e){var n=e.context,o=n.canExecute,r=n.elements,i=(n.hints||{}).autoSelect;if(o){if(!1===i)return;E(i)?t.select(i):t.select(r.filter(Hn))}}),e.on("connect.end",500,function(e){var n=e.context.connection;n&&t.select(n)}),e.on("shape.move.end",500,function(e){var n=e.previousSelection||[],r=o.get(e.context.shape.id);k(n,function(e){return r.id===e.id})||t.select(r)}),e.on("element.click",function(e){if(Dn(e)){var o=e.element;o===n.getRootElement()&&(o=null);var r=t.isSelected(o),i=t.get().length>1,s=zn(e);if(r&&i)return s?t.deselect(o):t.select(o);r?t.deselect(o):t.select(o,s)}})}function Hn(e){return!e.hidden}$n.$inject=["canvas","eventBus"],Wn.$inject=["eventBus","selection","canvas","elementRegistry"];const qn={__init__:["selectionVisuals","selectionBehavior"],__depends__:[Rn],selection:["type",Tn],selectionVisuals:["type",$n],selectionBehavior:["type",Wn]};function In(e){this._commandStack=e.get("commandStack",!1)}In.$inject=["injector"],In.prototype.allowed=function(e,t){var n=!0,o=this._commandStack;return o&&(n=o.canExecute(e,t)),void 0===n||n};const Gn={__init__:["rules"],rules:["type",In]};function Nn(e,t,n){var o,r,i=this,s=n.get("dragging",!1);s&&t.on("drag.start",function(n){t.once("drag.move",1500,function(t){!function(t){if(!t.hover){var n=t.originalEvent,o=i._findTargetGfx(n),r=o&&e.get(o);o&&r&&(t.stopPropagation(),s.hover({element:r,gfx:o}),s.move(n))}}(t)})}),t.on("element.hover",function(e){o=e.gfx,r=e.element}),t.on("element.hover",1500,function(e){r&&t.fire("element.out",{element:r,gfx:o})}),t.on("element.out",function(){o=null,r=null}),this._findTargetGfx=function(e){var t;if(e instanceof MouseEvent)return t=kn(e),qe(document.elementFromPoint(t.x,t.y),"svg, .djs-element",!0)}}Nn.$inject=["elementRegistry","eventBus","injector"];const Vn={__init__:["hoverFix"],hoverFix:["type",Nn]};var Un=/^djs-cursor-.*$/;function Yn(e){var t=$e(document.body);t.removeMatching(Un),e&&t.add("djs-cursor-"+e)}function Xn(){Yn(null)}function Zn(e,t){function n(){return!1}return t=t||"element.click",e.once(t,5e3,n),function(){e.off(t,n)}}function Kn(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function Qn(e,t){return{x:e.x-t.x,y:e.y-t.y}}var Jn=Math.round,eo="djs-drag-active";function to(e){e.preventDefault()}function no(e,t,n,o){var r,i={threshold:5,trapClick:!0};function s(e){var n=t.viewbox(),o=t._container.getBoundingClientRect();return{x:n.x+(e.x-o.left)/n.scale,y:n.y+(e.y-o.top)/n.scale}}function a(t,n){n=n||r;var o=e.createEvent(I({},n.payload,n.data,{isTouch:n.isTouch}));return!1!==e.fire("drag."+t,o)&&e.fire(n.prefix+"."+t,o)}function c(e,o){var i,c=r.payload,l=r.displacement,d=r.globalStart,p=kn(e),u=Qn(p,d),h=r.localStart,f=s(p),v=Qn(f,h);if(!r.active&&(o||(i=u,Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2))>r.threshold))){if(I(c,{x:Jn(h.x+l.x),y:Jn(h.y+l.y),dx:0,dy:0},{originalEvent:e}),!1===a("start"))return g();r.active=!0,r.keepSelection||(c.previousSelection=n.get(),n.select(null)),r.cursor&&Yn(r.cursor),t.addMarker(t.getRootElement(),eo)}jn(e),r.active&&(I(c,{x:Jn(f.x+l.x),y:Jn(f.y+l.y),dx:Jn(v.x),dy:Jn(v.y)},{originalEvent:e}),a("move"))}function l(e){var t=!0;r.active&&(e&&(r.payload.originalEvent=e,jn(e)),t=a("end")),!1===t&&a("rejected"),a("ended",v(!0!==t))}function d(e){(function(e,t){return-1!==(e=E(e)?e:[e]).indexOf(t.key)||-1!==e.indexOf(t.code)})("Escape",e)&&(to(e),g())}function p(t){var n;r.active&&(n=Zn(e),setTimeout(n,400),to(t)),l(t)}function u(e){c(e)}function h(e){var t=r.payload;t.hoverGfx=e.gfx,t.hover=e.element,a("hover")}function f(e){a("out");var t=r.payload;t.hoverGfx=null,t.hover=null}function g(e){var t;if(r){var n=r.active;n&&a("cancel"),t=v(e),n&&a("canceled",t)}}function v(i){var s,v;a("cleanup"),Xn(),v=r.trapClick?p:l,Xe.unbind(document,"mousemove",c),Xe.unbind(document,"dragstart",to),Xe.unbind(document,"selectstart",to),Xe.unbind(document,"mousedown",v,!0),Xe.unbind(document,"mouseup",v,!0),Xe.unbind(document,"keyup",d),Xe.unbind(document,"touchstart",u,!0),Xe.unbind(document,"touchcancel",g,!0),Xe.unbind(document,"touchmove",c,!0),Xe.unbind(document,"touchend",l,!0),e.off("element.hover",h),e.off("element.out",f),t.removeMarker(t.getRootElement(),eo);var A=r.payload.previousSelection;return!1!==i&&A&&!n.get().length&&function(e){var t=e.filter(function(e){return o.get(e.id)});t.length&&n.select(t)}(A),s=r,r=null,s}e.on("diagram.destroy",g),this.init=function(t,n,o,v){r&&g(!1),"string"==typeof n&&(v=o,o=n,n=null);var A,y,m,x,E,_=(v=I({},i,v||{})).data||{};x=v.trapClick?p:l,t?(A=wn(t)||t,y=kn(t),jn(t),"dragstart"===A.type&&to(A)):(A=null,y={x:0,y:0}),m=s(y),n||(n=m),E=function(e){return"undefined"!=typeof TouchEvent&&e instanceof TouchEvent}(A),r=I({prefix:o,data:_,payload:{},globalStart:y,displacement:Qn(n,m),localStart:m,isTouch:E},v),v.manual||(E?(Xe.bind(document,"touchstart",u,!0),Xe.bind(document,"touchcancel",g,!0),Xe.bind(document,"touchmove",c,!0),Xe.bind(document,"touchend",l,!0)):(Xe.bind(document,"mousemove",c),Xe.bind(document,"dragstart",to),Xe.bind(document,"selectstart",to),Xe.bind(document,"mousedown",x,!0),Xe.bind(document,"mouseup",x,!0)),Xe.bind(document,"keyup",d),e.on("element.hover",h),e.on("element.out",f)),a("init"),v.autoActivate&&c(t,!0)},this.move=c,this.hover=h,this.out=f,this.end=l,this.cancel=g,this.context=function(){return r},this.setOptions=function(e){I(i,e)}}no.$inject=["eventBus","canvas","selection","elementRegistry"];const oo={__depends__:[Vn,qn],dragging:["type",no]};function ro(e,t,n,o){function r(e,t){return o.allowed("connection.create",{source:e,target:t})}e.on("connect.hover",function(e){var t,n=e.context,o=n.start,i=e.hover;if(n.hover=i,!x(t=n.canExecute=r(o,i))){if(!1!==t)return n.source=o,void(n.target=i);x(t=n.canExecute=r(i,o))||!1!==t&&(n.source=i,n.target=o)}}),e.on(["connect.out","connect.cleanup"],function(e){var t=e.context;t.hover=null,t.source=null,t.target=null,t.canExecute=!1}),e.on("connect.end",function(e){var t=e.context,o=t.canExecute,r=t.connectionStart,i={x:e.x,y:e.y},s=t.source,a=t.target;if(!o)return!1;var c=null,l={connectionStart:io(t)?i:r,connectionEnd:io(t)?r:i};_(o)&&(c=o),t.connection=n.connect(s,a,c,l)}),this.start=function(e,n,o,r){_(o)||(r=o,o=It(n)),t.init(e,"connect",{autoActivate:r,data:{shape:n,context:{start:n,connectionStart:o}}})}}function io(e){var t=e.hover,n=e.source,o=e.target;return t&&n&&t===n&&n!==o}ro.$inject=["eventBus","dragging","modeling","rules"];var so="connect-ok",ao="connect-not-ok";function co(e,t,n){var o=e.get("connectionPreview",!1);o&&t.on("connect.move",function(e){var t=e.context,n=t.canExecute,r=t.hover,i=t.source,s=t.start,a=t.startPosition,c=t.target,l=t.connectionStart||a,d=t.connectionEnd||{x:e.x,y:e.y},p=l,u=d;io(t)&&(p=d,u=l),o.drawPreview(t,n,{source:i||s,target:c||r,connectionStart:p,connectionEnd:u})}),t.on("connect.hover",900,function(e){var t=e.context,o=e.hover,r=t.canExecute;null!==r&&n.addMarker(o,r?so:ao)}),t.on(["connect.out","connect.cleanup"],1100,function(e){var t=e.hover;t&&(n.removeMarker(t,so),n.removeMarker(t,ao))}),o&&t.on("connect.cleanup",function(e){o.cleanUp(e.context)})}co.$inject=["injector","eventBus","canvas"];const lo={__depends__:[qn,Gn,oo],__init__:["connectPreview"],connect:["type",ro],connectPreview:["type",co]};function po(e){this._counter=0,this._prefix=(e?e+"-":"")+Math.floor(1e9*Math.random())+"-"}po.prototype.next=function(){return this._prefix+ ++this._counter};var uo=new po("ov");function ho(e,t,n,o){var r,i;this._eventBus=t,this._canvas=n,this._elementRegistry=o,this._ids=uo,this._overlayDefaults=I({show:null,scale:!0},e&&e.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=(r=n.getContainer(),Te(i=tt('<div class="djs-overlay-container" />'),{position:"absolute",width:0,height:0}),r.insertBefore(i,r.firstChild),i),this._init()}function fo(e,t,n){Te(e,{left:t+"px",top:n+"px"})}function go(e,t){e.style.display=!1===t?"none":""}function vo(e,t){e.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(n){e.style[n+"transform"]=t})}ho.$inject=["config.overlays","eventBus","canvas","elementRegistry"],ho.prototype.get=function(e){if(w(e)&&(e={id:e}),w(e.element)&&(e.element=this._elementRegistry.get(e.element)),e.element){var t=this._getOverlayContainer(e.element,!0);return t?e.type?B(t.overlays,L({type:e.type})):t.overlays.slice():[]}return e.type?B(this._overlays,L({type:e.type})):e.id?this._overlays[e.id]:null},ho.prototype.add=function(e,t,n){if(_(t)&&(n=t,t=null),e.id||(e=this._elementRegistry.get(e)),!n.position)throw new Error("must specifiy overlay position");if(!n.html)throw new Error("must specifiy overlay html");if(!e)throw new Error("invalid element specified");var o=this._ids.next();return n=I({},this._overlayDefaults,n,{id:o,type:t,element:e,html:n.html}),this._addOverlay(n),o},ho.prototype.remove=function(e){var t=this.get(e)||[];E(t)||(t=[t]);var n=this;S(t,function(e){var t=n._getOverlayContainer(e.element,!0);if(e&&(ot(e.html),ot(e.htmlContainer),delete e.htmlContainer,delete e.element,delete n._overlays[e.id]),t){var o=t.overlays.indexOf(e);-1!==o&&t.overlays.splice(o,1)}})},ho.prototype.isShown=function(){return"none"!==this._overlayRoot.style.display},ho.prototype.show=function(){go(this._overlayRoot)},ho.prototype.hide=function(){go(this._overlayRoot,!1)},ho.prototype.clear=function(){this._overlays={},this._overlayContainers=[],He(this._overlayRoot)},ho.prototype._updateOverlayContainer=function(e){var t=e.element,n=e.html,o=t.x,r=t.y;if(t.waypoints){var i=be(t);o=i.x,r=i.y}fo(n,o,r),Le(e.html,"data-container-id",t.id)},ho.prototype._updateOverlay=function(e){var t,n,o=e.position,r=e.htmlContainer,i=e.element,s=o.left,a=o.top;void 0!==o.right&&(t=i.waypoints?be(i).width:i.width,s=-1*o.right+t),void 0!==o.bottom&&(n=i.waypoints?be(i).height:i.height,a=-1*o.bottom+n),fo(r,s||0,a||0),this._updateOverlayVisibilty(e,this._canvas.viewbox())},ho.prototype._createOverlayContainer=function(e){var t=tt('<div class="djs-overlays" />');Te(t,{position:"absolute"}),this._overlayRoot.appendChild(t);var n={html:t,element:e,overlays:[]};return this._updateOverlayContainer(n),this._overlayContainers.push(n),n},ho.prototype._updateRoot=function(e){var t=e.scale||1,n="matrix("+[t,0,0,t,-1*e.x*t,-1*e.y*t].join(",")+")";vo(this._overlayRoot,n)},ho.prototype._getOverlayContainer=function(e,t){var n=k(this._overlayContainers,function(t){return t.element===e});return n||t?n:this._createOverlayContainer(e)},ho.prototype._addOverlay=function(e){var t,n,o=e.id,r=e.element,i=e.html;i.get&&i.constructor.prototype.jquery&&(i=i.get(0)),w(i)&&(i=tt(i)),n=this._getOverlayContainer(r),Te(t=tt('<div class="djs-overlay" data-overlay-id="'+o+'">'),{position:"absolute"}),t.appendChild(i),e.type&&$e(t).add("djs-overlay-"+e.type),go(t,this._canvas.findRoot(r)===this._canvas.getRootElement()),e.htmlContainer=t,n.overlays.push(e),n.html.appendChild(t),this._overlays[o]=e,this._updateOverlay(e),this._updateOverlayVisibilty(e,this._canvas.viewbox())},ho.prototype._updateOverlayVisibilty=function(e,t){var n=e.show,o=this._canvas.findRoot(e.element),r=n&&n.minZoom,i=n&&n.maxZoom,s=e.htmlContainer,a=!0;(o!==this._canvas.getRootElement()||n&&(m(r)&&r>t.scale||m(i)&&i<t.scale))&&(a=!1),go(s,a),this._updateOverlayScale(e,t)},ho.prototype._updateOverlayScale=function(e,t){var n,o,r,i=e.scale,s=e.htmlContainer,a="";!0!==i&&(!1===i?(n=1,o=1):(n=i.min,o=i.max),m(n)&&t.scale<n&&(r=(1/t.scale||1)*n),m(o)&&t.scale>o&&(r=(1/t.scale||1)*o)),m(r)&&(a="scale("+r+","+r+")"),vo(s,a)},ho.prototype._updateOverlaysVisibilty=function(e){var t=this;S(this._overlays,function(n){t._updateOverlayVisibilty(n,e)})},ho.prototype._init=function(){var e=this._eventBus,t=this;e.on("canvas.viewbox.changing",function(e){t.hide()}),e.on("canvas.viewbox.changed",function(e){var n;n=e.viewbox,t._updateRoot(n),t._updateOverlaysVisibilty(n),t.show()}),e.on(["shape.remove","connection.remove"],function(e){var n=e.element;S(t.get({element:n}),function(e){t.remove(e.id)});var o=t._getOverlayContainer(n);if(o){ot(o.html);var r=t._overlayContainers.indexOf(o);-1!==r&&t._overlayContainers.splice(r,1)}}),e.on("element.changed",500,function(e){var n=e.element,o=t._getOverlayContainer(n,!0);o&&(S(o.overlays,function(e){t._updateOverlay(e)}),t._updateOverlayContainer(o))}),e.on("element.marker.update",function(e){var n=t._getOverlayContainer(e.element,!0);n&&$e(n.html)[e.add?"add":"remove"](e.marker)}),e.on("root.set",function(){t._updateOverlaysVisibilty(t._canvas.viewbox())}),e.on("diagram.clear",this.clear,this)};const Ao={__init__:["overlays"],overlays:["type",ho]},yo=new po;function mo(e){this._scheduled={},e.on("diagram.destroy",()=>{Object.keys(this._scheduled).forEach(e=>{this.cancel(e)})})}mo.$inject=["eventBus"],mo.prototype.schedule=function(e,t=yo.next()){this.cancel(t);const n=this._schedule(e,t);return this._scheduled[t]=n,n.promise},mo.prototype._schedule=function(e,t){const n=function(){const e={};return e.promise=new Promise((t,n)=>{e.resolve=t,e.reject=n}),e}();return{executionId:setTimeout(()=>{try{this._scheduled[t]=null;try{n.resolve(e())}catch(e){n.reject(e)}}catch(e){console.error("Scheduler#_schedule execution failed",e)}}),promise:n.promise}},mo.prototype.cancel=function(e){const t=this._scheduled[e];t&&(this._cancel(t),this._scheduled[e]=null)},mo.prototype._cancel=function(e){clearTimeout(e.executionId)};const xo={scheduler:["type",mo]};function Eo(e){return CSS.escape(e)}var _o=".entry";function bo(e,t,n,o){this._canvas=e,this._elementRegistry=t,this._eventBus=n,this._scheduler=o,this._current=null,this._init()}bo.$inject=["canvas","elementRegistry","eventBus","scheduler"],bo.prototype._init=function(){var e=this;this._eventBus.on("selection.changed",function(t){var n=t.newSelection,o=n.length?1===n.length?n[0]:n:null;o?e.open(o,!0):e.close()}),this._eventBus.on("elements.changed",function(t){var n=t.elements,o=e._current;if(o){var r=o.target,i=E(r)?r:[r];if(i.filter(function(e){return n.includes(e)}).length){e.close();var s=i.filter(function(t){return e._elementRegistry.get(t.id)});s.length&&e._updateAndOpen(s.length>1?s:s[0])}}}),this._eventBus.on("canvas.viewbox.changed",function(){e._updatePosition()}),this._eventBus.on("element.marker.update",function(t){if(e.isOpen()){var n=t.element,o=e._current;(E(o.target)?o.target:[o.target]).includes(n)&&e._updateVisibility()}}),this._container=this._createContainer()},bo.prototype._createContainer=function(){var e=tt('<div class="djs-context-pad-parent"></div>');return this._canvas.getContainer().appendChild(e),e},bo.prototype.registerProvider=function(e,t){t||(t=e,e=1e3),this._eventBus.on("contextPad.getProviders",e,function(e){e.providers.push(t)})},bo.prototype.getEntries=function(e){var t=this._getProviders(),n=E(e)?"getMultiElementContextPadEntries":"getContextPadEntries",o={};return S(t,function(t){if(C(t[n])){var r=t[n](e);C(r)?o=r(o):S(r,function(e,t){o[t]=e})}}),o},bo.prototype.trigger=function(e,t,n){var o,r,i=this,s=t.delegateTarget||t.target;return s?(o=Le(s,"data-action"),r=t.originalEvent||t,"mouseover"!==e?"mouseout"===e?(clearTimeout(this._timeout),void(this._mouseout&&(this._mouseout(),this._mouseout=null))):this.triggerEntry(o,e,r,n):void(this._timeout=setTimeout(function(){i._mouseout=i.triggerEntry(o,"hover",r,n)},300))):t.preventDefault()},bo.prototype.triggerEntry=function(e,t,n,o){if(this.isShown()){var r=this._current.target,i=this._current.entries[e];if(i){var s=i.action;if(!1!==this._eventBus.fire("contextPad.trigger",{entry:i,event:n})){if(C(s)){if("click"===t)return s(n,r,o)}else if(s[t])return s[t](n,r,o);n.preventDefault()}}}},bo.prototype.open=function(e,t){!t&&this.isOpen(e)||(this.close(),this._updateAndOpen(e))},bo.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"contextPad.getProviders",providers:[]});return this._eventBus.fire(e),e.providers},bo.prototype._updateAndOpen=function(e){var t,n=this.getEntries(e),o=this._createHtml(e);S(n,function(e,n){var r,i=e.group||"default",s=tt(e.html||'<div class="entry" draggable="true"></div>');Le(s,"data-action",n),(r=nt("[data-group="+Eo(i)+"]",o))||(Le(r=tt('<div class="group"></div>'),"data-group",i),o.appendChild(r)),r.appendChild(s),e.className&&function(e,t){var n=$e(e);(t=E(t)?t:t.split(/\s+/g)).forEach(function(e){n.add(e)})}(s,e.className),e.title&&Le(s,"title",e.title),e.imageUrl&&(Le(t=tt("<img>"),"src",e.imageUrl),t.style.width="100%",t.style.height="100%",s.appendChild(t))}),$e(o).add("open"),this._current={entries:n,html:o,target:e},this._updatePosition(),this._updateVisibility(),this._eventBus.fire("contextPad.open",{current:this._current})},bo.prototype._createHtml=function(e){var t=this,n=tt('<div class="djs-context-pad"></div>');return Ke(n,_o,"click",function(e){t.trigger("click",e)}),Ke(n,_o,"dragstart",function(e){t.trigger("dragstart",e)}),Ke(n,_o,"mouseover",function(e){t.trigger("mouseover",e)}),Ke(n,_o,"mouseout",function(e){t.trigger("mouseout",e)}),Xe.bind(n,"mousedown",function(e){e.stopPropagation()}),this._container.appendChild(n),this._eventBus.fire("contextPad.create",{target:e,pad:n}),n},bo.prototype.getPad=function(e){let t;return console.warn(new Error("ContextPad#getPad is deprecated and will be removed in future library versions, cf. https://github.com/bpmn-io/diagram-js/pull/888")),t=this.isOpen()&&function(e,t){return e=E(e)?e:[e],t=E(t)?t:[t],e.length===t.length&&z(e,function(e){return t.includes(e)})}(this._current.target,e)?this._current.html:this._createHtml(e),{html:t}},bo.prototype.close=function(){this.isOpen()&&(clearTimeout(this._timeout),this._container.innerHTML="",this._eventBus.fire("contextPad.close",{current:this._current}),this._current=null)},bo.prototype.isOpen=function(e){var t=this._current;if(!t)return!1;if(!e)return!0;var n=t.target;return E(e)===E(n)&&(E(e)?e.length===n.length&&z(e,function(e){return n.includes(e)}):n===e)},bo.prototype.isShown=function(){return this.isOpen()&&$e(this._current.html).has("open")},bo.prototype.show=function(){this.isOpen()&&($e(this._current.html).add("open"),this._updatePosition(),this._eventBus.fire("contextPad.show",{current:this._current}))},bo.prototype.hide=function(){this.isOpen()&&($e(this._current.html).remove("open"),this._eventBus.fire("contextPad.hide",{current:this._current}))},bo.prototype._getPosition=function(e){if(!E(e)&&Ft(e)){var t=this._canvas.viewbox(),n=(i=e).waypoints[i.waypoints.length-1],o=n.x*t.scale-t.x*t.scale,r=n.y*t.scale-t.y*t.scale;return{left:o+8*this._canvas.zoom(),top:r}}var i,s=this._canvas.getContainer().getBoundingClientRect(),a=this._getTargetBounds(e);return{left:a.right-s.left+8*this._canvas.zoom(),top:a.top-s.top}},bo.prototype._updatePosition=function(){this._scheduler.schedule(()=>{if(this.isOpen()){var e=this._current.html,t=this._getPosition(this._current.target);"x"in t&&"y"in t?(e.style.left=t.x+"px",e.style.top=t.y+"px"):["top","right","bottom","left"].forEach(function(n){n in t&&(e.style[n]=t[n]+"px")})}},"ContextPad#_updatePosition")},bo.prototype._updateVisibility=function(){this._scheduler.schedule(()=>{if(this.isOpen()){var e=this,t=this._current.target;(E(t)?t:[t]).some(function(t){return e._canvas.hasMarker(t,"djs-element-hidden")})?e.hide():e.show()}},"ContextPad#_updateVisibility")},bo.prototype._getTargetBounds=function(e){var t=this;return(E(e)?e:[e]).map(function(e){return t._canvas.getGraphics(e)}).reduce(function(e,t){const n=t.getBoundingClientRect();return e.top=Math.min(e.top,n.top),e.right=Math.max(e.right,n.right),e.bottom=Math.max(e.bottom,n.bottom),e.left=Math.min(e.left,n.left),e.x=e.left,e.y=e.top,e.width=e.right-e.left,e.height=e.bottom-e.top,e},{top:1/0,right:-1/0,bottom:-1/0,left:1/0})};const Co={__depends__:[Rn,xo,Ao],contextPad:["type",bo]},wo=new po("ps");var jo=["marker-start","marker-mid","marker-end"],ko=["circle","ellipse","line","path","polygon","polyline","path","rect"];function Bo(e,t,n,o){this._elementRegistry=e,this._canvas=n,this._styles=o}Bo.$inject=["elementRegistry","eventBus","canvas","styles"],Bo.prototype.cleanUp=function(){console.warn("PreviewSupport#cleanUp is deprecated and will be removed in future versions. You do not need to manually clean up previews anymore. cf. https://github.com/bpmn-io/diagram-js/pull/906")},Bo.prototype.getGfx=function(e){return this._elementRegistry.getGraphics(e)},Bo.prototype.addDragger=function(e,t,n,o="djs-dragger"){var r=J(n=n||this.getGfx(e)),i=n.getBoundingClientRect();return this._cloneMarkers(yn(r),o),Y(r,this._styles.cls(o,[],{x:i.top,y:i.left})),N(t,r),Y(r,"data-preview-support-element-id",e.id),r},Bo.prototype.addFrame=function(e,t){var n=ne("rect",{class:"djs-resize-overlay",width:e.width,height:e.height,x:e.x,y:e.y});return N(t,n),Y(n,"data-preview-support-element-id",e.id),n},Bo.prototype._cloneMarkers=function(e,t="djs-dragger",n=e){var o=this;e.childNodes&&e.childNodes.forEach(e=>{o._cloneMarkers(e,t,n)}),function(e){return-1!==ko.indexOf(e.nodeName)}(e)&&jo.forEach(function(r){if(Y(e,r)){var i=function(e,t,n){return nt("marker#"+Y(e,t).match(/url\(['"]?#([^'"]*)['"]?\)/)[1],n||document)}(e,r,o._canvas.getContainer());i&&o._cloneMarker(n,e,i,r,t)}})},Bo.prototype._cloneMarker=function(e,t,n,o,r="djs-dragger"){var i=[n.id,r,wo.next()].join("-"),s=nt("marker#"+n.id,e);e=e||this._canvas._svg;var a=s||J(n);a.id=i,Z(a).add(r);var c=nt(":scope > defs",e);c||N(e,c=ne("defs")),N(c,a),Y(t,o,"url(#"+a.id+")")};const So={__init__:["previewSupport"],previewSupport:["type",Bo]};var Do="drop-ok",zo="drop-not-ok",Mo="attach-ok",Po="new-parent",Oo="create";function Ro(e,t,n,o,r){function i(t,n){[Mo,Do,zo,Po].forEach(function(o){o===n?e.addMarker(t,o):e.removeMarker(t,o)})}function s(){var e=t.context();e&&e.prefix===Oo&&t.cancel()}n.on(["create.move","create.hover"],function(e){var t=e.context,n=t.elements,o=e.hover,s=t.source,a=t.hints||{};if(!o)return t.canExecute=!1,void(t.target=null);To(e);var c={x:e.x,y:e.y},l=t.canExecute=o&&function(e,t,n,o,i){if(!t)return!1;var s=k(e=B(e,function(t){var n=t.labelTarget;return!(t.parent||$t(t)&&-1!==e.indexOf(n))}),function(e){return!Ft(e)}),a=!1,c=!1,l=!1;Lo(e)&&(a=r.allowed("shape.attach",{position:n,shape:s,target:t})),a||(l=Lo(e)?r.allowed("shape.create",{position:n,shape:s,source:o,target:t}):r.allowed("elements.create",{elements:e,position:n,target:t}));var d=i.connectionTarget;return l||a?(s&&o&&(c=r.allowed("connection.create",{source:d===o?s:o,target:d===o?o:s,hints:{targetParent:t,targetAttach:a}})),{attach:a,connect:c}):(null===l||null===a)&&null}(n,o,c,s,a);o&&null!==l&&(t.target=o,l&&l.attach?i(o,Mo):i(o,l?Po:zo))}),n.on(["create.end","create.out","create.cleanup"],function(e){var t=e.hover;t&&i(t,null)}),n.on("create.end",function(e){var t=e.context,n=t.source,r=t.shape,i=t.elements,s=t.target,a=t.canExecute,c=a&&a.attach,l=a&&a.connect,d=t.hints||{};if(!1===a||!s)return!1;To(e);var p={x:e.x,y:e.y};r=l?o.appendShape(n,r,p,s,{attach:c,connection:!0===l?{}:l,connectionTarget:d.connectionTarget}):k(i=o.createElements(i,p,s,I({},d,{attach:c})),function(e){return!Ft(e)}),I(t,{elements:i,shape:r}),I(e,{elements:i,shape:r})}),n.on("create.init",function(){n.on("elements.changed",s),n.once(["create.cancel","create.end"],2e3,function(){n.off("elements.changed",s)})}),this.start=function(e,n,o){E(n)||(n=[n]);var r=k(n,function(e){return!Ft(e)});if(r){o=I({elements:n,hints:{},shape:r},o||{}),S(n,function(e){b(e.x)||(e.x=0),b(e.y)||(e.y=0)});var i=be(B(n,function(e){return!e.hidden}));S(n,function(e){Ft(e)&&(e.waypoints=M(e.waypoints,function(e){return{x:e.x-i.x-i.width/2,y:e.y-i.y-i.height/2}})),I(e,{x:e.x-i.x-i.width/2,y:e.y-i.y-i.height/2})}),t.init(e,Oo,{cursor:"grabbing",autoActivate:!0,data:{shape:r,elements:n,context:o}})}}}function To(e){var t=e.context.createConstraints;t&&(t.left&&(e.x=Math.max(e.x,t.left)),t.right&&(e.x=Math.min(e.x,t.right)),t.top&&(e.y=Math.max(e.y,t.top)),t.bottom&&(e.y=Math.min(e.y,t.bottom)))}function Lo(e){return e&&1===e.length&&!Ft(e[0])}function Fo(e,t,n,o,r){t.on("create.move",750,function(t){var i=t.hover,s=t.context,a=s.elements,c=s.dragGroup;c||(c=s.dragGroup=function(e){var t=ne("g");Y(t,r.cls("djs-drag-group",["no-events"]));var i=ne("g");return e.forEach(function(e){var r;e.hidden||(e.waypoints?(r=n._createContainer("connection",i),n.drawConnection(yn(r),e)):(r=n._createContainer("shape",i),n.drawShape(yn(r),e),mn(r,e.x,e.y)),o.addDragger(e,t,r))}),t}(a)),i?(c.parentNode||N(e.getActiveLayer(),c),mn(c,t.x,t.y)):ae(c)}),t.on("create.cleanup",function(e){var t=e.context.dragGroup;t&&ae(t)})}Ro.$inject=["canvas","dragging","eventBus","modeling","rules"],Fo.$inject=["canvas","eventBus","graphicsFactory","previewSupport","styles"];const $o={__depends__:[oo,So,Gn,qn],__init__:["create","createPreview"],create:["type",Ro],createPreview:["type",Fo]};function Wo(e){this._eventBus=e,this._tools=[],this._active=null}Wo.$inject=["eventBus"],Wo.prototype.registerTool=function(e,t){var n=this._tools;if(!t)throw new Error('A tool has to be registered with it\'s "events"');n.push(e),this.bindEvents(e,t)},Wo.prototype.isActive=function(e){return e&&this._active===e},Wo.prototype.length=function(e){return this._tools.length},Wo.prototype.setActive=function(e){var t=this._eventBus;this._active!==e&&(this._active=e,t.fire("tool-manager.update",{tool:e}))},Wo.prototype.bindEvents=function(e,t){var n=this._eventBus,o=[];n.on(t.tool+".init",function(t){t.context.reactivate||!this.isActive(e)?this.setActive(e):this.setActive(null)},this),S(t,function(e){o.push(e+".ended"),o.push(e+".canceled")}),n.on(o,250,function(e){this._active&&(function(e){var t=e.originalEvent&&e.originalEvent.target;return t&&qe(t,'.group[data-group="tools"]')}(e)||this.setActive(null))},this)};const Ho={__depends__:[oo],__init__:["toolManager"],toolManager:["type",Wo]};function qo(e){var t=this;function n(e){t._lastMoveEvent=e}this._lastMoveEvent=null,e.on("canvas.init",function(e){(t._svg=e.svg).addEventListener("mousemove",n)}),e.on("canvas.destroy",function(){t._lastMouseEvent=null,t._svg.removeEventListener("mousemove",n)})}qo.$inject=["eventBus"],qo.prototype.getLastMoveEvent=function(){return this._lastMoveEvent||function(){var e=document.createEvent("MouseEvent");return e.initMouseEvent&&e.initMouseEvent("mousemove",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e}()};const Io={__init__:["mouse"],mouse:["type",qo]};var Go="crosshair";function No(e,t,n,o,r,i,s){this._selection=r,this._dragging=n,this._mouse=s;var a=this;i.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"}),e.on("lasso.selection.end",function(t){var n=t.originalEvent.target;(t.hover||n instanceof SVGElement)&&e.once("lasso.selection.ended",function(){a.activateLasso(t.originalEvent,!0)})}),e.on("lasso.end",0,function(e){var t=e.context,n=Vo(e),r=o.filter(function(e){return e}),i=zn(e);a.select(r,n,i?t.selection:[])}),e.on("lasso.start",function(e){var n=e.context;n.bbox=Vo(e),function(e){var n,o=t.getActiveLayer();Y(n=e.frame=ne("rect"),{class:"djs-lasso-overlay",width:1,height:1,x:0,y:0}),N(o,n)}(n),n.selection=r.get()}),e.on("lasso.move",function(e){var t=e.context;t.bbox=Vo(e),function(e){var t=e.frame,n=e.bbox;Y(t,{x:n.x,y:n.y,width:n.width,height:n.height})}(t)}),e.on("lasso.cleanup",function(e){!function(e){e.frame&&ae(e.frame)}(e.context)}),e.on("element.mousedown",1500,function(e){if(zn(e))return a.activateLasso(e.originalEvent),!0})}function Vo(e){var t={x:e.x-e.dx,y:e.y-e.dy},n={x:e.x,y:e.y};return t.x<=n.x&&t.y<n.y||t.x<n.x&&t.y<=n.y?{x:t.x,y:t.y,width:n.x-t.x,height:n.y-t.y}:t.x>=n.x&&t.y<n.y||t.x>n.x&&t.y<=n.y?{x:n.x,y:t.y,width:t.x-n.x,height:n.y-t.y}:t.x<=n.x&&t.y>n.y||t.x<n.x&&t.y>=n.y?{x:t.x,y:n.y,width:n.x-t.x,height:t.y-n.y}:t.x>=n.x&&t.y>n.y||t.x>n.x&&t.y>=n.y?{x:n.x,y:n.y,width:t.x-n.x,height:t.y-n.y}:{x:n.x,y:n.y,width:0,height:0}}No.$inject=["eventBus","canvas","dragging","elementRegistry","selection","toolManager","mouse"],No.prototype.activateLasso=function(e,t){this._dragging.init(e,"lasso",{autoActivate:t,cursor:Go,data:{context:{}}})},No.prototype.activateSelection=function(e,t){this._dragging.init(e,"lasso.selection",{trapClick:!1,autoActivate:t,cursor:Go,data:{context:{}},keepSelection:!0})},No.prototype.select=function(e,t,n=[]){var o=function(e,t){var n={};return S(e,function(e){var o=e;o.waypoints&&(o=be(o)),!b(t.y)&&o.x>t.x&&(n[e.id]=e),!b(t.x)&&o.y>t.y&&(n[e.id]=e),o.x>t.x&&o.y>t.y&&(b(t.width)&&b(t.height)&&o.width+o.x<t.width+t.x&&o.height+o.y<t.height+t.y?n[e.id]=e:b(t.width)&&b(t.height)||(n[e.id]=e))}),n}(e,t);this._selection.select([...n,...P(o)])},No.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)},No.prototype.isActive=function(){var e=this._dragging.context();return e&&/^lasso/.test(e.prefix)};const Uo={__depends__:[Ho,Io],__init__:["lassoTool"],lassoTool:["type",No]};function Yo(e,t){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[],trigger:null},this._injector=t,this._eventBus=e,this._uid=1,e.on(["diagram.destroy","diagram.clear"],function(){this.clear(!1)},this)}Yo.$inject=["eventBus","injector"],Yo.prototype.execute=function(e,t){if(!e)throw new Error("command required");this._currentExecution.trigger="execute";const n={command:e,context:t};this._pushAction(n),this._internalExecute(n),this._popAction()},Yo.prototype.canExecute=function(e,t){const n={command:e,context:t},o=this._getHandler(e);let r=this._fire(e,"canExecute",n);if(void 0===r){if(!o)return!1;o.canExecute&&(r=o.canExecute(t))}return r},Yo.prototype.clear=function(e){this._stack.length=0,this._stackIdx=-1,!1!==e&&this._fire("changed",{trigger:"clear"})},Yo.prototype.undo=function(){let e,t=this._getUndoAction();if(t){for(this._currentExecution.trigger="undo",this._pushAction(t);t&&(this._internalUndo(t),e=this._getUndoAction(),e&&e.id===t.id);)t=e;this._popAction()}},Yo.prototype.redo=function(){let e,t=this._getRedoAction();if(t){for(this._currentExecution.trigger="redo",this._pushAction(t);t&&(this._internalExecute(t,!0),e=this._getRedoAction(),e&&e.id===t.id);)t=e;this._popAction()}},Yo.prototype.register=function(e,t){this._setHandler(e,t)},Yo.prototype.registerHandler=function(e,t){if(!e||!t)throw new Error("command and handlerCls must be defined");const n=this._injector.instantiate(t);this.register(e,n)},Yo.prototype.canUndo=function(){return!!this._getUndoAction()},Yo.prototype.canRedo=function(){return!!this._getRedoAction()},Yo.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]},Yo.prototype._getUndoAction=function(){return this._stack[this._stackIdx]},Yo.prototype._internalUndo=function(e){const t=e.command,n=e.context,o=this._getHandler(t);this._atomicDo(()=>{this._fire(t,"revert",e),o.revert&&this._markDirty(o.revert(n)),this._revertedAction(e),this._fire(t,"reverted",e)})},Yo.prototype._fire=function(e,t,n){arguments.length<3&&(n=t,t=null);const o=t?[e+"."+t,t]:[e];let r;n=this._eventBus.createEvent(n);for(const e of o)if(r=this._eventBus.fire("commandStack."+e,n),n.cancelBubble)break;return r},Yo.prototype._createId=function(){return this._uid++},Yo.prototype._atomicDo=function(e){const t=this._currentExecution;t.atomic=!0;try{e()}finally{t.atomic=!1}},Yo.prototype._internalExecute=function(e,t){const n=e.command,o=e.context,r=this._getHandler(n);if(!r)throw new Error("no command handler registered for <"+n+">");this._pushAction(e),t||(this._fire(n,"preExecute",e),r.preExecute&&r.preExecute(o),this._fire(n,"preExecuted",e)),this._atomicDo(()=>{this._fire(n,"execute",e),r.execute&&this._markDirty(r.execute(o)),this._executedAction(e,t),this._fire(n,"executed",e)}),t||(this._fire(n,"postExecute",e),r.postExecute&&r.postExecute(o),this._fire(n,"postExecuted",e)),this._popAction()},Yo.prototype._pushAction=function(e){const t=this._currentExecution,n=t.actions,o=n[0];if(t.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+e.command+")");e.id||(e.id=o&&o.id||this._createId()),n.push(e)},Yo.prototype._popAction=function(){const e=this._currentExecution,t=e.trigger,n=e.actions,o=e.dirty;n.pop(),n.length||(this._eventBus.fire("elements.changed",{elements:R("id",o.reverse())}),o.length=0,this._fire("changed",{trigger:t}),e.trigger=null)},Yo.prototype._markDirty=function(e){const t=this._currentExecution;e&&(e=E(e)?e:[e],t.dirty=t.dirty.concat(e))},Yo.prototype._executedAction=function(e,t){const n=++this._stackIdx;t||this._stack.splice(n,this._stack.length,e)},Yo.prototype._revertedAction=function(e){this._stackIdx--},Yo.prototype._getHandler=function(e){return this._handlerMap[e]},Yo.prototype._setHandler=function(e,t){if(!e||!t)throw new Error("command and handler required");if(this._handlerMap[e])throw new Error("overriding handler for command <"+e+">");this._handlerMap[e]=t};const Xo={commandStack:["type",Yo]};function Zo(e,t,n,o){e.on("element.changed",function(o){var r=o.element;(r.parent||r===t.getRootElement())&&(o.gfx=n.getGraphics(r)),o.gfx&&e.fire(Ce(r)+".changed",o)}),e.on("elements.changed",function(t){var n=t.elements;n.forEach(function(t){e.fire("element.changed",{element:t})}),o.updateContainments(n)}),e.on("shape.changed",function(e){o.update("shape",e.element,e.gfx)}),e.on("connection.changed",function(e){o.update("connection",e.element,e.gfx)})}Zo.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];const Ko={__init__:["changeSupport"],changeSupport:["type",Zo]};function Qo(e,t){this._modeling=e,this._canvas=t}function Jo(e){this._modeling=e}function er(e,t){this._canvas=e,this._layouter=t}Qo.$inject=["modeling","canvas"],Qo.prototype.preExecute=function(e){var t=this._modeling,n=e.elements,o=e.alignment;S(n,function(e){var n={x:0,y:0};m(o.left)?n.x=o.left-e.x:m(o.right)?n.x=o.right-e.width-e.x:m(o.center)?n.x=o.center-Math.round(e.width/2)-e.x:m(o.top)?n.y=o.top-e.y:m(o.bottom)?n.y=o.bottom-e.height-e.y:m(o.middle)&&(n.y=o.middle-Math.round(e.height/2)-e.y),t.moveElements([e],n,e.parent)})},Qo.prototype.postExecute=function(e){},Jo.$inject=["modeling"],Jo.prototype.preExecute=function(e){var t=e.source;if(!t)throw new Error("source required");var n=e.target||t.parent,o=e.shape,r=e.hints||{};o=e.shape=this._modeling.createShape(o,e.position,n,{attach:r.attach}),e.shape=o},Jo.prototype.postExecute=function(e){var t,n,o=e.hints||{};t=e.source,n=e.shape,k(t.outgoing,function(e){return e.target===n})||(o.connectionTarget===e.source?this._modeling.connect(e.shape,e.source,e.connection):this._modeling.connect(e.source,e.shape,e.connection))},er.$inject=["canvas","layouter"],er.prototype.execute=function(e){var t=e.connection,n=e.source,o=e.target,r=e.parent,i=e.parentIndex,s=e.hints;if(!n||!o)throw new Error("source and target required");if(!r)throw new Error("parent required");return t.source=n,t.target=o,t.waypoints||(t.waypoints=this._layouter.layoutConnection(t,s)),this._canvas.addConnection(t,r,i),t},er.prototype.revert=function(e){var t=e.connection;return this._canvas.removeConnection(t),t.source=null,t.target=null,t};var tr=Math.round;function nr(e){this._modeling=e}nr.$inject=["modeling"],nr.prototype.preExecute=function(e){var t=e.elements,n=e.parent,o=e.parentIndex,r=e.position,i=e.hints,s=this._modeling;S(t,function(e){b(e.x)||(e.x=0),b(e.y)||(e.y=0)});var a=be(B(t,function(e){return!e.hidden}));S(t,function(e){Ft(e)&&(e.waypoints=M(e.waypoints,function(e){return{x:tr(e.x-a.x-a.width/2+r.x),y:tr(e.y-a.y-a.height/2+r.y)}})),I(e,{x:tr(e.x-a.x-a.width/2+r.x),y:tr(e.y-a.y-a.height/2+r.y)})});var c=ye(t),l={};S(t,function(e){if(Ft(e))l[e.id]=b(o)?s.createConnection(l[e.source.id],l[e.target.id],o,e,e.parent||n,i):s.createConnection(l[e.source.id],l[e.target.id],e,e.parent||n,i);else{var t=I({},i);-1===c.indexOf(e)&&(t.autoResize=!1),$t(e)&&(t=function(e,t){let n={};return S(Object(e),function(e,o){-1===t.indexOf(o)&&(n[o]=e)}),n}(t,["attach"])),l[e.id]=b(o)?s.createShape(e,G(e,["x","y","width","height"]),e.parent||n,o,t):s.createShape(e,G(e,["x","y","width","height"]),e.parent||n,t)}}),e.elements=P(l)};var or=Math.round;function rr(e){this._canvas=e}function ir(e){rr.call(this,e)}rr.$inject=["canvas"],rr.prototype.execute=function(e){var t=e.shape,n=e.position,o=e.parent,r=e.parentIndex;if(!o)throw new Error("parent required");if(!n)throw new Error("position required");return void 0!==n.width?I(t,n):I(t,{x:n.x-or(t.width/2),y:n.y-or(t.height/2)}),this._canvas.addShape(t,o,r),t},rr.prototype.revert=function(e){var t=e.shape;return this._canvas.removeShape(t),t},f(ir,rr),ir.$inject=["canvas"];var sr=rr.prototype.execute;ir.prototype.execute=function(e){var t=e.shape;return function(e){["width","height"].forEach(function(t){void 0===e[t]&&(e[t]=0)})}(t),t.labelTarget=e.labelTarget,sr.call(this,e)};var ar=rr.prototype.revert;function cr(e,t){if("function"!=typeof t)throw new Error("removeFn iterator must be a function");if(e){for(var n;n=e[0];)t(n);return e}}function lr(e,t){this._canvas=e,this._modeling=t}function dr(e,t){this._modeling=e,this._elementRegistry=t}function pr(e,t){this._canvas=e,this._modeling=t}function ur(e){this._modeling=e}ir.prototype.revert=function(e){return e.shape.labelTarget=null,ar.call(this,e)},lr.$inject=["canvas","modeling"],lr.prototype.preExecute=function(e){var t=this._modeling,n=e.connection;cr(n.incoming,function(e){t.removeConnection(e,{nested:!0})}),cr(n.outgoing,function(e){t.removeConnection(e,{nested:!0})})},lr.prototype.execute=function(e){var t=e.connection,n=t.parent;return e.parent=n,e.parentIndex=st(n.children,t),e.source=t.source,e.target=t.target,this._canvas.removeConnection(t),t.source=null,t.target=null,t},lr.prototype.revert=function(e){var t=e.connection,n=e.parent,o=e.parentIndex;return t.source=e.source,t.target=e.target,it(n.children,t,o),this._canvas.addConnection(t,n),t},dr.$inject=["modeling","elementRegistry"],dr.prototype.postExecute=function(e){var t=this._modeling,n=this._elementRegistry;S(e.elements,function(e){n.get(e.id)&&(e.waypoints?t.removeConnection(e):t.removeShape(e))})},pr.$inject=["canvas","modeling"],pr.prototype.preExecute=function(e){var t=this._modeling,n=e.shape;cr(n.incoming,function(e){t.removeConnection(e,{nested:!0})}),cr(n.outgoing,function(e){t.removeConnection(e,{nested:!0})}),cr(n.children,function(e){Ft(e)?t.removeConnection(e,{nested:!0}):t.removeShape(e,{nested:!0})})},pr.prototype.execute=function(e){var t=this._canvas,n=e.shape,o=n.parent;return e.oldParent=o,e.oldParentIndex=st(o.children,n),t.removeShape(n),n},pr.prototype.revert=function(e){var t=this._canvas,n=e.shape,o=e.oldParent,r=e.oldParentIndex;return it(o.children,n,r),t.addShape(n,o),n},ur.$inject=["modeling"];var hr={x:"y",y:"x"};function fr(e,t){this._layouter=e,this._canvas=t}function gr(){}function vr(e,t,n){var o=Kn(t),r=Kn(n),i=Qn(e,o),s=i.x*(n.width/t.width),a=i.y*(n.height/t.height);return Wt({x:r.x+s,y:r.y+a})}function Ar(e,t,n){var o=_r(e),r=br(o,t),i=o[0];return r.length?r[r.length-1]:vr(i.original||i,n,t)}function yr(e,t,n){var o=_r(e),r=br(o,t),i=o[o.length-1];return r.length?r[0]:vr(i.original||i,n,t)}function mr(e,t,n){var o=_r(e),r=Er(t,n),i=o[0];return vr(i.original||i,r,t)}function xr(e,t,n){var o=_r(e),r=Er(t,n),i=o[o.length-1];return vr(i.original||i,r,t)}function Er(e,t){return{x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height}}function _r(e){var t=e.waypoints;if(!t.length)throw new Error("connection#"+e.id+": no waypoints");return t}function br(e,t){return B(M(e,Cr),function(e){return function(e,t){return"intersect"===function(e,t,n){_(n=n||0)||(n={x:n,y:n});var o=Ht(e),r=Ht(t),i=o.bottom+n.y<=r.top,s=o.left-n.x>=r.right,a=o.top-n.y>=r.bottom,c=i?"top":a?"bottom":null,l=o.right+n.x<=r.left?"left":s?"right":null;return l&&c?c+"-"+l:l||c||"intersect"}(t,e,1)}(e,t)})}function Cr(e){return e.original||e}function wr(){this.allShapes={},this.allConnections={},this.enclosedElements={},this.enclosedConnections={},this.topLevel={}}function jr(e){this._modeling=e}function kr(e){this._helper=new jr(e)}function Br(e){this._modeling=e,this._helper=new jr(e)}function Sr(e){this._modeling=e}function Dr(e){return e.original||e}function zr(e,t){this._modeling=e,this._rules=t}function Mr(e){this._modeling=e}function Pr(e,t){return-1!==e.indexOf(t)}function Or(e){this._modeling=e}function Rr(e){return I({},e)}function Tr(e){switch(e){case"n":case"s":return"y";case"w":case"e":return"x"}}function Lr(e,t,n){var o=Tr(n);return/e|s/.test(n)?e[o]>t:/n|w/.test(n)?e[o]<t:void 0}function Fr(e,t){return-1!==e.indexOf(t)}function $r(e){this._modeling=e}function Wr(e){var t={};return S(e,function(e){t[e.id]=e.hidden,e.children&&(t=I({},t,Wr(e.children)))}),t}function Hr(e,t){var n=[];return S(e,function(e){e.hidden=t,n=n.concat(e),e.children&&(n=n.concat(Hr(e.children,e.collapsed||t)))}),n}function qr(e,t){var n=[];return S(e,function(e){e.hidden=t[e.id],n=n.concat(e),e.children&&(n=n.concat(qr(e.children,t)))}),n}function Ir(e){this._modeling=e}function Gr(e,t){return rt(e&&e.attachers,t)}function Nr(e,t,n){if(e){var o=e.attachers;o||(e.attachers=o=[]),it(o,t,n)}}function Vr(){}function Ur(e,t,n){this._eventBus=e,this._elementFactory=t,this._commandStack=n;var o=this;e.on("diagram.init",function(){o.registerHandlers(n)})}function Yr(){}ur.prototype.preExecute=function(e){var t=this._modeling,n=e.groups,o=e.axis,r=e.dimension;function i(e,t){e.range.min=Math.min(t[o],e.range.min),e.range.max=Math.max(t[o]+t[r],e.range.max)}function s(e){return e[o]+e[r]/2}function a(e){return e.length-1}function c(e){return e.max-e.min}var l,d,p=n[0],u=a(n),h=n[u],f=0;S(n,function(e,l){var d,p,h;e.elements.length<2?l&&l!==n.length-1&&(i(e,e.elements[0]),f+=c(e.range)):(p=(d=T(e.elements,o))[0],l===u&&(p=d[a(d)]),h=s(p),e.range=null,S(d,function(n){!function(e,n){var r={y:0};r[o]=e-s(n),r[o]&&(r[hr[o]]=0,t.moveElements([n],r,n.parent))}(h,n),null!==e.range?i(e,n):e.range={min:n[o],max:n[o]+n[r]}}),l&&l!==n.length-1&&(f+=c(e.range)))}),d=Math.abs(h.range.min-p.range.max),(l=Math.round((d-f)/(n.length-1)))<n.length-1||S(n,function(e,i){var s,a={};e!==p&&e!==h&&(s=n[i-1],e.range.max=0,S(e.elements,function(n,i){a[hr[o]]=0,a[o]=s.range.max-n[o]+l,e.range.min!==n[o]&&(a[o]+=n[o]-e.range.min),a[o]&&t.moveElements([n],a,n.parent),e.range.max=Math.max(n[o]+n[r],i?e.range.max:0)}))})},ur.prototype.postExecute=function(e){},fr.$inject=["layouter","canvas"],fr.prototype.execute=function(e){var t=e.connection;return I(e,{oldWaypoints:t.waypoints}),t.waypoints=this._layouter.layoutConnection(t,e.hints),t},fr.prototype.revert=function(e){var t=e.connection;return t.waypoints=e.oldWaypoints,t},gr.prototype.execute=function(e){var t=e.connection,n=e.delta,o=e.newParent||t.parent,r=e.newParentIndex,i=t.parent;return e.oldParent=i,e.oldParentIndex=rt(i.children,t),it(o.children,t,r),t.parent=o,S(t.waypoints,function(e){e.x+=n.x,e.y+=n.y,e.original&&(e.original.x+=n.x,e.original.y+=n.y)}),t},gr.prototype.revert=function(e){var t=e.connection,n=t.parent,o=e.oldParent,r=e.oldParentIndex,i=e.delta;return rt(n.children,t),it(o.children,t,r),t.parent=o,S(t.waypoints,function(e){e.x-=i.x,e.y-=i.y,e.original&&(e.original.x-=i.x,e.original.y-=i.y)}),t},wr.prototype.add=function(e,t){return this.addAll([e],t)},wr.prototype.addAll=function(e,t){var n=function(e,t,n){y(t)&&(t=!0),_(t)&&(n=t,t=!0);var o=je((n=n||{}).allShapes),r=je(n.allConnections),i=je(n.enclosedElements),s=je(n.enclosedConnections),a=je(n.topLevel,t&&O(e,function(e){return e.id}));function c(e){a[e.source.id]&&a[e.target.id]&&(a[e.id]=[e]),o[e.source.id]&&o[e.target.id]&&(s[e.id]=i[e.id]=e),r[e.id]=e}return Ee(e,function(e){if(i[e.id]=e,!e.waypoints)return o[e.id]=e,S(e.incoming,c),S(e.outgoing,c),e.children;s[e.id]=r[e.id]=e}),{allShapes:o,allConnections:r,topLevel:a,enclosedConnections:s,enclosedElements:i}}(e,!!t,this);return I(this,n),this},jr.prototype.moveRecursive=function(e,t,n){return e?this.moveClosure(this.getClosure(e),t,n):[]},jr.prototype.moveClosure=function(e,t,n,o,r){var i=this._modeling,s=e.allShapes,a=e.allConnections,c=e.enclosedConnections,l=e.topLevel,d=!1;r&&r.parent===n&&(d=!0),S(s,function(e){i.moveShape(e,t,l[e.id]&&!d&&n,{recurse:!1,layout:!1})}),S(a,function(e){var o=!!s[e.source.id],r=!!s[e.target.id];c[e.id]&&o&&r?i.moveConnection(e,t,l[e.id]&&!d&&n):i.layoutConnection(e,{connectionStart:o&&mr(e,e.source,t),connectionEnd:r&&xr(e,e.target,t)})})},jr.prototype.getClosure=function(e){return(new wr).addAll(e,!0)},kr.$inject=["modeling"],kr.prototype.preExecute=function(e){e.closure=this._helper.getClosure(e.shapes)},kr.prototype.postExecute=function(e){var t,n=e.hints;n&&n.primaryShape&&(t=n.primaryShape,n.oldParent=t.parent),this._helper.moveClosure(e.closure,e.delta,e.newParent,e.newHost,t)},Br.$inject=["modeling"],Br.prototype.execute=function(e){var t=e.shape,n=e.delta,o=e.newParent||t.parent,r=e.newParentIndex,i=t.parent;return e.oldBounds=G(t,["x","y","width","height"]),e.oldParent=i,e.oldParentIndex=rt(i.children,t),it(o.children,t,r),I(t,{parent:o,x:t.x+n.x,y:t.y+n.y}),t},Br.prototype.postExecute=function(e){var t=e.shape,n=e.delta,o=e.hints,r=this._modeling;!1!==o.layout&&(S(t.incoming,function(e){r.layoutConnection(e,{connectionEnd:xr(e,t,n)})}),S(t.outgoing,function(e){r.layoutConnection(e,{connectionStart:mr(e,t,n)})})),!1!==o.recurse&&this.moveChildren(e)},Br.prototype.revert=function(e){var t=e.shape,n=e.oldParent,o=e.oldParentIndex,r=e.delta;return it(n.children,t,o),I(t,{parent:n,x:t.x-r.x,y:t.y-r.y}),t},Br.prototype.moveChildren=function(e){var t=e.delta,n=e.shape;this._helper.moveRecursive(n.children,t,null)},Br.prototype.getNewParent=function(e){return e.newParent||e.shape.parent},Sr.$inject=["modeling"],Sr.prototype.execute=function(e){var t=e.newSource,n=e.newTarget,o=e.connection,r=e.dockingOrPoints;if(!t&&!n)throw new Error("newSource or newTarget required");return E(r)&&(e.oldWaypoints=o.waypoints,o.waypoints=r),t&&(e.oldSource=o.source,o.source=t),n&&(e.oldTarget=o.target,o.target=n),o},Sr.prototype.postExecute=function(e){var t=e.connection,n=e.newSource,o=e.newTarget,r=e.dockingOrPoints,i=e.hints||{},s={};i.connectionStart&&(s.connectionStart=i.connectionStart),i.connectionEnd&&(s.connectionEnd=i.connectionEnd),!1!==i.layoutConnection&&(!n||o&&"source"!==i.docking||(s.connectionStart=s.connectionStart||Dr(E(r)?r[0]:r)),!o||n&&"target"!==i.docking||(s.connectionEnd=s.connectionEnd||Dr(E(r)?r[r.length-1]:r)),i.newWaypoints&&(s.waypoints=i.newWaypoints),this._modeling.layoutConnection(t,s))},Sr.prototype.revert=function(e){var t=e.oldSource,n=e.oldTarget,o=e.oldWaypoints,r=e.connection;return t&&(r.source=t),n&&(r.target=n),o&&(r.waypoints=o),r},zr.$inject=["modeling","rules"],zr.prototype.preExecute=function(e){var t,n=this,o=this._modeling,r=this._rules,i=e.oldShape,s=e.newData,a=e.hints||{};function c(e,t,n){return r.allowed("connection.reconnect",{connection:n,source:e,target:t})}var l,d={x:s.x,y:s.y},p={x:i.x,y:i.y,width:i.width,height:i.height};t=e.newShape=e.newShape||n.createShape(s,d,i.parent,a),i.host&&o.updateAttachment(t,i.host),!1!==a.moveChildren&&(l=i.children.slice(),o.moveElements(l,{x:0,y:0},t,a));var u=i.incoming.slice(),h=i.outgoing.slice();S(u,function(e){c(e.source,t,e)&&n.reconnectEnd(e,t,yr(e,t,p),a)}),S(h,function(e){var o=e.target;c(t,o,e)&&n.reconnectStart(e,t,Ar(e,t,p),a)})},zr.prototype.postExecute=function(e){var t=e.oldShape;this._modeling.removeShape(t)},zr.prototype.execute=function(e){},zr.prototype.revert=function(e){},zr.prototype.createShape=function(e,t,n,o){return this._modeling.createShape(e,t,n,o)},zr.prototype.reconnectStart=function(e,t,n,o){this._modeling.reconnectStart(e,t,n,o)},zr.prototype.reconnectEnd=function(e,t,n,o){this._modeling.reconnectEnd(e,t,n,o)},Mr.$inject=["modeling"],Mr.prototype.execute=function(e){var t=e.shape,n=e.newBounds,o=e.minBounds;if(void 0===n.x||void 0===n.y||void 0===n.width||void 0===n.height)throw new Error("newBounds must have {x, y, width, height} properties");if(o&&(n.width<o.width||n.height<o.height))throw new Error("width and height cannot be less than minimum height and width");if(!o&&n.width<10||n.height<10)throw new Error("width and height cannot be less than 10px");return e.oldBounds={width:t.width,height:t.height,x:t.x,y:t.y},I(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t},Mr.prototype.postExecute=function(e){var t=this._modeling,n=e.shape,o=e.oldBounds;!1!==(e.hints||{}).layout&&(S(n.incoming,function(e){t.layoutConnection(e,{connectionEnd:yr(e,n,o)})}),S(n.outgoing,function(e){t.layoutConnection(e,{connectionStart:Ar(e,n,o)})}))},Mr.prototype.revert=function(e){var t=e.shape,n=e.oldBounds;return I(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t},Or.$inject=["modeling"],Or.prototype.preExecute=function(e){var t=e.delta,n=e.direction,o=e.movingShapes,r=e.resizingShapes,i=e.start,s={};this.moveShapes(o,t),S(r,function(e){s[e.id]=function(e){return{x:e.x,y:e.y,height:e.height,width:e.width}}(e)}),this.resizeShapes(r,t,n),this.updateConnectionWaypoints(function(e,t){var n=[];return S(e.concat(t),function(o){var r=o.incoming,i=o.outgoing;S(r.concat(i),function(o){var r=o.source,i=o.target;(Pr(e,r)||Pr(e,i)||Pr(t,r)||Pr(t,i))&&(Pr(n,o)||n.push(o))})}),n}(o,r),t,n,i,o,r,s)},Or.prototype.execute=function(){},Or.prototype.revert=function(){},Or.prototype.moveShapes=function(e,t){var n=this;S(e,function(e){n._modeling.moveShape(e,t,null,{autoResize:!1,layout:!1,recurse:!1})})},Or.prototype.resizeShapes=function(e,t,n){var o=this;S(e,function(e){var r=function(e,t,n){var o=e.x,r=e.y,i=e.width,s=e.height,a=n.x,c=n.y;switch(t){case"n":return{x:o,y:r+c,width:i,height:s-c};case"s":return{x:o,y:r,width:i,height:s+c};case"w":return{x:o+a,y:r,width:i-a,height:s};case"e":return{x:o,y:r,width:i+a,height:s};default:throw new Error("unknown direction: "+t)}}(e,n,t);o._modeling.resizeShape(e,r,null,{attachSupport:!1,autoResize:!1,layout:!1})})},Or.prototype.updateConnectionWaypoints=function(e,t,n,o,r,i,s){var a=this,c=r.concat(i);S(e,function(e){var l=e.source,d=e.target,p=function(e){return M(e.waypoints,function(e){return(e=Rr(e)).original&&(e.original=Rr(e.original)),e})}(e),u=Tr(n),h={};Fr(c,l)&&Fr(c,d)?(p=M(p,function(e){return Lr(e,o,n)&&(e[u]=e[u]+t[u]),e.original&&Lr(e.original,o,n)&&(e.original[u]=e.original[u]+t[u]),e}),a._modeling.updateWaypoints(e,p,{labelBehavior:!1})):(Fr(c,l)||Fr(c,d))&&(Fr(r,l)?h.connectionStart=mr(e,l,t):Fr(r,d)?h.connectionEnd=xr(e,d,t):Fr(i,l)?h.connectionStart=Ar(e,l,s[l.id]):Fr(i,d)&&(h.connectionEnd=yr(e,d,s[d.id])),a._modeling.layoutConnection(e,h))})},$r.$inject=["modeling"],$r.prototype.execute=function(e){var t=e.shape,n=t.children;e.oldChildrenVisibility=Wr(n),t.collapsed=!t.collapsed;var o=Hr(n,t.collapsed);return[t].concat(o)},$r.prototype.revert=function(e){var t=e.shape,n=e.oldChildrenVisibility,o=qr(t.children,n);return t.collapsed=!t.collapsed,[t].concat(o)},Ir.$inject=["modeling"],Ir.prototype.execute=function(e){var t=e.shape,n=e.newHost,o=t.host;return e.oldHost=o,e.attacherIdx=Gr(o,t),Nr(n,t),t.host=n,t},Ir.prototype.revert=function(e){var t=e.shape,n=e.newHost,o=e.oldHost,r=e.attacherIdx;return t.host=o,Gr(n,t),Nr(o,t,r),t},Vr.prototype.execute=function(e){var t=e.connection,n=e.newWaypoints;return e.oldWaypoints=t.waypoints,t.waypoints=n,t},Vr.prototype.revert=function(e){var t=e.connection,n=e.oldWaypoints;return t.waypoints=n,t},Ur.$inject=["eventBus","elementFactory","commandStack"],Ur.prototype.getHandlers=function(){return{"shape.append":Jo,"shape.create":rr,"shape.delete":pr,"shape.move":Br,"shape.resize":Mr,"shape.replace":zr,"shape.toggleCollapse":$r,spaceTool:Or,"label.create":ir,"connection.create":er,"connection.delete":lr,"connection.move":gr,"connection.layout":fr,"connection.updateWaypoints":Vr,"connection.reconnect":Sr,"elements.create":nr,"elements.move":kr,"elements.delete":dr,"elements.distribute":ur,"elements.align":Qo,"element.updateAttachment":Ir}},Ur.prototype.registerHandlers=function(e){S(this.getHandlers(),function(t,n){e.registerHandler(n,t)})},Ur.prototype.moveShape=function(e,t,n,o,r){"object"==typeof o&&(r=o,o=null);var i={shape:e,delta:t,newParent:n,newParentIndex:o,hints:r||{}};this._commandStack.execute("shape.move",i)},Ur.prototype.updateAttachment=function(e,t){var n={shape:e,newHost:t};this._commandStack.execute("element.updateAttachment",n)},Ur.prototype.moveElements=function(e,t,n,o){var r,i=(o=o||{}).attach,s=n;!0===i?(r=n,s=n.parent):!1===i&&(r=null);var a={shapes:e,delta:t,newParent:s,newHost:r,hints:o};this._commandStack.execute("elements.move",a)},Ur.prototype.moveConnection=function(e,t,n,o,r){"object"==typeof o&&(r=o,o=void 0);var i={connection:e,delta:t,newParent:n,newParentIndex:o,hints:r||{}};this._commandStack.execute("connection.move",i)},Ur.prototype.layoutConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.layout",n)},Ur.prototype.createConnection=function(e,t,n,o,r,i){"object"==typeof n&&(i=r,r=o,o=n,n=void 0);var s={source:e,target:t,parent:r,parentIndex:n,connection:o=this._create("connection",o),hints:i};return this._commandStack.execute("connection.create",s),s.connection},Ur.prototype.createShape=function(e,t,n,o,r){"number"!=typeof o&&(r=o,o=void 0);var i,s,a=(r=r||{}).attach;e=this._create("shape",e),a?(i=n.parent,s=n):i=n;var c={position:t,shape:e,parent:i,parentIndex:o,host:s,hints:r};return this._commandStack.execute("shape.create",c),c.shape},Ur.prototype.createElements=function(e,t,n,o,r){E(e)||(e=[e]),"number"!=typeof o&&(r=o,o=void 0);var i={position:t,elements:e,parent:n,parentIndex:o,hints:r=r||{}};return this._commandStack.execute("elements.create",i),i.elements},Ur.prototype.createLabel=function(e,t,n,o){n=this._create("label",n);var r={labelTarget:e,position:t,parent:o||e.parent,shape:n};return this._commandStack.execute("label.create",r),r.shape},Ur.prototype.appendShape=function(e,t,n,o,r){r=r||{};var i={source:e,position:n,target:o,shape:t=this._create("shape",t),connection:r.connection,connectionParent:r.connectionParent,hints:r};return this._commandStack.execute("shape.append",i),i.shape},Ur.prototype.removeElements=function(e){var t={elements:e};this._commandStack.execute("elements.delete",t)},Ur.prototype.distributeElements=function(e,t,n){var o={groups:e,axis:t,dimension:n};this._commandStack.execute("elements.distribute",o)},Ur.prototype.removeShape=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.delete",n)},Ur.prototype.removeConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.delete",n)},Ur.prototype.replaceShape=function(e,t,n){var o={oldShape:e,newData:t,hints:n||{}};return this._commandStack.execute("shape.replace",o),o.newShape},Ur.prototype.alignElements=function(e,t){var n={elements:e,alignment:t};this._commandStack.execute("elements.align",n)},Ur.prototype.resizeShape=function(e,t,n,o){var r={shape:e,newBounds:t,minBounds:n,hints:o};this._commandStack.execute("shape.resize",r)},Ur.prototype.createSpace=function(e,t,n,o,r){var i={delta:n,direction:o,movingShapes:e,resizingShapes:t,start:r};this._commandStack.execute("spaceTool",i)},Ur.prototype.updateWaypoints=function(e,t,n){var o={connection:e,newWaypoints:t,hints:n||{}};this._commandStack.execute("connection.updateWaypoints",o)},Ur.prototype.reconnect=function(e,t,n,o,r){var i={connection:e,newSource:t,newTarget:n,dockingOrPoints:o,hints:r||{}};this._commandStack.execute("connection.reconnect",i)},Ur.prototype.reconnectStart=function(e,t,n,o){o||(o={}),this.reconnect(e,t,e.target,n,I(o,{docking:"source"}))},Ur.prototype.reconnectEnd=function(e,t,n,o){o||(o={}),this.reconnect(e,e.source,t,n,I(o,{docking:"target"}))},Ur.prototype.connect=function(e,t,n,o){return this.createConnection(e,t,n||{},e.parent,o)},Ur.prototype._create=function(e,t){return t instanceof an?t:this._elementFactory.create(e,t)},Ur.prototype.toggleCollapse=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.toggleCollapse",n)},Yr.prototype.layoutConnection=function(e,t){return[(t=t||{}).connectionStart||It(t.source||e.source),t.connectionEnd||It(t.target||e.target)]};const Xr={__depends__:[Xo,Ko,qn,Gn],__init__:["modeling"],modeling:["type",Ur],layouter:["type",Yr]};function Zr(e,t){var n;function o(e){return function(e){if(!qe(e.target,".djs-draggable")){var t=e.button;if(!(t>=2||e.ctrlKey||e.shiftKey||e.altKey))return n={button:t,start:kn(e)},Xe.bind(document,"mousemove",r),Xe.bind(document,"mouseup",i),!0}}(e.originalEvent)}function r(o){var r,i=n.start,s=n.button,a=kn(o),c=Qn(a,i);!n.dragging&&(r=c,Math.sqrt(Math.pow(r.x,2)+Math.pow(r.y,2))>15)&&(n.dragging=!0,0===s&&Zn(e),Yn("grab")),n.dragging&&(c=Qn(a,n.last||n.start),t.scroll({dx:c.x,dy:c.y}),n.last=a),o.preventDefault()}function i(e){Xe.unbind(document,"mousemove",r),Xe.unbind(document,"mouseup",i),n=null,Xn()}e.on("canvas.focus.changed",function(t){t.focused?e.on("element.mousedown",500,o):e.off("element.mousedown",o)}),this.isActive=function(){return!!n}}Zr.$inject=["eventBus","canvas"];const Kr={__init__:["moveCanvas"],moveCanvas:["type",Zr]};function Qr(e,t){this._eventBus=e,this.offset=5;var n=t.cls("djs-outline",["no-fill"]),o=this;function r(e){var t=ne("rect");return Y(t,I({x:0,y:0,rx:4,width:100,height:100},n)),t}e.on(["shape.added","shape.changed"],500,function(e){var t=e.element,n=e.gfx,i=nt(".djs-outline",n);i||N(n,i=o.getOutline(t)||r()),o.updateShapeOutline(i,t)}),e.on(["connection.added","connection.changed"],function(e){var t=e.element,n=e.gfx,i=nt(".djs-outline",n);i||N(n,i=r()),o.updateConnectionOutline(i,t)})}function Jr(e,t,n){this._canvas=t;var o=this;e.on("element.changed",function(e){n.isSelected(e.element)&&o._updateMultiSelectionOutline(n.get())}),e.on("selection.changed",function(e){var t=e.newSelection;o._updateMultiSelectionOutline(t)})}Qr.prototype.updateShapeOutline=function(e,t){var n=!1,o=this._getProviders();o.length&&S(o,function(o){n=n||o.updateOutline(t,e)}),n||Y(e,{x:-this.offset,y:-this.offset,width:t.width+2*this.offset,height:t.height+2*this.offset})},Qr.prototype.updateConnectionOutline=function(e,t){var n=be(t);Y(e,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+2*this.offset,height:n.height+2*this.offset})},Qr.prototype.registerProvider=function(e,t){t||(t=e,e=1e3),this._eventBus.on("outline.getProviders",e,function(e){e.providers.push(t)})},Qr.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"outline.getProviders",providers:[]});return this._eventBus.fire(e),e.providers},Qr.prototype.getOutline=function(e){var t;return S(this._getProviders(),function(n){C(n.getOutline)&&(t=t||n.getOutline(e))}),t},Qr.$inject=["eventBus","styles","elementRegistry"],Jr.prototype._updateMultiSelectionOutline=function(e){var t=this._canvas.getLayer("selectionOutline");Q(t);var n=e.length>1;if(Z(this._canvas.getContainer())[n?"add":"remove"]("djs-multi-select"),n){var o=function(e){return{x:e.x-6,y:e.y-6,width:e.width+12,height:e.height+12}}(be(e)),r=ne("rect");Y(r,I({rx:3},o)),Z(r).add("djs-selection-outline"),N(t,r)}},Jr.$inject=["eventBus","canvas","selection"];const ei={__depends__:[qn],__init__:["outline","multiSelectionOutline"],outline:["type",Qr],multiSelectionOutline:["type",Jr]};var ti=Math.round;function ni(e,t,n,o,r){function i(e,t,n,o){return r.allowed("elements.move",{shapes:e,delta:t,position:n,target:o})}function s(e,n,o,r){if(_(o)&&(r=o,o=!1),!n.waypoints&&n.parent&&!Z(e.target).has("djs-hit-no-move")){var i=function(e){return{x:e.x+ti(e.width/2),y:e.y+ti(e.height/2)}}(n);return t.init(e,i,"shape.move",{cursor:"grabbing",autoActivate:o,data:{shape:n,context:r||{}}}),!0}}e.on("shape.move.start",1500,function(e){var t=e.context,n=e.shape,r=o.get().slice();-1===r.indexOf(n)&&(r=[n]),r=function(e){var t=O(e,"id");return B(e,function(e){for(;e=e.parent;)if(t[e.id])return!1;return!0})}(r),I(t,{shapes:r,validatedShapes:r,shape:n})}),e.on("shape.move.start",1250,function(e){var t=e.context,n=t.validatedShapes;if(!(t.canExecute=i(n)))return!1}),e.on("shape.move.move",500,function(e){var t,n=e.context,o=n.validatedShapes,r=e.hover,s={x:e.dx,y:e.dy};t=i(o,s,{x:e.x,y:e.y},r),n.delta=s,n.canExecute=t,n.target=null!==t?r:null}),e.on("shape.move.end",function(e){var t=e.context,o=t.delta,r=t.canExecute,i="attach"===r,s=t.shapes;if(!1===r)return!1;o.x=ti(o.x),o.y=ti(o.y),0===o.x&&0===o.y||n.moveElements(s,o,t.target,{primaryShape:t.shape,attach:i})}),e.on("element.mousedown",function(e){if(Dn(e)){var t=wn(e);if(!t)throw new Error("must supply DOM mousedown event");return s(t,e.element)}}),this.start=s}ni.$inject=["eventBus","dragging","modeling","selection","rules"];var oi="djs-dragging",ri="drop-ok",ii="drop-not-ok",si="new-parent",ai="attach-ok";function ci(e,t,n,o){function r(e){var t=_e(e,!0),n=t.flatMap(e=>(e.incoming||[]).concat(e.outgoing||[])),o=t.concat(n);return[...new Set(o)]}function i(e,n){[ai,ri,ii,si].forEach(function(o){o===n?t.addMarker(e,o):t.removeMarker(e,o)})}e.on("shape.move.start",499,function(e){var i,s,a,c=e.context,l=c.shapes,d=c.allDraggedElements,p=B(s=r(l),function(e){return!Ft(e)||k(s,L({id:e.source.id}))&&k(s,L({id:e.target.id}))});if(!c.dragGroup){var u=ne("g");Y(u,n.cls("djs-drag-group",["no-events"])),N(t.getActiveLayer(),u),c.dragGroup=u}p.forEach(function(e){o.addDragger(e,c.dragGroup)}),d?(i=[d,r(l)],d=Array.prototype.concat.apply([],i)):d=r(l),S(d,function(e){t.addMarker(e,oi)}),c.allDraggedElements=d,c.differentParents=1!==(a=O(l,function(e){return e.parent&&e.parent.id}),function(e){return e&&Object.keys(e)||[]}(a).length)}),e.on("shape.move.move",499,function(e){var t=e.context,n=t.dragGroup,o=t.target,r=t.shape.parent,s=t.canExecute;o&&("attach"===s?i(o,ai):t.canExecute&&r&&o.id!==r.id?i(o,si):i(o,t.canExecute?ri:ii)),mn(n,e.dx,e.dy)}),e.on(["shape.move.out","shape.move.cleanup"],function(e){var t=e.context.target;t&&i(t,null)}),e.on("shape.move.cleanup",function(e){var n=e.context,o=n.allDraggedElements,r=n.dragGroup;S(o,function(e){t.removeMarker(e,oi)}),r&&ae(r)}),this.makeDraggable=function(e,n,r){o.addDragger(n,e.dragGroup),r&&t.addMarker(n,oi),e.allDraggedElements?e.allDraggedElements.push(n):e.allDraggedElements=[n]}}ci.$inject=["eventBus","canvas","styles","previewSupport"];const li={__depends__:[Rn,qn,ei,Gn,oo,So],__init__:["move","movePreview"],move:["type",ni],movePreview:["type",ci]};var di=".djs-palette-toggle",pi=".entry",ui=di+", "+pi,hi="djs-palette-",fi="open",gi="two-column";function vi(e,t){this._eventBus=e,this._canvas=t;var n=this;e.on("tool-manager.update",function(e){var t=e.tool;n.updateToolHighlight(t)}),e.on("i18n.changed",function(){n._update()}),e.on("diagram.init",function(){n._diagramInitialized=!0,n._rebuild()})}function Ai(e,t){var n=t.getPaletteEntries();return C(n)?n(e):(S(n,function(t,n){e[n]=t}),e)}vi.$inject=["eventBus","canvas"],vi.prototype.registerProvider=function(e,t){t||(t=e,e=1e3),this._eventBus.on("palette.getProviders",e,function(e){e.providers.push(t)}),this._rebuild()},vi.prototype.getEntries=function(){return this._getProviders().reduce(Ai,{})},vi.prototype._rebuild=function(){this._diagramInitialized&&this._getProviders().length&&(this._container||this._init(),this._update())},vi.prototype._init=function(){var e=this,t=this._eventBus,n=this._getParentContainer(),o=this._container=tt(vi.HTML_MARKUP);n.appendChild(o),$e(n).add(hi+"shown"),Ke(o,ui,"click",function(t){var n,o,r=t.delegateTarget;if(o=di,(n=r)&&"function"==typeof n.matches&&n.matches(o))return e.toggle();e.trigger("click",t)}),Xe.bind(o,"mousedown",function(e){e.stopPropagation()}),Ke(o,pi,"dragstart",function(t){e.trigger("dragstart",t)}),t.on("canvas.resized",this._layoutChanged,this),t.fire("palette.create",{container:o})},vi.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"palette.getProviders",providers:[]});return this._eventBus.fire(t),t.providers},vi.prototype._toggleState=function(e){e=e||{};var t,n=this._getParentContainer(),o=this._container,r=this._eventBus,i=$e(o),s=$e(n);t="twoColumn"in e?e.twoColumn:this._needsCollapse(n.clientHeight,this._entries||{}),i.toggle(gi,t),s.toggle(hi+gi,t),"open"in e&&(i.toggle(fi,e.open),s.toggle(hi+fi,e.open)),r.fire("palette.changed",{twoColumn:t,open:this.isOpen()})},vi.prototype._update=function(){var e=nt(".djs-palette-entries",this._container),t=this._entries=this.getEntries();He(e),S(t,function(t,n){var o=t.group||"default",r=nt("[data-group="+Eo(o)+"]",e);r||(Le(r=tt('<div class="group"></div>'),"data-group",o),e.appendChild(r));var i=t.html||(t.separator?'<hr class="separator" />':'<div class="entry" draggable="true"></div>'),s=tt(i);if(r.appendChild(s),!t.separator&&(Le(s,"data-action",n),t.title&&Le(s,"title",t.title),t.className&&function(e,t){var n=$e(e);(E(t)?t:t.split(/\s+/g)).forEach(function(e){n.add(e)})}(s,t.className),t.imageUrl)){var a=tt("<img>");Le(a,"src",t.imageUrl),s.appendChild(a)}}),this.open()},vi.prototype.trigger=function(e,t,n){var o,r,i=t.delegateTarget||t.target;return i?(o=Le(i,"data-action"),r=t.originalEvent||t,this.triggerEntry(o,e,r,n)):t.preventDefault()},vi.prototype.triggerEntry=function(e,t,n,o){var r,i;if((r=this._entries[e])&&(i=r.action,!1!==this._eventBus.fire("palette.trigger",{entry:r,event:n}))){if(C(i)){if("click"===t)return i(n,o)}else if(i[t])return i[t](n,o);n.preventDefault()}},vi.prototype._layoutChanged=function(){this._toggleState({})},vi.prototype._needsCollapse=function(e,t){return e<46*Object.keys(t).length+50},vi.prototype.close=function(){this._toggleState({open:!1,twoColumn:!1})},vi.prototype.open=function(){this._toggleState({open:!0})},vi.prototype.toggle=function(){this.isOpen()?this.close():this.open()},vi.prototype.isActiveTool=function(e){return e&&this._activeTool===e},vi.prototype.updateToolHighlight=function(e){var t;this._toolsContainer||(t=nt(".djs-palette-entries",this._container),this._toolsContainer=nt("[data-group=tools]",t)),S(this._toolsContainer.children,function(t){var n=t.getAttribute("data-action");if(n){var o=$e(t);n=n.replace("-tool",""),o.contains("entry")&&n===e?o.add("highlighted-entry"):o.remove("highlighted-entry")}})},vi.prototype.isOpen=function(){return $e(this._container).has(fi)},vi.prototype._getParentContainer=function(){return this._canvas.getContainer()},vi.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>';const yi={__init__:["palette"],palette:["type",vi]};var mi=Math.max,xi=Math.min;function Ei(e,t,n){var o=t[e],r=n.min&&n.min[e],i=n.max&&n.max[e];return b(r)&&(o=(/top|left/.test(e)?xi:mi)(o,r)),b(i)&&(o=(/top|left/.test(e)?mi:xi)(o,i)),o}function _i(e,t){return void 0!==e?e:20}function bi(e){return!e.waypoints&&"label"!==e.type}function Ci(e,t,n,o){this._dragging=o,this._rules=t;var r=this;e.on("resize.start",function(e){var t,n,o;n=(t=e.context).resizeConstraints,o=t.minBounds,void 0===n&&(void 0===o&&(o=r.computeMinResizeBox(t)),t.resizeConstraints={min:Ht(o)})}),e.on("resize.move",function(e){var t={x:e.dx,y:e.dy};!function(e,t){var n,o=e.shape,i=e.direction,s=e.resizeConstraints;e.delta=t,n=function(e,t,n){var o=n.x,r=n.y,i={x:e.x,y:e.y,width:e.width,height:e.height};return-1!==t.indexOf("n")?(i.y=e.y+r,i.height=e.height-r):-1!==t.indexOf("s")&&(i.height=e.height+r),-1!==t.indexOf("e")?i.width=e.width+o:-1!==t.indexOf("w")&&(i.x=e.x+o,i.width=e.width-o),i}(o,i,t),e.newBounds=function(e,t){if(!t)return e;var n=Ht(e);return qt({top:Ei("top",n,t),right:Ei("right",n,t),bottom:Ei("bottom",n,t),left:Ei("left",n,t)})}(n,s),e.canExecute=r.canResize(e)}(e.context,t)}),e.on("resize.end",function(e){!function(e){var t,o=e.shape,r=e.canExecute,i=e.newBounds;if(r){if(t=i,!function(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}(o,i={x:Math.round(t.x),y:Math.round(t.y),width:Math.round(t.width),height:Math.round(t.height)}))return;n.resizeShape(o,i)}}(e.context)})}function wi(e,t){var n=It(e),o=Ht(e),r={x:n.x,y:n.y};return-1!==t.indexOf("n")?r.y=o.top:-1!==t.indexOf("s")&&(r.y=o.bottom),-1!==t.indexOf("e")?r.x=o.right:-1!==t.indexOf("w")&&(r.x=o.left),r}function ji(e){var t="resize-";return"n"===e||"s"===e?t+"ns":"e"===e||"w"===e?t+"ew":"nw"===e||"se"===e?t+"nwse":t+"nesw"}Ci.prototype.canResize=function(e){var t=this._rules,n=G(e,["newBounds","shape","delta","direction"]);return t.allowed("shape.resize",n)},Ci.prototype.activate=function(e,t,n){var o,r,i=this._dragging;if("string"==typeof n&&(n={direction:n}),!(r=(o=I({shape:t},n)).direction))throw new Error("must provide a direction (n|w|s|e|nw|se|ne|sw)");i.init(e,wi(t,r),"resize",{autoActivate:!0,cursor:ji(r),data:{shape:t,context:o}})},Ci.prototype.computeMinResizeBox=function(e){var t,n,o,r,i,s,a,c=e.shape;return t=e.direction,n=c,o=e.minDimensions||{width:10,height:10},r=function(e,t){var n;if((n=void 0===e.length?B(e.children,bi):e).length)return function(e,t){var n,o,r,i;return"object"==typeof t?(n=_i(t.left),o=_i(t.right),r=_i(t.top),i=_i(t.bottom)):n=o=r=i=_i(t),{x:e.x-n,y:e.y-r,width:e.width+n+o,height:e.height+r+i}}(be(n),t)}(c,e.childrenBoxPadding),i=Ht(n),s={top:/n/.test(t)?i.bottom-o.height:i.top,left:/w/.test(t)?i.right-o.width:i.left,bottom:/s/.test(t)?i.top+o.height:i.bottom,right:/e/.test(t)?i.left+o.width:i.right},a=r?Ht(r):s,qt({top:xi(s.top,a.top),left:xi(s.left,a.left),bottom:mi(s.bottom,a.bottom),right:mi(s.right,a.right)})},Ci.$inject=["eventBus","rules","modeling","dragging"];var ki="djs-resizing",Bi="resize-not-ok";function Si(e,t,n){e.on("resize.move",500,function(e){var o,r,i,s;r=(o=e.context).shape,i=o.newBounds,(s=o.frame)||(s=o.frame=n.addFrame(r,t.getActiveLayer()),t.addMarker(r,ki)),i.width>5&&Y(s,{x:i.x,width:i.width}),i.height>5&&Y(s,{y:i.y,height:i.height}),o.canExecute?Z(s).remove(Bi):Z(s).add(Bi)}),e.on("resize.cleanup",function(e){var n,o;o=(n=e.context).shape,n.frame&&ae(n.frame),t.removeMarker(o,ki)})}Si.$inject=["eventBus","canvas","previewSupport"];var Di="djs-resizer",zi=["n","w","s","e","nw","ne","se","sw"];function Mi(e,t,n,o){this._resize=o,this._canvas=t;var r=this;e.on("selection.changed",function(e){var t=e.newSelection;r.removeResizers(),1===t.length&&S(t,q(r.addResizer,r))}),e.on("shape.changed",function(e){var t=e.element;n.isSelected(t)&&(r.removeResizers(),r.addResizer(t))})}Mi.prototype.makeDraggable=function(e,t,n){var o=this._resize;function r(t){Dn(t)&&o.activate(t,e,n)}Xe.bind(t,"mousedown",r),Xe.bind(t,"touchstart",r)},Mi.prototype._createResizer=function(e,t,n,o){var r=this._getResizersParent(),i=function(e){var t={x:0,y:0};return-1!==e.indexOf("e")?t.x=6:-1!==e.indexOf("w")&&(t.x=-6),-1!==e.indexOf("s")?t.y=6:-1!==e.indexOf("n")&&(t.y=-6),t}(o),s=ne("g");Z(s).add(Di),Z(s).add(Di+"-"+e.id),Z(s).add(Di+"-"+o),N(r,s);var a=ne("rect");Y(a,{x:-4+i.x,y:-4+i.y,width:8,height:8}),Z(a).add(Di+"-visual"),N(s,a);var c=ne("rect");return Y(c,{x:-10+i.x,y:-10+i.y,width:20,height:20}),Z(c).add(Di+"-hit"),N(s,c),function(e,t,n){var o=se();o.setTranslate(t,n);var r=se();r.setRotate(0,0,0);var i=se();i.setScale(1,1),le(e,[o,r,i])}(s,t,n),s},Mi.prototype.createResizer=function(e,t){var n=wi(e,t),o=this._createResizer(e,n.x,n.y,t);this.makeDraggable(e,o,t)},Mi.prototype.addResizer=function(e){var t=this;!Ft(e)&&this._resize.canResize({shape:e})&&S(zi,function(n){t.createResizer(e,n)})},Mi.prototype.removeResizers=function(){Q(this._getResizersParent())},Mi.prototype._getResizersParent=function(){return this._canvas.getLayer("resizers")},Mi.$inject=["eventBus","canvas","selection","resize"];const Pi={__depends__:[Gn,oo,So],__init__:["resize","resizePreview","resizeHandles"],resize:["type",Ci],resizePreview:["type",Si],resizeHandles:["type",Mi]};function Oi(e){return Math.log(e)/Math.log(10)}function Ri(e,t){var n=Oi(e.min),o=Oi(e.max);return(Math.abs(n)+Math.abs(o))/t}var Ti=Math.sign||function(e){return e>=0?1:-1},Li={min:.2,max:4};function Fi(e,t,n){e=e||{},this._enabled=!1,this._canvas=n,this._container=n._container,this._handleWheel=q(this._handleWheel,this),this._totalDelta=0,this._scale=e.scale||.75;var o=this;t.on("canvas.focus.changed",function(t){o._init(t.focused&&!1!==e.enabled)})}Fi.$inject=["config.zoomScroll","eventBus","canvas"],Fi.prototype.scroll=function(e){this._canvas.scroll(e)},Fi.prototype.reset=function(){this._canvas.zoom("fit-viewport")},Fi.prototype.zoom=function(e,t){var n=Ri(Li,20);this._totalDelta+=e,Math.abs(this._totalDelta)>.1&&(this._zoom(e,t,n),this._totalDelta=0)},Fi.prototype._handleWheel=function(e){if(this._canvas.isFocused()){var t=this._container;e.preventDefault();var n,o=e.ctrlKey||Bn()&&e.metaKey,r=e.shiftKey,i=-1*this._scale;if(i*=o?0===e.deltaMode?.02:.32:0===e.deltaMode?1:16,o){var s=t.getBoundingClientRect(),a={x:e.clientX-s.left,y:e.clientY-s.top};n=Math.sqrt(Math.pow(e.deltaY,2)+Math.pow(e.deltaX,2))*Ti(e.deltaY)*i,this.zoom(n,a)}else n=r?{dx:i*e.deltaY,dy:0}:{dx:i*e.deltaX,dy:i*e.deltaY},this.scroll(n)}},Fi.prototype.stepZoom=function(e,t){var n=Ri(Li,10);this._zoom(e,t,n)},Fi.prototype._zoom=function(e,t,n){var o=this._canvas,r=e>0?1:-1,i=Oi(o.zoom()),s=Math.round(i/n)*n;s+=n*r;var a,c,l=Math.pow(10,s);o.zoom((a=Li,c=l,Math.max(a.min,Math.min(a.max,c))),t)},Fi.prototype.toggle=function(e){var t=this._container,n=this._handleWheel,o=this._enabled;return void 0===e&&(e=!o),o!==e&&Xe[e?"bind":"unbind"](t,"wheel",n,!1),this._enabled=e,e},Fi.prototype._init=function(e){this.toggle(e)};const $i={__init__:["zoomScroll"],zoomScroll:["type",Fi]};var Wi=Math.abs,Hi=Math.round,qi={x:"width",y:"height"},Ii="crosshair",Gi={n:"top",w:"left",s:"bottom",e:"right"},Ni={n:"s",w:"e",s:"n",e:"w"};function Vi(e,t,n,o,r,i,s){this._canvas=e,this._dragging=t,this._eventBus=n,this._modeling=o,this._rules=r,this._toolManager=i,this._mouse=s;var a=this;i.registerTool("space",{tool:"spaceTool.selection",dragging:"spaceTool"}),n.on("spaceTool.selection.end",function(e){n.once("spaceTool.selection.ended",function(){a.activateMakeSpace(e.originalEvent)})}),n.on("spaceTool.move",1500,function(e){var t=e.context,n=t.initialized;n||(n=t.initialized=a.init(e,t)),n&&Yi(e)}),n.on("spaceTool.end",function(e){var t=e.context,o=t.axis,r=t.direction,i=t.movingShapes,s=t.resizingShapes,c=t.start;if(t.initialized){Yi(e);var l={x:0,y:0};l[o]=Hi(e["d"+o]),a.makeSpace(i,s,l,r,c),n.once("spaceTool.ended",function(e){a.activateSelection(e.originalEvent,!0,!0)})}})}function Ui(e){return{top:e.top-20,right:e.right+20,bottom:e.bottom+20,left:e.left-20}}function Yi(e){var t,n,o=e.context.spaceToolConstraints;o&&(b(o.left)&&(t=Math.max(e.x,o.left),e.dx=e.dx+t-e.x,e.x=t),b(o.right)&&(t=Math.min(e.x,o.right),e.dx=e.dx+t-e.x,e.x=t),b(o.top)&&(n=Math.max(e.y,o.top),e.dy=e.dy+n-e.y,e.y=n),b(o.bottom)&&(n=Math.min(e.y,o.bottom),e.dy=e.dy+n-e.y,e.y=n))}function Xi(e,t){return-1!==e.indexOf(t)}Vi.$inject=["canvas","dragging","eventBus","modeling","rules","toolManager","mouse"],Vi.prototype.activateSelection=function(e,t,n){this._dragging.init(e,"spaceTool.selection",{autoActivate:t,cursor:Ii,data:{context:{reactivate:n}},trapClick:!1})},Vi.prototype.activateMakeSpace=function(e){this._dragging.init(e,"spaceTool",{autoActivate:!0,cursor:Ii,data:{context:{}}})},Vi.prototype.makeSpace=function(e,t,n,o,r){return this._modeling.createSpace(e,t,n,o,r)},Vi.prototype.init=function(e,t){var n=Wi(e.dx)>Wi(e.dy)?"x":"y",o=e["d"+n],r=e[n]-o;if(Wi(o)<5)return!1;o<0&&(o*=-1),function(e){var t=wn(e)||e;return!!Dn(e)&&(Bn()?t.metaKey:t.ctrlKey)}(e)&&(o*=-1);var i=function(e,t){if("x"===e){if(t>0)return"e";if(t<0)return"w"}if("y"===e){if(t>0)return"s";if(t<0)return"n"}return null}(n,o),s=this._canvas.getRootElement();!zn(e)&&e.hover&&(s=e.hover);var a=[..._e(s,!0),...s.attachers||[]],c=this.calculateAdjustments(a,n,o,r),l=function(e,t,n,o,r){var i=e.movingShapes,s=e.resizingShapes;if(s.length){var a,c,l={};return S(s,function(e){var d,p,u,h,f,g,v=e.attachers,A=e.children,y=Ht(e),m=B(A,function(e){return!(Ft(e)||$t(e)||Xi(i,e)||Xi(s,e))}),x=B(A,function(e){return!Ft(e)&&!$t(e)&&Xi(i,e)}),E=[],_=[];m.length&&(p=Ui(Ht(be(m))),d=o-y[Gi[n]]+p[Gi[n]],"n"===n?l.bottom=c=b(c)?Math.min(c,d):d:"w"===n?l.right=c=b(c)?Math.min(c,d):d:"s"===n?l.top=a=b(a)?Math.max(a,d):d:"e"===n&&(l.left=a=b(a)?Math.max(a,d):d)),x.length&&(u=Ui(Ht(be(x))),d=o-u[Gi[Ni[n]]]+y[Gi[Ni[n]]],"n"===n?l.bottom=c=b(c)?Math.min(c,d):d:"w"===n?l.right=c=b(c)?Math.min(c,d):d:"s"===n?l.top=a=b(a)?Math.max(a,d):d:"e"===n&&(l.left=a=b(a)?Math.max(a,d):d)),v&&v.length&&(v.forEach(function(e){Xi(i,e)?E.push(e):_.push(e)}),E.length&&(h=Ht(be(E.map(It))),f=y[Gi[Ni[n]]]-(h[Gi[Ni[n]]]-o)),_.length&&(g=Ht(be(_.map(It)))[Gi[n]]-(y[Gi[n]]-o)),"n"===n?(d=Math.min(f||1/0,g||1/0),l.bottom=c=b(c)?Math.min(c,d):d):"w"===n?(d=Math.min(f||1/0,g||1/0),l.right=c=b(c)?Math.min(c,d):d):"s"===n?(d=Math.max(f||-1/0,g||-1/0),l.top=a=b(a)?Math.max(a,d):d):"e"===n&&(d=Math.max(f||-1/0,g||-1/0),l.left=a=b(a)?Math.max(a,d):d));var C=r&&r[e.id];C&&("n"===n?(d=o+e[qi[t]]-C[qi[t]],l.bottom=c=b(c)?Math.min(c,d):d):"w"===n?(d=o+e[qi[t]]-C[qi[t]],l.right=c=b(c)?Math.min(c,d):d):"s"===n?(d=o-e[qi[t]]+C[qi[t]],l.top=a=b(a)?Math.max(a,d):d):"e"===n&&(d=o-e[qi[t]]+C[qi[t]],l.left=a=b(a)?Math.max(a,d):d))}),l}}(c,n,i,r,this._eventBus.fire("spaceTool.getMinDimensions",{axis:n,direction:i,shapes:c.resizingShapes,start:r}));return I(t,c,{axis:n,direction:i,spaceToolConstraints:l,start:r}),Yn("resize-"+("x"===n?"ew":"ns")),!0},Vi.prototype.calculateAdjustments=function(e,t,n,o){var r=this._rules,i=[],s=[],a=[],c=[];function l(e){i.includes(e)||i.push(e);var t=e.label;t&&!i.includes(t)&&i.push(t)}S(e,function(e){if(e.parent&&!$t(e))if(Ft(e))c.push(e);else{var i=e[t],d=i+e[qi[t]];if(function(e){return!!e.host}(e)&&(n>0&&It(e)[t]>o||n<0&&It(e)[t]<o))a.push(e);else{var p;if(!(n>0&&i>o||n<0&&d<o))return i<o&&d>o&&r.allowed("shape.resize",{shape:e})?(p=e,void(s.includes(p)||s.push(p))):void 0;l(e)}}}),S(i,function(e){var t=e.attachers;t&&S(t,function(e){l(e)})});var d=i.concat(s);return S(a,function(e){var t=e.host;Xi(d,t)&&l(e)}),d=i.concat(s),S(c,function(e){var t=e.source,n=e.target,o=e.label;Xi(d,t)&&Xi(d,n)&&o&&l(o)}),{movingShapes:i,resizingShapes:s}},Vi.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)},Vi.prototype.isActive=function(){var e=this._dragging.context();return!!e&&/^spaceTool/.test(e.prefix)};var Zi="djs-dragging",Ki="djs-resizing",Qi=Math.max;function Ji(e,t,n,o,r){function i(e,t){S(e,function(e){r.addDragger(e,t),n.addMarker(e,Zi)})}e.on("spaceTool.selection.start",function(e){var t=n.getLayer("space"),r=e.context,i=ne("g");Y(i,o.cls("djs-crosshair-group",["no-events"])),N(t,i);var s=ne("path");Y(s,"d","M 0,-10000 L 0,10000"),Z(s).add("djs-crosshair"),N(i,s);var a=ne("path");Y(a,"d","M -10000,0 L 10000,0"),Z(a).add("djs-crosshair"),N(i,a),r.crosshairGroup=i}),e.on("spaceTool.selection.move",function(e){mn(e.context.crosshairGroup,e.x,e.y)}),e.on("spaceTool.selection.cleanup",function(e){var t=e.context.crosshairGroup;t&&ae(t)}),e.on("spaceTool.move",250,function(e){var s=e.context,a=s.line,c=s.axis,l=s.movingShapes,d=s.resizingShapes;if(s.initialized){if(!s.dragGroup){var p=n.getLayer("space");Y(a=ne("path"),"d","M0,0 L0,0"),Z(a).add("djs-crosshair"),N(p,a),s.line=a;var u=ne("g");Y(u,o.cls("djs-drag-group",["no-events"])),N(n.getActiveLayer(),u),i(l,u),i(s.movingConnections=t.filter(function(e){var t=!1;S(l,function(n){S(n.outgoing,function(n){e===n&&(t=!0)})});var n=!1;S(l,function(t){S(t.incoming,function(t){e===t&&(n=!0)})});var o=!1;S(d,function(t){S(t.outgoing,function(t){e===t&&(o=!0)})});var r=!1;return S(d,function(t){S(t.incoming,function(t){e===t&&(r=!0)})}),Ft(e)&&(t||o)&&(n||r)}),u),s.dragGroup=u}if(!s.frameGroup){var h=ne("g");Y(h,o.cls("djs-frame-group",["no-events"])),N(n.getActiveLayer(),h);var f=[];S(d,function(e){var t=r.addFrame(e,h),o=t.getBBox();f.push({element:t,initialBounds:o}),n.addMarker(e,Ki)}),s.frameGroup=h,s.frames=f}Y(a,{d:{x:"M"+e.x+", -10000 L"+e.x+", 10000",y:"M -10000, "+e.y+" L 10000, "+e.y}[c]});var g={x:e.dx,y:e.dy};g[{x:"y",y:"x"}[s.axis]]=0,mn(s.dragGroup,g.x,g.y),S(s.frames,function(e){var t,n,o=e.element,r=e.initialBounds;"e"===s.direction?Y(o,{width:Qi(r.width+g.x,5)}):Y(o,{width:t=Qi(r.width-g.x,5),x:r.x+r.width-t}),"s"===s.direction?Y(o,{height:Qi(r.height+g.y,5)}):Y(o,{height:n=Qi(r.height-g.y,5),y:r.y+r.height-n})})}}),e.on("spaceTool.cleanup",function(e){var t=e.context,o=t.movingShapes,r=t.movingConnections,i=t.resizingShapes,s=t.line,a=t.dragGroup,c=t.frameGroup;S(o,function(e){n.removeMarker(e,Zi)}),S(r,function(e){n.removeMarker(e,Zi)}),a&&(ae(s),ae(a)),S(i,function(e){n.removeMarker(e,Ki)}),c&&ae(c)})}Ji.$inject=["eventBus","elementRegistry","canvas","styles","previewSupport"];const es={__init__:["spaceToolPreview"],__depends__:[oo,Gn,Ho,So,Io],spaceTool:["type",Vi],spaceToolPreview:["type",Ji]};var ts=Math.min,ns=Math.max;function os(e){e.preventDefault()}function rs(e){e.stopPropagation()}function is(e){this.container=e.container,this.parent=tt('<div class="djs-direct-editing-parent"><div class="djs-direct-editing-content" contenteditable="true"></div></div>'),this.content=nt("[contenteditable]",this.parent),this.keyHandler=e.keyHandler||function(){},this.resizeHandler=e.resizeHandler||function(){},this.autoResize=q(this.autoResize,this),this.handlePaste=q(this.handlePaste,this)}function ss(e,t){this._eventBus=e,this._canvas=t,this._providers=[],this._textbox=new is({container:t.getContainer(),keyHandler:q(this._handleKey,this),resizeHandler:q(this._handleResize,this)})}is.prototype.create=function(e,t,n,o){var r=this.parent,i=this.content,s=this.container;o=this.options=o||{};var a=G(t=this.style=t||{},["width","height","maxWidth","maxHeight","minWidth","minHeight","left","top","backgroundColor","position","overflow","border","wordWrap","textAlign","outline","transform"]);I(r.style,{width:e.width+"px",height:e.height+"px",maxWidth:e.maxWidth+"px",maxHeight:e.maxHeight+"px",minWidth:e.minWidth+"px",minHeight:e.minHeight+"px",left:e.x+"px",top:e.y+"px",backgroundColor:"#ffffff",position:"absolute",overflow:"visible",border:"1px solid #ccc",boxSizing:"border-box",wordWrap:"normal",textAlign:"center",outline:"none"},a);var c=G(t,["fontFamily","fontSize","fontWeight","lineHeight","padding","paddingTop","paddingRight","paddingBottom","paddingLeft"]);return I(i.style,{boxSizing:"border-box",width:"100%",outline:"none",wordWrap:"break-word"},c),o.centerVertically&&I(i.style,{position:"absolute",top:"50%",transform:"translate(0, -50%)"},c),i.innerText=n,Xe.bind(i,"keydown",this.keyHandler),Xe.bind(i,"mousedown",rs),Xe.bind(i,"paste",this.handlePaste),o.autoResize&&Xe.bind(i,"input",this.autoResize),o.resizable&&this.resizable(t),s.appendChild(r),this.setSelection(i.lastChild,i.lastChild&&i.lastChild.length),r},is.prototype.handlePaste=function(e){var t,n=this.options,o=this.style;if(e.preventDefault(),t=e.clipboardData?e.clipboardData.getData("text/plain"):window.clipboardData.getData("Text"),this.insertText(t),n.autoResize){var r=this.autoResize(o);r&&this.resizeHandler(r)}},is.prototype.insertText=function(e){e=e.replace(/\r\n|\r|\n/g,"\n"),document.execCommand("insertText",!1,e)||this._insertTextIE(e)},is.prototype._insertTextIE=function(e){var t,n,o,r=this.getSelection(),i=r.startContainer,s=r.endContainer,a=r.startOffset,c=r.endOffset,l=r.commonAncestorContainer,d=(t=l.childNodes,[].slice.call(t));if(function(e){return e.nodeType===Node.TEXT_NODE}(l)){var p=i.textContent;i.textContent=p.substring(0,a)+e+p.substring(c),n=i,o=a+e.length}else if(i===this.content&&s===this.content){var u=document.createTextNode(e);this.content.insertBefore(u,d[a]),n=u,o=u.textContent.length}else{var h=d.indexOf(i),f=d.indexOf(s);d.forEach(function(t,n){n===h?t.textContent=i.textContent.substring(0,a)+e+s.textContent.substring(c):n>h&&n<=f&&ot(t)}),n=i,o=a+e.length}n&&void 0!==o&&setTimeout(function(){self.setSelection(n,o)})},is.prototype.autoResize=function(){var e=this.parent,t=this.content,n=parseInt(this.style.fontSize)||12;if(t.scrollHeight>e.offsetHeight||t.scrollHeight<e.offsetHeight-n){var o=e.getBoundingClientRect(),r=t.scrollHeight;e.style.height=r+"px",this.resizeHandler({width:o.width,height:o.height,dx:0,dy:r-o.height})}},is.prototype.resizable=function(){var e=this,t=this.parent,n=this.resizeHandle,o=parseInt(this.style.minWidth)||0,r=parseInt(this.style.minHeight)||0,i=parseInt(this.style.maxWidth)||1/0,s=parseInt(this.style.maxHeight)||1/0;if(!n){var a,c,l,d;n=this.resizeHandle=tt('<div class="djs-direct-editing-resize-handle"></div>');var p=function(n){os(n),rs(n);var p=ts(ns(l+n.clientX-a,o),i),u=ts(ns(d+n.clientY-c,r),s);t.style.width=p+"px",t.style.height=u+"px",e.resizeHandler({width:l,height:d,dx:n.clientX-a,dy:n.clientY-c})},u=function(e){os(e),rs(e),Xe.unbind(document,"mousemove",p,!1),Xe.unbind(document,"mouseup",u,!1)};Xe.bind(n,"mousedown",function(e){os(e),rs(e),a=e.clientX,c=e.clientY;var n=t.getBoundingClientRect();l=n.width,d=n.height,Xe.bind(document,"mousemove",p),Xe.bind(document,"mouseup",u)})}I(n.style,{position:"absolute",bottom:"0px",right:"0px",cursor:"nwse-resize",width:"0",height:"0",borderTop:(parseInt(this.style.fontSize)/4||3)+"px solid transparent",borderRight:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderBottom:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderLeft:(parseInt(this.style.fontSize)/4||3)+"px solid transparent"}),t.appendChild(n)},is.prototype.destroy=function(){var e=this.parent,t=this.content,n=this.resizeHandle;t.innerText="",e.removeAttribute("style"),t.removeAttribute("style"),Xe.unbind(t,"keydown",this.keyHandler),Xe.unbind(t,"mousedown",rs),Xe.unbind(t,"input",this.autoResize),Xe.unbind(t,"paste",this.handlePaste),n&&(n.removeAttribute("style"),ot(n)),ot(e)},is.prototype.getValue=function(){return this.content.innerText.trim()},is.prototype.getSelection=function(){return window.getSelection().getRangeAt(0)},is.prototype.setSelection=function(e,t){var n=document.createRange();null===e?n.selectNodeContents(this.content):(n.setStart(e,t),n.setEnd(e,t));var o=window.getSelection();o.removeAllRanges(),o.addRange(n)},ss.$inject=["eventBus","canvas"],ss.prototype.registerProvider=function(e){this._providers.push(e)},ss.prototype.isActive=function(e){return!(!this._active||e&&this._active.element!==e)},ss.prototype.cancel=function(){this._active&&(this._fire("cancel"),this.close())},ss.prototype._fire=function(e,t){this._eventBus.fire("directEditing."+e,t||{active:this._active})},ss.prototype.close=function(){this._textbox.destroy(),this._fire("deactivate"),this._active=null,this.resizable=void 0,this._canvas.restoreFocus&&this._canvas.restoreFocus()},ss.prototype.complete=function(){var e=this._active;if(e){var t,n=e.context.bounds,o=this.$textbox.getBoundingClientRect(),r=this.getValue();r===e.context.text&&o.height===n.height&&o.width===n.width||(t=this._textbox.container.getBoundingClientRect(),e.provider.update(e.element,r,e.context.text,{x:o.left-t.left,y:o.top-t.top,width:o.width,height:o.height})),this._fire("complete"),this.close()}},ss.prototype.getValue=function(){return this._textbox.getValue()},ss.prototype._handleKey=function(e){e.stopPropagation();var t=e.keyCode||e.charCode;return 27===t?(e.preventDefault(),this.cancel()):13!==t||e.shiftKey?void 0:(e.preventDefault(),this.complete())},ss.prototype._handleResize=function(e){this._fire("resize",e)},ss.prototype.activate=function(e){var t;this.isActive()&&this.cancel();var n=k(this._providers,function(n){return(t=n.activate(e))?n:null});return t&&(this.$textbox=this._textbox.create(t.bounds,t.style,t.text,t.options),this._active={element:e,context:t,provider:n},t.options&&t.options.resizable&&(this.resizable=!0),this._fire("activate")),!!t};const as={__depends__:[Rn],__init__:["directEditing"],directEditing:["type",ss]};var cs=n(72),ls=n.n(cs),ds=n(825),ps=n.n(ds),us=n(659),hs=n.n(us),fs=n(56),gs=n.n(fs),vs=n(540),As=n.n(vs),ys=n(113),ms=n.n(ys),xs=n(530),Es={};function _s(e){this._eventBus=e}function bs(e){return function(t,n,o,r,i){(C(t)||b(t))&&(i=r,r=o,o=n,n=t,t=null),this.on(t,e,n,o,r,i)}}function Cs(e){_s.call(this,e),this.init()}Es.styleTagTransform=ms(),Es.setAttributes=gs(),Es.insert=hs().bind(null,"head"),Es.domAPI=ps(),Es.insertStyleElement=As(),ls()(xs.A,Es),xs.A&&xs.A.locals&&xs.A.locals,_s.$inject=["eventBus"],_s.prototype.on=function(e,t,n,o,r,i){if((C(t)||b(t))&&(i=r,r=o,o=n,n=t,t=null),C(n)&&(i=r,r=o,o=n,n=1e3),_(r)&&(i=r,r=!1),!C(o))throw new Error("handlerFn must be a function");E(e)||(e=[e]);var s=this._eventBus;S(e,function(e){var a=["commandStack",e,t].filter(function(e){return e}).join(".");s.on(a,n,r?function(e,t){return function(n){return e.call(t||null,n.context,n.command,n)}}(o,i):o,i)})},_s.prototype.canExecute=bs("canExecute"),_s.prototype.preExecute=bs("preExecute"),_s.prototype.preExecuted=bs("preExecuted"),_s.prototype.execute=bs("execute"),_s.prototype.executed=bs("executed"),_s.prototype.postExecute=bs("postExecute"),_s.prototype.postExecuted=bs("postExecuted"),_s.prototype.revert=bs("revert"),_s.prototype.reverted=bs("reverted"),Cs.$inject=["eventBus"],f(Cs,_s),Cs.prototype.addRule=function(e,t,n){var o=this;"string"==typeof e&&(e=[e]),e.forEach(function(e){o.canExecute(e,t,function(e,t,o){return n(e)},!0)})},Cs.prototype.init=function(){};const ws={__init__:["exampleContextPadProvider","examplePaletteProvider","exampleRuleProvider"],exampleContextPadProvider:["type",class{static $inject=["connect","contextPad","modeling","elementFactory","create"];constructor(e,t,n,o,r){this.connect=e,this.modeling=n,this.elementFactory=o,this.create=r,t.registerProvider(this)}getContextPadEntries(e){const{connect:t,modeling:n,elementFactory:o}=this,r=()=>{n.removeElements([e])},i=(e,n,o)=>{t.start(e,n,o)},s=t=>{const r=e.parent;if(!r)return;const i={"petri:transition":{width:100,height:80},"petri:place":{width:80,height:80}}[t]||{width:80,height:60},s=Array.isArray(e.outgoing)&&e.outgoing.length>0,a=Array.isArray(e.incoming)&&e.incoming.length>0,c=!s||a,l=e.y+e.height/2,d=c?e.x+e.width+50+i.width/2:e.x-30-i.width/2,p=o.createShape({type:t,width:i.width,height:i.height}),u=n.createShape(p,{x:d,y:l},r);n.createConnection(e,u,{type:"petri:connection"},r)},a={delete:{group:"edit",className:"context-pad-icon-remove",title:"Remove",action:{click:r,dragstart:r}},connect:{group:"edit",className:"context-pad-icon-connect",title:"Connect",action:{click:i,dragstart:i}}};return"petri:place"===e.type?a.transition={group:"edit",className:"context-pad-icon-transition",title:"Create transition",action:{click:()=>s("petri:transition")}}:"petri:transition"!==e.type&&"petri:empty_transition"!==e.type||(a.place={group:"edit",className:"context-pad-icon-place",title:"Create place",action:{click:()=>s("petri:place")}}),a}}],examplePaletteProvider:["type",class{static $inject=["create","elementFactory","lassoTool","palette","spaceTool"];constructor(e,t,n,o,r){this.create=e,this.elementFactory=t,this.lassoTool=n,this.palette=o,this.spaceTool=r,o.registerProvider(this)}getPaletteEntries(){const{create:e,elementFactory:t,lassoTool:n,spaceTool:o}=this;return{"lasso-tool":{group:"tools",className:"palette-icon-lasso-tool",title:"Activate Lasso Tool",action:{click:e=>n.activateSelection(e)}},"tool-separator":{group:"tools"},"create-transition":{group:"create",className:"palette-icon-create-transition",title:"Transition",action:{click:()=>{const n=t.createShape({width:100,height:80,type:"petri:transition"});e.start(event,n)}}},"create-empty-transition":{group:"create",className:"palette-icon-create-empty-transition",title:"Transition",action:{click:()=>{const n=t.createShape({width:14,height:80,type:"petri:empty_transition"});e.start(event,n)}}},"create-circle":{group:"create",className:"palette-icon-create-circle",title:"Place",action:{click:()=>{const n=t.createShape({width:80,height:80,type:"petri:place"});e.start(event,n)}}}}}}],exampleRuleProvider:["type",class extends Cs{static $inject=["eventBus","elementRegistry"];constructor(e,t){super(e),this.elementRegistry=t}init(){this.addRule("shape.create",e=>{const t=e.target,n=e.shape;return t.parent===n.target}),this.addRule("connection.create",e=>{const{source:t,target:n}=e;return!(!t||!n)&&(("petri:place"!==t.type||"petri:place"!==n.type)&&(("petri:transition"!==t.type||"petri:transition"!==n.type)&&(("petri:empty_transition"!==t.type||"petri:empty_transition"!==n.type)&&(("petri:transition"!==t.type||"petri:empty_transition"!==n.type)&&(("petri:empty_transition"!==t.type||"petri:transition"!==n.type)&&(!(Array.isArray(t.outgoing)&&t.outgoing.some(e=>e.target===n))&&n.parent===t.parent&&{type:"petri:connection"}))))))}),this.addRule("shape.resize",e=>we(e.shape))}}]};function js(e,t){return function(e,t){t.appendChild(function(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch(e){}return e}(e,t))}(t,e),e}var ks={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":2,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":2,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function Bs(e,t,n){var o=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=ks[o];r?(2===r&&"number"==typeof n&&(n=String(n)+"px"),e.style[o]=n):e.setAttributeNS(null,t,n)}function Ss(e,t,n){if("string"==typeof t){if(void 0===n)return function(e,t){return ks[t]?e.style[t]:e.getAttributeNS(null,t)}(e,t);Bs(e,t,n)}else!function(e,t){var n,o,r=Object.keys(t);for(n=0;o=r[n];n++)Bs(e,o,t[o])}(e,t);return e}const Ds=Object.prototype.toString;function zs(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}zs.prototype.add=function(e){return this.list.add(e),this},zs.prototype.remove=function(e){return"[object RegExp]"==Ds.call(e)?this.removeMatching(e):(this.list.remove(e),this)},zs.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},zs.prototype.toggle=function(e,t){return void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this},zs.prototype.array=function(){return Array.from(this.list)},zs.prototype.has=zs.prototype.contains=function(e){return this.list.contains(e)};var Ms="http://www.w3.org/2000/svg",Ps='<svg xmlns="'+Ms+'"';function Os(e,t){var n;return"<"===(e=e.trim()).charAt(0)?(n=function(e){var t=!1;"<svg"===e.substring(0,4)?-1===e.indexOf(Ms)&&(e=Ps+e.substring(4)):(e=Ps+">"+e+"</svg>",t=!0);var n=function(e){var t;return(t=new DOMParser).async=!1,t.parseFromString(e,"text/xml")}(e);if(!t)return n;for(var o=document.createDocumentFragment(),r=n.firstChild;r.firstChild;)o.appendChild(r.firstChild);return o}(e).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(Ms,e),t&&Ss(n,t),n}function Rs(e,t,n){let o=e.ownerSVGElement.querySelector("defs");if(o||(o=Os("defs"),js(e.ownerSVGElement,o)),!o.querySelector("#"+t)){const e=Os("marker",{id:t,viewBox:"0 0 20 20",refX:11,refY:10,markerWidth:10,markerHeight:10,orient:"auto"});js(e,Os("path",{d:"M 1 5 L 11 10 L 1 15 Z",fill:n,stroke:n})),js(o,e)}return`url(#${t})`}function Ts(e,t,n){const o=t.businessObject?.name??"",r=n.computeStyle({},{fill:"black",fontSize:12}),i=Os("text");let s,a,c,l;if("petri:place"===t.type){const e=Math.min(t.width,t.height)/2,n=t.width/2,o=t.height/2,r=4,i=e/Math.SQRT2;s=n+i+r,a=o+i+r,c="start",l="hanging"}else s=t.width/2,a=t.height/2,c="middle",l="middle";if(Ss(i,{x:s,y:a,"text-anchor":c,"dominant-baseline":l}),Ss(i,r),i.textContent=String(o),js(e,i),"petri:place"===t.type){const o=Number.isFinite(t.businessObject?.tokens)?t.businessObject.tokens:0;o>0&&function(e,t,n,o){const r=t.width/2,i=t.height/2,s=Math.min(t.width,t.height)/2,a=Math.max(2,Math.min(6,s/6)),c=o.computeStyle({},{fill:"black"}),l=(t,n,s)=>{if(null!=s){const t=Os("text");return Ss(t,{x:r,y:i,"text-anchor":"middle","dominant-baseline":"middle"}),Ss(t,o.computeStyle({},{fill:"black",fontSize:12})),t.textContent=String(s),void js(e,t)}const l=Os("circle");Ss(l,{cx:r+t,cy:i+n,r:a}),Ss(l,c),js(e,l)};1===n?l(0,0):2===n?(l(2*-a,0),l(2*a,0)):3===n?(l(0,2*-a),l(2*-a,2*a),l(2*a,2*a)):4===n?(l(2*-a,2*-a),l(2*a,2*-a),l(2*-a,2*a),l(2*a,2*a)):n>4&&l(0,0,n)}(e,t,o,n)}}const Ls={__init__:["customRenderer"],customRenderer:["type",class extends g{static $inject=["eventBus","styles","connectionDocking"];constructor(e,t,n){super(e,1500),this.styles=t,this.connectionDocking=n}canRender(e){return console.log("canRender"),"petri:place"===e.type||"petri:transition"===e.type||"petri:frame"===e.type||"petri:empty_transition"===e.type||"petri:connection"===e.type}drawShape(e,t){const{type:n}=t;if("petri:place"===n){const{width:n,height:o}=t;console.log("circle");const r=function(e,t,n,o,r){"none"===(r=o.computeStyle(r||{},{stroke:"black",strokeWidth:2,fill:"white"})).fill&&delete r.fillOpacity;const i=t/2,s=n/2,a=Os("circle");return Ss(a,{cx:i,cy:s,r:Math.round((t+n)/4)}),Ss(a,r),js(e,a),a}(e,n,o,this.styles,void 0);return Ts(e,t,this.styles),r}if("petri:transition"===n){const{width:n,height:o}=t,r=10;console.log("rect");const i=function(e,t,n,o,r,i){"none"===(i=r.computeStyle(i||{},{stroke:"black",strokeWidth:2,fill:"white"})).fill&&delete i.fillOpacity;const s=Os("rect");return Ss(s,{x:0,y:0,width:t,height:n,rx:o,ry:o}),Ss(s,i),js(e,s),s}(e,n,o,r,this.styles,void 0);return Ts(e,t,this.styles),i}if("petri:frame"===n){const{width:n,height:o}=t,r=10;console.log("frame");const i=function(e,t,n,o,r,i){"none"===(i=r.computeStyle(i||{},{stroke:"black",strokeWidth:2,fill:"none",strokeDasharray:"4,4"})).fill&&delete i.fillOpacity;const s=Os("rect");return Ss(s,{x:0,y:0,width:t,height:n,rx:o,ry:o}),Ss(s,i),js(e,s),s}(e,n,o,r,this.styles,void 0);return Ts(e,t,this.styles),i}if("petri:empty_transition"===n){const{width:n,height:o}=t,r=0;console.log("empty_transition");const i=function(e,t,n,o,r,i){i=r.computeStyle(i||{},{stroke:"black",strokeWidth:2,fill:"black",fillOpacity:1});const s=Os("rect");return Ss(s,{x:0,y:0,width:t,height:n,rx:o,ry:o}),Ss(s,i),js(e,s),s}(e,n,o,r,this.styles,void 0);return i}}drawConnection(e,t){const n=this.styles.computeStyle({},{stroke:"black",strokeWidth:2,markerEnd:Rs(e,"my-arrow","black")});this.connectionDocking&&(t.source||t.target)&&(t.waypoints=this.connectionDocking.getCroppedWaypoints(t));const o=ve(t.waypoints,n,5);return js(e,o),console.log(`${t.type}`),o}getShapePath(e){const{type:t}=e;return"petri:place"===t?function(e){let t=e.x+e.width/2,n=e.y+e.height/2,o=e.width/2;return de([["M",t,n],["m",0,-o],["a",o,o,0,1,1,0,2*o],["a",o,o,0,1,1,0,-2*o],["z"]])}(e):function(e){let t=e.x,n=e.y,o=e.width;return de([["M",t,n],["l",o,0],["l",0,e.height],["l",-o,0],["z"]])}(e)}}]};function Fs(e){return I({original:e.point.original||e.point},e.actual)}function $s(e,t){this._elementRegistry=e,this._graphicsFactory=t}$s.$inject=["elementRegistry","graphicsFactory"],$s.prototype.getCroppedWaypoints=function(e,t,n){t=t||e.source,n=n||e.target;var o=this.getDockingPoint(e,t,!0),r=this.getDockingPoint(e,n),i=e.waypoints.slice(o.idx+1,r.idx);return i.unshift(Fs(o)),i.push(Fs(r)),i},$s.prototype.getDockingPoint=function(e,t,n){var o,r,i=e.waypoints;return{point:r=i[o=n?0:i.length-1],actual:this._getIntersection(t,e,n)||r,idx:o}},$s.prototype._getIntersection=function(e,t,n){return Gt(this._getShapePath(e),this._getConnectionPath(t),n)},$s.prototype._getConnectionPath=function(e){return this._graphicsFactory.getConnectionPath(e)},$s.prototype._getShapePath=function(e){return this._graphicsFactory.getShapePath(e)},$s.prototype._getGfx=function(e){return this._elementRegistry.getGraphics(e)};const Ws={__init__:["labelEditingProvider"],labelEditingProvider:["type",class{static $inject=["eventBus","directEditing","modeling"];constructor(e,t,n){this.eventBus=e,this.directEditing=t,this.modeling=n,e.on("element.dblclick",1e3,e=>{const t=e&&e.element;if(!t)return;if("petri:place"!==t.type&&"petri:transition"!==t.type)return;const n=t.businessObject?.name||"",o=window.prompt("Edit label",n);if(null!==o){if(t.businessObject||(t.businessObject={}),t.businessObject.name=o,"petri:place"===t.type){const e=Number.isFinite(t.businessObject.tokens)?t.businessObject.tokens:0,n=window.prompt("Set tokens (0+)",String(e));if(null!==n){const o=parseInt(n,10);t.businessObject.tokens=Number.isFinite(o)&&o>=0?o:e}}this.eventBus.fire("element.changed",{element:t})}})}}]},Hs={__init__:["keyboardShortcuts"],keyboardShortcuts:["type",class{static $inject=["eventBus","modeling","selection","elementFactory","canvas"];constructor(e,t,n,o,r){this.eventBus=e,this.modeling=t,this.selection=n,this.elementFactory=o,this.canvas=r,this._clipboard=[],this._init()}_init(){document.addEventListener("keydown",this._handleKeyDown.bind(this))}_handleKeyDown(e){const t=this.canvas.getContainer();(t.contains(document.activeElement)||document.activeElement===t||document.activeElement===document.body)&&("Delete"!==e.key&&"Backspace"!==e.key||(this._handleDelete(),e.preventDefault()),(e.ctrlKey||e.metaKey)&&"c"===e.key&&(this._handleCopy(),e.preventDefault()),(e.ctrlKey||e.metaKey)&&"v"===e.key&&(this._handlePaste(),e.preventDefault()))}_handleDelete(){const e=this.selection.get();e.length>0&&this.modeling.removeElements(e)}_handleCopy(){const e=this.selection.get();e.length>0&&(this._clipboard=e.map(e=>({type:e.type,width:e.width,height:e.height,businessObject:e.businessObject?{...e.businessObject}:void 0})),console.log("Copied",this._clipboard.length,"elements"))}_handlePaste(){if(0===this._clipboard.length)return;const e=this.canvas.getRootElement(),t=this._getPastePosition(),n=[];this._clipboard.forEach((o,r)=>{const i=this.elementFactory.createShape({type:o.type,width:o.width,height:o.height,businessObject:o.businessObject}),s=20*r,a=20*r,c=this.modeling.createShape(i,{x:t.x+s,y:t.y+a},e);n.push(c)}),this.selection.select(n),console.log("Pasted",n.length,"elements")}_getPastePosition(){const e=this.canvas.viewbox();return{x:e.x+e.width/2,y:e.y+e.height/2}}}]},qs={__init__:[["defaultRenderer",function(e){e.CONNECTION_STYLE={fill:"none",strokeWidth:5,stroke:"#000"},e.SHAPE_STYLE={fill:"white",stroke:"#000",strokeWidth:2},e.FRAME_STYLE={fill:"none",stroke:"#000",strokeDasharray:4,strokeWidth:2}}]]},Is={__init__:["connectionDocking"],connectionDocking:["type",$s]};function Gs(e){const{container:t,additionalModules:n=[]}=e;return new bn({canvas:{container:t},modules:[lo,Co,$o,Uo,Xr,Kr,li,ei,yi,Pi,Gn,qn,$i,Rn,es,as,ws,qs,Ls,Is,Ws,Hs,...n]})}return o.default})());
//# sourceMappingURL=editor.js.map