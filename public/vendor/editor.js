!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Editor=t():e.Editor=t()}(self,()=>(()=>{"use strict";var e={56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},72:e=>{var t=[];function n(e){for(var n=-1,o=0;o<t.length;o++)if(t[o].identifier===e){n=o;break}return n}function o(e,o){for(var i={},s=[],a=0;a<e.length;a++){var c=e[a],l=o.base?c[0]+o.base:c[0],u=i[l]||0,p="".concat(l," ").concat(u);i[l]=u+1;var d=n(p),h={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==d)t[d].references++,t[d].updater(h);else{var f=r(h,o);o.byIndex=a,t.splice(a,0,{identifier:p,updater:f,references:1})}s.push(p)}return s}function r(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var i=o(e=e||[],r=r||{});return function(e){e=e||[];for(var s=0;s<i.length;s++){var a=n(i[s]);t[a].references--}for(var c=o(e,r),l=0;l<i.length;l++){var u=n(i[l]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}i=c}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n="",o=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),o&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),o&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n}).join("")},t.i=function(e,n,o,r,i){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(o)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(s[c]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);o&&s[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),r&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=r):u[4]="".concat(r)),t.push(u))}},t}},354:e=>{e.exports=function(e){var t=e[1],n=e[3];if(!n)return t;if("function"==typeof btoa){var o=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),i="/*# ".concat(r," */");return[t].concat([i]).join("\n")}return[t].join("\n")}},530:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(354),r=n.n(o),i=n(314),s=n.n(i)()(r());s.push([e.id,'/**\n * color definitions\n */\n.djs-parent {\n  --color-grey-225-10-15: hsl(225, 10%, 15%);\n  --color-grey-225-10-35: hsl(225, 10%, 35%);\n  --color-grey-225-10-55: hsl(225, 10%, 55%);\n  --color-grey-225-10-75: hsl(225, 10%, 75%);\n  --color-grey-225-10-80: hsl(225, 10%, 80%);\n  --color-grey-225-10-85: hsl(225, 10%, 85%);\n  --color-grey-225-10-90: hsl(225, 10%, 90%);\n  --color-grey-225-10-95: hsl(225, 10%, 95%);\n  --color-grey-225-10-97: hsl(225, 10%, 97%);\n\n  --color-blue-205-100-45: hsl(205, 100%, 45%);\n  --color-blue-205-100-45-opacity-30: hsla(205, 100%, 45%, 30%);\n  --color-blue-205-100-50: hsl(205, 100%, 50%);\n  --color-blue-205-100-50-opacity-15: hsla(205, 100%, 50%, 15%);\n  --color-blue-205-100-70: hsl(205, 100%, 75%);\n  --color-blue-205-100-95: hsl(205, 100%, 95%);\n\n  --color-green-150-86-44: hsl(150, 86%, 44%);\n\n  --color-red-360-100-40: hsl(360, 100%, 40%);\n  --color-red-360-100-45: hsl(360, 100%, 45%);\n  --color-red-360-100-92: hsl(360, 100%, 92%);\n  --color-red-360-100-97: hsl(360, 100%, 97%);\n\n  --color-white: hsl(0, 0%, 100%);\n  --color-black: hsl(0, 0%, 0%);\n  --color-black-opacity-10: hsla(0, 0%, 0%, 10%);\n  --color-black-opacity-30: hsla(0, 0%, 0%, 30%);\n\n  --canvas-fill-color: var(--color-white);\n\n  --bendpoint-fill-color: var(--color-blue-205-100-45);\n  --bendpoint-stroke-color: var(--canvas-fill-color);\n\n  --context-pad-entry-background-color: var(--color-white);\n  --context-pad-entry-hover-background-color: var(--color-grey-225-10-95);\n\n  --element-dragger-color: var(--color-blue-205-100-50);\n  --element-hover-outline-fill-color: var(--color-blue-205-100-45);\n  --element-selected-outline-stroke-color: var(--color-blue-205-100-50);\n  --element-selected-outline-secondary-stroke-color: var(--color-blue-205-100-70);\n\n  --lasso-fill-color: var(--color-blue-205-100-50-opacity-15);\n  --lasso-stroke-color: var(--element-selected-outline-stroke-color);\n\n  --palette-entry-color: var(--color-grey-225-10-15);\n  --palette-entry-hover-color: var(--color-blue-205-100-45);\n  --palette-entry-selected-color: var(--color-blue-205-100-50);\n  --palette-separator-color: var(--color-grey-225-10-75);\n  --palette-toggle-hover-background-color: var(--color-grey-225-10-55);\n  --palette-background-color: var(--color-grey-225-10-97);\n  --palette-border-color: var(--color-grey-225-10-75);\n\n  --popup-font-family: "IBM Plex Sans", sans-serif;\n  --popup-font-size: 14px;\n  --popup-header-entry-selected-color: var(--color-blue-205-100-50);\n  --popup-header-font-weight: bolder;\n  --popup-header-group-divider-color: var(--color-grey-225-10-75);\n  --popup-background-color: var(--color-white);\n  --popup-border-color: transparent;\n  --popup-shadow-color: var(--color-black-opacity-30);\n  --popup-description-color: var(--color-grey-225-10-55);\n  --popup-no-results-color: var(--color-grey-225-10-55);\n  --popup-entry-title-color: var(--color-grey-225-10-55);\n  --popup-entry-hover-color:  var(--color-grey-225-10-95);\n  --popup-search-border-color: var(--color-grey-225-10-75);\n  --popup-search-focus-border-color: var(--color-blue-205-100-50);\n  --popup-search-focus-background-color: var(--color-blue-205-100-95);\n\n  --resizer-fill-color: var(--color-blue-205-100-45);\n  --resizer-stroke-color: var(--canvas-fill-color);\n\n  --search-font-family: "IBM Plex Sans", sans-serif;\n  --search-font-size: 14px;\n  --search-container-background-color: var(--color-white);\n  --search-shadow-color: var(--color-black-opacity-30);\n  --search-input-border-color: var(--color-grey-225-10-75);\n  --search-input-focus-border-color: var(--color-blue-205-100-50);\n  --search-input-focus-background-color: var(--color-blue-205-100-95);\n  --search-result-hover-background-color: var(--color-grey-225-10-95);\n  --search-result-secondary-color: var(--color-grey-225-10-55);\n  --search-preselected-background-color: var(--color-blue-205-100-50-opacity-15);\n\n  --shape-attach-allowed-stroke-color: var(--color-blue-205-100-50);\n  --shape-connect-allowed-fill-color: var(--color-grey-225-10-97);\n  --shape-drop-allowed-fill-color: var(--color-grey-225-10-97);\n  --shape-drop-not-allowed-fill-color: var(--color-red-360-100-97);\n  --shape-resize-preview-stroke-color: var(--color-blue-205-100-50);\n\n  --snap-line-stroke-color: var(--color-blue-205-100-45-opacity-30);\n\n  --space-tool-crosshair-stroke-color: var(--color-black);\n\n  --tooltip-error-background-color: var(--color-red-360-100-97);\n  --tooltip-error-border-color: var(--color-red-360-100-45);\n  --tooltip-error-color: var(--color-red-360-100-45);\n}\n\n/**\n * SVG styles\n */\n\n.djs-container svg.drop-not-ok {\n  background: var(--shape-drop-not-allowed-fill-color) !important;\n}\n\n.djs-container svg.new-parent {\n  background: var(--shape-drop-allowed-fill-color) !important;\n}\n\n/**\n * outline styles\n */\n\n.djs-outline,\n.djs-selection-outline {\n  fill: none;\n  shape-rendering: geometricPrecision;\n  stroke-width: 2px;\n}\n\n.djs-outline {\n  visibility: hidden;\n}\n\n.djs-selection-outline {\n  stroke: var(--element-selected-outline-stroke-color);\n}\n\n.djs-element.selected .djs-outline {\n  visibility: visible;\n\n  stroke: var(--element-selected-outline-stroke-color);\n}\n\n.djs-connection.selected .djs-outline {\n  display: none;\n}\n\n.djs-multi-select .djs-element.selected .djs-outline {\n  stroke: var(--element-selected-outline-secondary-stroke-color);\n  display: block;\n}\n\n.djs-shape.connect-ok .djs-visual > :nth-child(1) {\n  fill: var(--shape-connect-allowed-fill-color) !important;\n}\n\n.djs-shape.connect-not-ok .djs-visual > :nth-child(1),\n.djs-shape.drop-not-ok .djs-visual > :nth-child(1) {\n  fill: var(--shape-drop-not-allowed-fill-color) !important;\n}\n\n.djs-shape.new-parent .djs-visual > :nth-child(1) {\n  fill: var(--shape-drop-allowed-fill-color) !important;\n}\n\n\n/* Override move cursor during drop and connect */\n.drop-not-ok,\n.connect-not-ok,\n.drop-not-ok *,\n.connect-not-ok * {\n  cursor: not-allowed !important;\n}\n\n.drop-ok,\n.connect-ok,\n.drop-ok *,\n.connect-ok * {\n  cursor: default !important;\n}\n\n.djs-element.attach-ok .djs-visual > :nth-child(1) {\n  stroke-width: 5px !important;\n  stroke: var(--shape-attach-allowed-stroke-color) !important;\n}\n\n.djs-frame.connect-not-ok .djs-visual > :nth-child(1),\n.djs-frame.drop-not-ok .djs-visual > :nth-child(1) {\n  stroke-width: 3px !important;\n  stroke: var(--shape-drop-not-allowed-fill-color) !important;\n  fill: none !important;\n}\n\n/**\n* Selection box style\n*\n*/\n.djs-lasso-overlay {\n  fill: var(--lasso-fill-color);\n  stroke: var(--lasso-stroke-color);\n  stroke-width: 2px;\n  shape-rendering: geometricPrecision;\n  pointer-events: none;\n}\n\n/**\n * Resize styles\n */\n.djs-resize-overlay {\n  fill: none;\n\n  stroke-dasharray: 5 1 3 1;\n  stroke: var(--shape-resize-preview-stroke-color);\n\n  pointer-events: none;\n}\n\n.djs-resizer-hit {\n  fill: none;\n  pointer-events: all;\n}\n\n.djs-resizer-visual {\n  fill: var(--resizer-fill-color);\n  stroke-width: 1px;\n  stroke: var(--resizer-stroke-color);\n  shape-rendering: geometricPrecision;\n}\n\n.djs-resizer:hover .djs-resizer-visual {\n  stroke: var(--resizer-stroke-color);\n  stroke-opacity: 1;\n}\n\n.djs-cursor-resize-ns,\n.djs-resizer-n,\n.djs-resizer-s {\n  cursor: ns-resize;\n}\n\n.djs-cursor-resize-ew,\n.djs-resizer-e,\n.djs-resizer-w {\n  cursor: ew-resize;\n}\n\n.djs-cursor-resize-nwse,\n.djs-resizer-nw,\n.djs-resizer-se {\n  cursor: nwse-resize;\n}\n\n.djs-cursor-resize-nesw,\n.djs-resizer-ne,\n.djs-resizer-sw {\n  cursor: nesw-resize;\n}\n\n.djs-shape.djs-resizing > .djs-outline {\n  visibility: hidden !important;\n}\n\n.djs-shape.djs-resizing > .djs-resizer {\n  visibility: hidden;\n}\n\n.djs-dragger > .djs-resizer {\n  visibility: hidden;\n}\n\n/**\n * drag styles\n */\n.djs-dragger * {\n  fill: none !important;\n  stroke: var(--element-dragger-color) !important;\n}\n\n.djs-dragger tspan,\n.djs-dragger text {\n  fill: var(--element-dragger-color) !important;\n  stroke: none !important;\n}\n\n.djs-dragger marker circle,\n.djs-dragger marker path,\n.djs-dragger marker polygon,\n.djs-dragger marker polyline,\n.djs-dragger marker rect {\n  fill: var(--element-dragger-color) !important;\n  stroke: none !important;\n}\n\n.djs-dragger marker text,\n.djs-dragger marker tspan {\n  fill: none !important;\n  stroke: var(--element-dragger-color) !important;\n}\n\n.djs-dragging,\n.djs-dragging > * {\n  opacity: 0.3 !important;\n  pointer-events: none !important;\n}\n\n/**\n * no pointer events for visual\n */\n.djs-visual,\n.djs-outline {\n  pointer-events: none;\n}\n\n.djs-element.attach-ok .djs-hit {\n  stroke-width: 60px !important;\n}\n\n/**\n * all pointer events for hit shape\n */\n.djs-element > .djs-hit-all,\n.djs-element > .djs-hit-no-move {\n  pointer-events: all;\n}\n\n.djs-element > .djs-hit-stroke,\n.djs-element > .djs-hit-click-stroke {\n  pointer-events: stroke;\n}\n\n/**\n * shape / connection basic styles\n */\n.djs-connection .djs-visual {\n  stroke-width: 2px;\n  fill: none;\n}\n\n.djs-cursor-grab {\n  cursor: -webkit-grab;\n  cursor: -moz-grab;\n  cursor: grab;\n}\n\n.djs-cursor-grabbing {\n  cursor: -webkit-grabbing;\n  cursor: -moz-grabbing;\n  cursor: grabbing;\n}\n\n.djs-cursor-crosshair {\n  cursor: crosshair;\n}\n\n.djs-cursor-move {\n  cursor: move;\n}\n\n.djs-cursor-resize-ns {\n  cursor: ns-resize;\n}\n\n.djs-cursor-resize-ew {\n  cursor: ew-resize;\n}\n\n\n/**\n * snapping\n */\n.djs-snap-line {\n  stroke: var(--snap-line-stroke-color);\n  stroke-linecap: round;\n  stroke-width: 2px;\n  pointer-events: none;\n}\n\n/**\n * snapping\n */\n.djs-crosshair {\n  stroke: var(--space-tool-crosshair-stroke-color);\n  stroke-linecap: round;\n  stroke-width: 1px;\n  pointer-events: none;\n  shape-rendering: geometricPrecision;\n  stroke-dasharray: 5, 5;\n}\n\n/**\n * palette\n */\n\n.djs-palette {\n  position: absolute;\n  left: 20px;\n  top: 20px;\n\n  box-sizing: border-box;\n  width: 48px;\n}\n\n.djs-palette .separator {\n  margin: 5px;\n  padding-top: 5px;\n\n  border: none;\n  border-bottom: solid 1px var(--palette-separator-color);\n\n  clear: both;\n}\n\n.djs-palette .entry:before {\n  vertical-align: initial;\n}\n\n.djs-palette .djs-palette-toggle {\n  cursor: pointer;\n}\n\n.djs-palette .entry,\n.djs-palette .djs-palette-toggle {\n  color: var(--palette-entry-color);\n  font-size: 30px;\n\n  text-align: center;\n}\n\n.djs-palette .entry {\n  float: left;\n}\n\n.djs-palette .entry img {\n  max-width: 100%;\n}\n\n.djs-palette .djs-palette-entries:after {\n  content: \'\';\n  display: table;\n  clear: both;\n}\n\n.djs-palette .djs-palette-toggle:hover {\n  background: var(--palette-toggle-hover-background-color);\n}\n\n.djs-palette .entry:hover {\n  color: var(--palette-entry-hover-color);\n}\n\n.djs-palette .highlighted-entry {\n  color: var(--palette-entry-selected-color) !important;\n}\n\n.djs-palette .entry,\n.djs-palette .djs-palette-toggle {\n  width: 46px;\n  height: 46px;\n  line-height: 46px;\n  cursor: default;\n}\n\n/**\n * Palette open / two-column layout is controlled via\n * classes on the palette. Events to hook into palette\n * changed life-cycle are available in addition.\n */\n.djs-palette.two-column.open {\n  width: 94px;\n}\n\n.djs-palette:not(.open) .djs-palette-entries {\n  display: none;\n}\n\n.djs-palette:not(.open) {\n  overflow: hidden;\n}\n\n.djs-palette.open .djs-palette-toggle {\n  display: none;\n}\n\n/**\n * context-pad\n */\n.djs-context-pad {\n  position: absolute;\n  display: none;\n  pointer-events: none;\n  line-height: 1;\n  width: 72px;\n  z-index: 100;\n}\n\n.djs-context-pad .entry {\n  width: 22px;\n  height: 22px;\n  text-align: center;\n  display: inline-block;\n  font-size: 22px;\n  margin: 0 2px 2px 0;\n\n  border-radius: 3px;\n\n  cursor: default;\n\n  background-color: var(--context-pad-entry-background-color);\n  box-shadow: 0 0 2px 1px var(--context-pad-entry-background-color);\n  pointer-events: all;\n  vertical-align: middle;\n}\n\n.djs-context-pad .entry:hover {\n  background: var(--context-pad-entry-hover-background-color);\n}\n\n.djs-context-pad.open {\n  display: block;\n}\n\n/**\n * popup styles\n */\n.djs-popup {\n  line-height: 1;\n  box-sizing: border-box;\n  width: min-content;\n  background: var(--popup-background-color);\n  overflow: hidden;\n  position: fixed;\n  z-index: 200;\n  box-shadow: 0px 2px 6px var(--popup-shadow-color);\n  border: solid 1px var(--popup-border-color);\n  min-width: 120px;\n  outline: none;\n  font-size: var(--popup-font-size);\n  font-family: var(--popup-font-family);\n}\n\n.djs-popup-search input {\n  width: 100%;\n  box-sizing: border-box;\n  font-size: var(--popup-font-size);\n  padding: 3px 6px 3px 28px;\n  border-radius: 2px;\n  border: solid 1px var(--popup-search-border-color);\n  line-height: 21px;\n}\n\n.djs-popup-search input:focus {\n  background-color: var(--popup-search-focus-background-color);\n  border: solid 1px var(--popup-search-focus-border-color);\n  outline: none;\n}\n\n.djs-popup-header {\n  display: flex;\n  align-items: stretch;\n  line-height: 20px;\n  margin: 10px 12px 10px 12px;\n}\n\n.djs-popup-header .entry {\n  border-radius: 2px;\n}\n\n.djs-popup button.entry {\n  padding: 0;\n  background: transparent;\n  border: 0;\n}\n\n.djs-popup-header .entry.active {\n  color: var(--popup-header-entry-selected-color);\n}\n\n.djs-popup-header .entry.disabled {\n  color: inherit;\n}\n\n.djs-popup-header-group {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n\n.djs-popup-header-group .entry {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n}\n\n.djs-popup-header-group + .djs-popup-header-group:before {\n  content: \'\';\n  width: 1px;\n  height: 20px;\n  background: var(--popup-header-group-divider-color);\n  margin: 0 5px;\n}\n\n.djs-popup-search {\n  position: relative;\n  width: auto;\n  margin: 10px 12px;\n}\n\n.djs-popup-title {\n  font-size: var(--popup-font-size);\n  font-weight: var(--popup-header-font-weight);\n  flex: 1;\n  margin: 0;\n}\n\n.djs-popup-search-icon {\n  position: absolute;\n  left: 8px;\n  top: 7px;\n}\n\n.djs-popup-results {\n  margin: 7px 3px 7px 12px;\n  list-style: none;\n  max-height: 280px;\n  overflow: auto;\n  padding-right: 9px;\n}\n\n.djs-popup-group {\n  margin: 0;\n  padding: 0;\n  width: 100%;\n}\n\n.djs-popup-body .entry,\n.djs-popup-body .entry-header {\n  padding: 5px 7px;\n  cursor: default;\n  border-radius: 4px;\n}\n\n.djs-popup-body .entry-header {\n  font-weight: var(--popup-header-font-weight);\n  color: var(--popup-entry-title-color);\n  padding-left: 0;\n}\n\n.djs-popup [class*="icon"] .djs-popup-label,\n.djs-popup-label:not(:first-child) {\n  margin-left: .5em;\n}\n\n.djs-popup [class*="icon"]:before,\n.djs-popup-entry-icon {\n  width: 1em;\n  height: 1em;\n  display: inline-block;\n  font-size: 1.4em;\n  vertical-align: middle;\n}\n\n.djs-popup-body .entry-header:not(:first-child) {\n  margin-top: 8px;\n  margin-bottom: 2px;\n}\n\n.djs-popup-body .entry {\n  display: flex;\n  flex-direction: row;\n  align-items: stretch;\n  height: min-content;\n}\n\n.djs-popup .entry.selected {\n  background-color: var(--popup-entry-hover-color);\n}\n\n.djs-popup-body .entry:not(:first-child) {\n  margin-top: 2px;\n}\n\n.djs-popup-entry-content {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  overflow: hidden;\n}\n\n.djs-popup-entry-description {\n  color: var(--popup-description-color);\n}\n\n.djs-popup-label,\n.djs-popup-entry-description {\n  line-height: 1.4em;\n}\n\n.djs-popup .entry,\n.djs-popup .entry-header {\n  margin: 1px;\n}\n\n.djs-popup-title,\n.djs-popup-label,\n.djs-popup-entry-description,\n.djs-popup .entry-header {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.djs-popup-entry-name {\n  display: flex;\n}\n\n.djs-popup-body {\n  flex-direction: column;\n  width: auto;\n}\n\n.djs-popup *::-webkit-scrollbar {\n  width: 6px;\n}\n\n.djs-popup *::-webkit-scrollbar-thumb {\n  border-radius: 3px;\n  background-color: rgba(0, 0, 0, 0.2);\n}\n\n.djs-popup *::-webkit-scrollbar-track {\n  box-shadow: none;\n  background: transparent;\n  margin: 0;\n  padding: 5px;\n}\n\n.djs-popup-no-results {\n  padding: 0 12px 12px 12px;\n  color: var(--popup-no-results-color);\n}\n\n.djs-popup-entry-docs {\n  flex: 0;\n  flex-direction: row;\n  align-items: center;\n  padding-left: 5px;\n  display: none;\n}\n\n.djs-popup-body .entry:hover .djs-popup-entry-docs {\n  display: flex;\n}\n\n.djs-popup-entry-docs svg {\n  vertical-align: middle;\n  margin: auto 2px auto 5px;\n}\n\n/**\n *  palette styles\n */\n.djs-palette {\n  background: var(--palette-background-color);\n  border: solid 1px var(--palette-border-color);\n  border-radius: 2px;\n}\n\n/**\n * bendpoints\n */\n.djs-segment-dragger,\n.djs-bendpoint {\n  display: none;\n}\n\n.djs-segment-dragger .djs-visual {\n  display: none;\n\n  fill: var(--bendpoint-fill-color);\n  stroke: var(--bendpoint-stroke-color);\n  stroke-width: 1px;\n  stroke-opacity: 1;\n}\n\n.djs-segment-dragger:hover .djs-visual {\n  display: block;\n}\n\n.djs-bendpoint .djs-visual {\n  fill: var(--bendpoint-fill-color);\n  stroke: var(--bendpoint-stroke-color);\n  stroke-width: 1px;\n}\n\n.djs-segment-dragger:hover,\n.djs-bendpoints.hover .djs-segment-dragger,\n.djs-bendpoints.selected .djs-segment-dragger,\n.djs-bendpoint:hover,\n.djs-bendpoints.hover .djs-bendpoint,\n.djs-bendpoints.selected .djs-bendpoint {\n  display: block;\n}\n\n.djs-drag-active .djs-bendpoints * {\n  display: none;\n}\n\n.djs-bendpoints:not(.hover) .floating {\n  display: none;\n}\n\n.djs-segment-dragger:hover .djs-visual,\n.djs-segment-dragger.djs-dragging .djs-visual,\n.djs-bendpoint:hover .djs-visual,\n.djs-bendpoint.floating .djs-visual {\n  fill: var(--bendpoint-fill-color);\n  stroke: var(--bendpoint-stroke-color);\n  stroke-opacity: 1;\n}\n\n.djs-bendpoint.floating .djs-hit {\n  pointer-events: none;\n}\n\n.djs-segment-dragger .djs-hit,\n.djs-bendpoint .djs-hit {\n  fill: none;\n  pointer-events: all;\n}\n\n.djs-segment-dragger.horizontal .djs-hit {\n  cursor: ns-resize;\n}\n\n.djs-segment-dragger.vertical .djs-hit {\n  cursor: ew-resize;\n}\n\n.djs-segment-dragger.djs-dragging .djs-hit {\n  pointer-events: none;\n}\n\n.djs-updating,\n.djs-updating > * {\n  pointer-events: none !important;\n}\n\n.djs-updating .djs-context-pad,\n.djs-updating .djs-outline,\n.djs-updating .djs-bendpoint,\n.djs-multi-select .djs-bendpoint,\n.djs-multi-select .djs-segment-dragger,\n.connect-ok .djs-bendpoint,\n.connect-not-ok .djs-bendpoint,\n.drop-ok .djs-bendpoint,\n.drop-not-ok .djs-bendpoint {\n  display: none !important;\n}\n\n.djs-segment-dragger.djs-dragging,\n.djs-bendpoint.djs-dragging {\n  display: block;\n  opacity: 1.0;\n}\n\n\n/**\n * tooltips\n */\n.djs-tooltip-error {\n  width: 160px;\n  padding: 6px;\n\n  background: var(--tooltip-error-background-color);\n  border: solid 1px var(--tooltip-error-border-color);\n  border-radius: 2px;\n  color: var(--tooltip-error-color);\n  font-size: 12px;\n  line-height: 16px;\n\n  opacity: 0.75;\n}\n\n.djs-tooltip-error:hover {\n  opacity: 1;\n}\n\n\n/**\n * search pad\n */\n.djs-search-open .djs-context-pad {\n  display: none;\n}\n\n.djs-search-open .djs-connection.selected .djs-outline {\n  display: block;\n}\n\n.djs-search-container {\n  position: absolute;\n  top: 20px;\n  left: 0;\n  right: 0;\n  margin-left: auto;\n  margin-right: auto;\n\n  width: 25%;\n  min-width: 300px;\n  max-width: 400px;\n  z-index: 10;\n\n  font-family: var(--search-font-family);\n  font-size: var(--search-font-size);\n  border-radius: 2px;\n  box-shadow: 0px 2px 6px var(--search-shadow-color);\n}\n\n.djs-search-container:not(.open) {\n  display: none;\n}\n\n.djs-search-input {\n  position: relative;\n}\n\n.djs-search-input svg {\n  position: absolute;\n  left: 8px;\n  top: 7px;\n}\n\n.djs-search-input input {\n  font-size: var(--search-font-size);\n  width: 100%;\n  padding: 3px 6px 3px 28px;\n  border: 1px solid var(--search-input-border-color);\n  border-radius: 2px;\n  box-sizing: border-box;\n  line-height: 21px;\n}\n\n.djs-search-input input:focus {\n  background-color: var(--search-input-focus-background-color);\n  border: solid 1px var(--search-input-focus-border-color);\n  outline: none;\n}\n\n.djs-search-results {\n  position: relative;\n  overflow-y: auto;\n  max-height: 200px;\n  background: var(--search-container-background-color);\n}\n\n.djs-search-result {\n  padding: 6px 8px;\n}\n\n.djs-search-result-primary {\n  margin: 0 0 3px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n}\n\n.djs-search-result-secondary {\n  font-family: monospace;\n  margin: 0;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  color: var(--search-result-secondary-color);\n}\n\n.djs-search-result:hover {\n  background: var(--search-result-hover-background-color);\n}\n\n.djs-search-result-selected {\n  background: var(--search-result-hover-background-color);\n}\n\n.djs-search-result-selected:hover {\n  background: var(--search-result-hover-background-color);\n}\n\n.djs-search-open .djs-element .djs-outline {\n  fill: var(--search-preselected-background-color) !important;\n}\n\n/**\n * hidden styles\n */\n.djs-element-hidden,\n.djs-element-hidden .djs-hit,\n.djs-element-hidden .djs-outline,\n.djs-label-hidden .djs-label {\n  display: none !important;\n}\n\n.djs-element .djs-hit-stroke,\n.djs-element .djs-hit-click-stroke,\n.djs-element .djs-hit-all {\n  cursor: move;\n}',"",{version:3,sources:["webpack://./node_modules/diagram-js/assets/diagram-js.css"],names:[],mappings:"AAAA;;EAEE;AACF;EACE,0CAA0C;EAC1C,0CAA0C;EAC1C,0CAA0C;EAC1C,0CAA0C;EAC1C,0CAA0C;EAC1C,0CAA0C;EAC1C,0CAA0C;EAC1C,0CAA0C;EAC1C,0CAA0C;;EAE1C,4CAA4C;EAC5C,6DAA6D;EAC7D,4CAA4C;EAC5C,6DAA6D;EAC7D,4CAA4C;EAC5C,4CAA4C;;EAE5C,2CAA2C;;EAE3C,2CAA2C;EAC3C,2CAA2C;EAC3C,2CAA2C;EAC3C,2CAA2C;;EAE3C,+BAA+B;EAC/B,6BAA6B;EAC7B,8CAA8C;EAC9C,8CAA8C;;EAE9C,uCAAuC;;EAEvC,oDAAoD;EACpD,kDAAkD;;EAElD,wDAAwD;EACxD,uEAAuE;;EAEvE,qDAAqD;EACrD,gEAAgE;EAChE,qEAAqE;EACrE,+EAA+E;;EAE/E,2DAA2D;EAC3D,kEAAkE;;EAElE,kDAAkD;EAClD,yDAAyD;EACzD,4DAA4D;EAC5D,sDAAsD;EACtD,oEAAoE;EACpE,uDAAuD;EACvD,mDAAmD;;EAEnD,gDAAgD;EAChD,uBAAuB;EACvB,iEAAiE;EACjE,kCAAkC;EAClC,+DAA+D;EAC/D,4CAA4C;EAC5C,iCAAiC;EACjC,mDAAmD;EACnD,sDAAsD;EACtD,qDAAqD;EACrD,sDAAsD;EACtD,uDAAuD;EACvD,wDAAwD;EACxD,+DAA+D;EAC/D,mEAAmE;;EAEnE,kDAAkD;EAClD,gDAAgD;;EAEhD,iDAAiD;EACjD,wBAAwB;EACxB,uDAAuD;EACvD,oDAAoD;EACpD,wDAAwD;EACxD,+DAA+D;EAC/D,mEAAmE;EACnE,mEAAmE;EACnE,4DAA4D;EAC5D,8EAA8E;;EAE9E,iEAAiE;EACjE,+DAA+D;EAC/D,4DAA4D;EAC5D,gEAAgE;EAChE,iEAAiE;;EAEjE,iEAAiE;;EAEjE,uDAAuD;;EAEvD,6DAA6D;EAC7D,yDAAyD;EACzD,kDAAkD;AACpD;;AAEA;;EAEE;;AAEF;EACE,+DAA+D;AACjE;;AAEA;EACE,2DAA2D;AAC7D;;AAEA;;EAEE;;AAEF;;EAEE,UAAU;EACV,mCAAmC;EACnC,iBAAiB;AACnB;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,oDAAoD;AACtD;;AAEA;EACE,mBAAmB;;EAEnB,oDAAoD;AACtD;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,8DAA8D;EAC9D,cAAc;AAChB;;AAEA;EACE,wDAAwD;AAC1D;;AAEA;;EAEE,yDAAyD;AAC3D;;AAEA;EACE,qDAAqD;AACvD;;;AAGA,iDAAiD;AACjD;;;;EAIE,8BAA8B;AAChC;;AAEA;;;;EAIE,0BAA0B;AAC5B;;AAEA;EACE,4BAA4B;EAC5B,2DAA2D;AAC7D;;AAEA;;EAEE,4BAA4B;EAC5B,2DAA2D;EAC3D,qBAAqB;AACvB;;AAEA;;;CAGC;AACD;EACE,6BAA6B;EAC7B,iCAAiC;EACjC,iBAAiB;EACjB,mCAAmC;EACnC,oBAAoB;AACtB;;AAEA;;EAEE;AACF;EACE,UAAU;;EAEV,yBAAyB;EACzB,gDAAgD;;EAEhD,oBAAoB;AACtB;;AAEA;EACE,UAAU;EACV,mBAAmB;AACrB;;AAEA;EACE,+BAA+B;EAC/B,iBAAiB;EACjB,mCAAmC;EACnC,mCAAmC;AACrC;;AAEA;EACE,mCAAmC;EACnC,iBAAiB;AACnB;;AAEA;;;EAGE,iBAAiB;AACnB;;AAEA;;;EAGE,iBAAiB;AACnB;;AAEA;;;EAGE,mBAAmB;AACrB;;AAEA;;;EAGE,mBAAmB;AACrB;;AAEA;EACE,6BAA6B;AAC/B;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,kBAAkB;AACpB;;AAEA;;EAEE;AACF;EACE,qBAAqB;EACrB,+CAA+C;AACjD;;AAEA;;EAEE,6CAA6C;EAC7C,uBAAuB;AACzB;;AAEA;;;;;EAKE,6CAA6C;EAC7C,uBAAuB;AACzB;;AAEA;;EAEE,qBAAqB;EACrB,+CAA+C;AACjD;;AAEA;;EAEE,uBAAuB;EACvB,+BAA+B;AACjC;;AAEA;;EAEE;AACF;;EAEE,oBAAoB;AACtB;;AAEA;EACE,6BAA6B;AAC/B;;AAEA;;EAEE;AACF;;EAEE,mBAAmB;AACrB;;AAEA;;EAEE,sBAAsB;AACxB;;AAEA;;EAEE;AACF;EACE,iBAAiB;EACjB,UAAU;AACZ;;AAEA;EACE,oBAAoB;EACpB,iBAAiB;EACjB,YAAY;AACd;;AAEA;EACE,wBAAwB;EACxB,qBAAqB;EACrB,gBAAgB;AAClB;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,YAAY;AACd;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,iBAAiB;AACnB;;;AAGA;;EAEE;AACF;EACE,qCAAqC;EACrC,qBAAqB;EACrB,iBAAiB;EACjB,oBAAoB;AACtB;;AAEA;;EAEE;AACF;EACE,gDAAgD;EAChD,qBAAqB;EACrB,iBAAiB;EACjB,oBAAoB;EACpB,mCAAmC;EACnC,sBAAsB;AACxB;;AAEA;;EAEE;;AAEF;EACE,kBAAkB;EAClB,UAAU;EACV,SAAS;;EAET,sBAAsB;EACtB,WAAW;AACb;;AAEA;EACE,WAAW;EACX,gBAAgB;;EAEhB,YAAY;EACZ,uDAAuD;;EAEvD,WAAW;AACb;;AAEA;EACE,uBAAuB;AACzB;;AAEA;EACE,eAAe;AACjB;;AAEA;;EAEE,iCAAiC;EACjC,eAAe;;EAEf,kBAAkB;AACpB;;AAEA;EACE,WAAW;AACb;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,WAAW;EACX,cAAc;EACd,WAAW;AACb;;AAEA;EACE,wDAAwD;AAC1D;;AAEA;EACE,uCAAuC;AACzC;;AAEA;EACE,qDAAqD;AACvD;;AAEA;;EAEE,WAAW;EACX,YAAY;EACZ,iBAAiB;EACjB,eAAe;AACjB;;AAEA;;;;EAIE;AACF;EACE,WAAW;AACb;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,aAAa;AACf;;AAEA;;EAEE;AACF;EACE,kBAAkB;EAClB,aAAa;EACb,oBAAoB;EACpB,cAAc;EACd,WAAW;EACX,YAAY;AACd;;AAEA;EACE,WAAW;EACX,YAAY;EACZ,kBAAkB;EAClB,qBAAqB;EACrB,eAAe;EACf,mBAAmB;;EAEnB,kBAAkB;;EAElB,eAAe;;EAEf,2DAA2D;EAC3D,iEAAiE;EACjE,mBAAmB;EACnB,sBAAsB;AACxB;;AAEA;EACE,2DAA2D;AAC7D;;AAEA;EACE,cAAc;AAChB;;AAEA;;EAEE;AACF;EACE,cAAc;EACd,sBAAsB;EACtB,kBAAkB;EAClB,yCAAyC;EACzC,gBAAgB;EAChB,eAAe;EACf,YAAY;EACZ,iDAAiD;EACjD,2CAA2C;EAC3C,gBAAgB;EAChB,aAAa;EACb,iCAAiC;EACjC,qCAAqC;AACvC;;AAEA;EACE,WAAW;EACX,sBAAsB;EACtB,iCAAiC;EACjC,yBAAyB;EACzB,kBAAkB;EAClB,kDAAkD;EAClD,iBAAiB;AACnB;;AAEA;EACE,4DAA4D;EAC5D,wDAAwD;EACxD,aAAa;AACf;;AAEA;EACE,aAAa;EACb,oBAAoB;EACpB,iBAAiB;EACjB,2BAA2B;AAC7B;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,UAAU;EACV,uBAAuB;EACvB,SAAS;AACX;;AAEA;EACE,+CAA+C;AACjD;;AAEA;EACE,cAAc;AAChB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,mBAAmB;EACnB,gBAAgB;EAChB,SAAS;EACT,UAAU;AACZ;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,mBAAmB;AACrB;;AAEA;EACE,WAAW;EACX,UAAU;EACV,YAAY;EACZ,mDAAmD;EACnD,aAAa;AACf;;AAEA;EACE,kBAAkB;EAClB,WAAW;EACX,iBAAiB;AACnB;;AAEA;EACE,iCAAiC;EACjC,4CAA4C;EAC5C,OAAO;EACP,SAAS;AACX;;AAEA;EACE,kBAAkB;EAClB,SAAS;EACT,QAAQ;AACV;;AAEA;EACE,wBAAwB;EACxB,gBAAgB;EAChB,iBAAiB;EACjB,cAAc;EACd,kBAAkB;AACpB;;AAEA;EACE,SAAS;EACT,UAAU;EACV,WAAW;AACb;;AAEA;;EAEE,gBAAgB;EAChB,eAAe;EACf,kBAAkB;AACpB;;AAEA;EACE,4CAA4C;EAC5C,qCAAqC;EACrC,eAAe;AACjB;;AAEA;;EAEE,iBAAiB;AACnB;;AAEA;;EAEE,UAAU;EACV,WAAW;EACX,qBAAqB;EACrB,gBAAgB;EAChB,sBAAsB;AACxB;;AAEA;EACE,eAAe;EACf,kBAAkB;AACpB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,oBAAoB;EACpB,mBAAmB;AACrB;;AAEA;EACE,gDAAgD;AAClD;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,OAAO;EACP,gBAAgB;AAClB;;AAEA;EACE,qCAAqC;AACvC;;AAEA;;EAEE,kBAAkB;AACpB;;AAEA;;EAEE,WAAW;AACb;;AAEA;;;;EAIE,gBAAgB;EAChB,uBAAuB;EACvB,mBAAmB;AACrB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,sBAAsB;EACtB,WAAW;AACb;;AAEA;EACE,UAAU;AACZ;;AAEA;EACE,kBAAkB;EAClB,oCAAoC;AACtC;;AAEA;EACE,gBAAgB;EAChB,uBAAuB;EACvB,SAAS;EACT,YAAY;AACd;;AAEA;EACE,yBAAyB;EACzB,oCAAoC;AACtC;;AAEA;EACE,OAAO;EACP,mBAAmB;EACnB,mBAAmB;EACnB,iBAAiB;EACjB,aAAa;AACf;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,sBAAsB;EACtB,yBAAyB;AAC3B;;AAEA;;EAEE;AACF;EACE,2CAA2C;EAC3C,6CAA6C;EAC7C,kBAAkB;AACpB;;AAEA;;EAEE;AACF;;EAEE,aAAa;AACf;;AAEA;EACE,aAAa;;EAEb,iCAAiC;EACjC,qCAAqC;EACrC,iBAAiB;EACjB,iBAAiB;AACnB;;AAEA;EACE,cAAc;AAChB;;AAEA;EACE,iCAAiC;EACjC,qCAAqC;EACrC,iBAAiB;AACnB;;AAEA;;;;;;EAME,cAAc;AAChB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,aAAa;AACf;;AAEA;;;;EAIE,iCAAiC;EACjC,qCAAqC;EACrC,iBAAiB;AACnB;;AAEA;EACE,oBAAoB;AACtB;;AAEA;;EAEE,UAAU;EACV,mBAAmB;AACrB;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,oBAAoB;AACtB;;AAEA;;EAEE,+BAA+B;AACjC;;AAEA;;;;;;;;;EASE,wBAAwB;AAC1B;;AAEA;;EAEE,cAAc;EACd,YAAY;AACd;;;AAGA;;EAEE;AACF;EACE,YAAY;EACZ,YAAY;;EAEZ,iDAAiD;EACjD,mDAAmD;EACnD,kBAAkB;EAClB,iCAAiC;EACjC,eAAe;EACf,iBAAiB;;EAEjB,aAAa;AACf;;AAEA;EACE,UAAU;AACZ;;;AAGA;;EAEE;AACF;EACE,aAAa;AACf;;AAEA;EACE,cAAc;AAChB;;AAEA;EACE,kBAAkB;EAClB,SAAS;EACT,OAAO;EACP,QAAQ;EACR,iBAAiB;EACjB,kBAAkB;;EAElB,UAAU;EACV,gBAAgB;EAChB,gBAAgB;EAChB,WAAW;;EAEX,sCAAsC;EACtC,kCAAkC;EAClC,kBAAkB;EAClB,kDAAkD;AACpD;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,kBAAkB;EAClB,SAAS;EACT,QAAQ;AACV;;AAEA;EACE,kCAAkC;EAClC,WAAW;EACX,yBAAyB;EACzB,kDAAkD;EAClD,kBAAkB;EAClB,sBAAsB;EACtB,iBAAiB;AACnB;;AAEA;EACE,4DAA4D;EAC5D,wDAAwD;EACxD,aAAa;AACf;;AAEA;EACE,kBAAkB;EAClB,gBAAgB;EAChB,iBAAiB;EACjB,oDAAoD;AACtD;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,eAAe;EACf,uBAAuB;EACvB,gBAAgB;EAChB,mBAAmB;AACrB;;AAEA;EACE,sBAAsB;EACtB,SAAS;EACT,uBAAuB;EACvB,gBAAgB;EAChB,mBAAmB;EACnB,2CAA2C;AAC7C;;AAEA;EACE,uDAAuD;AACzD;;AAEA;EACE,uDAAuD;AACzD;;AAEA;EACE,uDAAuD;AACzD;;AAEA;EACE,2DAA2D;AAC7D;;AAEA;;EAEE;AACF;;;;EAIE,wBAAwB;AAC1B;;AAEA;;;EAGE,YAAY;AACd",sourcesContent:['/**\n * color definitions\n */\n.djs-parent {\n  --color-grey-225-10-15: hsl(225, 10%, 15%);\n  --color-grey-225-10-35: hsl(225, 10%, 35%);\n  --color-grey-225-10-55: hsl(225, 10%, 55%);\n  --color-grey-225-10-75: hsl(225, 10%, 75%);\n  --color-grey-225-10-80: hsl(225, 10%, 80%);\n  --color-grey-225-10-85: hsl(225, 10%, 85%);\n  --color-grey-225-10-90: hsl(225, 10%, 90%);\n  --color-grey-225-10-95: hsl(225, 10%, 95%);\n  --color-grey-225-10-97: hsl(225, 10%, 97%);\n\n  --color-blue-205-100-45: hsl(205, 100%, 45%);\n  --color-blue-205-100-45-opacity-30: hsla(205, 100%, 45%, 30%);\n  --color-blue-205-100-50: hsl(205, 100%, 50%);\n  --color-blue-205-100-50-opacity-15: hsla(205, 100%, 50%, 15%);\n  --color-blue-205-100-70: hsl(205, 100%, 75%);\n  --color-blue-205-100-95: hsl(205, 100%, 95%);\n\n  --color-green-150-86-44: hsl(150, 86%, 44%);\n\n  --color-red-360-100-40: hsl(360, 100%, 40%);\n  --color-red-360-100-45: hsl(360, 100%, 45%);\n  --color-red-360-100-92: hsl(360, 100%, 92%);\n  --color-red-360-100-97: hsl(360, 100%, 97%);\n\n  --color-white: hsl(0, 0%, 100%);\n  --color-black: hsl(0, 0%, 0%);\n  --color-black-opacity-10: hsla(0, 0%, 0%, 10%);\n  --color-black-opacity-30: hsla(0, 0%, 0%, 30%);\n\n  --canvas-fill-color: var(--color-white);\n\n  --bendpoint-fill-color: var(--color-blue-205-100-45);\n  --bendpoint-stroke-color: var(--canvas-fill-color);\n\n  --context-pad-entry-background-color: var(--color-white);\n  --context-pad-entry-hover-background-color: var(--color-grey-225-10-95);\n\n  --element-dragger-color: var(--color-blue-205-100-50);\n  --element-hover-outline-fill-color: var(--color-blue-205-100-45);\n  --element-selected-outline-stroke-color: var(--color-blue-205-100-50);\n  --element-selected-outline-secondary-stroke-color: var(--color-blue-205-100-70);\n\n  --lasso-fill-color: var(--color-blue-205-100-50-opacity-15);\n  --lasso-stroke-color: var(--element-selected-outline-stroke-color);\n\n  --palette-entry-color: var(--color-grey-225-10-15);\n  --palette-entry-hover-color: var(--color-blue-205-100-45);\n  --palette-entry-selected-color: var(--color-blue-205-100-50);\n  --palette-separator-color: var(--color-grey-225-10-75);\n  --palette-toggle-hover-background-color: var(--color-grey-225-10-55);\n  --palette-background-color: var(--color-grey-225-10-97);\n  --palette-border-color: var(--color-grey-225-10-75);\n\n  --popup-font-family: "IBM Plex Sans", sans-serif;\n  --popup-font-size: 14px;\n  --popup-header-entry-selected-color: var(--color-blue-205-100-50);\n  --popup-header-font-weight: bolder;\n  --popup-header-group-divider-color: var(--color-grey-225-10-75);\n  --popup-background-color: var(--color-white);\n  --popup-border-color: transparent;\n  --popup-shadow-color: var(--color-black-opacity-30);\n  --popup-description-color: var(--color-grey-225-10-55);\n  --popup-no-results-color: var(--color-grey-225-10-55);\n  --popup-entry-title-color: var(--color-grey-225-10-55);\n  --popup-entry-hover-color:  var(--color-grey-225-10-95);\n  --popup-search-border-color: var(--color-grey-225-10-75);\n  --popup-search-focus-border-color: var(--color-blue-205-100-50);\n  --popup-search-focus-background-color: var(--color-blue-205-100-95);\n\n  --resizer-fill-color: var(--color-blue-205-100-45);\n  --resizer-stroke-color: var(--canvas-fill-color);\n\n  --search-font-family: "IBM Plex Sans", sans-serif;\n  --search-font-size: 14px;\n  --search-container-background-color: var(--color-white);\n  --search-shadow-color: var(--color-black-opacity-30);\n  --search-input-border-color: var(--color-grey-225-10-75);\n  --search-input-focus-border-color: var(--color-blue-205-100-50);\n  --search-input-focus-background-color: var(--color-blue-205-100-95);\n  --search-result-hover-background-color: var(--color-grey-225-10-95);\n  --search-result-secondary-color: var(--color-grey-225-10-55);\n  --search-preselected-background-color: var(--color-blue-205-100-50-opacity-15);\n\n  --shape-attach-allowed-stroke-color: var(--color-blue-205-100-50);\n  --shape-connect-allowed-fill-color: var(--color-grey-225-10-97);\n  --shape-drop-allowed-fill-color: var(--color-grey-225-10-97);\n  --shape-drop-not-allowed-fill-color: var(--color-red-360-100-97);\n  --shape-resize-preview-stroke-color: var(--color-blue-205-100-50);\n\n  --snap-line-stroke-color: var(--color-blue-205-100-45-opacity-30);\n\n  --space-tool-crosshair-stroke-color: var(--color-black);\n\n  --tooltip-error-background-color: var(--color-red-360-100-97);\n  --tooltip-error-border-color: var(--color-red-360-100-45);\n  --tooltip-error-color: var(--color-red-360-100-45);\n}\n\n/**\n * SVG styles\n */\n\n.djs-container svg.drop-not-ok {\n  background: var(--shape-drop-not-allowed-fill-color) !important;\n}\n\n.djs-container svg.new-parent {\n  background: var(--shape-drop-allowed-fill-color) !important;\n}\n\n/**\n * outline styles\n */\n\n.djs-outline,\n.djs-selection-outline {\n  fill: none;\n  shape-rendering: geometricPrecision;\n  stroke-width: 2px;\n}\n\n.djs-outline {\n  visibility: hidden;\n}\n\n.djs-selection-outline {\n  stroke: var(--element-selected-outline-stroke-color);\n}\n\n.djs-element.selected .djs-outline {\n  visibility: visible;\n\n  stroke: var(--element-selected-outline-stroke-color);\n}\n\n.djs-connection.selected .djs-outline {\n  display: none;\n}\n\n.djs-multi-select .djs-element.selected .djs-outline {\n  stroke: var(--element-selected-outline-secondary-stroke-color);\n  display: block;\n}\n\n.djs-shape.connect-ok .djs-visual > :nth-child(1) {\n  fill: var(--shape-connect-allowed-fill-color) !important;\n}\n\n.djs-shape.connect-not-ok .djs-visual > :nth-child(1),\n.djs-shape.drop-not-ok .djs-visual > :nth-child(1) {\n  fill: var(--shape-drop-not-allowed-fill-color) !important;\n}\n\n.djs-shape.new-parent .djs-visual > :nth-child(1) {\n  fill: var(--shape-drop-allowed-fill-color) !important;\n}\n\n\n/* Override move cursor during drop and connect */\n.drop-not-ok,\n.connect-not-ok,\n.drop-not-ok *,\n.connect-not-ok * {\n  cursor: not-allowed !important;\n}\n\n.drop-ok,\n.connect-ok,\n.drop-ok *,\n.connect-ok * {\n  cursor: default !important;\n}\n\n.djs-element.attach-ok .djs-visual > :nth-child(1) {\n  stroke-width: 5px !important;\n  stroke: var(--shape-attach-allowed-stroke-color) !important;\n}\n\n.djs-frame.connect-not-ok .djs-visual > :nth-child(1),\n.djs-frame.drop-not-ok .djs-visual > :nth-child(1) {\n  stroke-width: 3px !important;\n  stroke: var(--shape-drop-not-allowed-fill-color) !important;\n  fill: none !important;\n}\n\n/**\n* Selection box style\n*\n*/\n.djs-lasso-overlay {\n  fill: var(--lasso-fill-color);\n  stroke: var(--lasso-stroke-color);\n  stroke-width: 2px;\n  shape-rendering: geometricPrecision;\n  pointer-events: none;\n}\n\n/**\n * Resize styles\n */\n.djs-resize-overlay {\n  fill: none;\n\n  stroke-dasharray: 5 1 3 1;\n  stroke: var(--shape-resize-preview-stroke-color);\n\n  pointer-events: none;\n}\n\n.djs-resizer-hit {\n  fill: none;\n  pointer-events: all;\n}\n\n.djs-resizer-visual {\n  fill: var(--resizer-fill-color);\n  stroke-width: 1px;\n  stroke: var(--resizer-stroke-color);\n  shape-rendering: geometricPrecision;\n}\n\n.djs-resizer:hover .djs-resizer-visual {\n  stroke: var(--resizer-stroke-color);\n  stroke-opacity: 1;\n}\n\n.djs-cursor-resize-ns,\n.djs-resizer-n,\n.djs-resizer-s {\n  cursor: ns-resize;\n}\n\n.djs-cursor-resize-ew,\n.djs-resizer-e,\n.djs-resizer-w {\n  cursor: ew-resize;\n}\n\n.djs-cursor-resize-nwse,\n.djs-resizer-nw,\n.djs-resizer-se {\n  cursor: nwse-resize;\n}\n\n.djs-cursor-resize-nesw,\n.djs-resizer-ne,\n.djs-resizer-sw {\n  cursor: nesw-resize;\n}\n\n.djs-shape.djs-resizing > .djs-outline {\n  visibility: hidden !important;\n}\n\n.djs-shape.djs-resizing > .djs-resizer {\n  visibility: hidden;\n}\n\n.djs-dragger > .djs-resizer {\n  visibility: hidden;\n}\n\n/**\n * drag styles\n */\n.djs-dragger * {\n  fill: none !important;\n  stroke: var(--element-dragger-color) !important;\n}\n\n.djs-dragger tspan,\n.djs-dragger text {\n  fill: var(--element-dragger-color) !important;\n  stroke: none !important;\n}\n\n.djs-dragger marker circle,\n.djs-dragger marker path,\n.djs-dragger marker polygon,\n.djs-dragger marker polyline,\n.djs-dragger marker rect {\n  fill: var(--element-dragger-color) !important;\n  stroke: none !important;\n}\n\n.djs-dragger marker text,\n.djs-dragger marker tspan {\n  fill: none !important;\n  stroke: var(--element-dragger-color) !important;\n}\n\n.djs-dragging,\n.djs-dragging > * {\n  opacity: 0.3 !important;\n  pointer-events: none !important;\n}\n\n/**\n * no pointer events for visual\n */\n.djs-visual,\n.djs-outline {\n  pointer-events: none;\n}\n\n.djs-element.attach-ok .djs-hit {\n  stroke-width: 60px !important;\n}\n\n/**\n * all pointer events for hit shape\n */\n.djs-element > .djs-hit-all,\n.djs-element > .djs-hit-no-move {\n  pointer-events: all;\n}\n\n.djs-element > .djs-hit-stroke,\n.djs-element > .djs-hit-click-stroke {\n  pointer-events: stroke;\n}\n\n/**\n * shape / connection basic styles\n */\n.djs-connection .djs-visual {\n  stroke-width: 2px;\n  fill: none;\n}\n\n.djs-cursor-grab {\n  cursor: -webkit-grab;\n  cursor: -moz-grab;\n  cursor: grab;\n}\n\n.djs-cursor-grabbing {\n  cursor: -webkit-grabbing;\n  cursor: -moz-grabbing;\n  cursor: grabbing;\n}\n\n.djs-cursor-crosshair {\n  cursor: crosshair;\n}\n\n.djs-cursor-move {\n  cursor: move;\n}\n\n.djs-cursor-resize-ns {\n  cursor: ns-resize;\n}\n\n.djs-cursor-resize-ew {\n  cursor: ew-resize;\n}\n\n\n/**\n * snapping\n */\n.djs-snap-line {\n  stroke: var(--snap-line-stroke-color);\n  stroke-linecap: round;\n  stroke-width: 2px;\n  pointer-events: none;\n}\n\n/**\n * snapping\n */\n.djs-crosshair {\n  stroke: var(--space-tool-crosshair-stroke-color);\n  stroke-linecap: round;\n  stroke-width: 1px;\n  pointer-events: none;\n  shape-rendering: geometricPrecision;\n  stroke-dasharray: 5, 5;\n}\n\n/**\n * palette\n */\n\n.djs-palette {\n  position: absolute;\n  left: 20px;\n  top: 20px;\n\n  box-sizing: border-box;\n  width: 48px;\n}\n\n.djs-palette .separator {\n  margin: 5px;\n  padding-top: 5px;\n\n  border: none;\n  border-bottom: solid 1px var(--palette-separator-color);\n\n  clear: both;\n}\n\n.djs-palette .entry:before {\n  vertical-align: initial;\n}\n\n.djs-palette .djs-palette-toggle {\n  cursor: pointer;\n}\n\n.djs-palette .entry,\n.djs-palette .djs-palette-toggle {\n  color: var(--palette-entry-color);\n  font-size: 30px;\n\n  text-align: center;\n}\n\n.djs-palette .entry {\n  float: left;\n}\n\n.djs-palette .entry img {\n  max-width: 100%;\n}\n\n.djs-palette .djs-palette-entries:after {\n  content: \'\';\n  display: table;\n  clear: both;\n}\n\n.djs-palette .djs-palette-toggle:hover {\n  background: var(--palette-toggle-hover-background-color);\n}\n\n.djs-palette .entry:hover {\n  color: var(--palette-entry-hover-color);\n}\n\n.djs-palette .highlighted-entry {\n  color: var(--palette-entry-selected-color) !important;\n}\n\n.djs-palette .entry,\n.djs-palette .djs-palette-toggle {\n  width: 46px;\n  height: 46px;\n  line-height: 46px;\n  cursor: default;\n}\n\n/**\n * Palette open / two-column layout is controlled via\n * classes on the palette. Events to hook into palette\n * changed life-cycle are available in addition.\n */\n.djs-palette.two-column.open {\n  width: 94px;\n}\n\n.djs-palette:not(.open) .djs-palette-entries {\n  display: none;\n}\n\n.djs-palette:not(.open) {\n  overflow: hidden;\n}\n\n.djs-palette.open .djs-palette-toggle {\n  display: none;\n}\n\n/**\n * context-pad\n */\n.djs-context-pad {\n  position: absolute;\n  display: none;\n  pointer-events: none;\n  line-height: 1;\n  width: 72px;\n  z-index: 100;\n}\n\n.djs-context-pad .entry {\n  width: 22px;\n  height: 22px;\n  text-align: center;\n  display: inline-block;\n  font-size: 22px;\n  margin: 0 2px 2px 0;\n\n  border-radius: 3px;\n\n  cursor: default;\n\n  background-color: var(--context-pad-entry-background-color);\n  box-shadow: 0 0 2px 1px var(--context-pad-entry-background-color);\n  pointer-events: all;\n  vertical-align: middle;\n}\n\n.djs-context-pad .entry:hover {\n  background: var(--context-pad-entry-hover-background-color);\n}\n\n.djs-context-pad.open {\n  display: block;\n}\n\n/**\n * popup styles\n */\n.djs-popup {\n  line-height: 1;\n  box-sizing: border-box;\n  width: min-content;\n  background: var(--popup-background-color);\n  overflow: hidden;\n  position: fixed;\n  z-index: 200;\n  box-shadow: 0px 2px 6px var(--popup-shadow-color);\n  border: solid 1px var(--popup-border-color);\n  min-width: 120px;\n  outline: none;\n  font-size: var(--popup-font-size);\n  font-family: var(--popup-font-family);\n}\n\n.djs-popup-search input {\n  width: 100%;\n  box-sizing: border-box;\n  font-size: var(--popup-font-size);\n  padding: 3px 6px 3px 28px;\n  border-radius: 2px;\n  border: solid 1px var(--popup-search-border-color);\n  line-height: 21px;\n}\n\n.djs-popup-search input:focus {\n  background-color: var(--popup-search-focus-background-color);\n  border: solid 1px var(--popup-search-focus-border-color);\n  outline: none;\n}\n\n.djs-popup-header {\n  display: flex;\n  align-items: stretch;\n  line-height: 20px;\n  margin: 10px 12px 10px 12px;\n}\n\n.djs-popup-header .entry {\n  border-radius: 2px;\n}\n\n.djs-popup button.entry {\n  padding: 0;\n  background: transparent;\n  border: 0;\n}\n\n.djs-popup-header .entry.active {\n  color: var(--popup-header-entry-selected-color);\n}\n\n.djs-popup-header .entry.disabled {\n  color: inherit;\n}\n\n.djs-popup-header-group {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n\n.djs-popup-header-group .entry {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n}\n\n.djs-popup-header-group + .djs-popup-header-group:before {\n  content: \'\';\n  width: 1px;\n  height: 20px;\n  background: var(--popup-header-group-divider-color);\n  margin: 0 5px;\n}\n\n.djs-popup-search {\n  position: relative;\n  width: auto;\n  margin: 10px 12px;\n}\n\n.djs-popup-title {\n  font-size: var(--popup-font-size);\n  font-weight: var(--popup-header-font-weight);\n  flex: 1;\n  margin: 0;\n}\n\n.djs-popup-search-icon {\n  position: absolute;\n  left: 8px;\n  top: 7px;\n}\n\n.djs-popup-results {\n  margin: 7px 3px 7px 12px;\n  list-style: none;\n  max-height: 280px;\n  overflow: auto;\n  padding-right: 9px;\n}\n\n.djs-popup-group {\n  margin: 0;\n  padding: 0;\n  width: 100%;\n}\n\n.djs-popup-body .entry,\n.djs-popup-body .entry-header {\n  padding: 5px 7px;\n  cursor: default;\n  border-radius: 4px;\n}\n\n.djs-popup-body .entry-header {\n  font-weight: var(--popup-header-font-weight);\n  color: var(--popup-entry-title-color);\n  padding-left: 0;\n}\n\n.djs-popup [class*="icon"] .djs-popup-label,\n.djs-popup-label:not(:first-child) {\n  margin-left: .5em;\n}\n\n.djs-popup [class*="icon"]:before,\n.djs-popup-entry-icon {\n  width: 1em;\n  height: 1em;\n  display: inline-block;\n  font-size: 1.4em;\n  vertical-align: middle;\n}\n\n.djs-popup-body .entry-header:not(:first-child) {\n  margin-top: 8px;\n  margin-bottom: 2px;\n}\n\n.djs-popup-body .entry {\n  display: flex;\n  flex-direction: row;\n  align-items: stretch;\n  height: min-content;\n}\n\n.djs-popup .entry.selected {\n  background-color: var(--popup-entry-hover-color);\n}\n\n.djs-popup-body .entry:not(:first-child) {\n  margin-top: 2px;\n}\n\n.djs-popup-entry-content {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  overflow: hidden;\n}\n\n.djs-popup-entry-description {\n  color: var(--popup-description-color);\n}\n\n.djs-popup-label,\n.djs-popup-entry-description {\n  line-height: 1.4em;\n}\n\n.djs-popup .entry,\n.djs-popup .entry-header {\n  margin: 1px;\n}\n\n.djs-popup-title,\n.djs-popup-label,\n.djs-popup-entry-description,\n.djs-popup .entry-header {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.djs-popup-entry-name {\n  display: flex;\n}\n\n.djs-popup-body {\n  flex-direction: column;\n  width: auto;\n}\n\n.djs-popup *::-webkit-scrollbar {\n  width: 6px;\n}\n\n.djs-popup *::-webkit-scrollbar-thumb {\n  border-radius: 3px;\n  background-color: rgba(0, 0, 0, 0.2);\n}\n\n.djs-popup *::-webkit-scrollbar-track {\n  box-shadow: none;\n  background: transparent;\n  margin: 0;\n  padding: 5px;\n}\n\n.djs-popup-no-results {\n  padding: 0 12px 12px 12px;\n  color: var(--popup-no-results-color);\n}\n\n.djs-popup-entry-docs {\n  flex: 0;\n  flex-direction: row;\n  align-items: center;\n  padding-left: 5px;\n  display: none;\n}\n\n.djs-popup-body .entry:hover .djs-popup-entry-docs {\n  display: flex;\n}\n\n.djs-popup-entry-docs svg {\n  vertical-align: middle;\n  margin: auto 2px auto 5px;\n}\n\n/**\n *  palette styles\n */\n.djs-palette {\n  background: var(--palette-background-color);\n  border: solid 1px var(--palette-border-color);\n  border-radius: 2px;\n}\n\n/**\n * bendpoints\n */\n.djs-segment-dragger,\n.djs-bendpoint {\n  display: none;\n}\n\n.djs-segment-dragger .djs-visual {\n  display: none;\n\n  fill: var(--bendpoint-fill-color);\n  stroke: var(--bendpoint-stroke-color);\n  stroke-width: 1px;\n  stroke-opacity: 1;\n}\n\n.djs-segment-dragger:hover .djs-visual {\n  display: block;\n}\n\n.djs-bendpoint .djs-visual {\n  fill: var(--bendpoint-fill-color);\n  stroke: var(--bendpoint-stroke-color);\n  stroke-width: 1px;\n}\n\n.djs-segment-dragger:hover,\n.djs-bendpoints.hover .djs-segment-dragger,\n.djs-bendpoints.selected .djs-segment-dragger,\n.djs-bendpoint:hover,\n.djs-bendpoints.hover .djs-bendpoint,\n.djs-bendpoints.selected .djs-bendpoint {\n  display: block;\n}\n\n.djs-drag-active .djs-bendpoints * {\n  display: none;\n}\n\n.djs-bendpoints:not(.hover) .floating {\n  display: none;\n}\n\n.djs-segment-dragger:hover .djs-visual,\n.djs-segment-dragger.djs-dragging .djs-visual,\n.djs-bendpoint:hover .djs-visual,\n.djs-bendpoint.floating .djs-visual {\n  fill: var(--bendpoint-fill-color);\n  stroke: var(--bendpoint-stroke-color);\n  stroke-opacity: 1;\n}\n\n.djs-bendpoint.floating .djs-hit {\n  pointer-events: none;\n}\n\n.djs-segment-dragger .djs-hit,\n.djs-bendpoint .djs-hit {\n  fill: none;\n  pointer-events: all;\n}\n\n.djs-segment-dragger.horizontal .djs-hit {\n  cursor: ns-resize;\n}\n\n.djs-segment-dragger.vertical .djs-hit {\n  cursor: ew-resize;\n}\n\n.djs-segment-dragger.djs-dragging .djs-hit {\n  pointer-events: none;\n}\n\n.djs-updating,\n.djs-updating > * {\n  pointer-events: none !important;\n}\n\n.djs-updating .djs-context-pad,\n.djs-updating .djs-outline,\n.djs-updating .djs-bendpoint,\n.djs-multi-select .djs-bendpoint,\n.djs-multi-select .djs-segment-dragger,\n.connect-ok .djs-bendpoint,\n.connect-not-ok .djs-bendpoint,\n.drop-ok .djs-bendpoint,\n.drop-not-ok .djs-bendpoint {\n  display: none !important;\n}\n\n.djs-segment-dragger.djs-dragging,\n.djs-bendpoint.djs-dragging {\n  display: block;\n  opacity: 1.0;\n}\n\n\n/**\n * tooltips\n */\n.djs-tooltip-error {\n  width: 160px;\n  padding: 6px;\n\n  background: var(--tooltip-error-background-color);\n  border: solid 1px var(--tooltip-error-border-color);\n  border-radius: 2px;\n  color: var(--tooltip-error-color);\n  font-size: 12px;\n  line-height: 16px;\n\n  opacity: 0.75;\n}\n\n.djs-tooltip-error:hover {\n  opacity: 1;\n}\n\n\n/**\n * search pad\n */\n.djs-search-open .djs-context-pad {\n  display: none;\n}\n\n.djs-search-open .djs-connection.selected .djs-outline {\n  display: block;\n}\n\n.djs-search-container {\n  position: absolute;\n  top: 20px;\n  left: 0;\n  right: 0;\n  margin-left: auto;\n  margin-right: auto;\n\n  width: 25%;\n  min-width: 300px;\n  max-width: 400px;\n  z-index: 10;\n\n  font-family: var(--search-font-family);\n  font-size: var(--search-font-size);\n  border-radius: 2px;\n  box-shadow: 0px 2px 6px var(--search-shadow-color);\n}\n\n.djs-search-container:not(.open) {\n  display: none;\n}\n\n.djs-search-input {\n  position: relative;\n}\n\n.djs-search-input svg {\n  position: absolute;\n  left: 8px;\n  top: 7px;\n}\n\n.djs-search-input input {\n  font-size: var(--search-font-size);\n  width: 100%;\n  padding: 3px 6px 3px 28px;\n  border: 1px solid var(--search-input-border-color);\n  border-radius: 2px;\n  box-sizing: border-box;\n  line-height: 21px;\n}\n\n.djs-search-input input:focus {\n  background-color: var(--search-input-focus-background-color);\n  border: solid 1px var(--search-input-focus-border-color);\n  outline: none;\n}\n\n.djs-search-results {\n  position: relative;\n  overflow-y: auto;\n  max-height: 200px;\n  background: var(--search-container-background-color);\n}\n\n.djs-search-result {\n  padding: 6px 8px;\n}\n\n.djs-search-result-primary {\n  margin: 0 0 3px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n}\n\n.djs-search-result-secondary {\n  font-family: monospace;\n  margin: 0;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  color: var(--search-result-secondary-color);\n}\n\n.djs-search-result:hover {\n  background: var(--search-result-hover-background-color);\n}\n\n.djs-search-result-selected {\n  background: var(--search-result-hover-background-color);\n}\n\n.djs-search-result-selected:hover {\n  background: var(--search-result-hover-background-color);\n}\n\n.djs-search-open .djs-element .djs-outline {\n  fill: var(--search-preselected-background-color) !important;\n}\n\n/**\n * hidden styles\n */\n.djs-element-hidden,\n.djs-element-hidden .djs-hit,\n.djs-element-hidden .djs-outline,\n.djs-label-hidden .djs-label {\n  display: none !important;\n}\n\n.djs-element .djs-hit-stroke,\n.djs-element .djs-hit-click-stroke,\n.djs-element .djs-hit-all {\n  cursor: move;\n}'],sourceRoot:""}]);const a=s},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},659:e=>{var t={};e.exports=function(e,n){var o=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,r&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(o,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={id:o,exports:{}};return e[o](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0;var o={};n.d(o,{default:()=>Mc});const r=/^class[ {]/;function i(e){return Array.isArray(e)}function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function a(...e){1===e.length&&i(e[0])&&(e=e[0]);const t=(e=[...e]).pop();return t.$inject=e,t}const c=/constructor\s*[^(]*\(\s*([^)]*)\)/m,l=/^(?:async\s+)?(?:function\s*[^(]*)?(?:\(\s*([^)]*)\)|(\w+))/m,u=/\/\*([^*]*)\*\//m;function p(e){if("function"!=typeof e)throw new Error(`Cannot annotate "${e}". Expected a function!`);const t=e.toString().match(function(e){return r.test(e.toString())}(e)?c:l);if(!t)return[];const n=t[1]||t[2];return n&&n.split(",").map(e=>{const t=e.match(u);return(t&&t[1]||e).trim()})||[]}function d(e,t){const n=t||{get:function(e,t){if(o.push(e),!1===t)return null;throw u(`No provider for "${e}"!`)}},o=[],r=this._providers=Object.create(n._providers||null),c=this._instances=Object.create(null),l=c.injector=this,u=function(e){const t=o.join(" -> ");return o.length=0,new Error(t?`${e} (Resolving: ${t})`:e)};function f(e,t){if(!r[e]&&e.includes(".")){const t=e.split(".");let n=f(t.shift());for(;t.length;)n=n[t.shift()];return n}if(s(c,e))return c[e];if(s(r,e)){if(-1!==o.indexOf(e))throw o.push(e),u("Cannot resolve circular dependency!");return o.push(e),c[e]=r[e][0](r[e][1]),o.pop(),c[e]}return n.get(e,t)}function g(e,t){if(void 0===t&&(t={}),"function"!=typeof e){if(!i(e))throw u(`Cannot invoke "${e}". Expected a function!`);e=a(e.slice())}return{fn:e,dependencies:(e.$inject||p(e)).map(e=>s(t,e)?t[e]:f(e))}}function v(e){const{fn:t,dependencies:n}=g(e);return new(Function.prototype.bind.call(t,null,...n))}function y(e,t,n){const{fn:o,dependencies:r}=g(e,n);return o.apply(t,r)}function A(e){return a(t=>e.get(t))}function m(e,t){if(t&&t.length){const n=Object.create(null),o=Object.create(null),i=[],s=[],a=[];let c,l,u,p;for(let e in r)c=r[e],-1!==t.indexOf(e)&&("private"===c[2]?(l=i.indexOf(c[3]),-1===l?(u=c[3].createChild([],t),p=A(u),i.push(c[3]),s.push(u),a.push(p),n[e]=[p,e,"private",u]):n[e]=[a[l],e,"private",s[l]]):n[e]=[c[2],c[1]],o[e]=!0),"factory"!==c[2]&&"type"!==c[2]||!c[1].$scope||t.forEach(t=>{-1!==c[1].$scope.indexOf(t)&&(n[e]=[c[2],c[1]],o[t]=!0)});t.forEach(e=>{if(!o[e])throw new Error('No provider for "'+e+'". Cannot use provider from the parent!')}),e.unshift(n)}return new d(e,l)}const _={factory:y,type:v,value:function(e){return e}};function x(e,t){const n=e.__init__||[];return function(){n.forEach(e=>{"string"==typeof e?t.get(e):t.invoke(e)})}}function E(e){const t=e.__exports__;if(t){const n=e.__modules__,o=Object.keys(e).reduce((t,n)=>("__exports__"!==n&&"__modules__"!==n&&"__init__"!==n&&"__depends__"!==n&&(t[n]=e[n]),t),Object.create(null)),i=m((n||[]).concat(o)),s=a(function(e){return i.get(e)});t.forEach(function(e){r[e]=[s,e,"private",i]});const c=(e.__init__||[]).slice();return c.unshift(function(){i.init()}),x(e=Object.assign({},e,{__init__:c}),i)}return Object.keys(e).forEach(function(t){if("__init__"===t||"__depends__"===t)return;const n=e[t];if("private"===n[2])return void(r[t]=n);const o=n[0],i=n[1];r[t]=[_[o],h(o,i),o]}),x(e,l)}function b(e,t){return-1!==e.indexOf(t)||-1!==(e=(t.__depends__||[]).reduce(b,e)).indexOf(t)?e:e.concat(t)}this.get=f,this.invoke=y,this.instantiate=v,this.createChild=m,this.init=function(e){const t=e.reduce(b,[]).map(E);let n=!1;return function(){n||(n=!0,t.forEach(e=>e()))}}(e)}function h(e,t){return"value"!==e&&i(t)&&(t=a(t.slice())),t}function f(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}function g(e,t){var n=this;t=t||1e3,e.on(["render.shape","render.connection"],t,function(e,t){var o=e.type,r=t.element,i=t.gfx,s=t.attrs;if(n.canRender(r))return"render.shape"===o?n.drawShape(i,r,s):n.drawConnection(i,r,s)}),e.on(["render.getShapePath","render.getConnectionPath"],t,function(e,t){if(n.canRender(t))return"render.getShapePath"===e.type?n.getShapePath(t):n.getConnectionPath(t)})}g.prototype.canRender=function(e){},g.prototype.drawShape=function(e,t){},g.prototype.drawConnection=function(e,t){},g.prototype.getShapePath=function(e){},g.prototype.getConnectionPath=function(e){};const v=Object.prototype.toString,y=Object.prototype.hasOwnProperty;function A(e){return void 0===e}function m(e){return void 0!==e}function _(e){return null==e}function x(e){return"[object Array]"===v.call(e)}function E(e){return"[object Object]"===v.call(e)}function b(e){return"[object Number]"===v.call(e)}function w(e){const t=v.call(e);return"[object Function]"===t||"[object AsyncFunction]"===t||"[object GeneratorFunction]"===t||"[object AsyncGeneratorFunction]"===t||"[object Proxy]"===t}function C(e){return"[object String]"===v.call(e)}function j(e,t){return!_(e)&&y.call(e,t)}function k(e,t){const n=L(t);let o;return S(e,function(e,t){if(n(e,t))return o=e,!1}),o}function B(e,t){const n=L(t);let o=[];return S(e,function(e,t){n(e,t)&&o.push(e)}),o}function S(e,t){let n,o;if(A(e))return;const r=x(e)?W:H;for(let i in e)if(j(e,i)&&(n=e[i],o=t(n,r(i)),!1===o))return n}function D(e,t,n){return S(e,function(e,o){n=t(n,e,o)}),n}function M(e,t){return!!D(e,function(e,n,o){return e&&t(n,o)},!0)}function z(e,t){let n=[];return S(e,function(e,o){n.push(t(e,o))}),n}function P(e){return z(e,e=>e)}function O(e,t,n={}){return t=F(t),S(e,function(e){let o=t(e)||"_",r=n[o];r||(r=n[o]=[]),r.push(e)}),n}function $(e,...t){e=F(e);let n={};return S(t,t=>O(t,e,n)),z(n,function(e,t){return e[0]})}function R(e,t){t=F(t);let n=[];return S(e,function(e,o){let r=t(e,o),i={d:r,v:e};for(var s=0;s<n.length;s++){let{d:e}=n[s];if(r<e)return void n.splice(s,0,i)}n.push(i)}),z(n,e=>e.v)}function T(e){return function(t){return M(e,function(e,n){return t[n]===e})}}function F(e){return w(e)?e:t=>t[e]}function L(e){return w(e)?e:t=>t===e}function H(e){return e}function W(e){return Number(e)}function I(e,t){return e.bind(t)}function N(e,...t){return Object.assign(e,...t)}function q(e,t){let n={},o=Object(e);return S(t,function(t){t in o&&(n[t]=e[t])}),n}function V(e,t){let n={};return S(Object(e),function(e,o){-1===t.indexOf(o)&&(n[o]=e)}),n}function U(e,t){return function(e,t){t.appendChild(function(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch(e){}return e}(e,t))}(t,e),e}var G={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":2,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":2,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function Y(e,t,n){var o=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=G[o];r?(2===r&&"number"==typeof n&&(n=String(n)+"px"),e.style[o]=n):e.setAttributeNS(null,t,n)}function X(e,t,n){if("string"==typeof t){if(void 0===n)return function(e,t){return G[t]?e.style[t]:e.getAttributeNS(null,t)}(e,t);Y(e,t,n)}else!function(e,t){var n,o,r=Object.keys(t);for(n=0;o=r[n];n++)Y(e,o,t[o])}(e,t);return e}const K=Object.prototype.toString;function Z(e){return new Q(e)}function Q(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}function J(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}function ee(e){return e.cloneNode(!0)}Q.prototype.add=function(e){return this.list.add(e),this},Q.prototype.remove=function(e){return"[object RegExp]"==K.call(e)?this.removeMatching(e):(this.list.remove(e),this)},Q.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},Q.prototype.toggle=function(e,t){return void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this},Q.prototype.array=function(){return Array.from(this.list)},Q.prototype.has=Q.prototype.contains=function(e){return this.list.contains(e)};var te="http://www.w3.org/2000/svg",ne='<svg xmlns="'+te+'"';function oe(e,t){var n;return"<"===(e=e.trim()).charAt(0)?(n=function(e){var t=!1;"<svg"===e.substring(0,4)?-1===e.indexOf(te)&&(e=ne+e.substring(4)):(e=ne+">"+e+"</svg>",t=!0);var n=function(e){var t;return(t=new DOMParser).async=!1,t.parseFromString(e,"text/xml")}(e);if(!t)return n;for(var o=document.createDocumentFragment(),r=n.firstChild;r.firstChild;)o.appendChild(r.firstChild);return o}(e).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(te,e),t&&X(n,t),n}var re=null;function ie(){return null===re&&(re=oe("svg")),re}function se(e,t){var n,o,r=Object.keys(t);for(n=0;o=r[n];n++)e[o]=t[o];return e}function ae(e){return e?ie().createSVGTransformFromMatrix(e):ie().createSVGTransform()}function ce(e){var t=e.parentNode;return t&&t.removeChild(e),e}function le(e,t){return t instanceof SVGMatrix?e.createSVGTransformFromMatrix(t):t}function ue(e,t){var n=e.transform.baseVal;return t&&(Array.isArray(t)||(t=[t]),function(e,t){var n,o;for(e.clear(),n=0;o=t[n];n++)e.appendItem(le(e,o))}(n,t)),n.consolidate()}function pe(e){return e.flat().join(",").replace(/,?([A-Za-z]),?/g,"$1")}function de(e){return["L",e.x,e.y]}function he(e,t,n){return["C",e.x,e.y,t.x,t.y,n.x,n.y]}function fe(e,t){const n=e.length,o=[(r=e[0],["M",r.x,r.y])];var r;for(let r=1;r<n;r++){const n=e[r-1],i=e[r],s=e[r+1];if(!s||!t){o.push(de(i));continue}const a=Math.min(t,ve(i.x-n.x,i.y-n.y),ve(s.x-i.x,s.y-i.y));if(!a){o.push(de(i));continue}const c=ge(i,n,a),l=ge(i,n,.5*a),u=ge(i,s,a),p=ge(i,s,.5*a);o.push(de(c)),o.push(he(l,p,u))}return o}function ge(e,t,n){const o=t.x-e.x,r=t.y-e.y,i=n/ve(o,r);return{x:e.x+o*i,y:e.y+r*i}}function ve(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}function ye(e,t,n){b(t)&&(n=t,t=null),t||(t={});const o=oe("path",t);return b(n)&&(o.dataset.cornerRadius=String(n)),Ae(o,e)}function Ae(e,t){return X(e,{d:pe(fe(t,parseInt(e.dataset.cornerRadius,10)||0))}),e}function me(e){return B(e,function(t){return!k(e,function(e){return e!==t&&_e(t,e)})})}function _e(e,t){if(t){if(e===t)return t;if(e.parent)return _e(e.parent,t)}}function xe(e,t,n){var o=!n||-1===e.indexOf(t);return o&&e.push(t),o}function Ee(e,t,n){n=n||0,x(e)||(e=[e]),S(e,function(e,o){var r=t(e,o,n);x(r)&&r.length&&Ee(r,t,n+1)})}function be(e,t){return function(e,t,n){var o=[],r=[];return Ee(e,function(e,i,s){xe(o,e,t);var a=e.children;if((-1===n||s<n)&&a&&xe(r,a,t))return a}),o}(e,!t,-1)}function we(e,t){var n,o,r,i;return t=!!t,x(e)||(e=[e]),S(e,function(e){var s=e;e.waypoints&&!t&&(s=we(e.waypoints,!0));var a=s.x,c=s.y,l=s.height||0,u=s.width||0;(a<n||void 0===n)&&(n=a),(c<o||void 0===o)&&(o=c),(a+u>r||void 0===r)&&(r=a+u),(c+l>i||void 0===i)&&(i=c+l)}),{x:n,y:o,height:i-o,width:r-n}}function Ce(e){return"waypoints"in e?"connection":"x"in e?"shape":"root"}function je(e){return!(!e||!e.isFrame)}function ke(e,t){return N({},e||{},t||{})}function Be(e,t){g.call(this,e,1),this.CONNECTION_STYLE=t.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=t.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=t.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}f(Be,g),Be.prototype.canRender=function(){return!0},Be.prototype.drawShape=function(e,t,n){var o=oe("rect");return X(o,{x:0,y:0,width:t.width||0,height:t.height||0}),je(t)?X(o,N({},this.FRAME_STYLE,n||{})):X(o,N({},this.SHAPE_STYLE,n||{})),U(e,o),o},Be.prototype.drawConnection=function(e,t,n){var o=ye(t.waypoints,N({},this.CONNECTION_STYLE,n||{}));return U(e,o),o},Be.prototype.getShapePath=function(e){var t=e.x,n=e.y,o=e.width;return pe([["M",t,n],["l",o,0],["l",0,e.height],["l",-o,0],["z"]])},Be.prototype.getConnectionPath=function(e){var t,n,o=e.waypoints,r=[];for(t=0;n=o[t];t++)n=n.original||n,r.push([0===t?"M":"L",n.x,n.y]);return pe(r)},Be.$inject=["eventBus","styles"];const Se={__init__:["defaultRenderer"],defaultRenderer:["type",Be],styles:["type",function(){var e={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},t=this;this.cls=function(e,t,n){return N(this.style(t,n),{class:e})},this.style=function(t,n){x(t)||n||(n=t,t=[]);var o=D(t,function(t,n){return N(t,e[n]||{})},{});return n?N(o,n):o},this.computeStyle=function(e,n,o){return x(n)||(o=n,n=[]),t.style(n||[],N({},o,e||{}))}}]};function De(e,t){return t.forEach(function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach(function(n){if("default"!==n&&!(n in e)){var o=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,o.get?o:{enumerable:!0,get:function(){return t[n]}})}})}),Object.freeze(e)}const Me=Object.prototype.toString,ze=Object.prototype.hasOwnProperty;function Pe(e,t){return ze.call(e,t)}function Oe(e,t){let n,o;if(void 0===e)return;const r=(i=e,"[object Array]"===Me.call(i)?Re:$e);var i;for(let i in e)if(Pe(e,i)&&(n=e[i],o=t(n,r(i)),!1===o))return n}function $e(e){return e}function Re(e){return Number(e)}function Te(e,...t){const n=e.style;return Oe(t,function(e){e&&Oe(e,function(e,t){n[t]=e})}),e}function Fe(e,t,n){return 2==arguments.length?e.getAttribute(t):null===n?e.removeAttribute(t):(e.setAttribute(t,n),e)}const Le=Object.prototype.toString;function He(e){return new We(e)}function We(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}function Ie(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}function Ne(e,t,n){var o=n?e:e.parentNode;return o&&"function"==typeof o.closest&&o.closest(t)||null}We.prototype.add=function(e){return this.list.add(e),this},We.prototype.remove=function(e){return"[object RegExp]"==Le.call(e)?this.removeMatching(e):(this.list.remove(e),this)},We.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},We.prototype.toggle=function(e,t){return void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this},We.prototype.array=function(){return Array.from(this.list)},We.prototype.has=We.prototype.contains=function(e){return this.list.contains(e)};var qe,Ve,Ue,Ge={};function Ye(){qe=window.addEventListener?"addEventListener":"attachEvent",Ve=window.removeEventListener?"removeEventListener":"detachEvent",Ue="addEventListener"!==qe?"on":""}var Xe,Ke=De({__proto__:null,bind:Ge.bind=function(e,t,n,o){return qe||Ye(),e[qe](Ue+t,n,o||!1),n},unbind:Ge.unbind=function(e,t,n,o){return Ve||Ye(),e[Ve](Ue+t,n,o||!1),n},default:Ge},[Ge]),Ze=["focus","blur"],Qe=function(e,t,n,o,r){return-1!==Ze.indexOf(n)&&(r=!0),Ke.bind(e,n,function(n){var r=n.target||n.srcElement;n.delegateTarget=Ne(r,t,!0),n.delegateTarget&&o.call(e,n)},r)},Je=function(e,t,n,o){return-1!==Ze.indexOf(t)&&(o=!0),Ke.unbind(e,t,n,o)},et=!1;"undefined"!=typeof document&&((Xe=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',et=!Xe.getElementsByTagName("link").length,Xe=void 0);var tt={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:et?[1,"X<div>","</div>"]:[0,"",""]};tt.td=tt.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],tt.option=tt.optgroup=[1,'<select multiple="multiple">',"</select>"],tt.thead=tt.tbody=tt.colgroup=tt.caption=tt.tfoot=[1,"<table>","</table>"],tt.polyline=tt.ellipse=tt.polygon=tt.circle=tt.text=tt.line=tt.path=tt.rect=tt.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];var nt=function(e,t){if("string"!=typeof e)throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var o=n[1];if("body"==o)return(r=t.createElement("html")).innerHTML=e,r.removeChild(r.lastChild);var r,i=Object.prototype.hasOwnProperty.call(tt,o)?tt[o]:tt._default,s=i[0],a=i[1],c=i[2];for((r=t.createElement("div")).innerHTML=a+e+c;s--;)r=r.lastChild;if(r.firstChild==r.lastChild)return r.removeChild(r.firstChild);for(var l=t.createDocumentFragment();r.firstChild;)l.appendChild(r.removeChild(r.firstChild));return l};function ot(e,t){return e&&"function"==typeof e.matches&&e.matches(t)||!1}function rt(e,t){return(t=t||document).querySelector(e)}function it(e){e.parentNode&&e.parentNode.removeChild(e)}function st(e,t){if(!e||!t)return-1;var n=e.indexOf(t);return-1!==n&&e.splice(n,1),n}function at(e,t,n){if(e&&t){"number"!=typeof n&&(n=-1);var o=e.indexOf(t);if(-1!==o){if(o===n)return;if(-1===n)return;e.splice(o,1)}-1!==n?e.splice(n,0,t):e.push(t)}}function ct(e,t){return e&&t?e.indexOf(t):-1}var lt=/,?([a-z]),?/gi,ut=parseFloat,pt=Math,dt=pt.PI,ht=pt.min,ft=pt.max,gt=pt.pow,vt=pt.abs,yt=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?[\s]*,?[\s]*)+)/gi,At=/(-?\d*\.?\d*(?:e[-+]?\d+)?)[\s]*,?[\s]*/gi,mt=Array.isArray||function(e){return e instanceof Array};function _t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function xt(e){if("function"==typeof e||Object(e)!==e)return e;var t=new e.constructor;for(var n in e)_t(e,n)&&(t[n]=xt(e[n]));return t}function Et(e){var t=Et.ps=Et.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var n in t)_t(t,n)&&n!=e&&(t[n].sleep--,!t[n].sleep&&delete t[n])}),t[e]}function bt(e,t,n,o){return 1===arguments.length&&(t=e.y,n=e.width,o=e.height,e=e.x),{x:e,y:t,width:n,height:o,x2:e+n,y2:t+o}}function wt(){return this.join(",").replace(lt,"$1")}function Ct(e){var t=xt(e);return t.toString=wt,t}function jt(e,t,n,o,r,i,s,a,c){var l=1-c,u=gt(l,3),p=gt(l,2),d=c*c*c,h=u*t+3*p*c*o+3*l*c*c*i+d*a;return{x:zt(u*e+3*p*c*n+3*l*c*c*r+d*s),y:zt(h)}}function kt(e){var t=function(e,t,n,o,r,i,s,a){for(var c,l,u,p,d,h,f,g,v=[],y=[[],[]],A=0;A<2;++A)if(0==A?(l=6*e-12*n+6*r,c=-3*e+9*n-9*r+3*s,u=3*n-3*e):(l=6*t-12*o+6*i,c=-3*t+9*o-9*i+3*a,u=3*o-3*t),vt(c)<1e-12){if(vt(l)<1e-12)continue;0<(p=-u/l)&&p<1&&v.push(p)}else f=l*l-4*u*c,g=pt.sqrt(f),f<0||(0<(d=(-l+g)/(2*c))&&d<1&&v.push(d),0<(h=(-l-g)/(2*c))&&h<1&&v.push(h));for(var m,_=v.length,x=_;_--;)m=1-(p=v[_]),y[0][_]=m*m*m*e+3*m*m*p*n+3*m*p*p*r+p*p*p*s,y[1][_]=m*m*m*t+3*m*m*p*o+3*m*p*p*i+p*p*p*a;return y[0][x]=e,y[1][x]=t,y[0][x+1]=s,y[1][x+1]=a,y[0].length=y[1].length=x+2,{x0:ht(...y[0]),y0:ht(...y[1]),x1:ft(...y[0]),y1:ft(...y[1])}}(...e);return bt(t.x0,t.y0,t.x1-t.x0,t.y1-t.y0)}function Bt(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height}function St(e,t,n,o,r){return e*(e*(-3*t+9*n-9*o+3*r)+6*t-12*n+6*o)-3*t+3*n}function Dt(e,t,n,o,r,i,s,a,c){null==c&&(c=1);for(var l=(c=c>1?1:c<0?0:c)/2,u=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],p=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0,h=0;h<12;h++){var f=l*u[h]+l,g=St(f,e,n,r,s),v=St(f,t,o,i,a),y=g*g+v*v;d+=p[h]*pt.sqrt(y)}return l*d}function Mt(e,t,n,o,r,i,s,a){if(!(ft(e,n)<ht(r,s)||ht(e,n)>ft(r,s)||ft(t,o)<ht(i,a)||ht(t,o)>ft(i,a))){var c=(e*o-t*n)*(i-a)-(t-o)*(r*a-i*s),l=(e-n)*(i-a)-(t-o)*(r-s);if(l){var u=zt(((e*o-t*n)*(r-s)-(e-n)*(r*a-i*s))/l),p=zt(c/l),d=+u.toFixed(2),h=+p.toFixed(2);if(!(d<+ht(e,n).toFixed(2)||d>+ft(e,n).toFixed(2)||d<+ht(r,s).toFixed(2)||d>+ft(r,s).toFixed(2)||h<+ht(t,o).toFixed(2)||h>+ft(t,o).toFixed(2)||h<+ht(i,a).toFixed(2)||h>+ft(i,a).toFixed(2)))return{x:u,y:p}}}}function zt(e){return Math.round(1e11*e)/1e11}function Pt(e,t,n){if(o=kt(e),r=kt(t),o=bt(o),!(Bt(r=bt(r),o.x,o.y)||Bt(r,o.x2,o.y)||Bt(r,o.x,o.y2)||Bt(r,o.x2,o.y2)||Bt(o,r.x,r.y)||Bt(o,r.x2,r.y)||Bt(o,r.x,r.y2)||Bt(o,r.x2,r.y2)||(o.x<r.x2&&o.x>r.x||r.x<o.x2&&r.x>o.x)&&(o.y<r.y2&&o.y>r.y||r.y<o.y2&&r.y>o.y)))return n?0:[];for(var o,r,i=Dt(...e),s=Dt(...t),a=$t(e)?1:~~(i/5)||1,c=$t(t)?1:~~(s/5)||1,l=[],u=[],p={},d=n?0:[],h=0;h<a+1;h++){var f=jt(...e,h/a);l.push({x:f.x,y:f.y,t:h/a})}for(h=0;h<c+1;h++)f=jt(...t,h/c),u.push({x:f.x,y:f.y,t:h/c});for(h=0;h<a;h++)for(var g=0;g<c;g++){var v,y=l[h],A=l[h+1],m=u[g],_=u[g+1],x=vt(A.x-y.x)<.01?"y":"x",E=vt(_.x-m.x)<.01?"y":"x",b=Mt(y.x,y.y,A.x,A.y,m.x,m.y,_.x,_.y);if(b){if(p[v=b.x.toFixed(9)+"#"+b.y.toFixed(9)])continue;p[v]=!0;var w=y.t+vt((b[x]-y[x])/(A[x]-y[x]))*(A.t-y.t),C=m.t+vt((b[E]-m[E])/(_[E]-m[E]))*(_.t-m.t);w>=0&&w<=1&&C>=0&&C<=1&&(n?d++:d.push({x:b.x,y:b.y,t1:w,t2:C}))}}return d}function Ot(e){var t=Et(e);if(t.abs)return Ct(t.abs);if(mt(e)&&mt(e&&e[0])||(e=function(e){if(!e)return null;var t=Et(e);if(t.arr)return xt(t.arr);var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},o=[];return mt(e)&&mt(e[0])&&(o=xt(e)),o.length||String(e).replace(yt,function(e,t,r){var i=[],s=t.toLowerCase();for(r.replace(At,function(e,t){t&&i.push(+t)}),"m"==s&&i.length>2&&(o.push([t,...i.splice(0,2)]),s="l",t="m"==t?"l":"L");i.length>=n[s]&&(o.push([t,...i.splice(0,n[s])]),n[s]););}),o.toString=Et.toString,t.arr=xt(o),o}(e)),!e||!e.length)return[["M",0,0]];var n,o=[],r=0,i=0,s=0,a=0,c=0;"M"==e[0][0]&&(s=r=+e[0][1],a=i=+e[0][2],c++,o[0]=["M",r,i]);for(var l,u,p=c,d=e.length;p<d;p++){if(o.push(l=[]),(n=(u=e[p])[0])!=n.toUpperCase())switch(l[0]=n.toUpperCase(),l[0]){case"A":l[1]=u[1],l[2]=u[2],l[3]=u[3],l[4]=u[4],l[5]=u[5],l[6]=+u[6]+r,l[7]=+u[7]+i;break;case"V":l[1]=+u[1]+i;break;case"H":l[1]=+u[1]+r;break;case"M":s=+u[1]+r,a=+u[2]+i;default:for(var h=1,f=u.length;h<f;h++)l[h]=+u[h]+(h%2?r:i)}else for(var g=0,v=u.length;g<v;g++)l[g]=u[g];switch(n=n.toUpperCase(),l[0]){case"Z":r=+s,i=+a;break;case"H":r=l[1];break;case"V":i=l[1];break;case"M":s=l[l.length-2],a=l[l.length-1];default:r=l[l.length-2],i=l[l.length-1]}}return o.toString=wt,t.abs=Ct(o),o}function $t(e){return e[0]===e[2]&&e[1]===e[3]&&e[4]===e[6]&&e[5]===e[7]}function Rt(e,t,n,o){return[e,t,n,o,n,o]}function Tt(e,t,n,o,r,i){var s=1/3,a=2/3;return[s*e+a*n,s*t+a*o,s*r+a*n,s*i+a*o,r,i]}function Ft(e,t,n,o,r,i,s,a,c,l){var u,p=120*dt/180,d=dt/180*(+r||0),h=[],f=function e(){var t=Array.prototype.slice.call(arguments,0).join(""),n=e.cache=e.cache||{},o=e.count=e.count||[];return _t(n,t)?(function(e,t){for(var n=0,o=e.length;n<o;n++)if(e[n]===t)return e.push(e.splice(n,1)[0])}(o,t),n[t]):(o.length>=1e3&&delete n[o.shift()],o.push(t),n[t]=function(e,t,n){return{x:e*pt.cos(n)-t*pt.sin(n),y:e*pt.sin(n)+t*pt.cos(n)}}(...arguments),n[t])};if(l)b=l[0],w=l[1],x=l[2],E=l[3];else{e=(u=f(e,t,-d)).x,t=u.y;var g=(e-(a=(u=f(a,c,-d)).x))/2,v=(t-(c=u.y))/2,y=g*g/(n*n)+v*v/(o*o);y>1&&(n*=y=pt.sqrt(y),o*=y);var A=n*n,m=o*o,_=(i==s?-1:1)*pt.sqrt(vt((A*m-A*v*v-m*g*g)/(A*v*v+m*g*g))),x=_*n*v/o+(e+a)/2,E=_*-o*g/n+(t+c)/2,b=pt.asin(((t-E)/o).toFixed(9)),w=pt.asin(((c-E)/o).toFixed(9));(b=e<x?dt-b:b)<0&&(b=2*dt+b),(w=a<x?dt-w:w)<0&&(w=2*dt+w),s&&b>w&&(b-=2*dt),!s&&w>b&&(w-=2*dt)}var C=w-b;if(vt(C)>p){var j=w,k=a,B=c;w=b+p*(s&&w>b?1:-1),h=Ft(a=x+n*pt.cos(w),c=E+o*pt.sin(w),n,o,r,0,s,k,B,[w,j,x,E])}C=w-b;var S=pt.cos(b),D=pt.sin(b),M=pt.cos(w),z=pt.sin(w),P=pt.tan(C/4),O=4/3*n*P,$=4/3*o*P,R=[e,t],T=[e+O*D,t-$*S],F=[a+O*z,c-$*M],L=[a,c];if(T[0]=2*R[0]-T[0],T[1]=2*R[1]-T[1],l)return[T,F,L].concat(h);for(var H=[],W=0,I=(h=[T,F,L].concat(h).join().split(",")).length;W<I;W++)H[W]=W%2?f(h[W-1],h[W],d).y:f(h[W],h[W+1],d).x;return H}function Lt(e){var t=Et(e);if(t.curve)return Ct(t.curve);for(var n=Ot(e),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},r=function(e,t,n){var o,r;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C",...Ft(t.x,t.y,...e.slice(1))];break;case"S":"C"==n||"S"==n?(o=2*t.x-t.bx,r=2*t.y-t.by):(o=t.x,r=t.y),e=["C",o,r,...e.slice(1)];break;case"T":"Q"==n||"T"==n?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C",...Tt(t.x,t.y,t.qx,t.qy,e[1],e[2])];break;case"Q":t.qx=e[1],t.qy=e[2],e=["C",...Tt(t.x,t.y,e[1],e[2],e[3],e[4])];break;case"L":e=["C",...Rt(t.x,t.y,e[1],e[2])];break;case"H":e=["C",...Rt(t.x,t.y,e[1],t.y)];break;case"V":e=["C",...Rt(t.x,t.y,t.x,e[1])];break;case"Z":e=["C",...Rt(t.x,t.y,t.X,t.Y)]}return e},i=function(e,t){if(e[t].length>7){e[t].shift();for(var o=e[t];o.length;)s[t]="A",e.splice(t++,0,["C",...o.splice(0,6)]);e.splice(t,1),u=n.length}},s=[],a="",c="",l=0,u=n.length;l<u;l++){n[l]&&(a=n[l][0]),"C"!=a&&(s[l]=a,l&&(c=s[l-1])),n[l]=r(n[l],o,c),"A"!=s[l]&&"C"==a&&(s[l]="C"),i(n,l);var p=n[l],d=p.length;o.x=p[d-2],o.y=p[d-1],o.bx=ut(p[d-4])||o.x,o.by=ut(p[d-3])||o.y}return t.curve=Ct(n),n}function Ht(e){return E(e)&&j(e,"waypoints")}function Wt(e){return E(e)&&j(e,"labelTarget")}function It(e){return{x:Math.round(e.x),y:Math.round(e.y)}}function Nt(e){return{top:e.y,right:e.x+(e.width||0),bottom:e.y+(e.height||0),left:e.x}}function qt(e){return{x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}}function Vt(e){return Ht(e)?function(e){for(var t=e.waypoints,n=t.reduce(function(e,n,o){var r=t[o-1];if(r){var i=e[e.length-1],s=i&&i.endLength||0,a=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}(r,n);e.push({start:r,end:n,startLength:s,endLength:s+a,length:a})}return e},[]),o=n.reduce(function(e,t){return e+t.length},0)/2,r=0,i=n[r];i.endLength<o;)i=n[++r];var s=(o-i.startLength)/i.length;return{x:i.start.x+(i.end.x-i.start.x)*s,y:i.start.y+(i.end.y-i.start.y)*s}}(e):It({x:(t=e).x+(t.width||0)/2,y:t.y+(t.height||0)/2});var t}function Ut(e,t,n){var o=function(e,t){return function(e,t,n){e=Lt(e),t=Lt(t);for(var o,r,i,s,a,c,l,u,p,d,h=[],f=0,g=e.length;f<g;f++){var v=e[f];if("M"==v[0])o=a=v[1],r=c=v[2];else{"C"==v[0]?(o=(p=[o,r,...v.slice(1)])[6],r=p[7]):(p=[o,r,o,r,a,c,a,c],o=a,r=c);for(var y=0,A=t.length;y<A;y++){var m=t[y];if("M"==m[0])i=l=m[1],s=u=m[2];else{"C"==m[0]?(i=(d=[i,s,...m.slice(1)])[6],s=d[7]):(d=[i,s,i,s,l,u,l,u],i=l,s=u);for(var _=Pt(p,d,n),x=0,E=_.length;x<E;x++)_[x].segment1=f,_[x].segment2=y,_[x].bez1=p,_[x].bez2=d;h=h.concat(_)}}}}return h}(e,t)}(e,t);return 1===o.length||2===o.length&&function(e,t){return e&&t?Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)):-1}(o[0],o[1])<1?It(o[0]):o.length>1?(o=R(o,function(e){var t=Math.floor(100*e.t2)||1;return t=((t=100-t)<10?"0":"")+t,e.segment2+"#"+t}),It(o[n?0:o.length-1])):null}function Gt(e,t){return Math.round(e*t)/t}function Yt(e){return b(e)?e+"px":e}function Xt(e,t,n){const o=oe("g");Z(o).add(t);const r=void 0!==n?n:e.childNodes.length-1;return e.insertBefore(o,e.childNodes[r]||null),o}const Kt={shape:["x","y","width","height"],connection:["waypoints"]};function Zt(e,t,n,o){this._eventBus=t,this._elementRegistry=o,this._graphicsFactory=n,this._rootsIdx=0,this._layers={},this._planes=[],this._rootElement=null,this._focused=!1,this._init(e||{})}function Qt(e,t){const n="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttribute("transform",n)}Zt.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"],Zt.prototype._init=function(e){const t=this._eventBus,n=this._container=function(e){const t=(e=N({},{width:"100%",height:"100%"},e)).container||document.body,n=document.createElement("div");return n.setAttribute("class","djs-container djs-parent"),Te(n,{position:"relative",overflow:"hidden",width:Yt(e.width),height:Yt(e.height)}),t.appendChild(n),n}(e),o=this._svg=oe("svg");X(o,{width:"100%",height:"100%"}),Fe(o,"tabindex",0),e.autoFocus&&t.on("element.hover",()=>{this.restoreFocus()}),t.on("element.mousedown",500,e=>{this.focus()}),o.addEventListener("focusin",()=>{this._setFocused(!0)}),o.addEventListener("focusout",()=>{this._setFocused(!1)}),U(n,o);const r=this._viewport=Xt(o,"viewport");e.deferUpdate&&(this._viewboxChanged=function(e){let t,n,o,r;function i(t){let i=Date.now(),c=t?0:r+300-i;if(c>0)return s(c);e.apply(o,n),a()}function s(e){t=setTimeout(i,e)}function a(){t&&clearTimeout(t),t=r=n=o=void 0}function c(...e){r=Date.now(),n=e,o=this,t||s(300)}return c.flush=function(){t&&i(!0),a()},c.cancel=a,c}(I(this._viewboxChanged,this))),t.on("diagram.init",()=>{t.fire("canvas.init",{svg:o,viewport:r})}),t.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed","root.set"],()=>{delete this._cachedViewbox}),t.on("diagram.destroy",500,this._destroy,this),t.on("diagram.clear",500,this._clear,this)},Zt.prototype._destroy=function(){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});const e=this._container.parentNode;e&&e.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._planes,delete this._rootElement,delete this._viewport},Zt.prototype._setFocused=function(e){e!=this._focused&&(this._focused=e,this._eventBus.fire("canvas.focus.changed",{focused:e}))},Zt.prototype._clear=function(){this._elementRegistry.getAll().forEach(e=>{const t=Ce(e);"root"===t?this.removeRootElement(e):this._removeElement(e,t)}),this._planes=[],this._rootElement=null,delete this._cachedViewbox},Zt.prototype.focus=function(){this._svg.focus({preventScroll:!0}),this._setFocused(!0)},Zt.prototype.restoreFocus=function(){document.activeElement===document.body&&this.focus()},Zt.prototype.isFocused=function(){return this._focused},Zt.prototype.getDefaultLayer=function(){return this.getLayer("base",0)},Zt.prototype.getLayer=function(e,t){if(!e)throw new Error("must specify a name");let n=this._layers[e];if(n||(n=this._layers[e]=this._createLayer(e,t)),void 0!==t&&n.index!==t)throw new Error("layer <"+e+"> already created at index <"+t+">");return n.group},Zt.prototype._getChildIndex=function(e){return D(this._layers,function(t,n){return n.visible&&e>=n.index&&t++,t},0)},Zt.prototype._createLayer=function(e,t){void 0===t&&(t=1);const n=this._getChildIndex(t);return{group:Xt(this._viewport,"layer-"+e,n),index:t,visible:!0}},Zt.prototype.showLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=this._viewport,o=t.group,r=t.index;if(t.visible)return o;const i=this._getChildIndex(r);return n.insertBefore(o,n.childNodes[i]||null),t.visible=!0,o},Zt.prototype.hideLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=t.group;return t.visible?(ce(n),t.visible=!1,n):n},Zt.prototype._removeLayer=function(e){const t=this._layers[e];t&&(delete this._layers[e],ce(t.group))},Zt.prototype.getActiveLayer=function(){const e=this._findPlaneForRoot(this.getRootElement());return e?e.layer:null},Zt.prototype.findRoot=function(e){if("string"==typeof e&&(e=this._elementRegistry.get(e)),!e)return;const t=this._findPlaneForRoot(function(e){for(;e.parent;)e=e.parent;return e}(e))||{};return t.rootElement},Zt.prototype.getRootElements=function(){return this._planes.map(function(e){return e.rootElement})},Zt.prototype._findPlaneForRoot=function(e){return k(this._planes,function(t){return t.rootElement===e})},Zt.prototype.getContainer=function(){return this._container},Zt.prototype._updateMarker=function(e,t,n){let o;e.id||(e=this._elementRegistry.get(e)),e.markers=e.markers||new Set,o=this._elementRegistry._elements[e.id],o&&(S([o.gfx,o.secondaryGfx],function(o){o&&(n?(e.markers.add(t),Z(o).add(t)):(e.markers.delete(t),Z(o).remove(t)))}),this._eventBus.fire("element.marker.update",{element:e,gfx:o.gfx,marker:t,add:!!n}))},Zt.prototype.addMarker=function(e,t){this._updateMarker(e,t,!0)},Zt.prototype.removeMarker=function(e,t){this._updateMarker(e,t,!1)},Zt.prototype.hasMarker=function(e,t){return e.id||(e=this._elementRegistry.get(e)),!!e.markers&&e.markers.has(t)},Zt.prototype.toggleMarker=function(e,t){this.hasMarker(e,t)?this.removeMarker(e,t):this.addMarker(e,t)},Zt.prototype.getRootElement=function(){const e=this._rootElement;return e||this._planes.length?e:this.setRootElement(this.addRootElement(null))},Zt.prototype.addRootElement=function(e){const t=this._rootsIdx++;e||(e={id:"__implicitroot_"+t,children:[],isImplicit:!0});const n=e.layer="root-"+t;this._ensureValid("root",e);const o=this.getLayer(n,0);return this.hideLayer(n),this._addRoot(e,o),this._planes.push({rootElement:e,layer:o}),e},Zt.prototype.removeRootElement=function(e){if("string"==typeof e&&(e=this._elementRegistry.get(e)),this._findPlaneForRoot(e))return this._removeRoot(e),this._removeLayer(e.layer),this._planes=this._planes.filter(function(t){return t.rootElement!==e}),this._rootElement===e&&(this._rootElement=null),e},Zt.prototype.setRootElement=function(e){if(e===this._rootElement)return e;let t;if(!e)throw new Error("rootElement required");return t=this._findPlaneForRoot(e),t||(e=this.addRootElement(e)),this._setRoot(e),e},Zt.prototype._removeRoot=function(e){const t=this._elementRegistry,n=this._eventBus;n.fire("root.remove",{element:e}),n.fire("root.removed",{element:e}),t.remove(e)},Zt.prototype._addRoot=function(e,t){const n=this._elementRegistry,o=this._eventBus;o.fire("root.add",{element:e}),n.add(e,t),o.fire("root.added",{element:e,gfx:t})},Zt.prototype._setRoot=function(e,t){const n=this._rootElement;n&&(this._elementRegistry.updateGraphics(n,null,!0),this.hideLayer(n.layer)),e&&(t||(t=this._findPlaneForRoot(e).layer),this._elementRegistry.updateGraphics(e,this._svg,!0),this.showLayer(e.layer)),this._rootElement=e,this._eventBus.fire("root.set",{element:e})},Zt.prototype._ensureValid=function(e,t){if(!t.id)throw new Error("element must have an id");if(this._elementRegistry.get(t.id))throw new Error("element <"+t.id+"> already exists");const n=Kt[e],o=M(n,function(e){return void 0!==t[e]});if(!o)throw new Error("must supply { "+n.join(", ")+" } with "+e)},Zt.prototype._setParent=function(e,t,n){at(t.children,e,n),e.parent=t},Zt.prototype._addElement=function(e,t,n,o){n=n||this.getRootElement();const r=this._eventBus,i=this._graphicsFactory;this._ensureValid(e,t),r.fire(e+".add",{element:t,parent:n}),this._setParent(t,n,o);const s=i.create(e,t,o);return this._elementRegistry.add(t,s),i.update(e,t,s),r.fire(e+".added",{element:t,gfx:s}),t},Zt.prototype.addShape=function(e,t,n){return this._addElement("shape",e,t,n)},Zt.prototype.addConnection=function(e,t,n){return this._addElement("connection",e,t,n)},Zt.prototype._removeElement=function(e,t){const n=this._elementRegistry,o=this._graphicsFactory,r=this._eventBus;if(e=n.get(e.id||e))return r.fire(t+".remove",{element:e}),o.remove(e),st(e.parent&&e.parent.children,e),e.parent=null,r.fire(t+".removed",{element:e}),n.remove(e),e},Zt.prototype.removeShape=function(e){return this._removeElement(e,"shape")},Zt.prototype.removeConnection=function(e){return this._removeElement(e,"connection")},Zt.prototype.getGraphics=function(e,t){return this._elementRegistry.getGraphics(e,t)},Zt.prototype._changeViewbox=function(e){this._eventBus.fire("canvas.viewbox.changing"),e.apply(this),this._cachedViewbox=null,this._viewboxChanged()},Zt.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})},Zt.prototype.viewbox=function(e){if(void 0===e&&this._cachedViewbox)return structuredClone(this._cachedViewbox);const t=this._viewport,n=this.getSize();let o,r,i,s,a,c,l;return e?(this._changeViewbox(function(){a=Math.min(n.width/e.width,n.height/e.height);const o=this._svg.createSVGMatrix().scale(a).translate(-e.x,-e.y);ue(t,o)}),e):(i=this._rootElement?this.getActiveLayer():null,o=i&&i.getBBox()||{},s=ue(t),r=s?s.matrix:function(e,t,n,o,r,i){var s=ie().createSVGMatrix();switch(arguments.length){case 0:return s;case 1:return se(s,e);case 6:return se(s,{a:e,b:t,c:n,d:o,e:r,f:i})}}(),a=Gt(r.a,1e3),c=Gt(-r.e||0,1e3),l=Gt(-r.f||0,1e3),e=this._cachedViewbox={x:c?c/a:0,y:l?l/a:0,width:n.width/a,height:n.height/a,scale:a,inner:{width:o.width||0,height:o.height||0,x:o.x||0,y:o.y||0},outer:n})},Zt.prototype.scroll=function(e){const t=this._viewport;let n=t.getCTM();return e&&this._changeViewbox(function(){e=N({dx:0,dy:0},e||{}),n=this._svg.createSVGMatrix().translate(e.dx,e.dy).multiply(n),Qt(t,n)}),{x:n.e,y:n.f}},Zt.prototype.scrollToElement=function(e,t){let n=100;"string"==typeof e&&(e=this._elementRegistry.get(e));const o=this.findRoot(e);if(o!==this.getRootElement()&&this.setRootElement(o),o===e)return;t||(t={}),"number"==typeof t&&(n=t),t={top:t.top||n,right:t.right||n,bottom:t.bottom||n,left:t.left||n};const r=we(e),i=Nt(r),s=this.viewbox(),a=this.zoom();let c,l;s.y+=t.top/a,s.x+=t.left/a,s.width-=(t.right+t.left)/a,s.height-=(t.bottom+t.top)/a;const u=Nt(s);if(r.width<s.width&&r.height<s.height){const e=Math.max(0,i.right-u.right),t=Math.min(0,i.left-u.left),n=Math.max(0,i.bottom-u.bottom),o=Math.min(0,i.top-u.top);c=e||t,l=n||o}else c=r.x-s.x,l=r.y-s.y;this.scroll({dx:-c*a,dy:-l*a})},Zt.prototype.zoom=function(e,t){if(!e)return this.viewbox(e).scale;if("fit-viewport"===e)return this._fitViewport(t);let n,o;return this._changeViewbox(function(){"object"!=typeof t&&(n=this.viewbox().outer,t={x:n.width/2,y:n.height/2}),o=this._setZoom(e,t)}),Gt(o.a,1e3)},Zt.prototype._fitViewport=function(e){const t=this.viewbox(),n=t.outer,o=t.inner;let r,i;return o.x>=0&&o.y>=0&&o.x+o.width<=n.width&&o.y+o.height<=n.height&&!e?i={x:0,y:0,width:Math.max(o.width+o.x,n.width),height:Math.max(o.height+o.y,n.height)}:(r=Math.min(1,n.width/o.width,n.height/o.height),i={x:o.x+(e?o.width/2-n.width/r/2:0),y:o.y+(e?o.height/2-n.height/r/2:0),width:n.width/r,height:n.height/r}),this.viewbox(i),this.viewbox(!1).scale},Zt.prototype._setZoom=function(e,t){const n=this._svg,o=this._viewport,r=n.createSVGMatrix(),i=n.createSVGPoint();let s,a,c,l,u;c=o.getCTM();const p=c.a;return t?(s=N(i,t),a=s.matrixTransform(c.inverse()),l=r.translate(a.x,a.y).scale(1/p*e).translate(-a.x,-a.y),u=c.multiply(l)):u=r.scale(e),Qt(this._viewport,u),u},Zt.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}},Zt.prototype.getAbsoluteBBox=function(e){const t=this.viewbox();let n;return n=e.waypoints?this.getGraphics(e).getBBox():e,{x:n.x*t.scale-t.x*t.scale,y:n.y*t.scale-t.y*t.scale,width:n.width*t.scale,height:n.height*t.scale}},Zt.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var Jt="data-element-id";function en(e){this._elements={},this._eventBus=e}function tn(e,t,n){var o=function(e,t,n,o){var r=n.inverse;return Object.defineProperty(e,"remove",{value:function(e){var n=this.indexOf(e);return-1!==n&&(this.splice(n,1),t.unset(e,r,o)),e}}),Object.defineProperty(e,"contains",{value:function(e){return-1!==this.indexOf(e)}}),Object.defineProperty(e,"add",{value:function(e,n){var i=this.indexOf(e);if(void 0===n){if(-1!==i)return;n=this.length}-1!==i&&this.splice(i,1),this.splice(n,0,e),-1===i&&t.set(e,r,o)}}),Object.defineProperty(e,"__refs_collection",{value:!0}),e}(n[t.name]||[],e,t,n);Object.defineProperty(n,t.name,{enumerable:t.enumerable,value:o}),o.length&&o.forEach(function(o){e.set(o,t.inverse,n)})}function nn(e,t){if(!(this instanceof nn))return new nn(e,t);e.inverse=t,t.inverse=e,this.props={},this.props[e.name]=e,this.props[t.name]=t}en.$inject=["eventBus"],en.prototype.add=function(e,t,n){var o=e.id;this._validateId(o),X(t,Jt,o),n&&X(n,Jt,o),this._elements[o]={element:e,gfx:t,secondaryGfx:n}},en.prototype.remove=function(e){var t=this._elements,n=e.id||e,o=n&&t[n];o&&(X(o.gfx,Jt,""),o.secondaryGfx&&X(o.secondaryGfx,Jt,""),delete t[n])},en.prototype.updateId=function(e,t){this._validateId(t),"string"==typeof e&&(e=this.get(e)),this._eventBus.fire("element.updateId",{element:e,newId:t});var n=this.getGraphics(e),o=this.getGraphics(e,!0);this.remove(e),e.id=t,this.add(e,n,o)},en.prototype.updateGraphics=function(e,t,n){var o=e.id||e,r=this._elements[o];return n?r.secondaryGfx=t:r.gfx=t,t&&X(t,Jt,o),t},en.prototype.get=function(e){var t;t="string"==typeof e?e:e&&X(e,Jt);var n=this._elements[t];return n&&n.element},en.prototype.filter=function(e){var t=[];return this.forEach(function(n,o){e(n,o)&&t.push(n)}),t},en.prototype.find=function(e){for(var t=this._elements,n=Object.keys(t),o=0;o<n.length;o++){var r=t[n[o]],i=r.element;if(e(i,r.gfx))return i}},en.prototype.getAll=function(){return this.filter(function(e){return e})},en.prototype.forEach=function(e){var t=this._elements;Object.keys(t).forEach(function(n){var o=t[n],r=o.element,i=o.gfx;return e(r,i)})},en.prototype.getGraphics=function(e,t){var n=e.id||e,o=this._elements[n];return o&&(t?o.secondaryGfx:o.gfx)},en.prototype._validateId=function(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")},nn.prototype.bind=function(e,t){if("string"==typeof t){if(!this.props[t])throw new Error("no property <"+t+"> in ref");t=this.props[t]}t.collection?tn(this,t,e):function(e,t,n){var o=t.inverse,r=n[t.name];Object.defineProperty(n,t.name,{configurable:t.configurable,enumerable:t.enumerable,get:function(){return r},set:function(t){if(t!==r){var i=r;r=null,i&&e.unset(i,o,n),r=t,e.set(r,o,n)}}})}(this,t,e)},nn.prototype.ensureRefsCollection=function(e,t){var n=e[t.name];return function(e){return!0===e.__refs_collection}(n)||tn(this,t,e),n},nn.prototype.ensureBound=function(e,t){(function(e,t){return Object.prototype.hasOwnProperty.call(e,t.name||t)})(e,t)||this.bind(e,t)},nn.prototype.unset=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).remove(n):e[t.name]=void 0)},nn.prototype.set=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).add(n):e[t.name]=n)};var on=new nn({name:"children",enumerable:!0,collection:!0},{name:"parent"}),rn=new nn({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),sn=new nn({name:"attachers",collection:!0},{name:"host"}),an=new nn({name:"outgoing",collection:!0},{name:"source"}),cn=new nn({name:"incoming",collection:!0},{name:"target"});function ln(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(e){var t=this.label,n=this.labels;!e&&t?n.remove(t):n.add(e,0)}}),on.bind(this,"parent"),rn.bind(this,"labels"),an.bind(this,"outgoing"),cn.bind(this,"incoming")}function un(){ln.call(this),on.bind(this,"children"),sn.bind(this,"host"),sn.bind(this,"attachers")}function pn(){ln.call(this),on.bind(this,"children")}function dn(){un.call(this),rn.bind(this,"labelTarget")}function hn(){ln.call(this),an.bind(this,"source"),cn.bind(this,"target")}f(un,ln),f(pn,un),f(dn,un),f(hn,ln);var fn={connection:hn,shape:un,label:dn,root:pn};function gn(){this._uid=12}gn.prototype.createRoot=function(e){return this.create("root",e)},gn.prototype.createLabel=function(e){return this.create("label",e)},gn.prototype.createShape=function(e){return this.create("shape",e)},gn.prototype.createConnection=function(e){return this.create("connection",e)},gn.prototype.create=function(e,t){return(t=N({},t||{})).id||(t.id=e+"_"+this._uid++),function(e,t){var n=fn[e];if(!n)throw new Error("unknown type: <"+e+">");return N(new n,t)}(e,t)};var vn="__fn",yn=Array.prototype.slice;function An(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}function mn(){}function _n(e){return e.childNodes[0]}function xn(e,t,n){var o=ae();o.setTranslate(t,n),ue(e,o)}function En(e,t){this._eventBus=e,this._elementRegistry=t}function bn(e,t,n){var o=n||t.firstChild;e!==o&&t.insertBefore(e,o)}An.prototype.on=function(e,t,n,o){if(e=x(e)?e:[e],w(t)&&(o=n,n=t,t=1e3),!b(t))throw new Error("priority must be a number");var r=n;o&&((r=I(n,o))[vn]=n[vn]||n);var i=this;e.forEach(function(e){i._addListener(e,{priority:t,callback:r,next:null})})},An.prototype.once=function(e,t,n,o){var r=this;if(w(t)&&(o=n,n=t,t=1e3),!b(t))throw new Error("priority must be a number");function i(){i.__isTomb=!0;var t=n.apply(o,arguments);return r.off(e,i),t}i[vn]=n,this.on(e,t,i)},An.prototype.off=function(e,t){e=x(e)?e:[e];var n=this;e.forEach(function(e){n._removeListener(e,t)})},An.prototype.createEvent=function(e){var t=new mn;return t.init(e),t},An.prototype.fire=function(e,t){var n,o,r,i;if(i=yn.call(arguments),"object"==typeof e&&(e=(t=e).type),!e)throw new Error("no event type specified");if(o=this._listeners[e]){n=t instanceof mn?t:this.createEvent(t),i[0]=n;var s=n.type;e!==s&&(n.type=e);try{r=this._invokeListeners(n,i,o)}finally{e!==s&&(n.type=s)}return void 0===r&&n.defaultPrevented&&(r=!1),r}},An.prototype.handleError=function(e){return!1===this.fire("error",{error:e})},An.prototype._destroy=function(){this._listeners={}},An.prototype._invokeListeners=function(e,t,n){for(var o;n&&!e.cancelBubble;)o=this._invokeListener(e,t,n),n=n.next;return o},An.prototype._invokeListener=function(e,t,n){var o;if(n.callback.__isTomb)return o;try{o=function(e,t){return e.apply(null,t)}(n.callback,t),void 0!==o&&(e.returnValue=o,e.stopPropagation()),!1===o&&e.preventDefault()}catch(e){if(!this.handleError(e))throw console.error("unhandled error in event listener",e),e}return o},An.prototype._addListener=function(e,t){var n,o=this._getListeners(e);if(o){for(;o;){if(o.priority<t.priority)return t.next=o,void(n?n.next=t:this._setListeners(e,t));n=o,o=o.next}n.next=t}else this._setListeners(e,t)},An.prototype._getListeners=function(e){return this._listeners[e]},An.prototype._setListeners=function(e,t){this._listeners[e]=t},An.prototype._removeListener=function(e,t){var n,o,r,i=this._getListeners(e);if(t)for(;i;)n=i.next,(r=i.callback)!==t&&r[vn]!==t||(o?o.next=n:this._setListeners(e,n)),o=i,i=n;else this._setListeners(e,null)},mn.prototype.stopPropagation=function(){this.cancelBubble=!0},mn.prototype.preventDefault=function(){this.defaultPrevented=!0},mn.prototype.init=function(e){N(this,e||{})},En.$inject=["eventBus","elementRegistry"],En.prototype._getChildrenContainer=function(e){var t,n=this._elementRegistry.getGraphics(e);return e.parent?(t=function(e){return e.parentNode.childNodes[1]}(n),t||(Z(t=oe("g")).add("djs-children"),U(n.parentNode,t))):t=n,t},En.prototype._clear=function(e){var t=_n(e);return Ie(t),t},En.prototype._createContainer=function(e,t,n,o){var r=oe("g");Z(r).add("djs-group"),void 0!==n?bn(r,t,t.childNodes[n]):U(t,r);var i=oe("g");Z(i).add("djs-element"),Z(i).add("djs-"+e),o&&Z(i).add("djs-frame"),U(r,i);var s=oe("g");return Z(s).add("djs-visual"),U(i,s),i},En.prototype.create=function(e,t,n){var o=this._getChildrenContainer(t.parent);return this._createContainer(e,o,n,je(t))},En.prototype.updateContainments=function(e){var t,n=this,o=this._elementRegistry;t=D(e,function(e,t){return t.parent&&(e[t.parent.id]=t.parent),e},{}),S(t,function(e){var t=e.children;if(t){var r=n._getChildrenContainer(e);S(t.slice().reverse(),function(e){bn(o.getGraphics(e).parentNode,r)})}})},En.prototype.drawShape=function(e,t,n={}){return this._eventBus.fire("render.shape",{gfx:e,element:t,attrs:n})},En.prototype.getShapePath=function(e){return this._eventBus.fire("render.getShapePath",e)},En.prototype.drawConnection=function(e,t,n={}){return this._eventBus.fire("render.connection",{gfx:e,element:t,attrs:n})},En.prototype.getConnectionPath=function(e){return this._eventBus.fire("render.getConnectionPath",e)},En.prototype.update=function(e,t,n){if(t.parent){var o=this._clear(n);if("shape"===e)this.drawShape(o,t),xn(n,t.x,t.y);else{if("connection"!==e)throw new Error("unknown type: "+e);this.drawConnection(o,t)}t.hidden?X(n,"display","none"):X(n,"display","block")}},En.prototype.remove=function(e){ce(this._elementRegistry.getGraphics(e).parentNode)};const wn={__depends__:[Se],__init__:["canvas"],canvas:["type",Zt],elementRegistry:["type",en],elementFactory:["type",gn],eventBus:["type",An],graphicsFactory:["type",En]};function Cn(e,t){this._injector=t||function(e){return t=[{config:["value",e=e||{}]},wn].concat(e.modules||[]),(n=new d(t)).init(),n;var t,n}(e),this.get("eventBus").fire("diagram.init")}function jn(e){e&&"function"==typeof e.stopPropagation&&e.stopPropagation()}function kn(e){return e.originalEvent||e.srcEvent}function Bn(e){jn(e),jn(kn(e))}function Sn(e){return e.pointers&&e.pointers.length&&(e=e.pointers[0]),e.touches&&e.touches.length&&(e=e.touches[0]),e?{x:e.clientX,y:e.clientY}:null}function Dn(){return/mac/i.test(navigator.platform)}function Mn(e,t){return(kn(e)||e).button===t}function zn(e){return Mn(e,0)}function Pn(e){var t=kn(e)||e;return zn(e)&&t.shiftKey}function On(e){return!0}function $n(e){return zn(e)||function(e){return Mn(e,1)}(e)}function Rn(e,t,n){var o=this;function r(n,o,r){var i,s;(function(e,t){return!(c[e]||zn)(t)})(n,o)||(r?s=t.getGraphics(r):(i=o.delegateTarget||o.target)&&(s=i,r=t.get(s)),s&&r&&!1===e.fire(n,{element:r,gfx:s,originalEvent:o})&&(o.stopPropagation(),o.preventDefault()))}var i={};function s(e){return i[e]}var a={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},c={"element.contextmenu":On,"element.mousedown":$n,"element.mouseup":$n,"element.click":$n,"element.dblclick":$n};function l(e,t,n,o){var s=i[n]=function(e){r(n,e)};o&&(c[n]=o),s.$delegate=Qe(e,"svg, .djs-element",t,s)}function u(e,t,n){var o=s(n);o&&Je(e,t,o.$delegate)}e.on("canvas.destroy",function(e){var t;t=e.svg,S(a,function(e,n){u(t,n,e)})}),e.on("canvas.init",function(e){var t;t=e.svg,S(a,function(e,n){l(t,n,e)})}),e.on(["shape.added","connection.added"],function(t){var n=t.element,o=t.gfx;e.fire("interactionEvents.createHit",{element:n,gfx:o})}),e.on(["shape.changed","connection.changed"],500,function(t){var n=t.element,o=t.gfx;e.fire("interactionEvents.updateHit",{element:n,gfx:o})}),e.on("interactionEvents.createHit",500,function(e){var t=e.element,n=e.gfx;o.createDefaultHit(t,n)}),e.on("interactionEvents.updateHit",function(e){var t=e.element,n=e.gfx;o.updateDefaultHit(t,n)});var p=f("djs-hit djs-hit-stroke"),d=f("djs-hit djs-hit-click-stroke"),h={all:f("djs-hit djs-hit-all"),"click-stroke":d,stroke:p,"no-move":f("djs-hit djs-hit-no-move")};function f(e,t){return t=N({stroke:"white",strokeWidth:15},t||{}),n.cls(e,["no-fill","no-border"],t)}function g(e,t){var n=h[t];if(!n)throw new Error("invalid hit type <"+t+">");return X(e,n),e}function v(e,t){U(e,t)}this.removeHits=function(e){S((e||document).querySelectorAll(".djs-hit"),ce)},this.createDefaultHit=function(e,t){var n,o=e.waypoints,r=e.isFrame;return o?this.createWaypointsHit(t,o):(n=r?"stroke":"all",this.createBoxHit(t,n,{width:e.width,height:e.height}))},this.createWaypointsHit=function(e,t){var n=ye(t);return g(n,"stroke"),v(e,n),n},this.createBoxHit=function(e,t,n){n=N({x:0,y:0},n);var o=oe("rect");return g(o,t),X(o,n),v(e,o),o},this.updateDefaultHit=function(e,t){var n=rt(".djs-hit",t);if(n)return e.waypoints?Ae(n,e.waypoints):X(n,{width:e.width,height:e.height}),n},this.fire=r,this.triggerMouseEvent=function(e,t,n){var o=a[e];if(!o)throw new Error("unmapped DOM event name <"+e+">");return r(o,t,n)},this.mouseHandler=s,this.registerEvent=l,this.unregisterEvent=u}Cn.prototype.get=function(e,t){return this._injector.get(e,t)},Cn.prototype.invoke=function(e,t,n){return this._injector.invoke(e,t,n)},Cn.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")},Cn.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")},Rn.$inject=["eventBus","elementRegistry","styles"];const Tn={__init__:["interactionEvents"],interactionEvents:["type",Rn]};function Fn(e,t){this._eventBus=e,this._canvas=t,this._selectedElements=[];var n=this;e.on(["shape.remove","connection.remove"],function(e){var t=e.element;n.deselect(t)}),e.on(["diagram.clear","root.set"],function(e){n.select(null)})}Fn.$inject=["eventBus","canvas"],Fn.prototype.deselect=function(e){var t=this._selectedElements,n=t.indexOf(e);if(-1!==n){var o=t.slice();t.splice(n,1),this._eventBus.fire("selection.changed",{oldSelection:o,newSelection:t})}},Fn.prototype.get=function(){return this._selectedElements},Fn.prototype.isSelected=function(e){return-1!==this._selectedElements.indexOf(e)},Fn.prototype.select=function(e,t){var n=this._selectedElements,o=n.slice();x(e)||(e=e?[e]:[]);var r=this._canvas,i=r.getRootElement();e=e.filter(function(e){var t=r.findRoot(e);return i===t}),t?S(e,function(e){-1===n.indexOf(e)&&n.push(e)}):this._selectedElements=n=e.slice(),this._eventBus.fire("selection.changed",{oldSelection:o,newSelection:n})};var Ln="hover",Hn="selected";function Wn(e,t){function n(t,n){e.addMarker(t,n)}function o(t,n){e.removeMarker(t,n)}this._canvas=e,t.on("element.hover",function(e){n(e.element,Ln)}),t.on("element.out",function(e){o(e.element,Ln)}),t.on("selection.changed",function(e){var t=e.oldSelection,r=e.newSelection;S(t,function(e){-1===r.indexOf(e)&&function(e){o(e,Hn)}(e)}),S(r,function(e){-1===t.indexOf(e)&&function(e){n(e,Hn)}(e)})})}function In(e,t,n,o){e.on("create.end",500,function(e){var n=e.context,o=n.canExecute,r=n.elements,i=(n.hints||{}).autoSelect;if(o){if(!1===i)return;x(i)?t.select(i):t.select(r.filter(Nn))}}),e.on("connect.end",500,function(e){var n=e.context.connection;n&&t.select(n)}),e.on("shape.move.end",500,function(e){var n=e.previousSelection||[],r=o.get(e.context.shape.id);k(n,function(e){return r.id===e.id})||t.select(r)}),e.on("element.click",function(e){if(zn(e)){var o=e.element;o===n.getRootElement()&&(o=null);var r=t.isSelected(o),i=t.get().length>1,s=Pn(e);if(r&&i)return s?t.deselect(o):t.select(o);r?t.deselect(o):t.select(o,s)}})}function Nn(e){return!e.hidden}Wn.$inject=["canvas","eventBus"],In.$inject=["eventBus","selection","canvas","elementRegistry"];const qn={__init__:["selectionVisuals","selectionBehavior"],__depends__:[Tn],selection:["type",Fn],selectionVisuals:["type",Wn],selectionBehavior:["type",In]};function Vn(e){this._commandStack=e.get("commandStack",!1)}Vn.$inject=["injector"],Vn.prototype.allowed=function(e,t){var n=!0,o=this._commandStack;return o&&(n=o.canExecute(e,t)),void 0===n||n};const Un={__init__:["rules"],rules:["type",Vn]};function Gn(e,t,n){var o,r,i=this,s=n.get("dragging",!1);s&&t.on("drag.start",function(n){t.once("drag.move",1500,function(t){!function(t){if(!t.hover){var n=t.originalEvent,o=i._findTargetGfx(n),r=o&&e.get(o);o&&r&&(t.stopPropagation(),s.hover({element:r,gfx:o}),s.move(n))}}(t)})}),t.on("element.hover",function(e){o=e.gfx,r=e.element}),t.on("element.hover",1500,function(e){r&&t.fire("element.out",{element:r,gfx:o})}),t.on("element.out",function(){o=null,r=null}),this._findTargetGfx=function(e){var t;if(e instanceof MouseEvent)return t=Sn(e),Ne(document.elementFromPoint(t.x,t.y),"svg, .djs-element",!0)}}Gn.$inject=["elementRegistry","eventBus","injector"];const Yn={__init__:["hoverFix"],hoverFix:["type",Gn]};var Xn=/^djs-cursor-.*$/;function Kn(e){var t=He(document.body);t.removeMatching(Xn),e&&t.add("djs-cursor-"+e)}function Zn(){Kn(null)}function Qn(e,t){function n(){return!1}return t=t||"element.click",e.once(t,5e3,n),function(){e.off(t,n)}}function Jn(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function eo(e,t){return{x:e.x-t.x,y:e.y-t.y}}var to=Math.round,no="djs-drag-active";function oo(e){e.preventDefault()}function ro(e,t,n,o){var r,i={threshold:5,trapClick:!0};function s(e){var n=t.viewbox(),o=t._container.getBoundingClientRect();return{x:n.x+(e.x-o.left)/n.scale,y:n.y+(e.y-o.top)/n.scale}}function a(t,n){n=n||r;var o=e.createEvent(N({},n.payload,n.data,{isTouch:n.isTouch}));return!1!==e.fire("drag."+t,o)&&e.fire(n.prefix+"."+t,o)}function c(e,o){var i,c=r.payload,l=r.displacement,u=r.globalStart,p=Sn(e),d=eo(p,u),h=r.localStart,f=s(p),v=eo(f,h);if(!r.active&&(o||(i=d,Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2))>r.threshold))){if(N(c,{x:to(h.x+l.x),y:to(h.y+l.y),dx:0,dy:0},{originalEvent:e}),!1===a("start"))return g();r.active=!0,r.keepSelection||(c.previousSelection=n.get(),n.select(null)),r.cursor&&Kn(r.cursor),t.addMarker(t.getRootElement(),no)}Bn(e),r.active&&(N(c,{x:to(f.x+l.x),y:to(f.y+l.y),dx:to(v.x),dy:to(v.y)},{originalEvent:e}),a("move"))}function l(e){var t=!0;r.active&&(e&&(r.payload.originalEvent=e,Bn(e)),t=a("end")),!1===t&&a("rejected"),a("ended",v(!0!==t))}function u(e){(function(e,t){return-1!==(e=x(e)?e:[e]).indexOf(t.key)||-1!==e.indexOf(t.code)})("Escape",e)&&(oo(e),g())}function p(t){var n;r.active&&(n=Qn(e),setTimeout(n,400),oo(t)),l(t)}function d(e){c(e)}function h(e){var t=r.payload;t.hoverGfx=e.gfx,t.hover=e.element,a("hover")}function f(e){a("out");var t=r.payload;t.hoverGfx=null,t.hover=null}function g(e){var t;if(r){var n=r.active;n&&a("cancel"),t=v(e),n&&a("canceled",t)}}function v(i){var s,v;a("cleanup"),Zn(),v=r.trapClick?p:l,Ke.unbind(document,"mousemove",c),Ke.unbind(document,"dragstart",oo),Ke.unbind(document,"selectstart",oo),Ke.unbind(document,"mousedown",v,!0),Ke.unbind(document,"mouseup",v,!0),Ke.unbind(document,"keyup",u),Ke.unbind(document,"touchstart",d,!0),Ke.unbind(document,"touchcancel",g,!0),Ke.unbind(document,"touchmove",c,!0),Ke.unbind(document,"touchend",l,!0),e.off("element.hover",h),e.off("element.out",f),t.removeMarker(t.getRootElement(),no);var y=r.payload.previousSelection;return!1!==i&&y&&!n.get().length&&function(e){var t=e.filter(function(e){return o.get(e.id)});t.length&&n.select(t)}(y),s=r,r=null,s}e.on("diagram.destroy",g),this.init=function(t,n,o,v){r&&g(!1),"string"==typeof n&&(v=o,o=n,n=null);var y,A,m,_,x,E=(v=N({},i,v||{})).data||{};_=v.trapClick?p:l,t?(y=kn(t)||t,A=Sn(t),Bn(t),"dragstart"===y.type&&oo(y)):(y=null,A={x:0,y:0}),m=s(A),n||(n=m),x=function(e){return"undefined"!=typeof TouchEvent&&e instanceof TouchEvent}(y),r=N({prefix:o,data:E,payload:{},globalStart:A,displacement:eo(n,m),localStart:m,isTouch:x},v),v.manual||(x?(Ke.bind(document,"touchstart",d,!0),Ke.bind(document,"touchcancel",g,!0),Ke.bind(document,"touchmove",c,!0),Ke.bind(document,"touchend",l,!0)):(Ke.bind(document,"mousemove",c),Ke.bind(document,"dragstart",oo),Ke.bind(document,"selectstart",oo),Ke.bind(document,"mousedown",_,!0),Ke.bind(document,"mouseup",_,!0)),Ke.bind(document,"keyup",u),e.on("element.hover",h),e.on("element.out",f)),a("init"),v.autoActivate&&c(t,!0)},this.move=c,this.hover=h,this.out=f,this.end=l,this.cancel=g,this.context=function(){return r},this.setOptions=function(e){N(i,e)}}ro.$inject=["eventBus","canvas","selection","elementRegistry"];const io={__depends__:[Yn,qn],dragging:["type",ro]};function so(e,t,n,o){function r(e,t){return o.allowed("connection.create",{source:e,target:t})}e.on("connect.hover",function(e){var t,n=e.context,o=n.start,i=e.hover;if(n.hover=i,!_(t=n.canExecute=r(o,i))){if(!1!==t)return n.source=o,void(n.target=i);_(t=n.canExecute=r(i,o))||!1!==t&&(n.source=i,n.target=o)}}),e.on(["connect.out","connect.cleanup"],function(e){var t=e.context;t.hover=null,t.source=null,t.target=null,t.canExecute=!1}),e.on("connect.end",function(e){var t=e.context,o=t.canExecute,r=t.connectionStart,i={x:e.x,y:e.y},s=t.source,a=t.target;if(!o)return!1;var c=null,l={connectionStart:ao(t)?i:r,connectionEnd:ao(t)?r:i};E(o)&&(c=o),t.connection=n.connect(s,a,c,l)}),this.start=function(e,n,o,r){E(o)||(r=o,o=Vt(n)),t.init(e,"connect",{autoActivate:r,data:{shape:n,context:{start:n,connectionStart:o}}})}}function ao(e){var t=e.hover,n=e.source,o=e.target;return t&&n&&t===n&&n!==o}so.$inject=["eventBus","dragging","modeling","rules"];var co="connect-ok",lo="connect-not-ok";function uo(e,t,n){var o=e.get("connectionPreview",!1);o&&t.on("connect.move",function(e){var t=e.context,n=t.canExecute,r=t.hover,i=t.source,s=t.start,a=t.startPosition,c=t.target,l=t.connectionStart||a,u=t.connectionEnd||{x:e.x,y:e.y},p=l,d=u;ao(t)&&(p=u,d=l),o.drawPreview(t,n,{source:i||s,target:c||r,connectionStart:p,connectionEnd:d})}),t.on("connect.hover",900,function(e){var t=e.context,o=e.hover,r=t.canExecute;null!==r&&n.addMarker(o,r?co:lo)}),t.on(["connect.out","connect.cleanup"],1100,function(e){var t=e.hover;t&&(n.removeMarker(t,co),n.removeMarker(t,lo))}),o&&t.on("connect.cleanup",function(e){o.cleanUp(e.context)})}uo.$inject=["injector","eventBus","canvas"];const po={__depends__:[qn,Un,io],__init__:["connectPreview"],connect:["type",so],connectPreview:["type",uo]};function ho(e){this._counter=0,this._prefix=(e?e+"-":"")+Math.floor(1e9*Math.random())+"-"}ho.prototype.next=function(){return this._prefix+ ++this._counter};var fo=new ho("ov");function go(e,t,n,o){var r,i;this._eventBus=t,this._canvas=n,this._elementRegistry=o,this._ids=fo,this._overlayDefaults=N({show:null,scale:!0},e&&e.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=(r=n.getContainer(),Te(i=nt('<div class="djs-overlay-container" />'),{position:"absolute",width:0,height:0}),r.insertBefore(i,r.firstChild),i),this._init()}function vo(e,t,n){Te(e,{left:t+"px",top:n+"px"})}function yo(e,t){e.style.display=!1===t?"none":""}function Ao(e,t){e.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(n){e.style[n+"transform"]=t})}go.$inject=["config.overlays","eventBus","canvas","elementRegistry"],go.prototype.get=function(e){if(C(e)&&(e={id:e}),C(e.element)&&(e.element=this._elementRegistry.get(e.element)),e.element){var t=this._getOverlayContainer(e.element,!0);return t?e.type?B(t.overlays,T({type:e.type})):t.overlays.slice():[]}return e.type?B(this._overlays,T({type:e.type})):e.id?this._overlays[e.id]:null},go.prototype.add=function(e,t,n){if(E(t)&&(n=t,t=null),e.id||(e=this._elementRegistry.get(e)),!n.position)throw new Error("must specifiy overlay position");if(!n.html)throw new Error("must specifiy overlay html");if(!e)throw new Error("invalid element specified");var o=this._ids.next();return n=N({},this._overlayDefaults,n,{id:o,type:t,element:e,html:n.html}),this._addOverlay(n),o},go.prototype.remove=function(e){var t=this.get(e)||[];x(t)||(t=[t]);var n=this;S(t,function(e){var t=n._getOverlayContainer(e.element,!0);if(e&&(it(e.html),it(e.htmlContainer),delete e.htmlContainer,delete e.element,delete n._overlays[e.id]),t){var o=t.overlays.indexOf(e);-1!==o&&t.overlays.splice(o,1)}})},go.prototype.isShown=function(){return"none"!==this._overlayRoot.style.display},go.prototype.show=function(){yo(this._overlayRoot)},go.prototype.hide=function(){yo(this._overlayRoot,!1)},go.prototype.clear=function(){this._overlays={},this._overlayContainers=[],Ie(this._overlayRoot)},go.prototype._updateOverlayContainer=function(e){var t=e.element,n=e.html,o=t.x,r=t.y;if(t.waypoints){var i=we(t);o=i.x,r=i.y}vo(n,o,r),Fe(e.html,"data-container-id",t.id)},go.prototype._updateOverlay=function(e){var t,n,o=e.position,r=e.htmlContainer,i=e.element,s=o.left,a=o.top;void 0!==o.right&&(t=i.waypoints?we(i).width:i.width,s=-1*o.right+t),void 0!==o.bottom&&(n=i.waypoints?we(i).height:i.height,a=-1*o.bottom+n),vo(r,s||0,a||0),this._updateOverlayVisibilty(e,this._canvas.viewbox())},go.prototype._createOverlayContainer=function(e){var t=nt('<div class="djs-overlays" />');Te(t,{position:"absolute"}),this._overlayRoot.appendChild(t);var n={html:t,element:e,overlays:[]};return this._updateOverlayContainer(n),this._overlayContainers.push(n),n},go.prototype._updateRoot=function(e){var t=e.scale||1,n="matrix("+[t,0,0,t,-1*e.x*t,-1*e.y*t].join(",")+")";Ao(this._overlayRoot,n)},go.prototype._getOverlayContainer=function(e,t){var n=k(this._overlayContainers,function(t){return t.element===e});return n||t?n:this._createOverlayContainer(e)},go.prototype._addOverlay=function(e){var t,n,o=e.id,r=e.element,i=e.html;i.get&&i.constructor.prototype.jquery&&(i=i.get(0)),C(i)&&(i=nt(i)),n=this._getOverlayContainer(r),Te(t=nt('<div class="djs-overlay" data-overlay-id="'+o+'">'),{position:"absolute"}),t.appendChild(i),e.type&&He(t).add("djs-overlay-"+e.type),yo(t,this._canvas.findRoot(r)===this._canvas.getRootElement()),e.htmlContainer=t,n.overlays.push(e),n.html.appendChild(t),this._overlays[o]=e,this._updateOverlay(e),this._updateOverlayVisibilty(e,this._canvas.viewbox())},go.prototype._updateOverlayVisibilty=function(e,t){var n=e.show,o=this._canvas.findRoot(e.element),r=n&&n.minZoom,i=n&&n.maxZoom,s=e.htmlContainer,a=!0;(o!==this._canvas.getRootElement()||n&&(m(r)&&r>t.scale||m(i)&&i<t.scale))&&(a=!1),yo(s,a),this._updateOverlayScale(e,t)},go.prototype._updateOverlayScale=function(e,t){var n,o,r,i=e.scale,s=e.htmlContainer,a="";!0!==i&&(!1===i?(n=1,o=1):(n=i.min,o=i.max),m(n)&&t.scale<n&&(r=(1/t.scale||1)*n),m(o)&&t.scale>o&&(r=(1/t.scale||1)*o)),m(r)&&(a="scale("+r+","+r+")"),Ao(s,a)},go.prototype._updateOverlaysVisibilty=function(e){var t=this;S(this._overlays,function(n){t._updateOverlayVisibilty(n,e)})},go.prototype._init=function(){var e=this._eventBus,t=this;e.on("canvas.viewbox.changing",function(e){t.hide()}),e.on("canvas.viewbox.changed",function(e){var n;n=e.viewbox,t._updateRoot(n),t._updateOverlaysVisibilty(n),t.show()}),e.on(["shape.remove","connection.remove"],function(e){var n=e.element;S(t.get({element:n}),function(e){t.remove(e.id)});var o=t._getOverlayContainer(n);if(o){it(o.html);var r=t._overlayContainers.indexOf(o);-1!==r&&t._overlayContainers.splice(r,1)}}),e.on("element.changed",500,function(e){var n=e.element,o=t._getOverlayContainer(n,!0);o&&(S(o.overlays,function(e){t._updateOverlay(e)}),t._updateOverlayContainer(o))}),e.on("element.marker.update",function(e){var n=t._getOverlayContainer(e.element,!0);n&&He(n.html)[e.add?"add":"remove"](e.marker)}),e.on("root.set",function(){t._updateOverlaysVisibilty(t._canvas.viewbox())}),e.on("diagram.clear",this.clear,this)};const mo={__init__:["overlays"],overlays:["type",go]},_o=new ho;function xo(e){this._scheduled={},e.on("diagram.destroy",()=>{Object.keys(this._scheduled).forEach(e=>{this.cancel(e)})})}xo.$inject=["eventBus"],xo.prototype.schedule=function(e,t=_o.next()){this.cancel(t);const n=this._schedule(e,t);return this._scheduled[t]=n,n.promise},xo.prototype._schedule=function(e,t){const n=function(){const e={};return e.promise=new Promise((t,n)=>{e.resolve=t,e.reject=n}),e}();return{executionId:setTimeout(()=>{try{this._scheduled[t]=null;try{n.resolve(e())}catch(e){n.reject(e)}}catch(e){console.error("Scheduler#_schedule execution failed",e)}}),promise:n.promise}},xo.prototype.cancel=function(e){const t=this._scheduled[e];t&&(this._cancel(t),this._scheduled[e]=null)},xo.prototype._cancel=function(e){clearTimeout(e.executionId)};const Eo={scheduler:["type",xo]};function bo(e){return CSS.escape(e)}var wo=".entry";function Co(e,t,n,o){this._canvas=e,this._elementRegistry=t,this._eventBus=n,this._scheduler=o,this._current=null,this._init()}Co.$inject=["canvas","elementRegistry","eventBus","scheduler"],Co.prototype._init=function(){var e=this;this._eventBus.on("selection.changed",function(t){var n=t.newSelection,o=n.length?1===n.length?n[0]:n:null;o?e.open(o,!0):e.close()}),this._eventBus.on("elements.changed",function(t){var n=t.elements,o=e._current;if(o){var r=o.target,i=x(r)?r:[r];if(i.filter(function(e){return n.includes(e)}).length){e.close();var s=i.filter(function(t){return e._elementRegistry.get(t.id)});s.length&&e._updateAndOpen(s.length>1?s:s[0])}}}),this._eventBus.on("canvas.viewbox.changed",function(){e._updatePosition()}),this._eventBus.on("element.marker.update",function(t){if(e.isOpen()){var n=t.element,o=e._current;(x(o.target)?o.target:[o.target]).includes(n)&&e._updateVisibility()}}),this._container=this._createContainer()},Co.prototype._createContainer=function(){var e=nt('<div class="djs-context-pad-parent"></div>');return this._canvas.getContainer().appendChild(e),e},Co.prototype.registerProvider=function(e,t){t||(t=e,e=1e3),this._eventBus.on("contextPad.getProviders",e,function(e){e.providers.push(t)})},Co.prototype.getEntries=function(e){var t=this._getProviders(),n=x(e)?"getMultiElementContextPadEntries":"getContextPadEntries",o={};return S(t,function(t){if(w(t[n])){var r=t[n](e);w(r)?o=r(o):S(r,function(e,t){o[t]=e})}}),o},Co.prototype.trigger=function(e,t,n){var o,r,i=this,s=t.delegateTarget||t.target;return s?(o=Fe(s,"data-action"),r=t.originalEvent||t,"mouseover"!==e?"mouseout"===e?(clearTimeout(this._timeout),void(this._mouseout&&(this._mouseout(),this._mouseout=null))):this.triggerEntry(o,e,r,n):void(this._timeout=setTimeout(function(){i._mouseout=i.triggerEntry(o,"hover",r,n)},300))):t.preventDefault()},Co.prototype.triggerEntry=function(e,t,n,o){if(this.isShown()){var r=this._current.target,i=this._current.entries[e];if(i){var s=i.action;if(!1!==this._eventBus.fire("contextPad.trigger",{entry:i,event:n})){if(w(s)){if("click"===t)return s(n,r,o)}else if(s[t])return s[t](n,r,o);n.preventDefault()}}}},Co.prototype.open=function(e,t){!t&&this.isOpen(e)||(this.close(),this._updateAndOpen(e))},Co.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"contextPad.getProviders",providers:[]});return this._eventBus.fire(e),e.providers},Co.prototype._updateAndOpen=function(e){var t,n=this.getEntries(e),o=this._createHtml(e);S(n,function(e,n){var r,i=e.group||"default",s=nt(e.html||'<div class="entry" draggable="true"></div>');Fe(s,"data-action",n),(r=rt("[data-group="+bo(i)+"]",o))||(Fe(r=nt('<div class="group"></div>'),"data-group",i),o.appendChild(r)),r.appendChild(s),e.className&&function(e,t){var n=He(e);(t=x(t)?t:t.split(/\s+/g)).forEach(function(e){n.add(e)})}(s,e.className),e.title&&Fe(s,"title",e.title),e.imageUrl&&(Fe(t=nt("<img>"),"src",e.imageUrl),t.style.width="100%",t.style.height="100%",s.appendChild(t))}),He(o).add("open"),this._current={entries:n,html:o,target:e},this._updatePosition(),this._updateVisibility(),this._eventBus.fire("contextPad.open",{current:this._current})},Co.prototype._createHtml=function(e){var t=this,n=nt('<div class="djs-context-pad"></div>');return Qe(n,wo,"click",function(e){t.trigger("click",e)}),Qe(n,wo,"dragstart",function(e){t.trigger("dragstart",e)}),Qe(n,wo,"mouseover",function(e){t.trigger("mouseover",e)}),Qe(n,wo,"mouseout",function(e){t.trigger("mouseout",e)}),Ke.bind(n,"mousedown",function(e){e.stopPropagation()}),this._container.appendChild(n),this._eventBus.fire("contextPad.create",{target:e,pad:n}),n},Co.prototype.getPad=function(e){let t;return console.warn(new Error("ContextPad#getPad is deprecated and will be removed in future library versions, cf. https://github.com/bpmn-io/diagram-js/pull/888")),t=this.isOpen()&&function(e,t){return e=x(e)?e:[e],t=x(t)?t:[t],e.length===t.length&&M(e,function(e){return t.includes(e)})}(this._current.target,e)?this._current.html:this._createHtml(e),{html:t}},Co.prototype.close=function(){this.isOpen()&&(clearTimeout(this._timeout),this._container.innerHTML="",this._eventBus.fire("contextPad.close",{current:this._current}),this._current=null)},Co.prototype.isOpen=function(e){var t=this._current;if(!t)return!1;if(!e)return!0;var n=t.target;return x(e)===x(n)&&(x(e)?e.length===n.length&&M(e,function(e){return n.includes(e)}):n===e)},Co.prototype.isShown=function(){return this.isOpen()&&He(this._current.html).has("open")},Co.prototype.show=function(){this.isOpen()&&(He(this._current.html).add("open"),this._updatePosition(),this._eventBus.fire("contextPad.show",{current:this._current}))},Co.prototype.hide=function(){this.isOpen()&&(He(this._current.html).remove("open"),this._eventBus.fire("contextPad.hide",{current:this._current}))},Co.prototype._getPosition=function(e){if(!x(e)&&Ht(e)){var t=this._canvas.viewbox(),n=(i=e).waypoints[i.waypoints.length-1],o=n.x*t.scale-t.x*t.scale,r=n.y*t.scale-t.y*t.scale;return{left:o+8*this._canvas.zoom(),top:r}}var i,s=this._canvas.getContainer().getBoundingClientRect(),a=this._getTargetBounds(e);return{left:a.right-s.left+8*this._canvas.zoom(),top:a.top-s.top}},Co.prototype._updatePosition=function(){this._scheduler.schedule(()=>{if(this.isOpen()){var e=this._current.html,t=this._getPosition(this._current.target);"x"in t&&"y"in t?(e.style.left=t.x+"px",e.style.top=t.y+"px"):["top","right","bottom","left"].forEach(function(n){n in t&&(e.style[n]=t[n]+"px")})}},"ContextPad#_updatePosition")},Co.prototype._updateVisibility=function(){this._scheduler.schedule(()=>{if(this.isOpen()){var e=this,t=this._current.target;(x(t)?t:[t]).some(function(t){return e._canvas.hasMarker(t,"djs-element-hidden")})?e.hide():e.show()}},"ContextPad#_updateVisibility")},Co.prototype._getTargetBounds=function(e){var t=this;return(x(e)?e:[e]).map(function(e){return t._canvas.getGraphics(e)}).reduce(function(e,t){const n=t.getBoundingClientRect();return e.top=Math.min(e.top,n.top),e.right=Math.max(e.right,n.right),e.bottom=Math.max(e.bottom,n.bottom),e.left=Math.min(e.left,n.left),e.x=e.left,e.y=e.top,e.width=e.right-e.left,e.height=e.bottom-e.top,e},{top:1/0,right:-1/0,bottom:-1/0,left:1/0})};const jo={__depends__:[Tn,Eo,mo],contextPad:["type",Co]},ko=new ho("ps");var Bo=["marker-start","marker-mid","marker-end"],So=["circle","ellipse","line","path","polygon","polyline","path","rect"];function Do(e,t,n,o){this._elementRegistry=e,this._canvas=n,this._styles=o}Do.$inject=["elementRegistry","eventBus","canvas","styles"],Do.prototype.cleanUp=function(){console.warn("PreviewSupport#cleanUp is deprecated and will be removed in future versions. You do not need to manually clean up previews anymore. cf. https://github.com/bpmn-io/diagram-js/pull/906")},Do.prototype.getGfx=function(e){return this._elementRegistry.getGraphics(e)},Do.prototype.addDragger=function(e,t,n,o="djs-dragger"){var r=ee(n=n||this.getGfx(e)),i=n.getBoundingClientRect();return this._cloneMarkers(_n(r),o),X(r,this._styles.cls(o,[],{x:i.top,y:i.left})),U(t,r),X(r,"data-preview-support-element-id",e.id),r},Do.prototype.addFrame=function(e,t){var n=oe("rect",{class:"djs-resize-overlay",width:e.width,height:e.height,x:e.x,y:e.y});return U(t,n),X(n,"data-preview-support-element-id",e.id),n},Do.prototype._cloneMarkers=function(e,t="djs-dragger",n=e){var o=this;e.childNodes&&e.childNodes.forEach(e=>{o._cloneMarkers(e,t,n)}),function(e){return-1!==So.indexOf(e.nodeName)}(e)&&Bo.forEach(function(r){if(X(e,r)){var i=function(e,t,n){return rt("marker#"+X(e,t).match(/url\(['"]?#([^'"]*)['"]?\)/)[1],n||document)}(e,r,o._canvas.getContainer());i&&o._cloneMarker(n,e,i,r,t)}})},Do.prototype._cloneMarker=function(e,t,n,o,r="djs-dragger"){var i=[n.id,r,ko.next()].join("-"),s=rt("marker#"+n.id,e);e=e||this._canvas._svg;var a=s||ee(n);a.id=i,Z(a).add(r);var c=rt(":scope > defs",e);c||U(e,c=oe("defs")),U(c,a),X(t,o,"url(#"+a.id+")")};const Mo={__init__:["previewSupport"],previewSupport:["type",Do]};var zo="drop-ok",Po="drop-not-ok",Oo="attach-ok",$o="new-parent",Ro="create";function To(e,t,n,o,r){function i(t,n){[Oo,zo,Po,$o].forEach(function(o){o===n?e.addMarker(t,o):e.removeMarker(t,o)})}function s(){var e=t.context();e&&e.prefix===Ro&&t.cancel()}n.on(["create.move","create.hover"],function(e){var t=e.context,n=t.elements,o=e.hover,s=t.source,a=t.hints||{};if(!o)return t.canExecute=!1,void(t.target=null);Fo(e);var c={x:e.x,y:e.y},l=t.canExecute=o&&function(e,t,n,o,i){if(!t)return!1;var s=k(e=B(e,function(t){var n=t.labelTarget;return!(t.parent||Wt(t)&&-1!==e.indexOf(n))}),function(e){return!Ht(e)}),a=!1,c=!1,l=!1;Lo(e)&&(a=r.allowed("shape.attach",{position:n,shape:s,target:t})),a||(l=Lo(e)?r.allowed("shape.create",{position:n,shape:s,source:o,target:t}):r.allowed("elements.create",{elements:e,position:n,target:t}));var u=i.connectionTarget;return l||a?(s&&o&&(c=r.allowed("connection.create",{source:u===o?s:o,target:u===o?o:s,hints:{targetParent:t,targetAttach:a}})),{attach:a,connect:c}):(null===l||null===a)&&null}(n,o,c,s,a);o&&null!==l&&(t.target=o,l&&l.attach?i(o,Oo):i(o,l?$o:Po))}),n.on(["create.end","create.out","create.cleanup"],function(e){var t=e.hover;t&&i(t,null)}),n.on("create.end",function(e){var t=e.context,n=t.source,r=t.shape,i=t.elements,s=t.target,a=t.canExecute,c=a&&a.attach,l=a&&a.connect,u=t.hints||{};if(!1===a||!s)return!1;Fo(e);var p={x:e.x,y:e.y};r=l?o.appendShape(n,r,p,s,{attach:c,connection:!0===l?{}:l,connectionTarget:u.connectionTarget}):k(i=o.createElements(i,p,s,N({},u,{attach:c})),function(e){return!Ht(e)}),N(t,{elements:i,shape:r}),N(e,{elements:i,shape:r})}),n.on("create.init",function(){n.on("elements.changed",s),n.once(["create.cancel","create.end"],2e3,function(){n.off("elements.changed",s)})}),this.start=function(e,n,o){x(n)||(n=[n]);var r=k(n,function(e){return!Ht(e)});if(r){o=N({elements:n,hints:{},shape:r},o||{}),S(n,function(e){b(e.x)||(e.x=0),b(e.y)||(e.y=0)});var i=we(B(n,function(e){return!e.hidden}));S(n,function(e){Ht(e)&&(e.waypoints=z(e.waypoints,function(e){return{x:e.x-i.x-i.width/2,y:e.y-i.y-i.height/2}})),N(e,{x:e.x-i.x-i.width/2,y:e.y-i.y-i.height/2})}),t.init(e,Ro,{cursor:"grabbing",autoActivate:!0,data:{shape:r,elements:n,context:o}})}}}function Fo(e){var t=e.context.createConstraints;t&&(t.left&&(e.x=Math.max(e.x,t.left)),t.right&&(e.x=Math.min(e.x,t.right)),t.top&&(e.y=Math.max(e.y,t.top)),t.bottom&&(e.y=Math.min(e.y,t.bottom)))}function Lo(e){return e&&1===e.length&&!Ht(e[0])}function Ho(e,t,n,o,r){t.on("create.move",750,function(t){var i=t.hover,s=t.context,a=s.elements,c=s.dragGroup;c||(c=s.dragGroup=function(e){var t=oe("g");X(t,r.cls("djs-drag-group",["no-events"]));var i=oe("g");return e.forEach(function(e){var r;e.hidden||(e.waypoints?(r=n._createContainer("connection",i),n.drawConnection(_n(r),e)):(r=n._createContainer("shape",i),n.drawShape(_n(r),e),xn(r,e.x,e.y)),o.addDragger(e,t,r))}),t}(a)),i?(c.parentNode||U(e.getActiveLayer(),c),xn(c,t.x,t.y)):ce(c)}),t.on("create.cleanup",function(e){var t=e.context.dragGroup;t&&ce(t)})}To.$inject=["canvas","dragging","eventBus","modeling","rules"],Ho.$inject=["canvas","eventBus","graphicsFactory","previewSupport","styles"];const Wo={__depends__:[io,Mo,Un,qn],__init__:["create","createPreview"],create:["type",To],createPreview:["type",Ho]};function Io(e){this._eventBus=e,this._tools=[],this._active=null}Io.$inject=["eventBus"],Io.prototype.registerTool=function(e,t){var n=this._tools;if(!t)throw new Error('A tool has to be registered with it\'s "events"');n.push(e),this.bindEvents(e,t)},Io.prototype.isActive=function(e){return e&&this._active===e},Io.prototype.length=function(e){return this._tools.length},Io.prototype.setActive=function(e){var t=this._eventBus;this._active!==e&&(this._active=e,t.fire("tool-manager.update",{tool:e}))},Io.prototype.bindEvents=function(e,t){var n=this._eventBus,o=[];n.on(t.tool+".init",function(t){t.context.reactivate||!this.isActive(e)?this.setActive(e):this.setActive(null)},this),S(t,function(e){o.push(e+".ended"),o.push(e+".canceled")}),n.on(o,250,function(e){this._active&&(function(e){var t=e.originalEvent&&e.originalEvent.target;return t&&Ne(t,'.group[data-group="tools"]')}(e)||this.setActive(null))},this)};const No={__depends__:[io],__init__:["toolManager"],toolManager:["type",Io]};function qo(e){var t=this;function n(e){t._lastMoveEvent=e}this._lastMoveEvent=null,e.on("canvas.init",function(e){(t._svg=e.svg).addEventListener("mousemove",n)}),e.on("canvas.destroy",function(){t._lastMouseEvent=null,t._svg.removeEventListener("mousemove",n)})}qo.$inject=["eventBus"],qo.prototype.getLastMoveEvent=function(){return this._lastMoveEvent||((e=document.createEvent("MouseEvent")).initMouseEvent&&e.initMouseEvent("mousemove",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e);var e};const Vo={__init__:["mouse"],mouse:["type",qo]};var Uo="crosshair";function Go(e,t,n,o,r,i,s){this._selection=r,this._dragging=n,this._mouse=s;var a=this;i.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"}),e.on("lasso.selection.end",function(t){var n=t.originalEvent.target;(t.hover||n instanceof SVGElement)&&e.once("lasso.selection.ended",function(){a.activateLasso(t.originalEvent,!0)})}),e.on("lasso.end",0,function(e){var t=e.context,n=Yo(e),r=o.filter(function(e){return e}),i=Pn(e);a.select(r,n,i?t.selection:[])}),e.on("lasso.start",function(e){var n=e.context;n.bbox=Yo(e),function(e){var n,o=t.getActiveLayer();X(n=e.frame=oe("rect"),{class:"djs-lasso-overlay",width:1,height:1,x:0,y:0}),U(o,n)}(n),n.selection=r.get()}),e.on("lasso.move",function(e){var t=e.context;t.bbox=Yo(e),function(e){var t=e.frame,n=e.bbox;X(t,{x:n.x,y:n.y,width:n.width,height:n.height})}(t)}),e.on("lasso.cleanup",function(e){!function(e){e.frame&&ce(e.frame)}(e.context)}),e.on("element.mousedown",1500,function(e){if(Pn(e))return a.activateLasso(e.originalEvent),!0})}function Yo(e){var t={x:e.x-e.dx,y:e.y-e.dy},n={x:e.x,y:e.y};return t.x<=n.x&&t.y<n.y||t.x<n.x&&t.y<=n.y?{x:t.x,y:t.y,width:n.x-t.x,height:n.y-t.y}:t.x>=n.x&&t.y<n.y||t.x>n.x&&t.y<=n.y?{x:n.x,y:t.y,width:t.x-n.x,height:n.y-t.y}:t.x<=n.x&&t.y>n.y||t.x<n.x&&t.y>=n.y?{x:t.x,y:n.y,width:n.x-t.x,height:t.y-n.y}:t.x>=n.x&&t.y>n.y||t.x>n.x&&t.y>=n.y?{x:n.x,y:n.y,width:t.x-n.x,height:t.y-n.y}:{x:n.x,y:n.y,width:0,height:0}}Go.$inject=["eventBus","canvas","dragging","elementRegistry","selection","toolManager","mouse"],Go.prototype.activateLasso=function(e,t){this._dragging.init(e,"lasso",{autoActivate:t,cursor:Uo,data:{context:{}}})},Go.prototype.activateSelection=function(e,t){this._dragging.init(e,"lasso.selection",{trapClick:!1,autoActivate:t,cursor:Uo,data:{context:{}},keepSelection:!0})},Go.prototype.select=function(e,t,n=[]){var o=function(e,t){var n={};return S(e,function(e){var o=e;o.waypoints&&(o=we(o)),!b(t.y)&&o.x>t.x&&(n[e.id]=e),!b(t.x)&&o.y>t.y&&(n[e.id]=e),o.x>t.x&&o.y>t.y&&(b(t.width)&&b(t.height)&&o.width+o.x<t.width+t.x&&o.height+o.y<t.height+t.y?n[e.id]=e:b(t.width)&&b(t.height)||(n[e.id]=e))}),n}(e,t);this._selection.select([...n,...P(o)])},Go.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)},Go.prototype.isActive=function(){var e=this._dragging.context();return e&&/^lasso/.test(e.prefix)};const Xo={__depends__:[No,Vo],__init__:["lassoTool"],lassoTool:["type",Go]};function Ko(e,t){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[],trigger:null},this._injector=t,this._eventBus=e,this._uid=1,e.on(["diagram.destroy","diagram.clear"],function(){this.clear(!1)},this)}Ko.$inject=["eventBus","injector"],Ko.prototype.execute=function(e,t){if(!e)throw new Error("command required");this._currentExecution.trigger="execute";const n={command:e,context:t};this._pushAction(n),this._internalExecute(n),this._popAction()},Ko.prototype.canExecute=function(e,t){const n={command:e,context:t},o=this._getHandler(e);let r=this._fire(e,"canExecute",n);if(void 0===r){if(!o)return!1;o.canExecute&&(r=o.canExecute(t))}return r},Ko.prototype.clear=function(e){this._stack.length=0,this._stackIdx=-1,!1!==e&&this._fire("changed",{trigger:"clear"})},Ko.prototype.undo=function(){let e,t=this._getUndoAction();if(t){for(this._currentExecution.trigger="undo",this._pushAction(t);t&&(this._internalUndo(t),e=this._getUndoAction(),e&&e.id===t.id);)t=e;this._popAction()}},Ko.prototype.redo=function(){let e,t=this._getRedoAction();if(t){for(this._currentExecution.trigger="redo",this._pushAction(t);t&&(this._internalExecute(t,!0),e=this._getRedoAction(),e&&e.id===t.id);)t=e;this._popAction()}},Ko.prototype.register=function(e,t){this._setHandler(e,t)},Ko.prototype.registerHandler=function(e,t){if(!e||!t)throw new Error("command and handlerCls must be defined");const n=this._injector.instantiate(t);this.register(e,n)},Ko.prototype.canUndo=function(){return!!this._getUndoAction()},Ko.prototype.canRedo=function(){return!!this._getRedoAction()},Ko.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]},Ko.prototype._getUndoAction=function(){return this._stack[this._stackIdx]},Ko.prototype._internalUndo=function(e){const t=e.command,n=e.context,o=this._getHandler(t);this._atomicDo(()=>{this._fire(t,"revert",e),o.revert&&this._markDirty(o.revert(n)),this._revertedAction(e),this._fire(t,"reverted",e)})},Ko.prototype._fire=function(e,t,n){arguments.length<3&&(n=t,t=null);const o=t?[e+"."+t,t]:[e];let r;n=this._eventBus.createEvent(n);for(const e of o)if(r=this._eventBus.fire("commandStack."+e,n),n.cancelBubble)break;return r},Ko.prototype._createId=function(){return this._uid++},Ko.prototype._atomicDo=function(e){const t=this._currentExecution;t.atomic=!0;try{e()}finally{t.atomic=!1}},Ko.prototype._internalExecute=function(e,t){const n=e.command,o=e.context,r=this._getHandler(n);if(!r)throw new Error("no command handler registered for <"+n+">");this._pushAction(e),t||(this._fire(n,"preExecute",e),r.preExecute&&r.preExecute(o),this._fire(n,"preExecuted",e)),this._atomicDo(()=>{this._fire(n,"execute",e),r.execute&&this._markDirty(r.execute(o)),this._executedAction(e,t),this._fire(n,"executed",e)}),t||(this._fire(n,"postExecute",e),r.postExecute&&r.postExecute(o),this._fire(n,"postExecuted",e)),this._popAction()},Ko.prototype._pushAction=function(e){const t=this._currentExecution,n=t.actions,o=n[0];if(t.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+e.command+")");e.id||(e.id=o&&o.id||this._createId()),n.push(e)},Ko.prototype._popAction=function(){const e=this._currentExecution,t=e.trigger,n=e.actions,o=e.dirty;n.pop(),n.length||(this._eventBus.fire("elements.changed",{elements:$("id",o.reverse())}),o.length=0,this._fire("changed",{trigger:t}),e.trigger=null)},Ko.prototype._markDirty=function(e){const t=this._currentExecution;e&&(e=x(e)?e:[e],t.dirty=t.dirty.concat(e))},Ko.prototype._executedAction=function(e,t){const n=++this._stackIdx;t||this._stack.splice(n,this._stack.length,e)},Ko.prototype._revertedAction=function(e){this._stackIdx--},Ko.prototype._getHandler=function(e){return this._handlerMap[e]},Ko.prototype._setHandler=function(e,t){if(!e||!t)throw new Error("command and handler required");if(this._handlerMap[e])throw new Error("overriding handler for command <"+e+">");this._handlerMap[e]=t};const Zo={commandStack:["type",Ko]};function Qo(e,t,n,o){e.on("element.changed",function(o){var r=o.element;(r.parent||r===t.getRootElement())&&(o.gfx=n.getGraphics(r)),o.gfx&&e.fire(Ce(r)+".changed",o)}),e.on("elements.changed",function(t){var n=t.elements;n.forEach(function(t){e.fire("element.changed",{element:t})}),o.updateContainments(n)}),e.on("shape.changed",function(e){o.update("shape",e.element,e.gfx)}),e.on("connection.changed",function(e){o.update("connection",e.element,e.gfx)})}Qo.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];const Jo={__init__:["changeSupport"],changeSupport:["type",Qo]};function er(e,t){this._modeling=e,this._canvas=t}function tr(e){this._modeling=e}function nr(e,t){this._canvas=e,this._layouter=t}er.$inject=["modeling","canvas"],er.prototype.preExecute=function(e){var t=this._modeling,n=e.elements,o=e.alignment;S(n,function(e){var n={x:0,y:0};m(o.left)?n.x=o.left-e.x:m(o.right)?n.x=o.right-e.width-e.x:m(o.center)?n.x=o.center-Math.round(e.width/2)-e.x:m(o.top)?n.y=o.top-e.y:m(o.bottom)?n.y=o.bottom-e.height-e.y:m(o.middle)&&(n.y=o.middle-Math.round(e.height/2)-e.y),t.moveElements([e],n,e.parent)})},er.prototype.postExecute=function(e){},tr.$inject=["modeling"],tr.prototype.preExecute=function(e){var t=e.source;if(!t)throw new Error("source required");var n=e.target||t.parent,o=e.shape,r=e.hints||{};o=e.shape=this._modeling.createShape(o,e.position,n,{attach:r.attach}),e.shape=o},tr.prototype.postExecute=function(e){var t,n,o=e.hints||{};t=e.source,n=e.shape,k(t.outgoing,function(e){return e.target===n})||(o.connectionTarget===e.source?this._modeling.connect(e.shape,e.source,e.connection):this._modeling.connect(e.source,e.shape,e.connection))},nr.$inject=["canvas","layouter"],nr.prototype.execute=function(e){var t=e.connection,n=e.source,o=e.target,r=e.parent,i=e.parentIndex,s=e.hints;if(!n||!o)throw new Error("source and target required");if(!r)throw new Error("parent required");return t.source=n,t.target=o,t.waypoints||(t.waypoints=this._layouter.layoutConnection(t,s)),this._canvas.addConnection(t,r,i),t},nr.prototype.revert=function(e){var t=e.connection;return this._canvas.removeConnection(t),t.source=null,t.target=null,t};var or=Math.round;function rr(e){this._modeling=e}rr.$inject=["modeling"],rr.prototype.preExecute=function(e){var t=e.elements,n=e.parent,o=e.parentIndex,r=e.position,i=e.hints,s=this._modeling;S(t,function(e){b(e.x)||(e.x=0),b(e.y)||(e.y=0)});var a=we(B(t,function(e){return!e.hidden}));S(t,function(e){Ht(e)&&(e.waypoints=z(e.waypoints,function(e){return{x:or(e.x-a.x-a.width/2+r.x),y:or(e.y-a.y-a.height/2+r.y)}})),N(e,{x:or(e.x-a.x-a.width/2+r.x),y:or(e.y-a.y-a.height/2+r.y)})});var c=me(t),l={};S(t,function(e){if(Ht(e))l[e.id]=b(o)?s.createConnection(l[e.source.id],l[e.target.id],o,e,e.parent||n,i):s.createConnection(l[e.source.id],l[e.target.id],e,e.parent||n,i);else{var t=N({},i);-1===c.indexOf(e)&&(t.autoResize=!1),Wt(e)&&(t=V(t,["attach"])),l[e.id]=b(o)?s.createShape(e,q(e,["x","y","width","height"]),e.parent||n,o,t):s.createShape(e,q(e,["x","y","width","height"]),e.parent||n,t)}}),e.elements=P(l)};var ir=Math.round;function sr(e){this._canvas=e}function ar(e){sr.call(this,e)}sr.$inject=["canvas"],sr.prototype.execute=function(e){var t=e.shape,n=e.position,o=e.parent,r=e.parentIndex;if(!o)throw new Error("parent required");if(!n)throw new Error("position required");return void 0!==n.width?N(t,n):N(t,{x:n.x-ir(t.width/2),y:n.y-ir(t.height/2)}),this._canvas.addShape(t,o,r),t},sr.prototype.revert=function(e){var t=e.shape;return this._canvas.removeShape(t),t},f(ar,sr),ar.$inject=["canvas"];var cr=sr.prototype.execute;ar.prototype.execute=function(e){var t=e.shape;return function(e){["width","height"].forEach(function(t){void 0===e[t]&&(e[t]=0)})}(t),t.labelTarget=e.labelTarget,cr.call(this,e)};var lr=sr.prototype.revert;function ur(e,t){if("function"!=typeof t)throw new Error("removeFn iterator must be a function");if(e){for(var n;n=e[0];)t(n);return e}}function pr(e,t){this._canvas=e,this._modeling=t}function dr(e,t){this._modeling=e,this._elementRegistry=t}function hr(e,t){this._canvas=e,this._modeling=t}function fr(e){this._modeling=e}ar.prototype.revert=function(e){return e.shape.labelTarget=null,lr.call(this,e)},pr.$inject=["canvas","modeling"],pr.prototype.preExecute=function(e){var t=this._modeling,n=e.connection;ur(n.incoming,function(e){t.removeConnection(e,{nested:!0})}),ur(n.outgoing,function(e){t.removeConnection(e,{nested:!0})})},pr.prototype.execute=function(e){var t=e.connection,n=t.parent;return e.parent=n,e.parentIndex=ct(n.children,t),e.source=t.source,e.target=t.target,this._canvas.removeConnection(t),t.source=null,t.target=null,t},pr.prototype.revert=function(e){var t=e.connection,n=e.parent,o=e.parentIndex;return t.source=e.source,t.target=e.target,at(n.children,t,o),this._canvas.addConnection(t,n),t},dr.$inject=["modeling","elementRegistry"],dr.prototype.postExecute=function(e){var t=this._modeling,n=this._elementRegistry;S(e.elements,function(e){n.get(e.id)&&(e.waypoints?t.removeConnection(e):t.removeShape(e))})},hr.$inject=["canvas","modeling"],hr.prototype.preExecute=function(e){var t=this._modeling,n=e.shape;ur(n.incoming,function(e){t.removeConnection(e,{nested:!0})}),ur(n.outgoing,function(e){t.removeConnection(e,{nested:!0})}),ur(n.children,function(e){Ht(e)?t.removeConnection(e,{nested:!0}):t.removeShape(e,{nested:!0})})},hr.prototype.execute=function(e){var t=this._canvas,n=e.shape,o=n.parent;return e.oldParent=o,e.oldParentIndex=ct(o.children,n),t.removeShape(n),n},hr.prototype.revert=function(e){var t=this._canvas,n=e.shape,o=e.oldParent,r=e.oldParentIndex;return at(o.children,n,r),t.addShape(n,o),n},fr.$inject=["modeling"];var gr={x:"y",y:"x"};function vr(e,t){this._layouter=e,this._canvas=t}function yr(){}function Ar(e,t,n){var o=Jn(t),r=Jn(n),i=eo(e,o),s=i.x*(n.width/t.width),a=i.y*(n.height/t.height);return It({x:r.x+s,y:r.y+a})}function mr(e,t,n){var o=wr(e),r=Cr(o,t),i=o[0];return r.length?r[r.length-1]:Ar(i.original||i,n,t)}function _r(e,t,n){var o=wr(e),r=Cr(o,t),i=o[o.length-1];return r.length?r[0]:Ar(i.original||i,n,t)}function xr(e,t,n){var o=wr(e),r=br(t,n),i=o[0];return Ar(i.original||i,r,t)}function Er(e,t,n){var o=wr(e),r=br(t,n),i=o[o.length-1];return Ar(i.original||i,r,t)}function br(e,t){return{x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height}}function wr(e){var t=e.waypoints;if(!t.length)throw new Error("connection#"+e.id+": no waypoints");return t}function Cr(e,t){return B(z(e,jr),function(e){return function(e,t){return"intersect"===function(e,t,n){E(n=n||0)||(n={x:n,y:n});var o=Nt(e),r=Nt(t),i=o.bottom+n.y<=r.top,s=o.left-n.x>=r.right,a=o.top-n.y>=r.bottom,c=i?"top":a?"bottom":null,l=o.right+n.x<=r.left?"left":s?"right":null;return l&&c?c+"-"+l:l||c||"intersect"}(t,e,1)}(e,t)})}function jr(e){return e.original||e}function kr(){this.allShapes={},this.allConnections={},this.enclosedElements={},this.enclosedConnections={},this.topLevel={}}function Br(e){this._modeling=e}function Sr(e){this._helper=new Br(e)}function Dr(e){this._modeling=e,this._helper=new Br(e)}function Mr(e){this._modeling=e}function zr(e){return e.original||e}function Pr(e,t){this._modeling=e,this._rules=t}function Or(e){this._modeling=e}function $r(e,t){return-1!==e.indexOf(t)}function Rr(e){this._modeling=e}function Tr(e){return N({},e)}function Fr(e){switch(e){case"n":case"s":return"y";case"w":case"e":return"x"}}function Lr(e,t,n){var o=Fr(n);return/e|s/.test(n)?e[o]>t:/n|w/.test(n)?e[o]<t:void 0}function Hr(e,t){return-1!==e.indexOf(t)}function Wr(e){this._modeling=e}function Ir(e){var t={};return S(e,function(e){t[e.id]=e.hidden,e.children&&(t=N({},t,Ir(e.children)))}),t}function Nr(e,t){var n=[];return S(e,function(e){e.hidden=t,n=n.concat(e),e.children&&(n=n.concat(Nr(e.children,e.collapsed||t)))}),n}function qr(e,t){var n=[];return S(e,function(e){e.hidden=t[e.id],n=n.concat(e),e.children&&(n=n.concat(qr(e.children,t)))}),n}function Vr(e){this._modeling=e}function Ur(e,t){return st(e&&e.attachers,t)}function Gr(e,t,n){if(e){var o=e.attachers;o||(e.attachers=o=[]),at(o,t,n)}}function Yr(){}function Xr(e,t,n){this._eventBus=e,this._elementFactory=t,this._commandStack=n;var o=this;e.on("diagram.init",function(){o.registerHandlers(n)})}function Kr(){}fr.prototype.preExecute=function(e){var t=this._modeling,n=e.groups,o=e.axis,r=e.dimension;function i(e,t){e.range.min=Math.min(t[o],e.range.min),e.range.max=Math.max(t[o]+t[r],e.range.max)}function s(e){return e[o]+e[r]/2}function a(e){return e.length-1}function c(e){return e.max-e.min}var l,u,p=n[0],d=a(n),h=n[d],f=0;S(n,function(e,l){var u,p,h;e.elements.length<2?l&&l!==n.length-1&&(i(e,e.elements[0]),f+=c(e.range)):(p=(u=R(e.elements,o))[0],l===d&&(p=u[a(u)]),h=s(p),e.range=null,S(u,function(n){!function(e,n){var r={y:0};r[o]=e-s(n),r[o]&&(r[gr[o]]=0,t.moveElements([n],r,n.parent))}(h,n),null!==e.range?i(e,n):e.range={min:n[o],max:n[o]+n[r]}}),l&&l!==n.length-1&&(f+=c(e.range)))}),u=Math.abs(h.range.min-p.range.max),(l=Math.round((u-f)/(n.length-1)))<n.length-1||S(n,function(e,i){var s,a={};e!==p&&e!==h&&(s=n[i-1],e.range.max=0,S(e.elements,function(n,i){a[gr[o]]=0,a[o]=s.range.max-n[o]+l,e.range.min!==n[o]&&(a[o]+=n[o]-e.range.min),a[o]&&t.moveElements([n],a,n.parent),e.range.max=Math.max(n[o]+n[r],i?e.range.max:0)}))})},fr.prototype.postExecute=function(e){},vr.$inject=["layouter","canvas"],vr.prototype.execute=function(e){var t=e.connection;return N(e,{oldWaypoints:t.waypoints}),t.waypoints=this._layouter.layoutConnection(t,e.hints),t},vr.prototype.revert=function(e){var t=e.connection;return t.waypoints=e.oldWaypoints,t},yr.prototype.execute=function(e){var t=e.connection,n=e.delta,o=e.newParent||t.parent,r=e.newParentIndex,i=t.parent;return e.oldParent=i,e.oldParentIndex=st(i.children,t),at(o.children,t,r),t.parent=o,S(t.waypoints,function(e){e.x+=n.x,e.y+=n.y,e.original&&(e.original.x+=n.x,e.original.y+=n.y)}),t},yr.prototype.revert=function(e){var t=e.connection,n=t.parent,o=e.oldParent,r=e.oldParentIndex,i=e.delta;return st(n.children,t),at(o.children,t,r),t.parent=o,S(t.waypoints,function(e){e.x-=i.x,e.y-=i.y,e.original&&(e.original.x-=i.x,e.original.y-=i.y)}),t},kr.prototype.add=function(e,t){return this.addAll([e],t)},kr.prototype.addAll=function(e,t){var n=function(e,t,n){A(t)&&(t=!0),E(t)&&(n=t,t=!0);var o=ke((n=n||{}).allShapes),r=ke(n.allConnections),i=ke(n.enclosedElements),s=ke(n.enclosedConnections),a=ke(n.topLevel,t&&O(e,function(e){return e.id}));function c(e){a[e.source.id]&&a[e.target.id]&&(a[e.id]=[e]),o[e.source.id]&&o[e.target.id]&&(s[e.id]=i[e.id]=e),r[e.id]=e}return Ee(e,function(e){if(i[e.id]=e,!e.waypoints)return o[e.id]=e,S(e.incoming,c),S(e.outgoing,c),e.children;s[e.id]=r[e.id]=e}),{allShapes:o,allConnections:r,topLevel:a,enclosedConnections:s,enclosedElements:i}}(e,!!t,this);return N(this,n),this},Br.prototype.moveRecursive=function(e,t,n){return e?this.moveClosure(this.getClosure(e),t,n):[]},Br.prototype.moveClosure=function(e,t,n,o,r){var i=this._modeling,s=e.allShapes,a=e.allConnections,c=e.enclosedConnections,l=e.topLevel,u=!1;r&&r.parent===n&&(u=!0),S(s,function(e){i.moveShape(e,t,l[e.id]&&!u&&n,{recurse:!1,layout:!1})}),S(a,function(e){var o=!!s[e.source.id],r=!!s[e.target.id];c[e.id]&&o&&r?i.moveConnection(e,t,l[e.id]&&!u&&n):i.layoutConnection(e,{connectionStart:o&&xr(e,e.source,t),connectionEnd:r&&Er(e,e.target,t)})})},Br.prototype.getClosure=function(e){return(new kr).addAll(e,!0)},Sr.$inject=["modeling"],Sr.prototype.preExecute=function(e){e.closure=this._helper.getClosure(e.shapes)},Sr.prototype.postExecute=function(e){var t,n=e.hints;n&&n.primaryShape&&(t=n.primaryShape,n.oldParent=t.parent),this._helper.moveClosure(e.closure,e.delta,e.newParent,e.newHost,t)},Dr.$inject=["modeling"],Dr.prototype.execute=function(e){var t=e.shape,n=e.delta,o=e.newParent||t.parent,r=e.newParentIndex,i=t.parent;return e.oldBounds=q(t,["x","y","width","height"]),e.oldParent=i,e.oldParentIndex=st(i.children,t),at(o.children,t,r),N(t,{parent:o,x:t.x+n.x,y:t.y+n.y}),t},Dr.prototype.postExecute=function(e){var t=e.shape,n=e.delta,o=e.hints,r=this._modeling;!1!==o.layout&&(S(t.incoming,function(e){r.layoutConnection(e,{connectionEnd:Er(e,t,n)})}),S(t.outgoing,function(e){r.layoutConnection(e,{connectionStart:xr(e,t,n)})})),!1!==o.recurse&&this.moveChildren(e)},Dr.prototype.revert=function(e){var t=e.shape,n=e.oldParent,o=e.oldParentIndex,r=e.delta;return at(n.children,t,o),N(t,{parent:n,x:t.x-r.x,y:t.y-r.y}),t},Dr.prototype.moveChildren=function(e){var t=e.delta,n=e.shape;this._helper.moveRecursive(n.children,t,null)},Dr.prototype.getNewParent=function(e){return e.newParent||e.shape.parent},Mr.$inject=["modeling"],Mr.prototype.execute=function(e){var t=e.newSource,n=e.newTarget,o=e.connection,r=e.dockingOrPoints;if(!t&&!n)throw new Error("newSource or newTarget required");return x(r)&&(e.oldWaypoints=o.waypoints,o.waypoints=r),t&&(e.oldSource=o.source,o.source=t),n&&(e.oldTarget=o.target,o.target=n),o},Mr.prototype.postExecute=function(e){var t=e.connection,n=e.newSource,o=e.newTarget,r=e.dockingOrPoints,i=e.hints||{},s={};i.connectionStart&&(s.connectionStart=i.connectionStart),i.connectionEnd&&(s.connectionEnd=i.connectionEnd),!1!==i.layoutConnection&&(!n||o&&"source"!==i.docking||(s.connectionStart=s.connectionStart||zr(x(r)?r[0]:r)),!o||n&&"target"!==i.docking||(s.connectionEnd=s.connectionEnd||zr(x(r)?r[r.length-1]:r)),i.newWaypoints&&(s.waypoints=i.newWaypoints),this._modeling.layoutConnection(t,s))},Mr.prototype.revert=function(e){var t=e.oldSource,n=e.oldTarget,o=e.oldWaypoints,r=e.connection;return t&&(r.source=t),n&&(r.target=n),o&&(r.waypoints=o),r},Pr.$inject=["modeling","rules"],Pr.prototype.preExecute=function(e){var t,n=this,o=this._modeling,r=this._rules,i=e.oldShape,s=e.newData,a=e.hints||{};function c(e,t,n){return r.allowed("connection.reconnect",{connection:n,source:e,target:t})}var l,u={x:s.x,y:s.y},p={x:i.x,y:i.y,width:i.width,height:i.height};t=e.newShape=e.newShape||n.createShape(s,u,i.parent,a),i.host&&o.updateAttachment(t,i.host),!1!==a.moveChildren&&(l=i.children.slice(),o.moveElements(l,{x:0,y:0},t,a));var d=i.incoming.slice(),h=i.outgoing.slice();S(d,function(e){c(e.source,t,e)&&n.reconnectEnd(e,t,_r(e,t,p),a)}),S(h,function(e){var o=e.target;c(t,o,e)&&n.reconnectStart(e,t,mr(e,t,p),a)})},Pr.prototype.postExecute=function(e){var t=e.oldShape;this._modeling.removeShape(t)},Pr.prototype.execute=function(e){},Pr.prototype.revert=function(e){},Pr.prototype.createShape=function(e,t,n,o){return this._modeling.createShape(e,t,n,o)},Pr.prototype.reconnectStart=function(e,t,n,o){this._modeling.reconnectStart(e,t,n,o)},Pr.prototype.reconnectEnd=function(e,t,n,o){this._modeling.reconnectEnd(e,t,n,o)},Or.$inject=["modeling"],Or.prototype.execute=function(e){var t=e.shape,n=e.newBounds,o=e.minBounds;if(void 0===n.x||void 0===n.y||void 0===n.width||void 0===n.height)throw new Error("newBounds must have {x, y, width, height} properties");if(o&&(n.width<o.width||n.height<o.height))throw new Error("width and height cannot be less than minimum height and width");if(!o&&n.width<10||n.height<10)throw new Error("width and height cannot be less than 10px");return e.oldBounds={width:t.width,height:t.height,x:t.x,y:t.y},N(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t},Or.prototype.postExecute=function(e){var t=this._modeling,n=e.shape,o=e.oldBounds;!1!==(e.hints||{}).layout&&(S(n.incoming,function(e){t.layoutConnection(e,{connectionEnd:_r(e,n,o)})}),S(n.outgoing,function(e){t.layoutConnection(e,{connectionStart:mr(e,n,o)})}))},Or.prototype.revert=function(e){var t=e.shape,n=e.oldBounds;return N(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t},Rr.$inject=["modeling"],Rr.prototype.preExecute=function(e){var t=e.delta,n=e.direction,o=e.movingShapes,r=e.resizingShapes,i=e.start,s={};this.moveShapes(o,t),S(r,function(e){s[e.id]=function(e){return{x:e.x,y:e.y,height:e.height,width:e.width}}(e)}),this.resizeShapes(r,t,n),this.updateConnectionWaypoints(function(e,t){var n=[];return S(e.concat(t),function(o){var r=o.incoming,i=o.outgoing;S(r.concat(i),function(o){var r=o.source,i=o.target;($r(e,r)||$r(e,i)||$r(t,r)||$r(t,i))&&($r(n,o)||n.push(o))})}),n}(o,r),t,n,i,o,r,s)},Rr.prototype.execute=function(){},Rr.prototype.revert=function(){},Rr.prototype.moveShapes=function(e,t){var n=this;S(e,function(e){n._modeling.moveShape(e,t,null,{autoResize:!1,layout:!1,recurse:!1})})},Rr.prototype.resizeShapes=function(e,t,n){var o=this;S(e,function(e){var r=function(e,t,n){var o=e.x,r=e.y,i=e.width,s=e.height,a=n.x,c=n.y;switch(t){case"n":return{x:o,y:r+c,width:i,height:s-c};case"s":return{x:o,y:r,width:i,height:s+c};case"w":return{x:o+a,y:r,width:i-a,height:s};case"e":return{x:o,y:r,width:i+a,height:s};default:throw new Error("unknown direction: "+t)}}(e,n,t);o._modeling.resizeShape(e,r,null,{attachSupport:!1,autoResize:!1,layout:!1})})},Rr.prototype.updateConnectionWaypoints=function(e,t,n,o,r,i,s){var a=this,c=r.concat(i);S(e,function(e){var l=e.source,u=e.target,p=function(e){return z(e.waypoints,function(e){return(e=Tr(e)).original&&(e.original=Tr(e.original)),e})}(e),d=Fr(n),h={};Hr(c,l)&&Hr(c,u)?(p=z(p,function(e){return Lr(e,o,n)&&(e[d]=e[d]+t[d]),e.original&&Lr(e.original,o,n)&&(e.original[d]=e.original[d]+t[d]),e}),a._modeling.updateWaypoints(e,p,{labelBehavior:!1})):(Hr(c,l)||Hr(c,u))&&(Hr(r,l)?h.connectionStart=xr(e,l,t):Hr(r,u)?h.connectionEnd=Er(e,u,t):Hr(i,l)?h.connectionStart=mr(e,l,s[l.id]):Hr(i,u)&&(h.connectionEnd=_r(e,u,s[u.id])),a._modeling.layoutConnection(e,h))})},Wr.$inject=["modeling"],Wr.prototype.execute=function(e){var t=e.shape,n=t.children;e.oldChildrenVisibility=Ir(n),t.collapsed=!t.collapsed;var o=Nr(n,t.collapsed);return[t].concat(o)},Wr.prototype.revert=function(e){var t=e.shape,n=e.oldChildrenVisibility,o=qr(t.children,n);return t.collapsed=!t.collapsed,[t].concat(o)},Vr.$inject=["modeling"],Vr.prototype.execute=function(e){var t=e.shape,n=e.newHost,o=t.host;return e.oldHost=o,e.attacherIdx=Ur(o,t),Gr(n,t),t.host=n,t},Vr.prototype.revert=function(e){var t=e.shape,n=e.newHost,o=e.oldHost,r=e.attacherIdx;return t.host=o,Ur(n,t),Gr(o,t,r),t},Yr.prototype.execute=function(e){var t=e.connection,n=e.newWaypoints;return e.oldWaypoints=t.waypoints,t.waypoints=n,t},Yr.prototype.revert=function(e){var t=e.connection,n=e.oldWaypoints;return t.waypoints=n,t},Xr.$inject=["eventBus","elementFactory","commandStack"],Xr.prototype.getHandlers=function(){return{"shape.append":tr,"shape.create":sr,"shape.delete":hr,"shape.move":Dr,"shape.resize":Or,"shape.replace":Pr,"shape.toggleCollapse":Wr,spaceTool:Rr,"label.create":ar,"connection.create":nr,"connection.delete":pr,"connection.move":yr,"connection.layout":vr,"connection.updateWaypoints":Yr,"connection.reconnect":Mr,"elements.create":rr,"elements.move":Sr,"elements.delete":dr,"elements.distribute":fr,"elements.align":er,"element.updateAttachment":Vr}},Xr.prototype.registerHandlers=function(e){S(this.getHandlers(),function(t,n){e.registerHandler(n,t)})},Xr.prototype.moveShape=function(e,t,n,o,r){"object"==typeof o&&(r=o,o=null);var i={shape:e,delta:t,newParent:n,newParentIndex:o,hints:r||{}};this._commandStack.execute("shape.move",i)},Xr.prototype.updateAttachment=function(e,t){var n={shape:e,newHost:t};this._commandStack.execute("element.updateAttachment",n)},Xr.prototype.moveElements=function(e,t,n,o){var r,i=(o=o||{}).attach,s=n;!0===i?(r=n,s=n.parent):!1===i&&(r=null);var a={shapes:e,delta:t,newParent:s,newHost:r,hints:o};this._commandStack.execute("elements.move",a)},Xr.prototype.moveConnection=function(e,t,n,o,r){"object"==typeof o&&(r=o,o=void 0);var i={connection:e,delta:t,newParent:n,newParentIndex:o,hints:r||{}};this._commandStack.execute("connection.move",i)},Xr.prototype.layoutConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.layout",n)},Xr.prototype.createConnection=function(e,t,n,o,r,i){"object"==typeof n&&(i=r,r=o,o=n,n=void 0);var s={source:e,target:t,parent:r,parentIndex:n,connection:o=this._create("connection",o),hints:i};return this._commandStack.execute("connection.create",s),s.connection},Xr.prototype.createShape=function(e,t,n,o,r){"number"!=typeof o&&(r=o,o=void 0);var i,s,a=(r=r||{}).attach;e=this._create("shape",e),a?(i=n.parent,s=n):i=n;var c={position:t,shape:e,parent:i,parentIndex:o,host:s,hints:r};return this._commandStack.execute("shape.create",c),c.shape},Xr.prototype.createElements=function(e,t,n,o,r){x(e)||(e=[e]),"number"!=typeof o&&(r=o,o=void 0);var i={position:t,elements:e,parent:n,parentIndex:o,hints:r=r||{}};return this._commandStack.execute("elements.create",i),i.elements},Xr.prototype.createLabel=function(e,t,n,o){n=this._create("label",n);var r={labelTarget:e,position:t,parent:o||e.parent,shape:n};return this._commandStack.execute("label.create",r),r.shape},Xr.prototype.appendShape=function(e,t,n,o,r){r=r||{};var i={source:e,position:n,target:o,shape:t=this._create("shape",t),connection:r.connection,connectionParent:r.connectionParent,hints:r};return this._commandStack.execute("shape.append",i),i.shape},Xr.prototype.removeElements=function(e){var t={elements:e};this._commandStack.execute("elements.delete",t)},Xr.prototype.distributeElements=function(e,t,n){var o={groups:e,axis:t,dimension:n};this._commandStack.execute("elements.distribute",o)},Xr.prototype.removeShape=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.delete",n)},Xr.prototype.removeConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.delete",n)},Xr.prototype.replaceShape=function(e,t,n){var o={oldShape:e,newData:t,hints:n||{}};return this._commandStack.execute("shape.replace",o),o.newShape},Xr.prototype.alignElements=function(e,t){var n={elements:e,alignment:t};this._commandStack.execute("elements.align",n)},Xr.prototype.resizeShape=function(e,t,n,o){var r={shape:e,newBounds:t,minBounds:n,hints:o};this._commandStack.execute("shape.resize",r)},Xr.prototype.createSpace=function(e,t,n,o,r){var i={delta:n,direction:o,movingShapes:e,resizingShapes:t,start:r};this._commandStack.execute("spaceTool",i)},Xr.prototype.updateWaypoints=function(e,t,n){var o={connection:e,newWaypoints:t,hints:n||{}};this._commandStack.execute("connection.updateWaypoints",o)},Xr.prototype.reconnect=function(e,t,n,o,r){var i={connection:e,newSource:t,newTarget:n,dockingOrPoints:o,hints:r||{}};this._commandStack.execute("connection.reconnect",i)},Xr.prototype.reconnectStart=function(e,t,n,o){o||(o={}),this.reconnect(e,t,e.target,n,N(o,{docking:"source"}))},Xr.prototype.reconnectEnd=function(e,t,n,o){o||(o={}),this.reconnect(e,e.source,t,n,N(o,{docking:"target"}))},Xr.prototype.connect=function(e,t,n,o){return this.createConnection(e,t,n||{},e.parent,o)},Xr.prototype._create=function(e,t){return t instanceof ln?t:this._elementFactory.create(e,t)},Xr.prototype.toggleCollapse=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.toggleCollapse",n)},Kr.prototype.layoutConnection=function(e,t){return[(t=t||{}).connectionStart||Vt(t.source||e.source),t.connectionEnd||Vt(t.target||e.target)]};const Zr={__depends__:[Zo,Jo,qn,Un],__init__:["modeling"],modeling:["type",Xr],layouter:["type",Kr]};function Qr(e,t){var n;function o(e){return function(e){if(!Ne(e.target,".djs-draggable")){var t=e.button;if(!(t>=2||e.ctrlKey||e.shiftKey||e.altKey))return n={button:t,start:Sn(e)},Ke.bind(document,"mousemove",r),Ke.bind(document,"mouseup",i),!0}}(e.originalEvent)}function r(o){var r,i=n.start,s=n.button,a=Sn(o),c=eo(a,i);!n.dragging&&(r=c,Math.sqrt(Math.pow(r.x,2)+Math.pow(r.y,2))>15)&&(n.dragging=!0,0===s&&Qn(e),Kn("grab")),n.dragging&&(c=eo(a,n.last||n.start),t.scroll({dx:c.x,dy:c.y}),n.last=a),o.preventDefault()}function i(e){Ke.unbind(document,"mousemove",r),Ke.unbind(document,"mouseup",i),n=null,Zn()}e.on("canvas.focus.changed",function(t){t.focused?e.on("element.mousedown",500,o):e.off("element.mousedown",o)}),this.isActive=function(){return!!n}}Qr.$inject=["eventBus","canvas"];const Jr={__init__:["moveCanvas"],moveCanvas:["type",Qr]};function ei(e,t){this._eventBus=e,this.offset=5;var n=t.cls("djs-outline",["no-fill"]),o=this;function r(e){var t=oe("rect");return X(t,N({x:0,y:0,rx:4,width:100,height:100},n)),t}e.on(["shape.added","shape.changed"],500,function(e){var t=e.element,n=e.gfx,i=rt(".djs-outline",n);i||U(n,i=o.getOutline(t)||r()),o.updateShapeOutline(i,t)}),e.on(["connection.added","connection.changed"],function(e){var t=e.element,n=e.gfx,i=rt(".djs-outline",n);i||U(n,i=r()),o.updateConnectionOutline(i,t)})}function ti(e,t,n){this._canvas=t;var o=this;e.on("element.changed",function(e){n.isSelected(e.element)&&o._updateMultiSelectionOutline(n.get())}),e.on("selection.changed",function(e){var t=e.newSelection;o._updateMultiSelectionOutline(t)})}ei.prototype.updateShapeOutline=function(e,t){var n=!1,o=this._getProviders();o.length&&S(o,function(o){n=n||o.updateOutline(t,e)}),n||X(e,{x:-this.offset,y:-this.offset,width:t.width+2*this.offset,height:t.height+2*this.offset})},ei.prototype.updateConnectionOutline=function(e,t){var n=we(t);X(e,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+2*this.offset,height:n.height+2*this.offset})},ei.prototype.registerProvider=function(e,t){t||(t=e,e=1e3),this._eventBus.on("outline.getProviders",e,function(e){e.providers.push(t)})},ei.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"outline.getProviders",providers:[]});return this._eventBus.fire(e),e.providers},ei.prototype.getOutline=function(e){var t;return S(this._getProviders(),function(n){w(n.getOutline)&&(t=t||n.getOutline(e))}),t},ei.$inject=["eventBus","styles","elementRegistry"],ti.prototype._updateMultiSelectionOutline=function(e){var t=this._canvas.getLayer("selectionOutline");J(t);var n=e.length>1;if(Z(this._canvas.getContainer())[n?"add":"remove"]("djs-multi-select"),n){var o=function(e){return{x:e.x-6,y:e.y-6,width:e.width+12,height:e.height+12}}(we(e)),r=oe("rect");X(r,N({rx:3},o)),Z(r).add("djs-selection-outline"),U(t,r)}},ti.$inject=["eventBus","canvas","selection"];const ni={__depends__:[qn],__init__:["outline","multiSelectionOutline"],outline:["type",ei],multiSelectionOutline:["type",ti]};var oi=Math.round;function ri(e,t,n,o,r){function i(e,t,n,o){return r.allowed("elements.move",{shapes:e,delta:t,position:n,target:o})}function s(e,n,o,r){if(E(o)&&(r=o,o=!1),!n.waypoints&&n.parent&&!Z(e.target).has("djs-hit-no-move")){var i=function(e){return{x:e.x+oi(e.width/2),y:e.y+oi(e.height/2)}}(n);return t.init(e,i,"shape.move",{cursor:"grabbing",autoActivate:o,data:{shape:n,context:r||{}}}),!0}}e.on("shape.move.start",1500,function(e){var t=e.context,n=e.shape,r=o.get().slice();-1===r.indexOf(n)&&(r=[n]),r=function(e){var t=O(e,"id");return B(e,function(e){for(;e=e.parent;)if(t[e.id])return!1;return!0})}(r),N(t,{shapes:r,validatedShapes:r,shape:n})}),e.on("shape.move.start",1250,function(e){var t=e.context,n=t.validatedShapes;if(!(t.canExecute=i(n)))return!1}),e.on("shape.move.move",500,function(e){var t,n=e.context,o=n.validatedShapes,r=e.hover,s={x:e.dx,y:e.dy};t=i(o,s,{x:e.x,y:e.y},r),n.delta=s,n.canExecute=t,n.target=null!==t?r:null}),e.on("shape.move.end",function(e){var t=e.context,o=t.delta,r=t.canExecute,i="attach"===r,s=t.shapes;if(!1===r)return!1;o.x=oi(o.x),o.y=oi(o.y),0===o.x&&0===o.y||n.moveElements(s,o,t.target,{primaryShape:t.shape,attach:i})}),e.on("element.mousedown",function(e){if(zn(e)){var t=kn(e);if(!t)throw new Error("must supply DOM mousedown event");return s(t,e.element)}}),this.start=s}ri.$inject=["eventBus","dragging","modeling","selection","rules"];var ii="djs-dragging",si="drop-ok",ai="drop-not-ok",ci="new-parent",li="attach-ok";function ui(e,t,n,o){function r(e){var t=be(e,!0),n=t.flatMap(e=>(e.incoming||[]).concat(e.outgoing||[])),o=t.concat(n);return[...new Set(o)]}function i(e,n){[li,si,ai,ci].forEach(function(o){o===n?t.addMarker(e,o):t.removeMarker(e,o)})}e.on("shape.move.start",499,function(e){var i,s,a,c=e.context,l=c.shapes,u=c.allDraggedElements,p=B(s=r(l),function(e){return!Ht(e)||k(s,T({id:e.source.id}))&&k(s,T({id:e.target.id}))});if(!c.dragGroup){var d=oe("g");X(d,n.cls("djs-drag-group",["no-events"])),U(t.getActiveLayer(),d),c.dragGroup=d}p.forEach(function(e){o.addDragger(e,c.dragGroup)}),u?(i=[u,r(l)],u=Array.prototype.concat.apply([],i)):u=r(l),S(u,function(e){t.addMarker(e,ii)}),c.allDraggedElements=u,c.differentParents=1!==(a=O(l,function(e){return e.parent&&e.parent.id}),function(e){return e&&Object.keys(e)||[]}(a).length)}),e.on("shape.move.move",499,function(e){var t=e.context,n=t.dragGroup,o=t.target,r=t.shape.parent,s=t.canExecute;o&&("attach"===s?i(o,li):t.canExecute&&r&&o.id!==r.id?i(o,ci):i(o,t.canExecute?si:ai)),xn(n,e.dx,e.dy)}),e.on(["shape.move.out","shape.move.cleanup"],function(e){var t=e.context.target;t&&i(t,null)}),e.on("shape.move.cleanup",function(e){var n=e.context,o=n.allDraggedElements,r=n.dragGroup;S(o,function(e){t.removeMarker(e,ii)}),r&&ce(r)}),this.makeDraggable=function(e,n,r){o.addDragger(n,e.dragGroup),r&&t.addMarker(n,ii),e.allDraggedElements?e.allDraggedElements.push(n):e.allDraggedElements=[n]}}ui.$inject=["eventBus","canvas","styles","previewSupport"];const pi={__depends__:[Tn,qn,ni,Un,io,Mo],__init__:["move","movePreview"],move:["type",ri],movePreview:["type",ui]};var di=".djs-palette-toggle",hi=".entry",fi=di+", "+hi,gi="djs-palette-",vi="open",yi="two-column";function Ai(e,t){this._eventBus=e,this._canvas=t;var n=this;e.on("tool-manager.update",function(e){var t=e.tool;n.updateToolHighlight(t)}),e.on("i18n.changed",function(){n._update()}),e.on("diagram.init",function(){n._diagramInitialized=!0,n._rebuild()})}function mi(e,t){var n=t.getPaletteEntries();return w(n)?n(e):(S(n,function(t,n){e[n]=t}),e)}Ai.$inject=["eventBus","canvas"],Ai.prototype.registerProvider=function(e,t){t||(t=e,e=1e3),this._eventBus.on("palette.getProviders",e,function(e){e.providers.push(t)}),this._rebuild()},Ai.prototype.getEntries=function(){return this._getProviders().reduce(mi,{})},Ai.prototype._rebuild=function(){this._diagramInitialized&&this._getProviders().length&&(this._container||this._init(),this._update())},Ai.prototype._init=function(){var e=this,t=this._eventBus,n=this._getParentContainer(),o=this._container=nt(Ai.HTML_MARKUP);n.appendChild(o),He(n).add(gi+"shown"),Qe(o,fi,"click",function(t){if(ot(t.delegateTarget,di))return e.toggle();e.trigger("click",t)}),Ke.bind(o,"mousedown",function(e){e.stopPropagation()}),Qe(o,hi,"dragstart",function(t){e.trigger("dragstart",t)}),t.on("canvas.resized",this._layoutChanged,this),t.fire("palette.create",{container:o})},Ai.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"palette.getProviders",providers:[]});return this._eventBus.fire(t),t.providers},Ai.prototype._toggleState=function(e){e=e||{};var t,n=this._getParentContainer(),o=this._container,r=this._eventBus,i=He(o),s=He(n);t="twoColumn"in e?e.twoColumn:this._needsCollapse(n.clientHeight,this._entries||{}),i.toggle(yi,t),s.toggle(gi+yi,t),"open"in e&&(i.toggle(vi,e.open),s.toggle(gi+vi,e.open)),r.fire("palette.changed",{twoColumn:t,open:this.isOpen()})},Ai.prototype._update=function(){var e=rt(".djs-palette-entries",this._container),t=this._entries=this.getEntries();Ie(e),S(t,function(t,n){var o=t.group||"default",r=rt("[data-group="+bo(o)+"]",e);r||(Fe(r=nt('<div class="group"></div>'),"data-group",o),e.appendChild(r));var i=t.html||(t.separator?'<hr class="separator" />':'<div class="entry" draggable="true"></div>'),s=nt(i);if(r.appendChild(s),!t.separator&&(Fe(s,"data-action",n),t.title&&Fe(s,"title",t.title),t.className&&function(e,t){var n=He(e);(x(t)?t:t.split(/\s+/g)).forEach(function(e){n.add(e)})}(s,t.className),t.imageUrl)){var a=nt("<img>");Fe(a,"src",t.imageUrl),s.appendChild(a)}}),this.open()},Ai.prototype.trigger=function(e,t,n){var o,r,i=t.delegateTarget||t.target;return i?(o=Fe(i,"data-action"),r=t.originalEvent||t,this.triggerEntry(o,e,r,n)):t.preventDefault()},Ai.prototype.triggerEntry=function(e,t,n,o){var r,i;if((r=this._entries[e])&&(i=r.action,!1!==this._eventBus.fire("palette.trigger",{entry:r,event:n}))){if(w(i)){if("click"===t)return i(n,o)}else if(i[t])return i[t](n,o);n.preventDefault()}},Ai.prototype._layoutChanged=function(){this._toggleState({})},Ai.prototype._needsCollapse=function(e,t){return e<46*Object.keys(t).length+50},Ai.prototype.close=function(){this._toggleState({open:!1,twoColumn:!1})},Ai.prototype.open=function(){this._toggleState({open:!0})},Ai.prototype.toggle=function(){this.isOpen()?this.close():this.open()},Ai.prototype.isActiveTool=function(e){return e&&this._activeTool===e},Ai.prototype.updateToolHighlight=function(e){var t;this._toolsContainer||(t=rt(".djs-palette-entries",this._container),this._toolsContainer=rt("[data-group=tools]",t)),S(this._toolsContainer.children,function(t){var n=t.getAttribute("data-action");if(n){var o=He(t);n=n.replace("-tool",""),o.contains("entry")&&n===e?o.add("highlighted-entry"):o.remove("highlighted-entry")}})},Ai.prototype.isOpen=function(){return He(this._container).has(vi)},Ai.prototype._getParentContainer=function(){return this._canvas.getContainer()},Ai.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>';const _i={__init__:["palette"],palette:["type",Ai]};var xi=Math.max,Ei=Math.min;function bi(e,t,n){var o=t[e],r=n.min&&n.min[e],i=n.max&&n.max[e];return b(r)&&(o=(/top|left/.test(e)?Ei:xi)(o,r)),b(i)&&(o=(/top|left/.test(e)?xi:Ei)(o,i)),o}function wi(e,t){return void 0!==e?e:20}function Ci(e){return!e.waypoints&&"label"!==e.type}function ji(e,t,n,o){this._dragging=o,this._rules=t;var r=this;e.on("resize.start",function(e){var t,n,o;n=(t=e.context).resizeConstraints,o=t.minBounds,void 0===n&&(void 0===o&&(o=r.computeMinResizeBox(t)),t.resizeConstraints={min:Nt(o)})}),e.on("resize.move",function(e){var t={x:e.dx,y:e.dy};!function(e,t){var n,o=e.shape,i=e.direction,s=e.resizeConstraints;e.delta=t,n=function(e,t,n){var o=n.x,r=n.y,i={x:e.x,y:e.y,width:e.width,height:e.height};return-1!==t.indexOf("n")?(i.y=e.y+r,i.height=e.height-r):-1!==t.indexOf("s")&&(i.height=e.height+r),-1!==t.indexOf("e")?i.width=e.width+o:-1!==t.indexOf("w")&&(i.x=e.x+o,i.width=e.width-o),i}(o,i,t),e.newBounds=function(e,t){if(!t)return e;var n=Nt(e);return qt({top:bi("top",n,t),right:bi("right",n,t),bottom:bi("bottom",n,t),left:bi("left",n,t)})}(n,s),e.canExecute=r.canResize(e)}(e.context,t)}),e.on("resize.end",function(e){!function(e){var t,o=e.shape,r=e.canExecute,i=e.newBounds;if(r){if(t=i,!function(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}(o,i={x:Math.round(t.x),y:Math.round(t.y),width:Math.round(t.width),height:Math.round(t.height)}))return;n.resizeShape(o,i)}}(e.context)})}function ki(e,t){var n=Vt(e),o=Nt(e),r={x:n.x,y:n.y};return-1!==t.indexOf("n")?r.y=o.top:-1!==t.indexOf("s")&&(r.y=o.bottom),-1!==t.indexOf("e")?r.x=o.right:-1!==t.indexOf("w")&&(r.x=o.left),r}function Bi(e){var t="resize-";return"n"===e||"s"===e?t+"ns":"e"===e||"w"===e?t+"ew":"nw"===e||"se"===e?t+"nwse":t+"nesw"}ji.prototype.canResize=function(e){var t=this._rules,n=q(e,["newBounds","shape","delta","direction"]);return t.allowed("shape.resize",n)},ji.prototype.activate=function(e,t,n){var o,r,i=this._dragging;if("string"==typeof n&&(n={direction:n}),!(r=(o=N({shape:t},n)).direction))throw new Error("must provide a direction (n|w|s|e|nw|se|ne|sw)");i.init(e,ki(t,r),"resize",{autoActivate:!0,cursor:Bi(r),data:{shape:t,context:o}})},ji.prototype.computeMinResizeBox=function(e){var t,n,o,r,i,s,a,c=e.shape;return t=e.direction,n=c,o=e.minDimensions||{width:10,height:10},r=function(e,t){var n;if((n=void 0===e.length?B(e.children,Ci):e).length)return function(e,t){var n,o,r,i;return"object"==typeof t?(n=wi(t.left),o=wi(t.right),r=wi(t.top),i=wi(t.bottom)):n=o=r=i=wi(t),{x:e.x-n,y:e.y-r,width:e.width+n+o,height:e.height+r+i}}(we(n),t)}(c,e.childrenBoxPadding),i=Nt(n),s={top:/n/.test(t)?i.bottom-o.height:i.top,left:/w/.test(t)?i.right-o.width:i.left,bottom:/s/.test(t)?i.top+o.height:i.bottom,right:/e/.test(t)?i.left+o.width:i.right},a=r?Nt(r):s,qt({top:Ei(s.top,a.top),left:Ei(s.left,a.left),bottom:xi(s.bottom,a.bottom),right:xi(s.right,a.right)})},ji.$inject=["eventBus","rules","modeling","dragging"];var Si="djs-resizing",Di="resize-not-ok";function Mi(e,t,n){e.on("resize.move",500,function(e){var o,r,i,s;r=(o=e.context).shape,i=o.newBounds,(s=o.frame)||(s=o.frame=n.addFrame(r,t.getActiveLayer()),t.addMarker(r,Si)),i.width>5&&X(s,{x:i.x,width:i.width}),i.height>5&&X(s,{y:i.y,height:i.height}),o.canExecute?Z(s).remove(Di):Z(s).add(Di)}),e.on("resize.cleanup",function(e){var n,o;o=(n=e.context).shape,n.frame&&ce(n.frame),t.removeMarker(o,Si)})}Mi.$inject=["eventBus","canvas","previewSupport"];var zi="djs-resizer",Pi=["n","w","s","e","nw","ne","se","sw"];function Oi(e,t,n,o){this._resize=o,this._canvas=t;var r=this;e.on("selection.changed",function(e){var t=e.newSelection;r.removeResizers(),1===t.length&&S(t,I(r.addResizer,r))}),e.on("shape.changed",function(e){var t=e.element;n.isSelected(t)&&(r.removeResizers(),r.addResizer(t))})}Oi.prototype.makeDraggable=function(e,t,n){var o=this._resize;function r(t){zn(t)&&o.activate(t,e,n)}Ke.bind(t,"mousedown",r),Ke.bind(t,"touchstart",r)},Oi.prototype._createResizer=function(e,t,n,o){var r=this._getResizersParent(),i=function(e){var t={x:0,y:0};return-1!==e.indexOf("e")?t.x=6:-1!==e.indexOf("w")&&(t.x=-6),-1!==e.indexOf("s")?t.y=6:-1!==e.indexOf("n")&&(t.y=-6),t}(o),s=oe("g");Z(s).add(zi),Z(s).add(zi+"-"+e.id),Z(s).add(zi+"-"+o),U(r,s);var a=oe("rect");X(a,{x:-4+i.x,y:-4+i.y,width:8,height:8}),Z(a).add(zi+"-visual"),U(s,a);var c=oe("rect");return X(c,{x:-10+i.x,y:-10+i.y,width:20,height:20}),Z(c).add(zi+"-hit"),U(s,c),function(e,t,n){var o=ae();o.setTranslate(t,n);var r=ae();r.setRotate(0,0,0);var i=ae();i.setScale(1,1),ue(e,[o,r,i])}(s,t,n),s},Oi.prototype.createResizer=function(e,t){var n=ki(e,t),o=this._createResizer(e,n.x,n.y,t);this.makeDraggable(e,o,t)},Oi.prototype.addResizer=function(e){var t=this;!Ht(e)&&this._resize.canResize({shape:e})&&S(Pi,function(n){t.createResizer(e,n)})},Oi.prototype.removeResizers=function(){J(this._getResizersParent())},Oi.prototype._getResizersParent=function(){return this._canvas.getLayer("resizers")},Oi.$inject=["eventBus","canvas","selection","resize"];const $i={__depends__:[Un,io,Mo],__init__:["resize","resizePreview","resizeHandles"],resize:["type",ji],resizePreview:["type",Mi],resizeHandles:["type",Oi]};function Ri(e){return Math.log(e)/Math.log(10)}function Ti(e,t){var n=Ri(e.min),o=Ri(e.max);return(Math.abs(n)+Math.abs(o))/t}var Fi=Math.sign||function(e){return e>=0?1:-1},Li={min:.2,max:4};function Hi(e,t,n){e=e||{},this._enabled=!1,this._canvas=n,this._container=n._container,this._handleWheel=I(this._handleWheel,this),this._totalDelta=0,this._scale=e.scale||.75;var o=this;t.on("canvas.focus.changed",function(t){o._init(t.focused&&!1!==e.enabled)})}Hi.$inject=["config.zoomScroll","eventBus","canvas"],Hi.prototype.scroll=function(e){this._canvas.scroll(e)},Hi.prototype.reset=function(){this._canvas.zoom("fit-viewport")},Hi.prototype.zoom=function(e,t){var n=Ti(Li,20);this._totalDelta+=e,Math.abs(this._totalDelta)>.1&&(this._zoom(e,t,n),this._totalDelta=0)},Hi.prototype._handleWheel=function(e){if(this._canvas.isFocused()){var t=this._container;e.preventDefault();var n,o=e.ctrlKey||Dn()&&e.metaKey,r=e.shiftKey,i=-1*this._scale;if(i*=o?0===e.deltaMode?.02:.32:0===e.deltaMode?1:16,o){var s=t.getBoundingClientRect(),a={x:e.clientX-s.left,y:e.clientY-s.top};n=Math.sqrt(Math.pow(e.deltaY,2)+Math.pow(e.deltaX,2))*Fi(e.deltaY)*i,this.zoom(n,a)}else n=r?{dx:i*e.deltaY,dy:0}:{dx:i*e.deltaX,dy:i*e.deltaY},this.scroll(n)}},Hi.prototype.stepZoom=function(e,t){var n=Ti(Li,10);this._zoom(e,t,n)},Hi.prototype._zoom=function(e,t,n){var o=this._canvas,r=e>0?1:-1,i=Ri(o.zoom()),s=Math.round(i/n)*n;s+=n*r;var a,c,l=Math.pow(10,s);o.zoom((a=Li,c=l,Math.max(a.min,Math.min(a.max,c))),t)},Hi.prototype.toggle=function(e){var t=this._container,n=this._handleWheel,o=this._enabled;return void 0===e&&(e=!o),o!==e&&Ke[e?"bind":"unbind"](t,"wheel",n,!1),this._enabled=e,e},Hi.prototype._init=function(e){this.toggle(e)};const Wi={__init__:["zoomScroll"],zoomScroll:["type",Hi]};var Ii=Math.abs,Ni=Math.round,qi={x:"width",y:"height"},Vi="crosshair",Ui={n:"top",w:"left",s:"bottom",e:"right"},Gi={n:"s",w:"e",s:"n",e:"w"};function Yi(e,t,n,o,r,i,s){this._canvas=e,this._dragging=t,this._eventBus=n,this._modeling=o,this._rules=r,this._toolManager=i,this._mouse=s;var a=this;i.registerTool("space",{tool:"spaceTool.selection",dragging:"spaceTool"}),n.on("spaceTool.selection.end",function(e){n.once("spaceTool.selection.ended",function(){a.activateMakeSpace(e.originalEvent)})}),n.on("spaceTool.move",1500,function(e){var t=e.context,n=t.initialized;n||(n=t.initialized=a.init(e,t)),n&&Ki(e)}),n.on("spaceTool.end",function(e){var t=e.context,o=t.axis,r=t.direction,i=t.movingShapes,s=t.resizingShapes,c=t.start;if(t.initialized){Ki(e);var l={x:0,y:0};l[o]=Ni(e["d"+o]),a.makeSpace(i,s,l,r,c),n.once("spaceTool.ended",function(e){a.activateSelection(e.originalEvent,!0,!0)})}})}function Xi(e){return{top:e.top-20,right:e.right+20,bottom:e.bottom+20,left:e.left-20}}function Ki(e){var t,n,o=e.context.spaceToolConstraints;o&&(b(o.left)&&(t=Math.max(e.x,o.left),e.dx=e.dx+t-e.x,e.x=t),b(o.right)&&(t=Math.min(e.x,o.right),e.dx=e.dx+t-e.x,e.x=t),b(o.top)&&(n=Math.max(e.y,o.top),e.dy=e.dy+n-e.y,e.y=n),b(o.bottom)&&(n=Math.min(e.y,o.bottom),e.dy=e.dy+n-e.y,e.y=n))}function Zi(e,t){return-1!==e.indexOf(t)}Yi.$inject=["canvas","dragging","eventBus","modeling","rules","toolManager","mouse"],Yi.prototype.activateSelection=function(e,t,n){this._dragging.init(e,"spaceTool.selection",{autoActivate:t,cursor:Vi,data:{context:{reactivate:n}},trapClick:!1})},Yi.prototype.activateMakeSpace=function(e){this._dragging.init(e,"spaceTool",{autoActivate:!0,cursor:Vi,data:{context:{}}})},Yi.prototype.makeSpace=function(e,t,n,o,r){return this._modeling.createSpace(e,t,n,o,r)},Yi.prototype.init=function(e,t){var n=Ii(e.dx)>Ii(e.dy)?"x":"y",o=e["d"+n],r=e[n]-o;if(Ii(o)<5)return!1;o<0&&(o*=-1),function(e){var t=kn(e)||e;return!!zn(e)&&(Dn()?t.metaKey:t.ctrlKey)}(e)&&(o*=-1);var i=function(e,t){if("x"===e){if(t>0)return"e";if(t<0)return"w"}if("y"===e){if(t>0)return"s";if(t<0)return"n"}return null}(n,o),s=this._canvas.getRootElement();!Pn(e)&&e.hover&&(s=e.hover);var a=[...be(s,!0),...s.attachers||[]],c=this.calculateAdjustments(a,n,o,r),l=function(e,t,n,o,r){var i=e.movingShapes,s=e.resizingShapes;if(s.length){var a,c,l={};return S(s,function(e){var u,p,d,h,f,g,v=e.attachers,y=e.children,A=Nt(e),m=B(y,function(e){return!(Ht(e)||Wt(e)||Zi(i,e)||Zi(s,e))}),_=B(y,function(e){return!Ht(e)&&!Wt(e)&&Zi(i,e)}),x=[],E=[];m.length&&(p=Xi(Nt(we(m))),u=o-A[Ui[n]]+p[Ui[n]],"n"===n?l.bottom=c=b(c)?Math.min(c,u):u:"w"===n?l.right=c=b(c)?Math.min(c,u):u:"s"===n?l.top=a=b(a)?Math.max(a,u):u:"e"===n&&(l.left=a=b(a)?Math.max(a,u):u)),_.length&&(d=Xi(Nt(we(_))),u=o-d[Ui[Gi[n]]]+A[Ui[Gi[n]]],"n"===n?l.bottom=c=b(c)?Math.min(c,u):u:"w"===n?l.right=c=b(c)?Math.min(c,u):u:"s"===n?l.top=a=b(a)?Math.max(a,u):u:"e"===n&&(l.left=a=b(a)?Math.max(a,u):u)),v&&v.length&&(v.forEach(function(e){Zi(i,e)?x.push(e):E.push(e)}),x.length&&(h=Nt(we(x.map(Vt))),f=A[Ui[Gi[n]]]-(h[Ui[Gi[n]]]-o)),E.length&&(g=Nt(we(E.map(Vt)))[Ui[n]]-(A[Ui[n]]-o)),"n"===n?(u=Math.min(f||1/0,g||1/0),l.bottom=c=b(c)?Math.min(c,u):u):"w"===n?(u=Math.min(f||1/0,g||1/0),l.right=c=b(c)?Math.min(c,u):u):"s"===n?(u=Math.max(f||-1/0,g||-1/0),l.top=a=b(a)?Math.max(a,u):u):"e"===n&&(u=Math.max(f||-1/0,g||-1/0),l.left=a=b(a)?Math.max(a,u):u));var w=r&&r[e.id];w&&("n"===n?(u=o+e[qi[t]]-w[qi[t]],l.bottom=c=b(c)?Math.min(c,u):u):"w"===n?(u=o+e[qi[t]]-w[qi[t]],l.right=c=b(c)?Math.min(c,u):u):"s"===n?(u=o-e[qi[t]]+w[qi[t]],l.top=a=b(a)?Math.max(a,u):u):"e"===n&&(u=o-e[qi[t]]+w[qi[t]],l.left=a=b(a)?Math.max(a,u):u))}),l}}(c,n,i,r,this._eventBus.fire("spaceTool.getMinDimensions",{axis:n,direction:i,shapes:c.resizingShapes,start:r}));return N(t,c,{axis:n,direction:i,spaceToolConstraints:l,start:r}),Kn("resize-"+("x"===n?"ew":"ns")),!0},Yi.prototype.calculateAdjustments=function(e,t,n,o){var r=this._rules,i=[],s=[],a=[],c=[];function l(e){i.includes(e)||i.push(e);var t=e.label;t&&!i.includes(t)&&i.push(t)}S(e,function(e){if(e.parent&&!Wt(e))if(Ht(e))c.push(e);else{var i=e[t],u=i+e[qi[t]];if(function(e){return!!e.host}(e)&&(n>0&&Vt(e)[t]>o||n<0&&Vt(e)[t]<o))a.push(e);else{var p;if(!(n>0&&i>o||n<0&&u<o))return i<o&&u>o&&r.allowed("shape.resize",{shape:e})?(p=e,void(s.includes(p)||s.push(p))):void 0;l(e)}}}),S(i,function(e){var t=e.attachers;t&&S(t,function(e){l(e)})});var u=i.concat(s);return S(a,function(e){var t=e.host;Zi(u,t)&&l(e)}),u=i.concat(s),S(c,function(e){var t=e.source,n=e.target,o=e.label;Zi(u,t)&&Zi(u,n)&&o&&l(o)}),{movingShapes:i,resizingShapes:s}},Yi.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)},Yi.prototype.isActive=function(){var e=this._dragging.context();return!!e&&/^spaceTool/.test(e.prefix)};var Qi="djs-dragging",Ji="djs-resizing",es=Math.max;function ts(e,t,n,o,r){function i(e,t){S(e,function(e){r.addDragger(e,t),n.addMarker(e,Qi)})}e.on("spaceTool.selection.start",function(e){var t=n.getLayer("space"),r=e.context,i=oe("g");X(i,o.cls("djs-crosshair-group",["no-events"])),U(t,i);var s=oe("path");X(s,"d","M 0,-10000 L 0,10000"),Z(s).add("djs-crosshair"),U(i,s);var a=oe("path");X(a,"d","M -10000,0 L 10000,0"),Z(a).add("djs-crosshair"),U(i,a),r.crosshairGroup=i}),e.on("spaceTool.selection.move",function(e){xn(e.context.crosshairGroup,e.x,e.y)}),e.on("spaceTool.selection.cleanup",function(e){var t=e.context.crosshairGroup;t&&ce(t)}),e.on("spaceTool.move",250,function(e){var s=e.context,a=s.line,c=s.axis,l=s.movingShapes,u=s.resizingShapes;if(s.initialized){if(!s.dragGroup){var p=n.getLayer("space");X(a=oe("path"),"d","M0,0 L0,0"),Z(a).add("djs-crosshair"),U(p,a),s.line=a;var d=oe("g");X(d,o.cls("djs-drag-group",["no-events"])),U(n.getActiveLayer(),d),i(l,d),i(s.movingConnections=t.filter(function(e){var t=!1;S(l,function(n){S(n.outgoing,function(n){e===n&&(t=!0)})});var n=!1;S(l,function(t){S(t.incoming,function(t){e===t&&(n=!0)})});var o=!1;S(u,function(t){S(t.outgoing,function(t){e===t&&(o=!0)})});var r=!1;return S(u,function(t){S(t.incoming,function(t){e===t&&(r=!0)})}),Ht(e)&&(t||o)&&(n||r)}),d),s.dragGroup=d}if(!s.frameGroup){var h=oe("g");X(h,o.cls("djs-frame-group",["no-events"])),U(n.getActiveLayer(),h);var f=[];S(u,function(e){var t=r.addFrame(e,h),o=t.getBBox();f.push({element:t,initialBounds:o}),n.addMarker(e,Ji)}),s.frameGroup=h,s.frames=f}X(a,{d:{x:"M"+e.x+", -10000 L"+e.x+", 10000",y:"M -10000, "+e.y+" L 10000, "+e.y}[c]});var g={x:e.dx,y:e.dy};g[{x:"y",y:"x"}[s.axis]]=0,xn(s.dragGroup,g.x,g.y),S(s.frames,function(e){var t,n,o=e.element,r=e.initialBounds;"e"===s.direction?X(o,{width:es(r.width+g.x,5)}):X(o,{width:t=es(r.width-g.x,5),x:r.x+r.width-t}),"s"===s.direction?X(o,{height:es(r.height+g.y,5)}):X(o,{height:n=es(r.height-g.y,5),y:r.y+r.height-n})})}}),e.on("spaceTool.cleanup",function(e){var t=e.context,o=t.movingShapes,r=t.movingConnections,i=t.resizingShapes,s=t.line,a=t.dragGroup,c=t.frameGroup;S(o,function(e){n.removeMarker(e,Qi)}),S(r,function(e){n.removeMarker(e,Qi)}),a&&(ce(s),ce(a)),S(i,function(e){n.removeMarker(e,Ji)}),c&&ce(c)})}ts.$inject=["eventBus","elementRegistry","canvas","styles","previewSupport"];const ns={__init__:["spaceToolPreview"],__depends__:[io,Un,No,Mo,Vo],spaceTool:["type",Yi],spaceToolPreview:["type",ts]};var os,rs,is,ss,as,cs,ls,us,ps,ds,hs,fs={},gs=[],vs=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ys=Array.isArray;function As(e,t){for(var n in t)e[n]=t[n];return e}function ms(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function _s(e,t,n){var o,r,i,s={};for(i in t)"key"==i?o=t[i]:"ref"==i?r=t[i]:s[i]=t[i];if(arguments.length>2&&(s.children=arguments.length>3?os.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(i in e.defaultProps)void 0===s[i]&&(s[i]=e.defaultProps[i]);return xs(e,s,o,r,null)}function xs(e,t,n,o,r){var i={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==r?++is:r,__i:-1,__u:0};return null==r&&null!=rs.vnode&&rs.vnode(i),i}function Es(e){return e.children}function bs(e,t){this.props=e,this.context=t}function ws(e,t){if(null==t)return e.__?ws(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?ws(e):null}function Cs(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return Cs(e)}}function js(e){(!e.__d&&(e.__d=!0)&&ss.push(e)&&!ks.__r++||as!=rs.debounceRendering)&&((as=rs.debounceRendering)||cs)(ks)}function ks(){for(var e,t,n,o,r,i,s,a=1;ss.length;)ss.length>a&&ss.sort(ls),e=ss.shift(),a=ss.length,e.__d&&(n=void 0,o=void 0,r=(o=(t=e).__v).__e,i=[],s=[],t.__P&&((n=As({},o)).__v=o.__v+1,rs.vnode&&rs.vnode(n),$s(t.__P,n,o,t.__n,t.__P.namespaceURI,32&o.__u?[r]:null,i,null==r?ws(o):r,!!(32&o.__u),s),n.__v=o.__v,n.__.__k[n.__i]=n,Ts(i,n,s),o.__e=o.__=null,n.__e!=r&&Cs(n)));ks.__r=0}function Bs(e,t,n,o,r,i,s,a,c,l,u){var p,d,h,f,g,v,y,A=o&&o.__k||gs,m=t.length;for(c=Ss(n,t,A,c,m),p=0;p<m;p++)null!=(h=n.__k[p])&&(d=-1==h.__i?fs:A[h.__i]||fs,h.__i=p,v=$s(e,h,d,r,i,s,a,c,l,u),f=h.__e,h.ref&&d.ref!=h.ref&&(d.ref&&Hs(d.ref,null,h),u.push(h.ref,h.__c||f,h)),null==g&&null!=f&&(g=f),(y=!!(4&h.__u))||d.__k===h.__k?c=Ds(h,c,e,y):"function"==typeof h.type&&void 0!==v?c=v:f&&(c=f.nextSibling),h.__u&=-7);return n.__e=g,c}function Ss(e,t,n,o,r){var i,s,a,c,l,u=n.length,p=u,d=0;for(e.__k=new Array(r),i=0;i<r;i++)null!=(s=t[i])&&"boolean"!=typeof s&&"function"!=typeof s?(c=i+d,(s=e.__k[i]="string"==typeof s||"number"==typeof s||"bigint"==typeof s||s.constructor==String?xs(null,s,null,null,null):ys(s)?xs(Es,{children:s},null,null,null):null==s.constructor&&s.__b>0?xs(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s).__=e,s.__b=e.__b+1,a=null,-1!=(l=s.__i=Ms(s,n,c,p))&&(p--,(a=n[l])&&(a.__u|=2)),null==a||null==a.__v?(-1==l&&(r>u?d--:r<u&&d++),"function"!=typeof s.type&&(s.__u|=4)):l!=c&&(l==c-1?d--:l==c+1?d++:(l>c?d--:d++,s.__u|=4))):e.__k[i]=null;if(p)for(i=0;i<u;i++)null!=(a=n[i])&&!(2&a.__u)&&(a.__e==o&&(o=ws(a)),Ws(a,a));return o}function Ds(e,t,n,o){var r,i;if("function"==typeof e.type){for(r=e.__k,i=0;r&&i<r.length;i++)r[i]&&(r[i].__=e,t=Ds(r[i],t,n,o));return t}e.__e!=t&&(o&&(t&&e.type&&!t.parentNode&&(t=ws(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do{t=t&&t.nextSibling}while(null!=t&&8==t.nodeType);return t}function Ms(e,t,n,o){var r,i,s,a=e.key,c=e.type,l=t[n],u=null!=l&&!(2&l.__u);if(null===l&&null==e.key||u&&a==l.key&&c==l.type)return n;if(o>(u?1:0))for(r=n-1,i=n+1;r>=0||i<t.length;)if(null!=(l=t[s=r>=0?r--:i++])&&!(2&l.__u)&&a==l.key&&c==l.type)return s;return-1}function zs(e,t,n){"-"==t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||vs.test(t)?n:n+"px"}function Ps(e,t,n,o,r){var i,s;e:if("style"==t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof o&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||zs(e.style,t,"");if(n)for(t in n)o&&n[t]==o[t]||zs(e.style,t,n[t])}else if("o"==t[0]&&"n"==t[1])i=t!=(t=t.replace(us,"$1")),s=t.toLowerCase(),t=s in e||"onFocusOut"==t||"onFocusIn"==t?s.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?o?n.u=o.u:(n.u=ps,e.addEventListener(t,i?hs:ds,i)):e.removeEventListener(t,i?hs:ds,i);else{if("http://www.w3.org/2000/svg"==r)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!=t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==n?"":n))}}function Os(e){return function(t){if(this.l){var n=this.l[t.type+e];if(null==t.t)t.t=ps++;else if(t.t<n.u)return;return n(rs.event?rs.event(t):t)}}}function $s(e,t,n,o,r,i,s,a,c,l){var u,p,d,h,f,g,v,y,A,m,_,x,E,b,w,C,j,k=t.type;if(null!=t.constructor)return null;128&n.__u&&(c=!!(32&n.__u),i=[a=t.__e=n.__e]),(u=rs.__b)&&u(t);e:if("function"==typeof k)try{if(y=t.props,A="prototype"in k&&k.prototype.render,m=(u=k.contextType)&&o[u.__c],_=u?m?m.props.value:u.__:o,n.__c?v=(p=t.__c=n.__c).__=p.__E:(A?t.__c=p=new k(y,_):(t.__c=p=new bs(y,_),p.constructor=k,p.render=Is),m&&m.sub(p),p.props=y,p.state||(p.state={}),p.context=_,p.__n=o,d=p.__d=!0,p.__h=[],p._sb=[]),A&&null==p.__s&&(p.__s=p.state),A&&null!=k.getDerivedStateFromProps&&(p.__s==p.state&&(p.__s=As({},p.__s)),As(p.__s,k.getDerivedStateFromProps(y,p.__s))),h=p.props,f=p.state,p.__v=t,d)A&&null==k.getDerivedStateFromProps&&null!=p.componentWillMount&&p.componentWillMount(),A&&null!=p.componentDidMount&&p.__h.push(p.componentDidMount);else{if(A&&null==k.getDerivedStateFromProps&&y!==h&&null!=p.componentWillReceiveProps&&p.componentWillReceiveProps(y,_),!p.__e&&null!=p.shouldComponentUpdate&&!1===p.shouldComponentUpdate(y,p.__s,_)||t.__v==n.__v){for(t.__v!=n.__v&&(p.props=y,p.state=p.__s,p.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(e){e&&(e.__=t)}),x=0;x<p._sb.length;x++)p.__h.push(p._sb[x]);p._sb=[],p.__h.length&&s.push(p);break e}null!=p.componentWillUpdate&&p.componentWillUpdate(y,p.__s,_),A&&null!=p.componentDidUpdate&&p.__h.push(function(){p.componentDidUpdate(h,f,g)})}if(p.context=_,p.props=y,p.__P=e,p.__e=!1,E=rs.__r,b=0,A){for(p.state=p.__s,p.__d=!1,E&&E(t),u=p.render(p.props,p.state,p.context),w=0;w<p._sb.length;w++)p.__h.push(p._sb[w]);p._sb=[]}else do{p.__d=!1,E&&E(t),u=p.render(p.props,p.state,p.context),p.state=p.__s}while(p.__d&&++b<25);p.state=p.__s,null!=p.getChildContext&&(o=As(As({},o),p.getChildContext())),A&&!d&&null!=p.getSnapshotBeforeUpdate&&(g=p.getSnapshotBeforeUpdate(h,f)),C=u,null!=u&&u.type===Es&&null==u.key&&(C=Fs(u.props.children)),a=Bs(e,ys(C)?C:[C],t,n,o,r,i,s,a,c,l),p.base=t.__e,t.__u&=-161,p.__h.length&&s.push(p),v&&(p.__E=p.__=null)}catch(e){if(t.__v=null,c||null!=i)if(e.then){for(t.__u|=c?160:128;a&&8==a.nodeType&&a.nextSibling;)a=a.nextSibling;i[i.indexOf(a)]=null,t.__e=a}else{for(j=i.length;j--;)ms(i[j]);Rs(t)}else t.__e=n.__e,t.__k=n.__k,e.then||Rs(t);rs.__e(e,t,n)}else null==i&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):a=t.__e=Ls(n.__e,t,n,o,r,i,s,c,l);return(u=rs.diffed)&&u(t),128&t.__u?void 0:a}function Rs(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(Rs)}function Ts(e,t,n){for(var o=0;o<n.length;o++)Hs(n[o],n[++o],n[++o]);rs.__c&&rs.__c(t,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(e){e.call(t)})}catch(e){rs.__e(e,t.__v)}})}function Fs(e){return"object"!=typeof e||null==e||e.__b&&e.__b>0?e:ys(e)?e.map(Fs):As({},e)}function Ls(e,t,n,o,r,i,s,a,c){var l,u,p,d,h,f,g,v=n.props,y=t.props,A=t.type;if("svg"==A?r="http://www.w3.org/2000/svg":"math"==A?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),null!=i)for(l=0;l<i.length;l++)if((h=i[l])&&"setAttribute"in h==!!A&&(A?h.localName==A:3==h.nodeType)){e=h,i[l]=null;break}if(null==e){if(null==A)return document.createTextNode(y);e=document.createElementNS(r,A,y.is&&y),a&&(rs.__m&&rs.__m(t,i),a=!1),i=null}if(null==A)v===y||a&&e.data==y||(e.data=y);else{if(i=i&&os.call(e.childNodes),v=n.props||fs,!a&&null!=i)for(v={},l=0;l<e.attributes.length;l++)v[(h=e.attributes[l]).name]=h.value;for(l in v)if(h=v[l],"children"==l);else if("dangerouslySetInnerHTML"==l)p=h;else if(!(l in y)){if("value"==l&&"defaultValue"in y||"checked"==l&&"defaultChecked"in y)continue;Ps(e,l,null,h,r)}for(l in y)h=y[l],"children"==l?d=h:"dangerouslySetInnerHTML"==l?u=h:"value"==l?f=h:"checked"==l?g=h:a&&"function"!=typeof h||v[l]===h||Ps(e,l,h,v[l],r);if(u)a||p&&(u.__html==p.__html||u.__html==e.innerHTML)||(e.innerHTML=u.__html),t.__k=[];else if(p&&(e.innerHTML=""),Bs("template"==t.type?e.content:e,ys(d)?d:[d],t,n,o,"foreignObject"==A?"http://www.w3.org/1999/xhtml":r,i,s,i?i[0]:n.__k&&ws(n,0),a,c),null!=i)for(l=i.length;l--;)ms(i[l]);a||(l="value","progress"==A&&null==f?e.removeAttribute("value"):null!=f&&(f!==e[l]||"progress"==A&&!f||"option"==A&&f!=v[l])&&Ps(e,l,f,v[l],r),l="checked",null!=g&&g!=e[l]&&Ps(e,l,g,v[l],r))}return e}function Hs(e,t,n){try{if("function"==typeof e){var o="function"==typeof e.__u;o&&e.__u(),o&&null==t||(e.__u=e(t))}else e.current=t}catch(e){rs.__e(e,n)}}function Ws(e,t,n){var o,r;if(rs.unmount&&rs.unmount(e),(o=e.ref)&&(o.current&&o.current!=e.__e||Hs(o,null,t)),null!=(o=e.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(e){rs.__e(e,t)}o.base=o.__P=null}if(o=e.__k)for(r=0;r<o.length;r++)o[r]&&Ws(o[r],t,n||"function"!=typeof e.type);n||ms(e.__e),e.__c=e.__=e.__e=void 0}function Is(e,t,n){return this.constructor(e,n)}function Ns(e,t,n){var o,r,i,s;t==document&&(t=document.documentElement),rs.__&&rs.__(e,t),r=(o="function"==typeof n)?null:n&&n.__k||t.__k,i=[],s=[],$s(t,e=(!o&&n||t).__k=_s(Es,null,[e]),r||fs,fs,t.namespaceURI,!o&&n?[n]:r?null:t.firstChild?os.call(t.childNodes):null,i,!o&&n?n:r?r.__e:t.firstChild,o,s),Ts(i,e,s)}os=gs.slice,rs={__e:function(e,t,n,o){for(var r,i,s;t=t.__;)if((r=t.__c)&&!r.__)try{if((i=r.constructor)&&null!=i.getDerivedStateFromError&&(r.setState(i.getDerivedStateFromError(e)),s=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(e,o||{}),s=r.__d),s)return r.__E=r}catch(t){e=t}throw e}},is=0,bs.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!=this.state?this.__s:this.__s=As({},this.state),"function"==typeof e&&(e=e(As({},n),this.props)),e&&As(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),js(this))},bs.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),js(this))},bs.prototype.render=Es,ss=[],cs="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ls=function(e,t){return e.__v.__b-t.__v.__b},ks.__r=0,us=/(PointerCapture)$|Capture$/i,ps=0,ds=Os(!1),hs=Os(!0);var qs,Vs,Us,Gs,Ys=function(e,t,n,o){var r;t[0]=0;for(var i=1;i<t.length;i++){var s=t[i++],a=t[i]?(t[0]|=s?1:2,n[t[i++]]):t[++i];3===s?o[0]=a:4===s?o[1]=Object.assign(o[1]||{},a):5===s?(o[1]=o[1]||{})[t[++i]]=a:6===s?o[1][t[++i]]+=a+"":s?(r=e.apply(a,Ys(e,a,n,["",null])),o.push(r),a[0]?t[0]|=2:(t[i-2]=0,t[i]=r)):o.push(a)}return o},Xs=new Map,Ks=function(e){var t=Xs.get(this);return t||(t=new Map,Xs.set(this,t)),(t=Ys(this,t.get(e)||(t.set(e,t=function(e){for(var t,n,o=1,r="",i="",s=[0],a=function(e){1===o&&(e||(r=r.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?s.push(0,e,r):3===o&&(e||r)?(s.push(3,e,r),o=2):2===o&&"..."===r&&e?s.push(4,e,0):2===o&&r&&!e?s.push(5,0,!0,r):o>=5&&((r||!e&&5===o)&&(s.push(o,0,r,n),o=6),e&&(s.push(o,e,0,n),o=6)),r=""},c=0;c<e.length;c++){c&&(1===o&&a(),a(c));for(var l=0;l<e[c].length;l++)t=e[c][l],1===o?"<"===t?(a(),s=[s],o=3):r+=t:4===o?"--"===r&&">"===t?(o=1,r=""):r=t+r[0]:i?t===i?i="":r+=t:'"'===t||"'"===t?i=t:">"===t?(a(),o=1):o&&("="===t?(o=5,n=r,r=""):"/"===t&&(o<5||">"===e[c][l+1])?(a(),3===o&&(s=s[0]),o=s,(s=s[0]).push(2,0,o),o=0):" "===t||"\t"===t||"\n"===t||"\r"===t?(a(),o=2):r+=t),3===o&&"!--"===r&&(o=4,s=s[0])}return a(),s}(e)),t),arguments,[])).length>1?t:t[0]}.bind(_s),Zs=0,Qs=[],Js=rs,ea=Js.__b,ta=Js.__r,na=Js.diffed,oa=Js.__c,ra=Js.unmount,ia=Js.__;function sa(e,t){Js.__h&&Js.__h(Vs,e,Zs||t),Zs=0;var n=Vs.__H||(Vs.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function aa(e){return Zs=1,function(e,t){var n=sa(qs++,2);if(n.t=e,!n.__c&&(n.__=[ma(void 0,t),function(e){var t=n.__N?n.__N[0]:n.__[0],o=n.t(t,e);t!==o&&(n.__N=[o,n.__[1]],n.__c.setState({}))}],n.__c=Vs,!Vs.__f)){var o=function(e,t,o){if(!n.__c.__H)return!0;var i=n.__c.__H.__.filter(function(e){return!!e.__c});if(i.every(function(e){return!e.__N}))return!r||r.call(this,e,t,o);var s=n.__c.props!==e;return i.forEach(function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(s=!0)}}),r&&r.call(this,e,t,o)||s};Vs.__f=!0;var r=Vs.shouldComponentUpdate,i=Vs.componentWillUpdate;Vs.componentWillUpdate=function(e,t,n){if(this.__e){var s=r;r=void 0,o(e,t,n),r=s}i&&i.call(this,e,t,n)},Vs.shouldComponentUpdate=o}return n.__N||n.__}(ma,e)}function ca(e,t){var n=sa(qs++,3);!Js.__s&&Aa(n.__H,t)&&(n.__=e,n.u=t,Vs.__H.__h.push(n))}function la(e,t){var n=sa(qs++,4);!Js.__s&&Aa(n.__H,t)&&(n.__=e,n.u=t,Vs.__h.push(n))}function ua(e){return Zs=5,pa(function(){return{current:e}},[])}function pa(e,t){var n=sa(qs++,7);return Aa(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function da(e,t){return Zs=8,pa(function(){return e},t)}function ha(){for(var e;e=Qs.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(va),e.__H.__h.forEach(ya),e.__H.__h=[]}catch(t){e.__H.__h=[],Js.__e(t,e.__v)}}Js.__b=function(e){Vs=null,ea&&ea(e)},Js.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),ia&&ia(e,t)},Js.__r=function(e){ta&&ta(e),qs=0;var t=(Vs=e.__c).__H;t&&(Us===Vs?(t.__h=[],Vs.__h=[],t.__.forEach(function(e){e.__N&&(e.__=e.__N),e.u=e.__N=void 0})):(t.__h.forEach(va),t.__h.forEach(ya),t.__h=[],qs=0)),Us=Vs},Js.diffed=function(e){na&&na(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==Qs.push(t)&&Gs===Js.requestAnimationFrame||((Gs=Js.requestAnimationFrame)||ga)(ha)),t.__H.__.forEach(function(e){e.u&&(e.__H=e.u),e.u=void 0})),Us=Vs=null},Js.__c=function(e,t){t.some(function(e){try{e.__h.forEach(va),e.__h=e.__h.filter(function(e){return!e.__||ya(e)})}catch(n){t.some(function(e){e.__h&&(e.__h=[])}),t=[],Js.__e(n,e.__v)}}),oa&&oa(e,t)},Js.unmount=function(e){ra&&ra(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(e){try{va(e)}catch(e){t=e}}),n.__H=void 0,t&&Js.__e(t,n.__v))};var fa="function"==typeof requestAnimationFrame;function ga(e){var t,n=function(){clearTimeout(o),fa&&cancelAnimationFrame(t),setTimeout(e)},o=setTimeout(n,35);fa&&(t=requestAnimationFrame(n))}function va(e){var t=Vs,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),Vs=t}function ya(e){var t=Vs;e.__c=e.__(),Vs=t}function Aa(e,t){return!e||e.length!==t.length||t.some(function(t,n){return t!==e[n]})}function ma(e,t){return"function"==typeof t?t(e):t}function _a(e){var t,n,o="";if("string"==typeof e||"number"==typeof e)o+=e;else if("object"==typeof e)if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=_a(e[t]))&&(o&&(o+=" "),o+=n)}else for(n in e)e[n]&&(o&&(o+=" "),o+=n);return o}const xa=function(){for(var e,t,n=0,o="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=_a(e))&&(o&&(o+=" "),o+=t);return o};function Ea(e){const{headerEntries:t,onSelect:n,selectedEntry:o,setSelectedEntry:r,title:i}=e,s=pa(()=>t.reduce((e,t)=>{const n=t.group||"default",o=e.find(e=>e.id===n);return o?o.entries.push(t):e.push({id:n,entries:[t]}),e},[]),[t]);return Ks`
    <div class="djs-popup-header">
      <h3 class="djs-popup-title" title=${i}>${i}</h3>
      ${s.map(e=>Ks`
        <ul key=${e.id} class="djs-popup-header-group" data-header-group=${e.id}>

          ${e.entries.map(e=>Ks`
            <li key=${e.id}>
              <${e.action?"button":"span"}
                class=${function(e,t){return xa("entry",e.className,e.active?"active":"",e.disabled?"disabled":"",t?"selected":"")}(e,e===o)}
                onClick=${t=>e.action&&n(t,e)}
                title=${e.title||e.label}
                data-id=${e.id}
                onMouseEnter=${()=>e.action&&r(e)}
                onMouseLeave=${()=>e.action&&r(null)}
                onFocus=${()=>e.action&&r(e)}
                onBlur=${()=>e.action&&r(null)}
              >
                ${e.imageUrl&&Ks`<img class="djs-popup-entry-icon" src=${e.imageUrl} alt="" />`||e.imageHtml&&Ks`<div class="djs-popup-entry-icon" dangerouslySetInnerHTML=${{__html:e.imageHtml}} />`}
                ${e.label?Ks`
                  <span class="djs-popup-label">${e.label}</span>
                `:null}
              </${e.action?"button":"span"}>
            </li>
          `)}
        </ul>
      `)}
    </div>
  `}function ba(e){const{entry:t,selected:n,onMouseEnter:o,onMouseLeave:r,onAction:i}=e;return Ks`
    <li
      class=${xa("entry",{selected:n})}
      data-id=${t.id}
      title=${t.title||t.label}
      tabIndex="0"
      onClick=${i}
      onFocus=${o}
      onBlur=${r}
      onMouseEnter=${o}
      onMouseLeave=${r}
      onDragStart=${e=>i(e,t,"dragstart")}
      draggable=${!0}
    >
      <div class="djs-popup-entry-content">
        <span
          class=${xa("djs-popup-entry-name",t.className)}
        >
          ${t.imageUrl&&Ks`<img class="djs-popup-entry-icon" src=${t.imageUrl} alt="" />`||t.imageHtml&&Ks`<div class="djs-popup-entry-icon" dangerouslySetInnerHTML=${{__html:t.imageHtml}} />`}

          ${t.label?Ks`
            <span class="djs-popup-label">
              ${t.label}
            </span>
          `:null}
        </span>
        ${t.description&&Ks`
          <span
            class="djs-popup-entry-description"
            title=${t.description}
          >
            ${t.description}
          </span>
        `}
      </div>
      ${t.documentationRef&&Ks`
        <div class="djs-popup-entry-docs">
          <a
            href="${t.documentationRef}"
            onClick=${e=>e.stopPropagation()}
            title="Open element documentation"
            target="_blank"
            rel="noopener"
          >
            <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M10.6368 10.6375V5.91761H11.9995V10.6382C11.9995 10.9973 11.8623 11.3141 11.5878 11.5885C11.3134 11.863 10.9966 12.0002 10.6375 12.0002H1.36266C0.982345 12.0002 0.660159 11.8681 0.396102 11.6041C0.132044 11.34 1.52588e-05 11.0178 1.52588e-05 10.6375V1.36267C1.52588e-05 0.98236 0.132044 0.660173 0.396102 0.396116C0.660159 0.132058 0.982345 2.95639e-05 1.36266 2.95639e-05H5.91624V1.36267H1.36266V10.6375H10.6368ZM12 0H7.2794L7.27873 1.36197H9.68701L3.06507 7.98391L4.01541 8.93425L10.6373 2.31231V4.72059H12V0Z" fill="#818798"/>
            </svg>
          </a>
        </div>
      `}
    </li>
  `}function wa(e){const{selectedEntry:t,setSelectedEntry:n,groupedEntries:o,...r}=e,i=ua();return la(()=>{const e=i.current;if(!e)return;const t=e.querySelector(".selected");var n;t&&("function"==typeof(n=t).scrollIntoViewIfNeeded?n.scrollIntoViewIfNeeded():n.scrollIntoView({scrollMode:"if-needed",block:"nearest"}))},[t]),Ks`
    <div class="djs-popup-results" ref=${i}>
      ${o.map(e=>Ks`
        ${e.name&&Ks`
          <div key=${e.id} class="entry-header" title=${e.name}>
            ${e.name}
          </div>
        `}
        <ul class="djs-popup-group" data-group=${e.id}>
          ${e.entries.map(e=>Ks`
            <${ba}
              key=${e.id}
              entry=${e}
              selected=${e===t}
              onMouseEnter=${()=>n(e)}
              onMouseLeave=${()=>n(null)}
              ...${r}
            />
          `)}
        </ul>
      `)}
    </div>
  `}function Ca(e){const{onClose:t,onSelect:n,className:o,headerEntries:r,position:i,title:s,width:a,scale:c,search:l,emptyPlaceholder:u,searchFn:p,entries:d,onOpened:h,onClosed:f}=e,g=pa(()=>!!m(l)&&d.length>5,[l,d]),[v,y]=aa(""),A=da((e,t)=>{if(!g)return e;if(!t.trim())return e.filter(({rank:e=0})=>e>=0);const n=e.filter(({searchable:e})=>!1!==e);return p(n,t,{keys:["label","search","description"]}).map(({item:e})=>e)},[g]),[_,x]=aa(A(d,v)),[E,b]=aa(_[0]),C=pa(()=>function(e){const t=[],n=e=>t.find(t=>e.id===t.id);return e.forEach(e=>{const o=e.group?(e=>"string"==typeof e?{id:e}:e)(e.group):{id:"default"};(e=>!!n(e))(o)?n(o).entries.push(e):t.push({...o,entries:[e]})}),t}(_),[_]),j=da(e=>{b(e[0]),x(e)},[x,b]);ca(()=>{j(A(d,v))},[v,d]);const k=da(e=>{const t=function(e){const t=[];return e.forEach(e=>{e.entries.forEach(e=>{t.push(e)})}),t}(C);let n=t.indexOf(E)+e;n<0&&(n=t.length-1),n>=t.length&&(n=0),b(t[n])},[C,E,b]),B=da(e=>"Enter"===e.key&&E?n(e,E):"ArrowUp"===e.key?(k(-1),e.preventDefault()):"ArrowDown"===e.key?(k(1),e.preventDefault()):void 0,[n,E,k]),S=da(e=>{ot(e.target,"input")&&y(()=>e.target.value)},[y]);ca(()=>(h(),()=>{f()}),[]);const D=pa(()=>s||r.length>0,[s,r]);return Ks`
    <${ja}
      onClose=${t}
      onKeyup=${S}
      onKeydown=${B}
      className=${o}
      position=${i}
      width=${a}
      scale=${c}
    >
      ${D&&Ks`
        <${Ea}
          headerEntries=${r}
          onSelect=${n}
          selectedEntry=${E}
          setSelectedEntry=${b}
          title=${s}
        />
      `}
      ${d.length>0&&Ks`
        <div class="djs-popup-body">

          ${g&&Ks`
          <div class="djs-popup-search">
            <svg class="djs-popup-search-icon" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z" fill="#22242A"/>
            </svg>
            <input type="text" spellcheck=${!1} aria-label="${s}" />
          </div>
          `}

          <${wa}
            groupedEntries=${C}
            selectedEntry=${E}
            setSelectedEntry=${b}
            onAction=${n}
          />
        </div>
      `}
    ${u&&0===_.length&&Ks`
      <div class="djs-popup-no-results">${w(u)?u(v):u}</div>
    `}
    </${ja}>
  `}function ja(e){const{onClose:t,onKeydown:n,onKeyup:o,className:r,children:i,position:s}=e,a=ua();return la(()=>{if("function"!=typeof s)return;const e=a.current,t=s(e);e.style.left=`${t.x}px`,e.style.top=`${t.y}px`},[a.current,s]),la(()=>{const e=a.current;e&&(e.querySelector("input")||e).focus()},[]),ca(()=>{const e=e=>{if("Escape"===e.key)return e.preventDefault(),t()},n=e=>{if(!Ne(e.target,".djs-popup",!0))return t()};return document.documentElement.addEventListener("keydown",e),document.body.addEventListener("click",n),()=>{document.documentElement.removeEventListener("keydown",e),document.body.removeEventListener("click",n)}},[]),Ks`
    <div
      class=${xa("djs-popup",r)}
      style=${function(e){return{transform:`scale(${e.scale})`,width:`${e.width}px`,"transform-origin":"top left"}}(e)}
      onKeydown=${n}
      onKeyup=${o}
      ref=${a}
      tabIndex="-1"
    >
      ${i}
    </div>
  `}var ka=["contextPad.close","canvas.viewbox.changing","commandStack.changed"];function Ba(e,t,n,o){this._eventBus=t,this._canvas=n,this._search=o,this._current=null;var r=m(e&&e.scale)?e.scale:{min:1,max:1};this._config={scale:r},t.on("diagram.destroy",()=>{this.close()}),t.on("element.changed",e=>{const t=this.isOpen()&&this._current.target;e.element===t&&this.refresh()})}function Sa(e,t){return Da(t)-Da(e)}function Da(e){return e.reduce((e,t)=>e+Ma(t),0)}function Ma(e){if(x(e))return Math.max(...e.map(Ma));const t=Math.log(e.value.length);return e.match?(e.start?e.end?131.9:7.87:e.wordStart?2.19:1)*t:-.07*t}function za(e=""){return x(e)?e.join(", "):e}function Pa(e,t){return za(e).localeCompare(za(t))}function Oa(e,t){if(!e)return{tokens:[],matchedWords:{}};const n=[],o={},r=t.map($a),i=[`(?<all>${r.join("\\s+")})`,...r].join("|"),s=new RegExp(i,"ig");let a,c=0;for(;a=s.exec(e);){const[r]=a,i=a.index,s=a.index+r.length,l=0===i,u=s===e.length,p=!!a.groups.all,d=l||/\s/.test(e.charAt(i-1)),h=u||/\s/.test(e.charAt(s));a.index>c&&n.push({value:e.slice(c,a.index),index:c}),n.push({value:r,index:a.index,match:!0,wordStart:d,wordEnd:h,start:l,end:u,all:p});const f=p?t:[r];for(const e of f)o[e.toLowerCase()]=!0;c=a.index+r.length}return c<e.length&&n.push({value:e.slice(c),index:c}),{tokens:n,matchedWords:o}}function $a(e){return e.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&")}Ba.$inject=["config.popupMenu","eventBus","canvas","search"],Ba.prototype._render=function(){const{position:e,providerId:t,entries:n,headerEntries:o,emptyPlaceholder:r,options:i}=this._current,s=Object.entries(n).map(([e,t])=>({id:e,...t})),a=Object.entries(o).map(([e,t])=>({id:e,...t})),c=e&&(t=>this._ensureVisible(t,e)),l=this._updateScale(this._current.container);Ns(Ks`
      <${Ca}
        onClose=${e=>this.close(e)}
        onSelect=${(e,t,n)=>this.trigger(e,t,n)}
        position=${c}
        className=${t}
        entries=${s}
        headerEntries=${a}
        emptyPlaceholder=${r}
        scale=${l}
        onOpened=${this._onOpened.bind(this)}
        onClosed=${this._onClosed.bind(this)}
        searchFn=${this._search}
        ...${{...i}}
      />
    `,this._current.container)},Ba.prototype.open=function(e,t,n,o){if(!e)throw new Error("target is missing");if(!t)throw new Error("providers for <"+t+"> not found");if(!n)throw new Error("position is missing");this.isOpen()&&this.close();const{entries:r,headerEntries:i,emptyPlaceholder:s}=this._getContext(e,t);this._current={position:n,providerId:t,target:e,entries:r,headerEntries:i,emptyPlaceholder:s,container:this._createContainer({provider:t}),options:o},this._emit("open"),this._bindAutoClose(),this._render()},Ba.prototype.refresh=function(){if(!this.isOpen())return;const{target:e,providerId:t}=this._current,{entries:n,headerEntries:o,emptyPlaceholder:r}=this._getContext(e,t);this._current={...this._current,entries:n,headerEntries:o,emptyPlaceholder:r},this._emit("refresh"),this._render()},Ba.prototype._getContext=function(e,t){const n=this._getProviders(t);if(!n||!n.length)throw new Error("provider for <"+t+"> not found");const o=this._getEntries(e,n),r=this._getHeaderEntries(e,n);return{entries:o,headerEntries:r,emptyPlaceholder:this._getEmptyPlaceholder(n),empty:!(Object.keys(o).length||Object.keys(r).length)}},Ba.prototype.close=function(){this.isOpen()&&(this._emit("close"),this.reset(),this._canvas.restoreFocus(),this._current=null)},Ba.prototype.reset=function(){const e=this._current.container;Ns(null,e),it(e)},Ba.prototype._emit=function(e,t){this._eventBus.fire(`popupMenu.${e}`,t)},Ba.prototype._onOpened=function(){this._emit("opened")},Ba.prototype._onClosed=function(){this._emit("closed")},Ba.prototype._createContainer=function(e){var t=this._canvas.getContainer();const n=nt(`<div class="djs-popup-parent djs-scrollable" data-popup=${e.provider}></div>`);return t.appendChild(n),n},Ba.prototype._bindAutoClose=function(){this._eventBus.once(ka,this.close,this)},Ba.prototype._unbindAutoClose=function(){this._eventBus.off(ka,this.close,this)},Ba.prototype._updateScale=function(){var e,t,n=this._canvas.zoom(),o=this._config.scale,r=n;return!0!==o&&(!1===o?(e=1,t=1):(e=o.min,t=o.max),m(e)&&n<e&&(r=e),m(t)&&n>t&&(r=t)),r},Ba.prototype._ensureVisible=function(e,t){var n=document.documentElement.getBoundingClientRect(),o=e.getBoundingClientRect(),r={},i=t.x,s=t.y;return t.x+o.width>n.width&&(r.x=!0),t.y+o.height>n.height&&(r.y=!0),r.x&&r.y?(i=t.x-o.width,s=t.y-o.height):r.x?(i=t.x-o.width,s=t.y):r.y&&t.y<o.height?(i=t.x,s=10):r.y&&(i=t.x,s=t.y-o.height),t.y<n.top&&(s=t.y+o.height),{x:i,y:s}},Ba.prototype.isEmpty=function(e,t){if(!e)throw new Error("target is missing");if(!t)throw new Error("provider ID is missing");const n=this._getProviders(t);return!n||!n.length||this._getContext(e,t).empty},Ba.prototype.registerProvider=function(e,t,n){n||(n=t,t=1e3),this._eventBus.on("popupMenu.getProviders."+e,t,function(e){e.providers.push(n)})},Ba.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"popupMenu.getProviders."+e,providers:[]});return this._eventBus.fire(t),t.providers},Ba.prototype._getEntries=function(e,t){var n={};return S(t,function(t){if(t.getPopupMenuEntries){var o=t.getPopupMenuEntries(e);w(o)?n=o(n):S(o,function(e,t){n[t]=e})}else S(t.getEntries(e),function(e){var t=e.id;if(!t)throw new Error("entry ID is missing");n[t]=V(e,["id"])})}),n},Ba.prototype._getHeaderEntries=function(e,t){var n={};return S(t,function(t){if(t.getPopupMenuHeaderEntries){var o=t.getPopupMenuHeaderEntries(e);w(o)?n=o(n):S(o,function(e,t){n[t]=e})}else{if(!t.getHeaderEntries)return;S(t.getHeaderEntries(e),function(e){var t=e.id;if(!t)throw new Error("entry ID is missing");n[t]=V(e,["id"])})}}),n},Ba.prototype._getEmptyPlaceholder=function(e){const t=e.find(e=>w(e.getEmptyPlaceholder));return t&&t.getEmptyPlaceholder()},Ba.prototype.isOpen=function(){return!!this._current},Ba.prototype.trigger=function(e,t,n="click"){if(e.preventDefault(),!t){let n=Fe(Ne(e.delegateTarget||e.target,".entry",!0),"data-id");t={id:n,...this._getEntry(n)}}const o=t.action;if(!1!==this._emit("trigger",{entry:t,event:e}))if(w(o)){if("click"===n)return o(e,t)}else if(o[n])return o[n](e,t)},Ba.prototype._getEntry=function(e){var t=this._current.entries[e]||this._current.headerEntries[e];if(!t)throw new Error("entry not found");return t};const Ra={search:["value",function(e,t,n){const{keys:o}=n;if(!(t=t.trim().toLowerCase()))throw new Error("<pattern> must not be empty");const r=t.trim().toLowerCase().split(/\s+/);return e.flatMap(e=>{const t=function(e,t,n){const{matchedWords:o,tokens:r}=n.reduce((n,o)=>{const r=e[o],{tokens:i,matchedWords:s}=x(r)?r.reduce((e,n)=>{const{tokens:o,matchedWords:r}=Oa(n,t);return{tokens:[...e.tokens,o],matchedWords:{...e.matchedWords,...r}}},{matchedWords:{},tokens:[]}):Oa(r,t);return{tokens:{...n.tokens,[o]:i},matchedWords:{...n.matchedWords,...s}}},{matchedWords:{},tokens:{}});return Object.keys(o).length!==t.length?null:r}(e,r,o);return t?{item:e,tokens:t}:[]}).sort(function(e){return(t,n)=>{let o=0,r=1;for(const i of e){const e=Sa(t.tokens[i],n.tokens[i]);if(0!==e){o+=e*r,r*=.9;continue}const s=Pa(t.item[i],n.item[i]);0===s||(o+=s*r,r*=.9)}return o}}(o))}]},Ta={__depends__:[Ra],__init__:["popupMenu"],popupMenu:["type",Ba]};var Fa=Math.min,La=Math.max;function Ha(e){e.preventDefault()}function Wa(e){e.stopPropagation()}function Ia(e){this.container=e.container,this.parent=nt('<div class="djs-direct-editing-parent"><div class="djs-direct-editing-content" contenteditable="true"></div></div>'),this.content=rt("[contenteditable]",this.parent),this.keyHandler=e.keyHandler||function(){},this.resizeHandler=e.resizeHandler||function(){},this.autoResize=I(this.autoResize,this),this.handlePaste=I(this.handlePaste,this)}function Na(e,t){this._eventBus=e,this._canvas=t,this._providers=[],this._textbox=new Ia({container:t.getContainer(),keyHandler:I(this._handleKey,this),resizeHandler:I(this._handleResize,this)})}Ia.prototype.create=function(e,t,n,o){var r=this.parent,i=this.content,s=this.container;o=this.options=o||{};var a=q(t=this.style=t||{},["width","height","maxWidth","maxHeight","minWidth","minHeight","left","top","backgroundColor","position","overflow","border","wordWrap","textAlign","outline","transform"]);N(r.style,{width:e.width+"px",height:e.height+"px",maxWidth:e.maxWidth+"px",maxHeight:e.maxHeight+"px",minWidth:e.minWidth+"px",minHeight:e.minHeight+"px",left:e.x+"px",top:e.y+"px",backgroundColor:"#ffffff",position:"absolute",overflow:"visible",border:"1px solid #ccc",boxSizing:"border-box",wordWrap:"normal",textAlign:"center",outline:"none"},a);var c=q(t,["fontFamily","fontSize","fontWeight","lineHeight","padding","paddingTop","paddingRight","paddingBottom","paddingLeft"]);return N(i.style,{boxSizing:"border-box",width:"100%",outline:"none",wordWrap:"break-word"},c),o.centerVertically&&N(i.style,{position:"absolute",top:"50%",transform:"translate(0, -50%)"},c),i.innerText=n,Ke.bind(i,"keydown",this.keyHandler),Ke.bind(i,"mousedown",Wa),Ke.bind(i,"paste",this.handlePaste),o.autoResize&&Ke.bind(i,"input",this.autoResize),o.resizable&&this.resizable(t),s.appendChild(r),this.setSelection(i.lastChild,i.lastChild&&i.lastChild.length),r},Ia.prototype.handlePaste=function(e){var t,n=this.options,o=this.style;if(e.preventDefault(),t=e.clipboardData?e.clipboardData.getData("text/plain"):window.clipboardData.getData("Text"),this.insertText(t),n.autoResize){var r=this.autoResize(o);r&&this.resizeHandler(r)}},Ia.prototype.insertText=function(e){e=e.replace(/\r\n|\r|\n/g,"\n"),document.execCommand("insertText",!1,e)||this._insertTextIE(e)},Ia.prototype._insertTextIE=function(e){var t,n,o,r=this.getSelection(),i=r.startContainer,s=r.endContainer,a=r.startOffset,c=r.endOffset,l=r.commonAncestorContainer,u=(t=l.childNodes,[].slice.call(t));if(function(e){return e.nodeType===Node.TEXT_NODE}(l)){var p=i.textContent;i.textContent=p.substring(0,a)+e+p.substring(c),n=i,o=a+e.length}else if(i===this.content&&s===this.content){var d=document.createTextNode(e);this.content.insertBefore(d,u[a]),n=d,o=d.textContent.length}else{var h=u.indexOf(i),f=u.indexOf(s);u.forEach(function(t,n){n===h?t.textContent=i.textContent.substring(0,a)+e+s.textContent.substring(c):n>h&&n<=f&&it(t)}),n=i,o=a+e.length}n&&void 0!==o&&setTimeout(function(){self.setSelection(n,o)})},Ia.prototype.autoResize=function(){var e=this.parent,t=this.content,n=parseInt(this.style.fontSize)||12;if(t.scrollHeight>e.offsetHeight||t.scrollHeight<e.offsetHeight-n){var o=e.getBoundingClientRect(),r=t.scrollHeight;e.style.height=r+"px",this.resizeHandler({width:o.width,height:o.height,dx:0,dy:r-o.height})}},Ia.prototype.resizable=function(){var e=this,t=this.parent,n=this.resizeHandle,o=parseInt(this.style.minWidth)||0,r=parseInt(this.style.minHeight)||0,i=parseInt(this.style.maxWidth)||1/0,s=parseInt(this.style.maxHeight)||1/0;if(!n){var a,c,l,u;n=this.resizeHandle=nt('<div class="djs-direct-editing-resize-handle"></div>');var p=function(n){Ha(n),Wa(n);var p=Fa(La(l+n.clientX-a,o),i),d=Fa(La(u+n.clientY-c,r),s);t.style.width=p+"px",t.style.height=d+"px",e.resizeHandler({width:l,height:u,dx:n.clientX-a,dy:n.clientY-c})},d=function(e){Ha(e),Wa(e),Ke.unbind(document,"mousemove",p,!1),Ke.unbind(document,"mouseup",d,!1)};Ke.bind(n,"mousedown",function(e){Ha(e),Wa(e),a=e.clientX,c=e.clientY;var n=t.getBoundingClientRect();l=n.width,u=n.height,Ke.bind(document,"mousemove",p),Ke.bind(document,"mouseup",d)})}N(n.style,{position:"absolute",bottom:"0px",right:"0px",cursor:"nwse-resize",width:"0",height:"0",borderTop:(parseInt(this.style.fontSize)/4||3)+"px solid transparent",borderRight:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderBottom:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderLeft:(parseInt(this.style.fontSize)/4||3)+"px solid transparent"}),t.appendChild(n)},Ia.prototype.destroy=function(){var e=this.parent,t=this.content,n=this.resizeHandle;t.innerText="",e.removeAttribute("style"),t.removeAttribute("style"),Ke.unbind(t,"keydown",this.keyHandler),Ke.unbind(t,"mousedown",Wa),Ke.unbind(t,"input",this.autoResize),Ke.unbind(t,"paste",this.handlePaste),n&&(n.removeAttribute("style"),it(n)),it(e)},Ia.prototype.getValue=function(){return this.content.innerText.trim()},Ia.prototype.getSelection=function(){return window.getSelection().getRangeAt(0)},Ia.prototype.setSelection=function(e,t){var n=document.createRange();null===e?n.selectNodeContents(this.content):(n.setStart(e,t),n.setEnd(e,t));var o=window.getSelection();o.removeAllRanges(),o.addRange(n)},Na.$inject=["eventBus","canvas"],Na.prototype.registerProvider=function(e){this._providers.push(e)},Na.prototype.isActive=function(e){return!(!this._active||e&&this._active.element!==e)},Na.prototype.cancel=function(){this._active&&(this._fire("cancel"),this.close())},Na.prototype._fire=function(e,t){this._eventBus.fire("directEditing."+e,t||{active:this._active})},Na.prototype.close=function(){this._textbox.destroy(),this._fire("deactivate"),this._active=null,this.resizable=void 0,this._canvas.restoreFocus&&this._canvas.restoreFocus()},Na.prototype.complete=function(){var e=this._active;if(e){var t,n=e.context.bounds,o=this.$textbox.getBoundingClientRect(),r=this.getValue();r===e.context.text&&o.height===n.height&&o.width===n.width||(t=this._textbox.container.getBoundingClientRect(),e.provider.update(e.element,r,e.context.text,{x:o.left-t.left,y:o.top-t.top,width:o.width,height:o.height})),this._fire("complete"),this.close()}},Na.prototype.getValue=function(){return this._textbox.getValue()},Na.prototype._handleKey=function(e){e.stopPropagation();var t=e.keyCode||e.charCode;return 27===t?(e.preventDefault(),this.cancel()):13!==t||e.shiftKey?void 0:(e.preventDefault(),this.complete())},Na.prototype._handleResize=function(e){this._fire("resize",e)},Na.prototype.activate=function(e){var t;this.isActive()&&this.cancel();var n=k(this._providers,function(n){return(t=n.activate(e))?n:null});return t&&(this.$textbox=this._textbox.create(t.bounds,t.style,t.text,t.options),this._active={element:e,context:t,provider:n},t.options&&t.options.resizable&&(this.resizable=!0),this._fire("activate")),!!t};const qa={__depends__:[Tn],__init__:["directEditing"],directEditing:["type",Na]};var Va=n(72),Ua=n.n(Va),Ga=n(825),Ya=n.n(Ga),Xa=n(659),Ka=n.n(Xa),Za=n(56),Qa=n.n(Za),Ja=n(540),ec=n.n(Ja),tc=n(113),nc=n.n(tc),oc=n(530),rc={};function ic(e){this._eventBus=e}function sc(e){return function(t,n,o,r,i){(w(t)||b(t))&&(i=r,r=o,o=n,n=t,t=null),this.on(t,e,n,o,r,i)}}function ac(e){ic.call(this,e),this.init()}rc.styleTagTransform=nc(),rc.setAttributes=Qa(),rc.insert=Ka().bind(null,"head"),rc.domAPI=Ya(),rc.insertStyleElement=ec(),Ua()(oc.A,rc),oc.A&&oc.A.locals&&oc.A.locals,ic.$inject=["eventBus"],ic.prototype.on=function(e,t,n,o,r,i){if((w(t)||b(t))&&(i=r,r=o,o=n,n=t,t=null),w(n)&&(i=r,r=o,o=n,n=1e3),E(r)&&(i=r,r=!1),!w(o))throw new Error("handlerFn must be a function");x(e)||(e=[e]);var s=this._eventBus;S(e,function(e){var a=["commandStack",e,t].filter(function(e){return e}).join(".");s.on(a,n,r?function(e,t){return function(n){return e.call(t||null,n.context,n.command,n)}}(o,i):o,i)})},ic.prototype.canExecute=sc("canExecute"),ic.prototype.preExecute=sc("preExecute"),ic.prototype.preExecuted=sc("preExecuted"),ic.prototype.execute=sc("execute"),ic.prototype.executed=sc("executed"),ic.prototype.postExecute=sc("postExecute"),ic.prototype.postExecuted=sc("postExecuted"),ic.prototype.revert=sc("revert"),ic.prototype.reverted=sc("reverted"),ac.$inject=["eventBus"],f(ac,ic),ac.prototype.addRule=function(e,t,n){var o=this;"string"==typeof e&&(e=[e]),e.forEach(function(e){o.canExecute(e,t,function(e,t,o){return n(e)},!0)})},ac.prototype.init=function(){};const cc={__init__:["exampleContextPadProvider","examplePaletteProvider","exampleRuleProvider"],exampleContextPadProvider:["type",class{static $inject=["connect","contextPad","modeling","elementFactory","create","popupMenu"];constructor(e,t,n,o,r,i){this.connect=e,this.modeling=n,this.elementFactory=o,this.create=r,this.popupMenu=i,t.registerProvider(this)}getContextPadEntries(e){const{connect:t,modeling:n,elementFactory:o}=this,r=()=>{n.removeElements([e])},i=(e,n,o)=>{t.start(e,n,o)},s=t=>{const r=e.parent;if(!r)return;const i={"petri:transition":{width:100,height:80},"petri:place":{width:80,height:80}}[t]||{width:80,height:60},s=Array.isArray(e.outgoing)&&e.outgoing.length>0,a=Array.isArray(e.incoming)&&e.incoming.length>0,c=!s||a,l=e.y+e.height/2,u=c?e.x+e.width+50+i.width/2:e.x-30-i.width/2,p=o.createShape({type:t,width:i.width,height:i.height}),d=n.createShape(p,{x:u,y:l},r);n.createConnection(e,d,{type:"petri:connection"},r)},a=()=>{const t=e.parent;if(!t)return;let r,i;if("petri:transition"===e.type)r="petri:empty_transition",i={width:14,height:80};else{if("petri:empty_transition"!==e.type)return;r="petri:transition",i={width:100,height:80}}const s=o.createShape({type:r,width:i.width,height:i.height}),a=e.x+e.width/2,c=e.y+e.height/2,l=e.incoming?[...e.incoming]:[],u=e.outgoing?[...e.outgoing]:[],p=n.createShape(s,{x:a,y:c},t);l.forEach(e=>{n.reconnectEnd(e,p,e.waypoints[e.waypoints.length-1])}),u.forEach(e=>{n.reconnectStart(e,p,e.waypoints[0])}),n.removeElements([e])},c={delete:{group:"edit",className:"context-pad-icon-remove",title:"Remove",action:{click:r,dragstart:r}},connect:{group:"edit",className:"context-pad-icon-connect",title:"Connect",action:{click:i,dragstart:i}}};return"petri:place"===e.type?c.transition={group:"edit",className:"context-pad-icon-transition",title:"Create transition",action:{click:()=>s("petri:transition")}}:"petri:transition"!==e.type&&"petri:empty_transition"!==e.type||(c.place={group:"edit",className:"context-pad-icon-place",title:"Create place",action:{click:()=>s("petri:place")}}),c.tool={group:"tools",className:"context-pad-icon-tool",title:"Tool action",action:{click:t=>{const n={x:t.x||t.clientX,y:t.y||t.clientY};this.popupMenu.open(e,"menu",n)}}},"petri:transition"===e.type?c.replace={group:"edit",className:"context-pad-icon-replace",title:"Replace with empty transition",action:{click:a}}:"petri:empty_transition"===e.type&&(c.replace={group:"edit",className:"context-pad-icon-replace",title:"Replace with transition",action:{click:a}}),c}}],examplePaletteProvider:["type",class{static $inject=["create","elementFactory","lassoTool","palette","spaceTool","simulationService"];constructor(e,t,n,o,r,i){this.create=e,this.elementFactory=t,this.lassoTool=n,this.palette=o,this.spaceTool=r,this.simulationService=i,o.registerProvider(this)}updateButton(e){const t=e.target.closest('[data-action="start-simulation"]');t&&(this.simulationService.toggleSimulation()?t.classList.add("active"):t.classList.remove("active"))}getPaletteEntries(){const{create:e,elementFactory:t,lassoTool:n,spaceTool:o}=this;return{"lasso-tool":{group:"tools",className:"palette-icon-lasso-tool",title:"Activate Lasso Tool",action:{click:e=>n.activateSelection(e)}},"tool-separator":{group:"tools",separator:!0},"create-transition":{group:"create",className:"palette-icon-create-transition",title:"Transition",action:{click:n=>{const o=t.createShape({width:100,height:80,type:"petri:transition"});e.start(n,o)}}},"create-empty-transition":{group:"create",className:"palette-icon-create-empty-transition",title:"Transition",action:{click:n=>{const o=t.createShape({width:14,height:80,type:"petri:empty_transition"});e.start(n,o)}}},"create-circle":{group:"create",className:"palette-icon-create-circle",title:"Place",action:{click:n=>{const o=t.createShape({width:80,height:80,type:"petri:place",businessObject:{tokens:0}});e.start(n,o)}}},"create-separator":{group:"create",separator:!0},"start-simulation":{group:"simulation",className:"palette-icon-start-simulation",title:"Start Simulation",action:{click:e=>{this.updateButton(e)}}}}}}],exampleRuleProvider:["type",class extends ac{static $inject=["eventBus","elementRegistry"];constructor(e,t){super(e),this.elementRegistry=t}init(){this.addRule("shape.create",e=>{const t=e.target,n=e.shape;return t.parent===n.target}),this.addRule("connection.create",e=>{const{source:t,target:n}=e;return!(!t||!n)&&(("petri:place"!==t.type||"petri:place"!==n.type)&&(("petri:transition"!==t.type||"petri:transition"!==n.type)&&(("petri:empty_transition"!==t.type||"petri:empty_transition"!==n.type)&&(("petri:transition"!==t.type||"petri:empty_transition"!==n.type)&&(("petri:empty_transition"!==t.type||"petri:transition"!==n.type)&&(!(Array.isArray(t.outgoing)&&t.outgoing.some(e=>e.target===n))&&n.parent===t.parent&&{type:"petri:connection"}))))))}),this.addRule("shape.resize",e=>je(e.shape))}}]};function lc(e,t){return function(e,t){t.appendChild(function(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch(e){}return e}(e,t))}(t,e),e}var uc={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":2,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":2,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function pc(e,t,n){var o=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=uc[o];r?(2===r&&"number"==typeof n&&(n=String(n)+"px"),e.style[o]=n):e.setAttributeNS(null,t,n)}function dc(e,t,n){if("string"==typeof t){if(void 0===n)return function(e,t){return uc[t]?e.style[t]:e.getAttributeNS(null,t)}(e,t);pc(e,t,n)}else!function(e,t){var n,o,r=Object.keys(t);for(n=0;o=r[n];n++)pc(e,o,t[o])}(e,t);return e}const hc=Object.prototype.toString;function fc(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}fc.prototype.add=function(e){return this.list.add(e),this},fc.prototype.remove=function(e){return"[object RegExp]"==hc.call(e)?this.removeMatching(e):(this.list.remove(e),this)},fc.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},fc.prototype.toggle=function(e,t){return void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this},fc.prototype.array=function(){return Array.from(this.list)},fc.prototype.has=fc.prototype.contains=function(e){return this.list.contains(e)};var gc="http://www.w3.org/2000/svg",vc='<svg xmlns="'+gc+'"';function yc(e,t){var n;return"<"===(e=e.trim()).charAt(0)?(n=function(e){var t=!1;"<svg"===e.substring(0,4)?-1===e.indexOf(gc)&&(e=vc+e.substring(4)):(e=vc+">"+e+"</svg>",t=!0);var n=function(e){var t;return(t=new DOMParser).async=!1,t.parseFromString(e,"text/xml")}(e);if(!t)return n;for(var o=document.createDocumentFragment(),r=n.firstChild;r.firstChild;)o.appendChild(r.firstChild);return o}(e).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(gc,e),t&&dc(n,t),n}function Ac(e,t,n,o){const r=t/2,i=n/2,s=.25*Math.min(t,n),a=r-s/3,c=i-s/2,l=r-s/3,u=i+s/2,p=r+s/2,d=i,h=yc("path"),f=o.computeStyle({},{fill:"darkgreen",stroke:"darkgreen",strokeWidth:1});return dc(h,{d:`M ${a} ${c} L ${l} ${u} L ${p} ${d} Z`}),dc(h,f),lc(e,h),h}function mc(e,t,n){let o=e.ownerSVGElement.querySelector("defs");if(o||(o=yc("defs"),lc(e.ownerSVGElement,o)),!o.querySelector("#"+t)){const e=yc("marker",{id:t,viewBox:"0 0 20 20",refX:11,refY:10,markerWidth:10,markerHeight:10,orient:"auto"});lc(e,yc("path",{d:"M 1 5 L 11 10 L 1 15 Z",fill:n,stroke:n})),lc(o,e)}return`url(#${t})`}function _c(e,t,n){const o=t.businessObject?.name??"",r=n.computeStyle({},{fill:"black",fontSize:12}),i=yc("text");let s,a,c,l;if("petri:place"===t.type){const e=Math.min(t.width,t.height)/2,n=t.width/2,o=t.height/2,r=4,i=e/Math.SQRT2;s=n+i+r,a=o+i+r,c="start",l="hanging"}else s=t.width/2,a=t.height/2,c="middle",l="middle";if(dc(i,{x:s,y:a,"text-anchor":c,"dominant-baseline":l}),dc(i,r),i.textContent=String(o),lc(e,i),"petri:place"===t.type){const o=Number.isFinite(t.businessObject?.tokens)?t.businessObject.tokens:0;o>0&&function(e,t,n,o){const r=t.width/2,i=t.height/2,s=Math.min(t.width,t.height)/2,a=Math.max(2,Math.min(6,s/6)),c=o.computeStyle({},{fill:"black"}),l=(t,n,s)=>{if(null!=s){const t=yc("text");return dc(t,{x:r,y:i,"text-anchor":"middle","dominant-baseline":"middle"}),dc(t,o.computeStyle({},{fill:"black",fontSize:12})),t.textContent=String(s),void lc(e,t)}const l=yc("circle");dc(l,{cx:r+t,cy:i+n,r:a}),dc(l,c),lc(e,l)};1===n?l(0,0):2===n?(l(2*-a,0),l(2*a,0)):3===n?(l(0,2*-a),l(2*-a,2*a),l(2*a,2*a)):4===n?(l(2*-a,2*-a),l(2*a,2*-a),l(2*-a,2*a),l(2*a,2*a)):n>4&&l(0,0,n)}(e,t,o,n)}}const xc={__init__:["customRenderer"],customRenderer:["type",class extends g{static $inject=["eventBus","styles","connectionDocking","simulationService"];constructor(e,t,n,o){super(e,1500),this.styles=t,this.connectionDocking=n,this.simulationService=o}canRender(e){return"petri:place"===e.type||"petri:transition"===e.type||"petri:frame"===e.type||"petri:empty_transition"===e.type||"petri:connection"===e.type}drawShape(e,t){const{type:n}=t;if("petri:place"===n){const{width:n,height:o}=t;console.log("circle");const r=function(e,t,n,o,r){"none"===(r=o.computeStyle(r||{},{stroke:"black",strokeWidth:2,fill:"white"})).fill&&delete r.fillOpacity;const i=t/2,s=n/2,a=yc("circle");return dc(a,{cx:i,cy:s,r:Math.round((t+n)/4)}),dc(a,r),lc(e,a),a}(e,n,o,this.styles,void 0);return _c(e,t,this.styles),r}if("petri:transition"===n){const{width:n,height:o}=t,r=10;console.log("rect");const i=this.simulationService.isTransitionEnabled(t),s=this.simulationService.isTransitionFired(t),a=function(e,t,n,o,r,i,s,a){let c="white";s?c="lightgreen":a&&!s&&(c="plum"),"none"===(i=r.computeStyle(i||{},{stroke:"black",strokeWidth:2,fill:c})).fill&&delete i.fillOpacity;const l=yc("rect");return dc(l,{x:0,y:0,width:t,height:n,rx:o,ry:o}),dc(l,i),lc(e,l),s&&Ac(e,t,n,r),l}(e,n,o,r,this.styles,void 0,i,s);return _c(e,t,this.styles),a}if("petri:frame"===n){const{width:n,height:o}=t,r=10;console.log("frame");const i=function(e,t,n,o,r,i){"none"===(i=r.computeStyle(i||{},{stroke:"black",strokeWidth:2,fill:"none",strokeDasharray:"4,4"})).fill&&delete i.fillOpacity;const s=yc("rect");return dc(s,{x:0,y:0,width:t,height:n,rx:o,ry:o}),dc(s,i),lc(e,s),s}(e,n,o,r,this.styles,void 0);return _c(e,t,this.styles),i}if("petri:empty_transition"===n){const{width:n,height:o}=t,r=0;console.log("empty_transition");const i=this.simulationService.isTransitionEnabled(t),s=this.simulationService.isTransitionFired(t),a=function(e,t,n,o,r,i,s,a){let c="black";s?c="lightgreen":a&&!s&&(c="plum"),i=r.computeStyle(i||{},{stroke:"black",strokeWidth:2,fill:c,fillOpacity:1});const l=yc("rect");return dc(l,{x:0,y:0,width:t,height:n,rx:o,ry:o}),dc(l,i),lc(e,l),s&&Ac(e,t,n,r),l}(e,n,o,r,this.styles,void 0,i,s);return a}}drawConnection(e,t){const n=this.styles.computeStyle({},{stroke:"black",strokeWidth:2,markerEnd:mc(e,"my-arrow","black")});this.connectionDocking&&(t.source||t.target)&&(t.waypoints=this.connectionDocking.getCroppedWaypoints(t));const o=ye(t.waypoints,n,5);return lc(e,o),console.log(`${t.type}`),o}getShapePath(e){const{type:t}=e;return"petri:place"===t?function(e){let t=e.x+e.width/2,n=e.y+e.height/2,o=e.width/2;return pe([["M",t,n],["m",0,-o],["a",o,o,0,1,1,0,2*o],["a",o,o,0,1,1,0,-2*o],["z"]])}(e):function(e){let t=e.x,n=e.y,o=e.width;return pe([["M",t,n],["l",o,0],["l",0,e.height],["l",-o,0],["z"]])}(e)}}]};function Ec(e){return N({original:e.point.original||e.point},e.actual)}function bc(e,t){this._elementRegistry=e,this._graphicsFactory=t}bc.$inject=["elementRegistry","graphicsFactory"],bc.prototype.getCroppedWaypoints=function(e,t,n){t=t||e.source,n=n||e.target;var o=this.getDockingPoint(e,t,!0),r=this.getDockingPoint(e,n),i=e.waypoints.slice(o.idx+1,r.idx);return i.unshift(Ec(o)),i.push(Ec(r)),i},bc.prototype.getDockingPoint=function(e,t,n){var o,r,i=e.waypoints;return{point:r=i[o=n?0:i.length-1],actual:this._getIntersection(t,e,n)||r,idx:o}},bc.prototype._getIntersection=function(e,t,n){return Ut(this._getShapePath(e),this._getConnectionPath(t),n)},bc.prototype._getConnectionPath=function(e){return this._graphicsFactory.getConnectionPath(e)},bc.prototype._getShapePath=function(e){return this._graphicsFactory.getShapePath(e)},bc.prototype._getGfx=function(e){return this._elementRegistry.getGraphics(e)};const wc={__init__:["labelEditingProvider"],labelEditingProvider:["type",class{static $inject=["eventBus","directEditing","canvas"];constructor(e,t,n){this.eventBus=e,this.directEditing=t,this.canvas=n,t.registerProvider(this),e.on("element.dblclick",1e3,e=>{const n=e&&e.element;n&&t.activate(n)})}activate(e){if("petri:place"!==e.type&&"petri:transition"!==e.type)return null;const t=e.businessObject?.name||"",n=this.canvas.viewbox(),o=n.scale||1;return{bounds:{x:e.x*o-n.x*o,y:e.y*o-n.y*o,width:e.width*o,height:e.height*o},text:t}}update(e,t,n,o){e.businessObject||(e.businessObject={}),e.businessObject.name=t,this.eventBus.fire("element.changed",{element:e})}}]},Cc={__init__:["keyboardShortcuts"],keyboardShortcuts:["type",class{static $inject=["eventBus","modeling","selection","elementFactory","canvas"];constructor(e,t,n,o,r){this.eventBus=e,this.modeling=t,this.selection=n,this.elementFactory=o,this.canvas=r,this._clipboard=[],this._init()}_init(){document.addEventListener("keydown",this._handleKeyDown.bind(this))}_handleKeyDown(e){const t=this.canvas.getContainer();(t.contains(document.activeElement)||document.activeElement===t||document.activeElement===document.body)&&("Delete"!==e.key&&"Backspace"!==e.key||(this._handleDelete(),e.preventDefault()),(e.ctrlKey||e.metaKey)&&"c"===e.key&&(this._handleCopy(),e.preventDefault()),(e.ctrlKey||e.metaKey)&&"v"===e.key&&(this._handlePaste(),e.preventDefault()))}_handleDelete(){const e=this.selection.get();e.length>0&&this.modeling.removeElements(e)}_handleCopy(){const e=this.selection.get();e.length>0&&(this._clipboard=e.filter(e=>e&&e.type&&isFinite(e.x)&&isFinite(e.y)&&isFinite(e.width)&&isFinite(e.height)).map(e=>({type:e.type,x:e.x,y:e.y,width:e.width,height:e.height,businessObject:e.businessObject?{...e.businessObject}:void 0})),console.log("Copied",this._clipboard.length,"elements"))}_handlePaste(){if(0===this._clipboard.length)return;const e=this.canvas.getRootElement(),t=this._getPastePosition(),n=this._getElementsBounds(this._clipboard),o=[];this._clipboard.forEach((r,i)=>{const s=r.x-n.x,a=r.y-n.y,c=t.x+s,l=t.y+a;if(!(isFinite(c)&&isFinite(l)&&isFinite(r.width)&&isFinite(r.height)))return void console.warn("Skipping element with invalid coordinates:",r);const u=this.elementFactory.createShape({type:r.type,x:c,y:l,width:r.width,height:r.height,businessObject:r.businessObject}),p=this.modeling.createShape(u,{x:c,y:l},e);o.push(p)}),this.selection.select(o),console.log("Pasted",o.length,"elements")}_getPastePosition(){const e=this.selection.get();if(e.length>0){const t=e[0];return{x:t.x+100,y:t.y+50}}const t=this.canvas.viewbox();return{x:t.x+t.width/2,y:t.y+t.height/2}}_getElementsBounds(e){if(0===e.length)return{x:0,y:0,width:0,height:0};let t=1/0,n=1/0,o=-1/0,r=-1/0;return e.forEach(e=>{t=Math.min(t,e.x),n=Math.min(n,e.y),o=Math.max(o,e.x+e.width),r=Math.max(r,e.y+e.height)}),{x:t,y:n,width:o-t,height:r-n}}}]},jc={__init__:["menuProvider"],menuProvider:["type",class{static $inject=["eventBus","popupMenu","simulationService"];constructor(e,t,n){this.eventBus=e,this.popupMenu=t,this.simulationService=n,t.registerProvider("menu",this)}getPopupMenuEntries(e){const t={};return"petri:place"===e.type&&(t.tokens={label:"Set Tokens",action:()=>{this.getTokens(e)}}),t.properties={label:"Properties",action:()=>{this.showProperties(e)}},t}getTokens(e){if(!e)return;if("petri:place"!==e.type)return;e.businessObject||(e.businessObject={});const t=e.businessObject.tokens||0,n=window.prompt("Enter the number of tokens",t);if(null!==n){const t=parseInt(n,10);!isNaN(t)&&t>=0?(e.businessObject.tokens=t,this.eventBus.fire("element.changed",{element:e}),this.simulationService.isActive&&this.simulationService.updateEnabledTransitions()):alert("Please enter a valid number of tokens (0 or greater)")}}showProperties(e){if(!e)return;let t="Element Properties\n\n";t+=`Type: ${e.type}\n`,t+=`ID: ${e.id}\n`,e.width&&e.height&&(t+=`Size: ${e.width} x ${e.height}\n`),void 0!==e.x&&void 0!==e.y&&(t+=`Position: (${e.x}, ${e.y})\n`),e.businessObject&&(e.businessObject.name&&(t+=`Name: ${e.businessObject.name}\n`),void 0!==e.businessObject.tokens&&(t+=`Tokens: ${e.businessObject.tokens}\n`)),alert(t)}}]},kc={__init__:["simulationService"],simulationService:["type",class{static $inject=["eventBus","elementRegistry","canvas"];constructor(e,t,n){this.eventBus=e,this.elementRegistry=t,this.canvas=n,this.isActive=!1,this.enabledTransitions=new Set,this.firedTransitions=new Set,this.eventBus.on(["elements.changed","connection.added","connection.removed","shape.added","shape.removed"],()=>{this.isActive&&this.updateEnabledTransitions()}),this.eventBus.on("element.click",e=>{const t=e.element;"petri:transition"!==t.type&&"petri:empty_transition"!==t.type||this.isTransitionEnabled(t)&&this.fireTransition(t)})}toggleSimulation(){this.isActive=!this.isActive;const e=this.elementRegistry.getAll();return console.log(e),this.isActive?(this.firedTransitions.clear(),this.updateEnabledTransitions()):(this.enabledTransitions.clear(),this.firedTransitions.clear(),this.refreshAllTransitions()),this.isActive}isTransitionEnabled(e){return this.enabledTransitions.has(e.id)}isTransitionFired(e){return this.firedTransitions.has(e.id)}updateEnabledTransitions(){this.enabledTransitions.clear(),this.elementRegistry.getAll().filter(e=>"petri:transition"===e.type||"petri:empty_transition"===e.type).forEach(e=>{this.canTransitionFire(e)&&this.enabledTransitions.add(e.id)}),this.refreshAllTransitions()}canTransitionFire(e){const t=e.incoming||[];return 0===t.length||t.every(e=>{const t=e.source;return(t.businessObject?.tokens||0)>0})}refreshAllTransitions(){this.elementRegistry.getAll().filter(e=>"petri:transition"===e.type||"petri:empty_transition"===e.type).forEach(e=>{this.eventBus.fire("element.changed",{element:e})})}fireTransition(e){if(!this.isActive||!this.isTransitionEnabled(e))return;const t=e.incoming||[],n=e.outgoing||[],o=[];t.forEach(e=>{const t=e.source;t.businessObject||(t.businessObject={tokens:0});const n=t.businessObject.tokens||0;t.businessObject.tokens=Math.max(0,n-1),o.push(t)}),n.forEach(e=>{const t=e.target;t.businessObject||(t.businessObject={tokens:0});const n=t.businessObject.tokens||0;t.businessObject.tokens=n+1,o.push(t)}),this.firedTransitions.add(e.id),o.forEach(e=>{this.eventBus.fire("element.changed",{element:e})}),this.updateEnabledTransitions()}}]},Bc={__init__:["svgExporter","pnmlExporter","pnmlImporter"],svgExporter:["type",class{static $inject=["canvas","elementRegistry","simulationService"];constructor(e,t,n){this.canvas=e,this.elementRegistry=t,this.simulationService=n}exportSvg(e="petri-net.svg",t={}){return new Promise((t,n)=>{try{const n=this.canvas.getContainer(),o=n.querySelector("svg");if(!o)throw new Error("SVG element not found");const r=n.querySelector(".viewport");if(!r)throw new Error("Viewport layer not found");const i=o.querySelector("defs"),s=this._calculateBounds(),a=this._getInnerSVG(r),c=i?"<defs>"+this._getInnerSVG(i)+"</defs>":"",l='<?xml version="1.0" encoding="utf-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+s.width+'" height="'+s.height+'" viewBox="'+s.minX+" "+s.minY+" "+s.width+" "+s.height+'" version="1.1">'+c+a+"</svg>";this._downloadSvgString(l,e),t({svg:l})}catch(e){n(e)}})}_calculateBounds(){const e=this.elementRegistry.getAll();let t=1/0,n=1/0,o=-1/0,r=-1/0;return e.forEach(e=>{e.width&&e.height&&(t=Math.min(t,e.x),n=Math.min(n,e.y),o=Math.max(o,e.x+e.width),r=Math.max(r,e.y+e.height)),e.waypoints&&e.waypoints.forEach(e=>{t=Math.min(t,e.x),n=Math.min(n,e.y),o=Math.max(o,e.x),r=Math.max(r,e.y)})}),t===1/0&&(t=0,n=0,o=800,r=600),t-=40,n-=40,o+=40,r+=40,{minX:t,minY:n,width:o-t,height:r-n}}_getInnerSVG(e){const t=new XMLSerializer;let n="";for(let o=0;o<e.childNodes.length;o++)n+=t.serializeToString(e.childNodes[o]);return n}_downloadSvgString(e,t){const n=new Blob([e],{type:"image/svg+xml"}),o=URL.createObjectURL(n),r=document.createElement("a");r.href=o,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(o)}}],pnmlExporter:["type",class{static $inject=["canvas","elementRegistry"];constructor(e,t){this.canvas=e,this.elementRegistry=t}exportPnml(e="petri-net.pnml"){const t=this.canvas.getRootElement(),n=this.elementRegistry.filter(e=>e.parent===t&&"label"!==e.type);console.log("Elements to export:",n.length,n.map(e=>({id:e.id,type:e.type})));let o='<?xml version="1.0" encoding="UTF-8"?>\n<pnml>\n    <net id="ptnet1" type="http://www.pnml.org/version-2009/grammar/ptnet">\n        <page id="top-level">\n';n.forEach(e=>{if("petri:place"===e.type){const t=e.label?.x?e.label.x-e.x:0,n=e.label?.y?e.label.y-e.y:0,r=`            <place id="${e.id}">\n                <graphics>\n                    <position x="${e.x}" y="${e.y}" />\n                    <size width="${e.width}" height="${e.height}" />\n                </graphics>\n                <name>\n                    <text>${e.businessObject?.name||""}</text>\n                    <graphics>\n                        <offset x="${t}" y="${n}" />\n                    </graphics>\n                </name>\n                <initialMarking>\n                    <text>${e.businessObject?.tokens||0}</text>\n                </initialMarking>\n            </place>\n`;o+=r}}),n.forEach(e=>{if("petri:transition"===e.type||"petri:empty_transition"===e.type){const t=e.label?.x?e.label.x-e.x:0,n=e.label?.y?e.label.y-e.y:0,r=`            <transition id="${e.id}">\n                <graphics>\n                    <position x="${e.x}" y="${e.y}" />\n                    <size width="${e.width}" height="${e.height}" />\n                </graphics>\n                <name>\n                    <text>${e.businessObject?.name||""}</text>\n                    <graphics>\n                        <offset x="${t}" y="${n}" />\n                    </graphics>\n                </name>\n            </transition>\n`;o+=r}}),n.forEach(e=>{if("petri:connection"===e.type){let t="";e.waypoints&&e.waypoints.length>0&&e.waypoints.forEach(e=>{t+=`                    <position x="${e.x}" y="${e.y}" />\n`});const n=`            <arc id="${e.id}" source="${e.source.id}" target="${e.target.id}">\n                <graphics>\n${t}                </graphics>\n            </arc>\n`;o+=n}}),o+="        </page>\n    </net>\n</pnml>",console.log(o);const r=new Blob([o],{type:"application/xml"}),i=URL.createObjectURL(r),s=document.createElement("a");s.href=i,s.download=e,s.click(),URL.revokeObjectURL(i)}}],pnmlImporter:["type",class{static $inject=["canvas","elementFactory","elementRegistry","modeling"];constructor(e,t,n,o){this.canvas=e,this.elementFactory=t,this.elementRegistry=n,this.modeling=o}importPnml(e){const t=(new DOMParser).parseFromString(e,"text/xml"),n=t.querySelector("parsererror");if(n)return void console.error("XML parsing error:",n.textContent);this.canvas.getRootElement();const o=this.elementFactory.createRoot();this.canvas.setRootElement(o);const r=new Map;t.querySelectorAll("place").forEach(e=>{const t=e.getAttribute("id"),n=e.querySelector("graphics > position"),i=e.querySelector("graphics > size"),s=e.querySelector("name > text"),a=e.querySelector("initialMarking > text"),c=n?parseFloat(n.getAttribute("x")):100,l=n?parseFloat(n.getAttribute("y")):100,u=i?parseFloat(i.getAttribute("width")):100,p=i?parseFloat(i.getAttribute("height")):80,d=s?s.textContent:"",h=a?parseInt(a.textContent):0,f=this.elementFactory.createShape({type:"petri:place",x:c,y:l,width:u,height:p,businessObject:{name:d,tokens:h}});this.canvas.addShape(f,o),r.set(t,f)}),t.querySelectorAll("transition").forEach(e=>{const t=e.getAttribute("id"),n=e.querySelector("graphics > position"),i=e.querySelector("graphics > size"),s=e.querySelector("name > text"),a=n?parseFloat(n.getAttribute("x")):100,c=n?parseFloat(n.getAttribute("y")):100,l=i?parseFloat(i.getAttribute("width")):100,u=i?parseFloat(i.getAttribute("height")):80,p=s?s.textContent:"",d=this.elementFactory.createShape({type:"petri:transition",x:a,y:c,width:l,height:u,businessObject:{name:p}});this.canvas.addShape(d,o),r.set(t,d)}),t.querySelectorAll("arc").forEach(e=>{const t=e.getAttribute("source"),n=e.getAttribute("target"),i=r.get(t),s=r.get(n);if(i&&s){const t=e.querySelectorAll("graphics > position");let n=[];t.length>0?t.forEach(e=>{n.push({x:parseFloat(e.getAttribute("x")),y:parseFloat(e.getAttribute("y"))})}):n=[{x:i.x+i.width/2,y:i.y+i.height/2},{x:s.x+s.width/2,y:s.y+s.height/2}];const r=this.elementFactory.createConnection({type:"petri:connection",waypoints:n,source:i,target:s});this.canvas.addConnection(r,o)}else console.warn(`Could not create arc: source=${t}, target=${n} not found`)}),console.log("PNML imported successfully")}loadFromFile(){const e=document.createElement("input");e.type="file",e.accept=".pnml,.xml",e.onchange=e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{const t=e.target.result;this.importPnml(t)},e.readAsText(t)}},e.click()}}]},Sc={__init__:[["defaultRenderer",function(e){e.CONNECTION_STYLE={fill:"none",strokeWidth:5,stroke:"#000"},e.SHAPE_STYLE={fill:"white",stroke:"#000",strokeWidth:2},e.FRAME_STYLE={fill:"none",stroke:"#000",strokeDasharray:4,strokeWidth:2}}]]},Dc={__init__:["connectionDocking"],connectionDocking:["type",bc]};function Mc(e){const{container:t,additionalModules:n=[]}=e;return new Cn({canvas:{container:t},modules:[po,jo,Wo,Xo,Zr,Jr,pi,ni,_i,Ta,$i,Un,qn,Wi,Tn,ns,qa,cc,Sc,xc,Dc,wc,Cc,jc,kc,Bc,...n]})}return o.default})());
//# sourceMappingURL=editor.js.map